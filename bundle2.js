/*! For license information please see bundle2.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.eTrack=e():t.eTrack=e()}(self,(()=>(()=>{var t={681:function(t,e,n){var r,i;i=function(t){var e=["N","E","A","D"];function n(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function r(t,e){Object.defineProperty(this,"kind",{value:t,enumerable:!0}),e&&e.length&&Object.defineProperty(this,"path",{value:e,enumerable:!0})}function i(t,e,n){i.super_.call(this,"E",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(t,e){o.super_.call(this,"N",t),Object.defineProperty(this,"rhs",{value:e,enumerable:!0})}function s(t,e){s.super_.call(this,"D",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0})}function a(t,e,n){a.super_.call(this,"A",t),Object.defineProperty(this,"index",{value:e,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(t,e,n){var r=t.slice((n||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,r),t}function c(t){var e=typeof t;return"object"!==e?e:t===Math?"math":null===t?"null":Array.isArray(t)?"array":"[object Date]"===Object.prototype.toString.call(t)?"date":"function"==typeof t.toString&&/^\/.*\//.test(t.toString())?"regexp":"object"}function l(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}function h(t){var e=0,n=c(t);if("array"===n)return t.forEach((function(t){e+=h(t)})),e+l("[type: array, hash: "+e+"]");if("object"===n){for(var r in t)if(t.hasOwnProperty(r)){var i="[ type: object, key: "+r+", value hash: "+h(t[r])+"]";e+=l(i)}return e}return e+l("[ type: "+n+" ; value: "+t+"]")}function f(t,e,n,r,u,l,p,d){n=n||[],p=p||[];var y=(u=u||[]).slice(0);if(null!=l){if(r){if("function"==typeof r&&r(y,l))return;if("object"==typeof r){if(r.prefilter&&r.prefilter(y,l))return;if(r.normalize){var v=r.normalize(y,l,t,e);v&&(t=v[0],e=v[1])}}}y.push(l)}"regexp"===c(t)&&"regexp"===c(e)&&(t=t.toString(),e=e.toString());var g,m,_,b,w=typeof t,E=typeof e,T="undefined"!==w||p&&p.length>0&&p[p.length-1].lhs&&Object.getOwnPropertyDescriptor(p[p.length-1].lhs,l),C="undefined"!==E||p&&p.length>0&&p[p.length-1].rhs&&Object.getOwnPropertyDescriptor(p[p.length-1].rhs,l);if(!T&&C)n.push(new o(y,e));else if(!C&&T)n.push(new s(y,t));else if(c(t)!==c(e))n.push(new i(y,t,e));else if("date"===c(t)&&t-e!=0)n.push(new i(y,t,e));else if("object"===w&&null!==t&&null!==e){for(g=p.length-1;g>-1;--g)if(p[g].lhs===t){b=!0;break}if(b)t!==e&&n.push(new i(y,t,e));else{if(p.push({lhs:t,rhs:e}),Array.isArray(t)){for(d&&(t.sort((function(t,e){return h(t)-h(e)})),e.sort((function(t,e){return h(t)-h(e)}))),g=e.length-1,m=t.length-1;g>m;)n.push(new a(y,g,new o(void 0,e[g--])));for(;m>g;)n.push(new a(y,m,new s(void 0,t[m--])));for(;g>=0;--g)f(t[g],e[g],n,r,y,g,p,d)}else{var S=Object.keys(t),I=Object.keys(e);for(g=0;g<S.length;++g)_=S[g],(b=I.indexOf(_))>=0?(f(t[_],e[_],n,r,y,_,p,d),I[b]=null):f(t[_],void 0,n,r,y,_,p,d);for(g=0;g<I.length;++g)(_=I[g])&&f(void 0,e[_],n,r,y,_,p,d)}p.length=p.length-1}}else t!==e&&("number"===w&&isNaN(t)&&isNaN(e)||n.push(new i(y,t,e)))}function p(t,e,n,r,i){var o=[];if(f(t,e,o,r,null,null,null,i),n)for(var s=0;s<o.length;++s)n(o[s]);return o}function d(t,e,n,r){var i=p(t,e,r?function(t){t&&r.push(t)}:void 0,n);return r||(i.length?i:void 0)}function y(t,e,n){if(n.path&&n.path.length){var r,i=t[e],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":y(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":y(t[e],n.index,n.item);break;case"D":t=u(t,e);break;case"E":case"N":t[e]=n.rhs}return t}function v(t,n,r){if(void 0===r&&n&&~e.indexOf(n.kind)&&(r=n),t&&r&&r.kind){for(var i=t,o=-1,s=r.path?r.path.length-1:0;++o<s;)void 0===i[r.path[o]]&&(i[r.path[o]]=void 0!==r.path[o+1]&&"number"==typeof r.path[o+1]?[]:{}),i=i[r.path[o]];switch(r.kind){case"A":r.path&&void 0===i[r.path[o]]&&(i[r.path[o]]=[]),y(r.path?i[r.path[o]]:i,r.index,r.item);break;case"D":delete i[r.path[o]];break;case"E":case"N":i[r.path[o]]=r.rhs}}}function g(t,e,n){if(n.path&&n.path.length){var r,i=t[e],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":g(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":g(t[e],n.index,n.item);break;case"D":case"E":t[e]=n.lhs;break;case"N":t=u(t,e)}return t}return n(i,r),n(o,r),n(s,r),n(a,r),Object.defineProperties(d,{diff:{value:d,enumerable:!0},orderIndependentDiff:{value:function(t,e,n,r){var i=p(t,e,r?function(t){t&&r.push(t)}:void 0,n,!0);return r||(i.length?i:void 0)},enumerable:!0},observableDiff:{value:p,enumerable:!0},orderIndependentObservableDiff:{value:function(t,e,n,r,i,o,s){return f(t,e,n,r,i,o,s,!0)},enumerable:!0},orderIndepHash:{value:h,enumerable:!0},applyDiff:{value:function(t,e,n){t&&e&&p(t,e,(function(r){n&&!n(t,e,r)||v(t,e,r)}))},enumerable:!0},applyChange:{value:v,enumerable:!0},revertChange:{value:function(t,e,n){if(t&&e&&n&&n.kind){var r,i,o=t;for(i=n.path.length-1,r=0;r<i;r++)void 0===o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":g(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}}),d.DeepDiff=d,t&&(t.DeepDiff=d),d}(this),void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)},961:(t,e,n)=>{var r,i=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var o={compressToBase64:function(t){if(null==t)return"";var n=o._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:o._decompress(t.length,32,(function(n){return i(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":o._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:o._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=o.compress(t),n=new Uint8Array(2*e.length),r=0,i=e.length;r<i;r++){var s=e.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256}return n},decompressFromUint8Array:function(e){if(null==e)return o.decompress(e);for(var n=new Array(e.length/2),r=0,i=n.length;r<i;r++)n[r]=256*e[2*r]+e[2*r+1];var s=[];return n.forEach((function(e){s.push(t(e))})),o.decompress(s.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":o._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),o._decompress(t.length,32,(function(e){return i(n,t.charAt(e))})))},compress:function(e){return o._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,i,o,s={},a={},u="",c="",l="",h=2,f=3,p=2,d=[],y=0,v=0;for(o=0;o<t.length;o+=1)if(u=t.charAt(o),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=f++,a[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(s,c))l=c;else{if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)y<<=1,v==e-1?(v=0,d.push(n(y)),y=0):v++;for(i=l.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}else{for(i=1,r=0;r<p;r++)y=y<<1|i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[l]}else for(i=s[l],r=0;r<p;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1;0==--h&&(h=Math.pow(2,p),p++),s[c]=f++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)y<<=1,v==e-1?(v=0,d.push(n(y)),y=0):v++;for(i=l.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}else{for(i=1,r=0;r<p;r++)y=y<<1|i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[l]}else for(i=s[l],r=0;r<p;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1;0==--h&&(h=Math.pow(2,p),p++)}for(i=2,r=0;r<p;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1;for(;;){if(y<<=1,v==e-1){d.push(n(y));break}v++}return d.join("")},decompress:function(t){return null==t?"":""==t?null:o._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var i,o,s,a,u,c,l,h=[],f=4,p=4,d=3,y="",v=[],g={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)h[i]=i;for(s=0,u=Math.pow(2,2),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;switch(s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;l=t(s);break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;l=t(s);break;case 2:return""}for(h[3]=l,o=l,v.push(l);;){if(g.index>e)return"";for(s=0,u=Math.pow(2,d),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;switch(l=s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;h[p++]=t(s),l=p-1,f--;break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;h[p++]=t(s),l=p-1,f--;break;case 2:return v.join("")}if(0==f&&(f=Math.pow(2,d),d++),h[l])y=h[l];else{if(l!==p)return null;y=o+o.charAt(0)}v.push(y),h[p++]=o+y.charAt(0),o=y,0==--f&&(f=Math.pow(2,d),d++)}}};return o}();void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)},418:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,i){for(var o,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var c in o=Object(arguments[u]))n.call(o,c)&&(a[c]=o[c]);if(e){s=e(o);for(var l=0;l<s.length;l++)r.call(o,s[l])&&(a[s[l]]=o[s[l]])}}return a}},155:t=>{var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var a,u=[],c=!1,l=-1;function h(){c&&a&&(c=!1,a.length?u=a.concat(u):l=-1,u.length&&f())}function f(){if(!c){var t=s(h);c=!0;for(var e=u.length;e;){for(a=u,u=[];++l<e;)a&&a[l].run();l=-1,e=u.length}a=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},703:(t,e,n)=>{"use strict";var r=n(414);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},697:(t,e,n)=>{t.exports=n(703)()},414:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},448:(t,e,n)=>{"use strict";var r=n(294),i=n(418),o=n(840);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));function a(t,e,n,r,i,o,s,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(t){this.onError(t)}}var u=!1,c=null,l=!1,h=null,f={onError:function(t){u=!0,c=t}};function p(t,e,n,r,i,o,s,l,h){u=!1,c=null,a.apply(f,arguments)}var d=null,y=null,v=null;function g(t,e,n){var r=t.type||"unknown-event";t.currentTarget=v(n),function(t,e,n,r,i,o,a,f,d){if(p.apply(this,arguments),u){if(!u)throw Error(s(198));var y=c;u=!1,c=null,l||(l=!0,h=y)}}(r,e,void 0,t),t.currentTarget=null}var m=null,_={};function b(){if(m)for(var t in _){var e=_[t],n=m.indexOf(t);if(!(-1<n))throw Error(s(96,t));if(!E[n]){if(!e.extractEvents)throw Error(s(97,t));for(var r in E[n]=e,n=e.eventTypes){var i=void 0,o=n[r],a=e,u=r;if(T.hasOwnProperty(u))throw Error(s(99,u));T[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],a,u);i=!0}else o.registrationName?(w(o.registrationName,a,u),i=!0):i=!1;if(!i)throw Error(s(98,r,t))}}}}function w(t,e,n){if(C[t])throw Error(s(100,t));C[t]=e,S[t]=e.eventTypes[n].dependencies}var E=[],T={},C={},S={};function I(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!_.hasOwnProperty(e)||_[e]!==r){if(_[e])throw Error(s(102,e));_[e]=r,n=!0}}n&&b()}var x=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),N=null,k=null,A=null;function P(t){if(t=y(t)){if("function"!=typeof N)throw Error(s(280));var e=t.stateNode;e&&(e=d(e),N(t.stateNode,t.type,e))}}function O(t){k?A?A.push(t):A=[t]:k=t}function R(){if(k){var t=k,e=A;if(A=k=null,P(t),e)for(t=0;t<e.length;t++)P(e[t])}}function D(t,e){return t(e)}function L(t,e,n,r,i){return t(e,n,r,i)}function F(){}var M=D,j=!1,U=!1;function V(){null===k&&null===A||(F(),R())}function q(t,e,n){if(U)return t(e,n);U=!0;try{return M(t,e,n)}finally{U=!1,V()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W=Object.prototype.hasOwnProperty,z={},H={};function Q(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){G[t]=new Q(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];G[e]=new Q(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){G[t]=new Q(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){G[t]=new Q(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){G[t]=new Q(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){G[t]=new Q(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){G[t]=new Q(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){G[t]=new Q(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){G[t]=new Q(t,5,!1,t.toLowerCase(),null,!1)}));var Y=/[\-:]([a-z])/g;function K(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(Y,K);G[e]=new Q(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(Y,K);G[e]=new Q(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(Y,K);G[e]=new Q(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){G[t]=new Q(t,1,!1,t.toLowerCase(),null,!1)})),G.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){G[t]=new Q(t,1,!1,t.toLowerCase(),null,!0)}));var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(t,e,n,r){var i=G.hasOwnProperty(e)?G[e]:null;(null!==i?0===i.type:!r&&2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))||(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!W.call(H,t)||!W.call(z,t)&&(B.test(t)?H[t]=!0:(z[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}$.hasOwnProperty("ReactCurrentDispatcher")||($.ReactCurrentDispatcher={current:null}),$.hasOwnProperty("ReactCurrentBatchConfig")||($.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"==typeof Symbol&&Symbol.for,tt=Z?Symbol.for("react.element"):60103,et=Z?Symbol.for("react.portal"):60106,nt=Z?Symbol.for("react.fragment"):60107,rt=Z?Symbol.for("react.strict_mode"):60108,it=Z?Symbol.for("react.profiler"):60114,ot=Z?Symbol.for("react.provider"):60109,st=Z?Symbol.for("react.context"):60110,at=Z?Symbol.for("react.concurrent_mode"):60111,ut=Z?Symbol.for("react.forward_ref"):60112,ct=Z?Symbol.for("react.suspense"):60113,lt=Z?Symbol.for("react.suspense_list"):60120,ht=Z?Symbol.for("react.memo"):60115,ft=Z?Symbol.for("react.lazy"):60116,pt=Z?Symbol.for("react.block"):60121,dt="function"==typeof Symbol&&Symbol.iterator;function yt(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=dt&&t[dt]||t["@@iterator"])?t:null}function vt(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case ct:return"Suspense";case lt:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case st:return"Context.Consumer";case ot:return"Context.Provider";case ut:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ht:return vt(t.type);case pt:return vt(t.render);case ft:if(t=1===t._status?t._result:null)return vt(t)}return null}function gt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=vt(t.type);n=null,r&&(n=vt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function mt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function _t(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function bt(t){t._valueTracker||(t._valueTracker=function(t){var e=_t(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function wt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_t(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Et(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=mt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Ct(t,e){null!=(e=e.checked)&&X(t,"checked",e,!1)}function St(t,e){Ct(t,e);var n=mt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?xt(t,e.type,n):e.hasOwnProperty("defaultValue")&&xt(t,e.type,mt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function It(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function xt(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Nt(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function kt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function At(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:mt(n)}}function Ot(t,e){var n=mt(e.value),r=mt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Rt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function Dt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Dt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Ft,Mt,jt=(Mt=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((Ft=Ft||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ft.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return Mt(t,e)}))}:Mt);function Ut(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function Vt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qt={animationend:Vt("Animation","AnimationEnd"),animationiteration:Vt("Animation","AnimationIteration"),animationstart:Vt("Animation","AnimationStart"),transitionend:Vt("Transition","TransitionEnd")},Bt={},Wt={};function zt(t){if(Bt[t])return Bt[t];if(!qt[t])return t;var e,n=qt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Wt)return Bt[t]=n[e];return t}x&&(Wt=document.createElement("div").style,"AnimationEvent"in window||(delete qt.animationend.animation,delete qt.animationiteration.animation,delete qt.animationstart.animation),"TransitionEvent"in window||delete qt.transitionend.transition);var Ht=zt("animationend"),Qt=zt("animationiteration"),Gt=zt("animationstart"),Yt=zt("transitionend"),Kt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$t=new("function"==typeof WeakMap?WeakMap:Map);function Xt(t){var e=$t.get(t);return void 0===e&&(e=new Map,$t.set(t,e)),e}function Jt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Zt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function te(t){if(Jt(t)!==t)throw Error(s(188))}function ee(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=Jt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return te(i),t;if(o===r)return te(i),e;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function ne(t,e){if(null==e)throw Error(s(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function re(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var ie=null;function oe(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)g(t,e[r],n[r]);else e&&g(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function se(t){if(null!==t&&(ie=ne(ie,t)),t=ie,ie=null,t){if(re(t,oe),ie)throw Error(s(95));if(l)throw t=h,l=!1,h=null,t}}function ae(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ue(t){if(!x)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}var ce=[];function le(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>ce.length&&ce.push(t)}function he(t,e,n,r){if(ce.length){var i=ce.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function fe(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=Pn(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ae(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,s=t.eventSystemFlags;0===n&&(s|=64);for(var a=null,u=0;u<E.length;u++){var c=E[u];c&&(c=c.extractEvents(r,e,o,i,s))&&(a=ne(a,c))}se(a)}}function pe(t,e,n){if(!n.has(t)){switch(t){case"scroll":Ge(e,"scroll",!0);break;case"focus":case"blur":Ge(e,"focus",!0),Ge(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ue(t)&&Ge(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Kt.indexOf(t)&&Qe(t,e)}n.set(t,null)}}var de,ye,ve,ge=!1,me=[],_e=null,be=null,we=null,Ee=new Map,Te=new Map,Ce=[],Se="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ie="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function xe(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Ne(t,e){switch(t){case"focus":case"blur":_e=null;break;case"dragenter":case"dragleave":be=null;break;case"mouseover":case"mouseout":we=null;break;case"pointerover":case"pointerout":Ee.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Te.delete(e.pointerId)}}function ke(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=xe(e,n,r,i,o),null!==e&&null!==(e=On(e))&&ye(e),t):(t.eventSystemFlags|=r,t)}function Ae(t){var e=Pn(t.target);if(null!==e){var n=Jt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Zt(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){ve(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Pe(t){if(null!==t.blockedOn)return!1;var e=Xe(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=On(e);return null!==n&&ye(n),t.blockedOn=e,!1}return!0}function Oe(t,e,n){Pe(t)&&n.delete(e)}function Re(){for(ge=!1;0<me.length;){var t=me[0];if(null!==t.blockedOn){null!==(t=On(t.blockedOn))&&de(t);break}var e=Xe(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:me.shift()}null!==_e&&Pe(_e)&&(_e=null),null!==be&&Pe(be)&&(be=null),null!==we&&Pe(we)&&(we=null),Ee.forEach(Oe),Te.forEach(Oe)}function De(t,e){t.blockedOn===e&&(t.blockedOn=null,ge||(ge=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Re)))}function Le(t){function e(e){return De(e,t)}if(0<me.length){De(me[0],t);for(var n=1;n<me.length;n++){var r=me[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==_e&&De(_e,t),null!==be&&De(be,t),null!==we&&De(we,t),Ee.forEach(e),Te.forEach(e),n=0;n<Ce.length;n++)(r=Ce[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Ce.length&&null===(n=Ce[0]).blockedOn;)Ae(n),null===n.blockedOn&&Ce.shift()}var Fe={},Me=new Map,je=new Map,Ue=["abort","abort",Ht,"animationEnd",Qt,"animationIteration",Gt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Yt,"transitionEnd","waiting","waiting"];function Ve(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},je.set(r,e),Me.set(r,o),Fe[i]=o}}Ve("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ve("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ve(Ue,2);for(var qe="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Be=0;Be<qe.length;Be++)je.set(qe[Be],0);var We=o.unstable_UserBlockingPriority,ze=o.unstable_runWithPriority,He=!0;function Qe(t,e){Ge(e,t,!1)}function Ge(t,e,n){var r=je.get(e);switch(void 0===r?2:r){case 0:r=Ye.bind(null,e,1,t);break;case 1:r=Ke.bind(null,e,1,t);break;default:r=$e.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Ye(t,e,n,r){j||F();var i=$e,o=j;j=!0;try{L(i,t,e,n,r)}finally{(j=o)||V()}}function Ke(t,e,n,r){ze(We,$e.bind(null,t,e,n,r))}function $e(t,e,n,r){if(He)if(0<me.length&&-1<Se.indexOf(t))t=xe(null,t,e,n,r),me.push(t);else{var i=Xe(t,e,n,r);if(null===i)Ne(t,r);else if(-1<Se.indexOf(t))t=xe(i,t,e,n,r),me.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return _e=ke(_e,t,e,n,r,i),!0;case"dragenter":return be=ke(be,t,e,n,r,i),!0;case"mouseover":return we=ke(we,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ee.set(o,ke(Ee.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Te.set(o,ke(Te.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){Ne(t,r),t=he(t,r,null,e);try{q(fe,t)}finally{le(t)}}}}function Xe(t,e,n,r){if(null!==(n=Pn(n=ae(r)))){var i=Jt(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=Zt(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=he(t,r,n,e);try{q(fe,t)}finally{le(t)}return null}var Je={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ze=["Webkit","ms","Moz","O"];function tn(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||Je.hasOwnProperty(t)&&Je[t]?(""+e).trim():e+"px"}function en(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=tn(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Je).forEach((function(t){Ze.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Je[e]=Je[t]}))}));var nn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rn(t,e){if(e){if(nn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(s(62,""))}}function on(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn="http://www.w3.org/1999/xhtml";function an(t,e){var n=Xt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=S[e];for(var r=0;r<e.length;r++)pe(e[r],t,n)}function un(){}function cn(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function ln(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hn(t,e){var n,r=ln(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ln(r)}}function fn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?fn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pn(){for(var t=window,e=cn();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=cn((t=e.contentWindow).document)}return e}function dn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var yn="$",vn="/$",gn="$?",mn="$!",_n=null,bn=null;function wn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function En(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Tn="function"==typeof setTimeout?setTimeout:void 0,Cn="function"==typeof clearTimeout?clearTimeout:void 0;function Sn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function In(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if(n===yn||n===mn||n===gn){if(0===e)return t;e--}else n===vn&&e++}t=t.previousSibling}return null}var xn=Math.random().toString(36).slice(2),Nn="__reactInternalInstance$"+xn,kn="__reactEventHandlers$"+xn,An="__reactContainere$"+xn;function Pn(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[An]||n[Nn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=In(t);null!==t;){if(n=t[Nn])return n;t=In(t)}return e}n=(t=n).parentNode}return null}function On(t){return!(t=t[Nn]||t[An])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Rn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function Dn(t){return t[kn]||null}function Ln(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Fn(t,e){var n=t.stateNode;if(!n)return null;var r=d(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(s(231,e,typeof n));return n}function Mn(t,e,n){(e=Fn(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=ne(n._dispatchListeners,e),n._dispatchInstances=ne(n._dispatchInstances,t))}function jn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Ln(e);for(e=n.length;0<e--;)Mn(n[e],"captured",t);for(e=0;e<n.length;e++)Mn(n[e],"bubbled",t)}}function Un(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=Fn(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=ne(n._dispatchListeners,e),n._dispatchInstances=ne(n._dispatchInstances,t))}function Vn(t){t&&t.dispatchConfig.registrationName&&Un(t._targetInst,null,t)}function qn(t){re(t,jn)}var Bn=null,Wn=null,zn=null;function Hn(){if(zn)return zn;var t,e,n=Wn,r=n.length,i="value"in Bn?Bn.value:Bn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return zn=i.slice(t,1<e?1-e:void 0)}function Qn(){return!0}function Gn(){return!1}function Yn(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qn:Gn,this.isPropagationStopped=Gn,this}function Kn(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function $n(t){if(!(t instanceof this))throw Error(s(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Xn(t){t.eventPool=[],t.getPooled=Kn,t.release=$n}i(Yn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){this.isPersistent=Qn},isPersistent:Gn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Gn,this._dispatchInstances=this._dispatchListeners=null}}),Yn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Yn.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,Xn(n),n},Xn(Yn);var Jn=Yn.extend({data:null}),Zn=Yn.extend({data:null}),tr=[9,13,27,32],er=x&&"CompositionEvent"in window,nr=null;x&&"documentMode"in document&&(nr=document.documentMode);var rr=x&&"TextEvent"in window&&!nr,ir=x&&(!er||nr&&8<nr&&11>=nr),or=String.fromCharCode(32),sr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ar=!1;function ur(t,e){switch(t){case"keyup":return-1!==tr.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function cr(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var lr=!1,hr={eventTypes:sr,extractEvents:function(t,e,n,r){var i;if(er)t:{switch(t){case"compositionstart":var o=sr.compositionStart;break t;case"compositionend":o=sr.compositionEnd;break t;case"compositionupdate":o=sr.compositionUpdate;break t}o=void 0}else lr?ur(t,n)&&(o=sr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=sr.compositionStart);return o?(ir&&"ko"!==n.locale&&(lr||o!==sr.compositionStart?o===sr.compositionEnd&&lr&&(i=Hn()):(Wn="value"in(Bn=r)?Bn.value:Bn.textContent,lr=!0)),o=Jn.getPooled(o,e,n,r),(i||null!==(i=cr(n)))&&(o.data=i),qn(o),i=o):i=null,(t=rr?function(t,e){switch(t){case"compositionend":return cr(e);case"keypress":return 32!==e.which?null:(ar=!0,or);case"textInput":return(t=e.data)===or&&ar?null:t;default:return null}}(t,n):function(t,e){if(lr)return"compositionend"===t||!er&&ur(t,e)?(t=Hn(),zn=Wn=Bn=null,lr=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ir&&"ko"!==e.locale?null:e.data}}(t,n))?((e=Zn.getPooled(sr.beforeInput,e,n,r)).data=t,qn(e)):e=null,null===i?e:null===e?i:[i,e]}},fr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!fr[t.type]:"textarea"===e}var dr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function yr(t,e,n){return(t=Yn.getPooled(dr.change,t,e,n)).type="change",O(n),qn(t),t}var vr=null,gr=null;function mr(t){se(t)}function _r(t){if(wt(Rn(t)))return t}function br(t,e){if("change"===t)return e}var wr=!1;function Er(){vr&&(vr.detachEvent("onpropertychange",Tr),gr=vr=null)}function Tr(t){if("value"===t.propertyName&&_r(gr))if(t=yr(gr,t,ae(t)),j)se(t);else{j=!0;try{D(mr,t)}finally{j=!1,V()}}}function Cr(t,e,n){"focus"===t?(Er(),gr=n,(vr=e).attachEvent("onpropertychange",Tr)):"blur"===t&&Er()}function Sr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return _r(gr)}function Ir(t,e){if("click"===t)return _r(e)}function xr(t,e){if("input"===t||"change"===t)return _r(e)}x&&(wr=ue("input")&&(!document.documentMode||9<document.documentMode));var Nr={eventTypes:dr,_isInputEventSupported:wr,extractEvents:function(t,e,n,r){var i=e?Rn(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var s=br;else if(pr(i))if(wr)s=xr;else{s=Sr;var a=Cr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=Ir);if(s&&(s=s(t,e)))return yr(s,n,r);a&&a(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&xt(i,"number",i.value)}},kr=Yn.extend({view:null,detail:null}),Ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ar[t])&&!!e[t]}function Or(){return Pr}var Rr=0,Dr=0,Lr=!1,Fr=!1,Mr=kr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Or,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Rr;return Rr=t.screenX,Lr?"mousemove"===t.type?t.screenX-e:0:(Lr=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Dr;return Dr=t.screenY,Fr?"mousemove"===t.type?t.screenY-e:0:(Fr=!0,0)}}),jr=Mr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ur={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Vr={eventTypes:Ur,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,s="mouseout"===t||"pointerout"===t;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!s&&!o)return null;if(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,s?(s=e,null!==(e=(e=n.relatedTarget||n.toElement)?Pn(e):null)&&(e!==Jt(e)||5!==e.tag&&6!==e.tag)&&(e=null)):s=null,s===e)return null;if("mouseout"===t||"mouseover"===t)var a=Mr,u=Ur.mouseLeave,c=Ur.mouseEnter,l="mouse";else"pointerout"!==t&&"pointerover"!==t||(a=jr,u=Ur.pointerLeave,c=Ur.pointerEnter,l="pointer");if(t=null==s?o:Rn(s),o=null==e?o:Rn(e),(u=a.getPooled(u,s,n,r)).type=l+"leave",u.target=t,u.relatedTarget=o,(n=a.getPooled(c,e,n,r)).type=l+"enter",n.target=o,n.relatedTarget=t,l=e,(r=s)&&l)t:{for(c=l,s=0,t=a=r;t;t=Ln(t))s++;for(t=0,e=c;e;e=Ln(e))t++;for(;0<s-t;)a=Ln(a),s--;for(;0<t-s;)c=Ln(c),t--;for(;s--;){if(a===c||a===c.alternate)break t;a=Ln(a),c=Ln(c)}a=null}else a=null;for(c=a,a=[];r&&r!==c&&(null===(s=r.alternate)||s!==c);)a.push(r),r=Ln(r);for(r=[];l&&l!==c&&(null===(s=l.alternate)||s!==c);)r.push(l),l=Ln(l);for(l=0;l<a.length;l++)Un(a[l],"bubbled",u);for(l=r.length;0<l--;)Un(r[l],"captured",n);return 0==(64&i)?[u]:[u,n]}},qr="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},Br=Object.prototype.hasOwnProperty;function Wr(t,e){if(qr(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Br.call(e,n[r])||!qr(t[n[r]],e[n[r]]))return!1;return!0}var zr=x&&"documentMode"in document&&11>=document.documentMode,Hr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Qr=null,Gr=null,Yr=null,Kr=!1;function $r(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Kr||null==Qr||Qr!==cn(n)?null:(n="selectionStart"in(n=Qr)&&dn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Yr&&Wr(Yr,n)?null:(Yr=n,(t=Yn.getPooled(Hr.select,Gr,t,e)).type="select",t.target=Qr,qn(t),t))}var Xr={eventTypes:Hr,extractEvents:function(t,e,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=Xt(i),o=S.onSelect;for(var s=0;s<o.length;s++)if(!i.has(o[s])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?Rn(e):window,t){case"focus":(pr(i)||"true"===i.contentEditable)&&(Qr=i,Gr=e,Yr=null);break;case"blur":Yr=Gr=Qr=null;break;case"mousedown":Kr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Kr=!1,$r(n,r);case"selectionchange":if(zr)break;case"keydown":case"keyup":return $r(n,r)}return null}},Jr=Yn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Zr=Yn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ti=kr.extend({relatedTarget:null});function ei(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ii=kr.extend({key:function(t){if(t.key){var e=ni[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=ei(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?ri[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Or,charCode:function(t){return"keypress"===t.type?ei(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?ei(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),oi=Mr.extend({dataTransfer:null}),si=kr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Or}),ai=Yn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ui=Mr.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),ci={eventTypes:Fe,extractEvents:function(t,e,n,r){var i=Me.get(t);if(!i)return null;switch(t){case"keypress":if(0===ei(n))return null;case"keydown":case"keyup":t=ii;break;case"blur":case"focus":t=ti;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=oi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=si;break;case Ht:case Qt:case Gt:t=Jr;break;case Yt:t=ai;break;case"scroll":t=kr;break;case"wheel":t=ui;break;case"copy":case"cut":case"paste":t=Zr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=jr;break;default:t=Yn}return qn(e=t.getPooled(i,e,n,r)),e}};if(m)throw Error(s(101));m=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),d=Dn,y=On,v=Rn,I({SimpleEventPlugin:ci,EnterLeaveEventPlugin:Vr,ChangeEventPlugin:Nr,SelectEventPlugin:Xr,BeforeInputEventPlugin:hr});var li=[],hi=-1;function fi(t){0>hi||(t.current=li[hi],li[hi]=null,hi--)}function pi(t,e){hi++,li[hi]=t.current,t.current=e}var di={},yi={current:di},vi={current:!1},gi=di;function mi(t,e){var n=t.type.contextTypes;if(!n)return di;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function _i(t){return null!=t.childContextTypes}function bi(){fi(vi),fi(yi)}function wi(t,e,n){if(yi.current!==di)throw Error(s(168));pi(yi,e),pi(vi,n)}function Ei(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(s(108,vt(e)||"Unknown",o));return i({},n,{},r)}function Ti(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||di,gi=yi.current,pi(yi,t),pi(vi,vi.current),!0}function Ci(t,e,n){var r=t.stateNode;if(!r)throw Error(s(169));n?(t=Ei(t,e,gi),r.__reactInternalMemoizedMergedChildContext=t,fi(vi),fi(yi),pi(yi,t)):fi(vi),pi(vi,n)}var Si=o.unstable_runWithPriority,Ii=o.unstable_scheduleCallback,xi=o.unstable_cancelCallback,Ni=o.unstable_requestPaint,ki=o.unstable_now,Ai=o.unstable_getCurrentPriorityLevel,Pi=o.unstable_ImmediatePriority,Oi=o.unstable_UserBlockingPriority,Ri=o.unstable_NormalPriority,Di=o.unstable_LowPriority,Li=o.unstable_IdlePriority,Fi={},Mi=o.unstable_shouldYield,ji=void 0!==Ni?Ni:function(){},Ui=null,Vi=null,qi=!1,Bi=ki(),Wi=1e4>Bi?ki:function(){return ki()-Bi};function zi(){switch(Ai()){case Pi:return 99;case Oi:return 98;case Ri:return 97;case Di:return 96;case Li:return 95;default:throw Error(s(332))}}function Hi(t){switch(t){case 99:return Pi;case 98:return Oi;case 97:return Ri;case 96:return Di;case 95:return Li;default:throw Error(s(332))}}function Qi(t,e){return t=Hi(t),Si(t,e)}function Gi(t,e,n){return t=Hi(t),Ii(t,e,n)}function Yi(t){return null===Ui?(Ui=[t],Vi=Ii(Pi,$i)):Ui.push(t),Fi}function Ki(){if(null!==Vi){var t=Vi;Vi=null,xi(t)}$i()}function $i(){if(!qi&&null!==Ui){qi=!0;var t=0;try{var e=Ui;Qi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(e){throw null!==Ui&&(Ui=Ui.slice(t+1)),Ii(Pi,Ki),e}finally{qi=!1}}}function Xi(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function Ji(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Zi={current:null},to=null,eo=null,no=null;function ro(){no=eo=to=null}function io(t){var e=Zi.current;fi(Zi),t.type._context._currentValue=e}function oo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function so(t,e){to=t,no=eo=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Ds=!0),t.firstContext=null)}function ao(t,e){if(no!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(no=t,e=1073741823),e={context:t,observedBits:e,next:null},null===eo){if(null===to)throw Error(s(308));eo=e,to.dependencies={expirationTime:0,firstContext:e,responders:null}}else eo=eo.next=e;return t._currentValue}var uo=!1;function co(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function lo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function ho(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function fo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function po(t,e){var n=t.alternate;null!==n&&lo(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function yo(t,e,n,r){var o=t.updateQueue;uo=!1;var s=o.baseQueue,a=o.shared.pending;if(null!==a){if(null!==s){var u=s.next;s.next=a.next,a.next=u}s=a,o.shared.pending=null,null!==(u=t.alternate)&&null!==(u=u.updateQueue)&&(u.baseQueue=a)}if(null!==s){u=s.next;var c=o.baseState,l=0,h=null,f=null,p=null;if(null!==u)for(var d=u;;){if((a=d.expirationTime)<r){var y={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(f=p=y,h=c):p=p.next=y,a>l&&(l=a)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),bu(a,d.suspenseConfig);t:{var v=t,g=d;switch(a=e,y=n,g.tag){case 1:if("function"==typeof(v=g.payload)){c=v.call(y,c,a);break t}c=v;break t;case 3:v.effectTag=-4097&v.effectTag|64;case 0:if(null==(a="function"==typeof(v=g.payload)?v.call(y,c,a):v))break t;c=i({},c,a);break t;case 2:uo=!0}}null!==d.callback&&(t.effectTag|=32,null===(a=o.effects)?o.effects=[d]:a.push(d))}if(null===(d=d.next)||d===u){if(null===(a=o.shared.pending))break;d=s.next=a.next,a.next=u,o.baseQueue=s=a,o.shared.pending=null}}null===p?h=c:p.next=f,o.baseState=h,o.baseQueue=p,wu(l),t.expirationTime=l,t.memoizedState=c}}function vo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(s(191,r));r.call(i)}}}var go=$.ReactCurrentBatchConfig,mo=(new r.Component).refs;function _o(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var bo={isMounted:function(t){return!!(t=t._reactInternalFiber)&&Jt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=au(),i=go.suspense;(i=ho(r=uu(r,t,i),i)).payload=e,null!=n&&(i.callback=n),fo(t,i),cu(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=au(),i=go.suspense;(i=ho(r=uu(r,t,i),i)).tag=1,i.payload=e,null!=n&&(i.callback=n),fo(t,i),cu(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=au(),r=go.suspense;(r=ho(n=uu(n,t,r),r)).tag=2,null!=e&&(r.callback=e),fo(t,r),cu(t,n)}};function wo(t,e,n,r,i,o,s){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!(e.prototype&&e.prototype.isPureReactComponent&&Wr(n,r)&&Wr(i,o))}function Eo(t,e,n){var r=!1,i=di,o=e.contextType;return"object"==typeof o&&null!==o?o=ao(o):(i=_i(e)?gi:yi.current,o=(r=null!=(r=e.contextTypes))?mi(t,i):di),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=bo,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function To(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bo.enqueueReplaceState(e,e.state,null)}function Co(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=mo,co(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=ao(o):(o=_i(e)?gi:yi.current,i.context=mi(t,o)),yo(t,n,i,r),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(_o(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&bo.enqueueReplaceState(i,i.state,null),yo(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var So=Array.isArray;function Io(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:(e=function(t){var e=r.refs;e===mo&&(e=r.refs={}),null===t?delete e[i]:e[i]=t},e._stringRef=i,e)}if("string"!=typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function xo(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function No(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=qu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function a(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=zu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Io(t,e,n),r.return=t,r):((r=Bu(n.type,n.key,n.props,null,t.mode,r)).ref=Io(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Hu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Wu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=zu(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=Bu(e.type,e.key,e.props,null,t.mode,n)).ref=Io(t,null,e),n.return=t,n;case et:return(e=Hu(e,t.mode,n)).return=t,e}if(So(e)||yt(e))return(e=Wu(e,t.mode,n,null)).return=t,e;xo(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===i?n.type===nt?h(t,e,n.props.children,r,i):c(t,e,n,r):null;case et:return n.key===i?l(t,e,n,r):null}if(So(n)||yt(n))return null!==i?null:h(t,e,n,r,null);xo(t,n)}return null}function d(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case tt:return t=t.get(null===r.key?n:r.key)||null,r.type===nt?h(e,t,r.props.children,i,r.key):c(e,t,r,i);case et:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(So(r)||yt(r))return h(e,t=t.get(n)||null,r,i,null);xo(e,r)}return null}function y(i,s,a,u){for(var c=null,l=null,h=s,y=s=0,v=null;null!==h&&y<a.length;y++){h.index>y?(v=h,h=null):v=h.sibling;var g=p(i,h,a[y],u);if(null===g){null===h&&(h=v);break}t&&h&&null===g.alternate&&e(i,h),s=o(g,s,y),null===l?c=g:l.sibling=g,l=g,h=v}if(y===a.length)return n(i,h),c;if(null===h){for(;y<a.length;y++)null!==(h=f(i,a[y],u))&&(s=o(h,s,y),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);y<a.length;y++)null!==(v=d(h,i,y,a[y],u))&&(t&&null!==v.alternate&&h.delete(null===v.key?y:v.key),s=o(v,s,y),null===l?c=v:l.sibling=v,l=v);return t&&h.forEach((function(t){return e(i,t)})),c}function v(i,a,u,c){var l=yt(u);if("function"!=typeof l)throw Error(s(150));if(null==(u=l.call(u)))throw Error(s(151));for(var h=l=null,y=a,v=a=0,g=null,m=u.next();null!==y&&!m.done;v++,m=u.next()){y.index>v?(g=y,y=null):g=y.sibling;var _=p(i,y,m.value,c);if(null===_){null===y&&(y=g);break}t&&y&&null===_.alternate&&e(i,y),a=o(_,a,v),null===h?l=_:h.sibling=_,h=_,y=g}if(m.done)return n(i,y),l;if(null===y){for(;!m.done;v++,m=u.next())null!==(m=f(i,m.value,c))&&(a=o(m,a,v),null===h?l=m:h.sibling=m,h=m);return l}for(y=r(i,y);!m.done;v++,m=u.next())null!==(m=d(y,i,v,m.value,c))&&(t&&null!==m.alternate&&y.delete(null===m.key?v:m.key),a=o(m,a,v),null===h?l=m:h.sibling=m,h=m);return t&&y.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"==typeof o&&null!==o&&o.type===nt&&null===o.key;c&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case tt:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(o.type===nt){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}}else if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=Io(t,c,o),r.return=t,t=r;break t}n(t,c);break}e(t,c),c=c.sibling}o.type===nt?((r=Wu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Bu(o.type,o.key,o.props,null,t.mode,u)).ref=Io(t,r,o),u.return=t,t=u)}return a(t);case et:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Hu(o,t.mode,u)).return=t,t=r}return a(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=zu(o,t.mode,u)).return=t,t=r),a(t);if(So(o))return y(t,r,o,u);if(yt(o))return v(t,r,o,u);if(l&&xo(t,o),void 0===o&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(s(152,t.displayName||t.name||"Component"))}return n(t,r)}}var ko=No(!0),Ao=No(!1),Po={},Oo={current:Po},Ro={current:Po},Do={current:Po};function Lo(t){if(t===Po)throw Error(s(174));return t}function Fo(t,e){switch(pi(Do,e),pi(Ro,t),pi(Oo,Po),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lt(null,"");break;default:e=Lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}fi(Oo),pi(Oo,e)}function Mo(){fi(Oo),fi(Ro),fi(Do)}function jo(t){Lo(Do.current);var e=Lo(Oo.current),n=Lt(e,t.type);e!==n&&(pi(Ro,t),pi(Oo,n))}function Uo(t){Ro.current===t&&(fi(Oo),fi(Ro))}var Vo={current:0};function qo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===gn||n.data===mn))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Bo(t,e){return{responder:t,props:e}}var Wo=$.ReactCurrentDispatcher,zo=$.ReactCurrentBatchConfig,Ho=0,Qo=null,Go=null,Yo=null,Ko=!1;function $o(){throw Error(s(321))}function Xo(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qr(t[n],e[n]))return!1;return!0}function Jo(t,e,n,r,i,o){if(Ho=o,Qo=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,Wo.current=null===t||null===t.memoizedState?ws:Es,t=n(r,i),e.expirationTime===Ho){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(s(301));o+=1,Yo=Go=null,e.updateQueue=null,Wo.current=Ts,t=n(r,i)}while(e.expirationTime===Ho)}if(Wo.current=bs,e=null!==Go&&null!==Go.next,Ho=0,Yo=Go=Qo=null,Ko=!1,e)throw Error(s(300));return t}function Zo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Yo?Qo.memoizedState=Yo=t:Yo=Yo.next=t,Yo}function ts(){if(null===Go){var t=Qo.alternate;t=null!==t?t.memoizedState:null}else t=Go.next;var e=null===Yo?Qo.memoizedState:Yo.next;if(null!==e)Yo=e,Go=t;else{if(null===t)throw Error(s(310));t={memoizedState:(Go=t).memoizedState,baseState:Go.baseState,baseQueue:Go.baseQueue,queue:Go.queue,next:null},null===Yo?Qo.memoizedState=Yo=t:Yo=Yo.next=t}return Yo}function es(t,e){return"function"==typeof e?e(t):e}function ns(t){var e=ts(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=Go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=a=o=null,c=i;do{var l=c.expirationTime;if(l<Ho){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(a=u=h,o=r):u=u.next=h,l>Qo.expirationTime&&(Qo.expirationTime=l,wu(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),bu(l,c.suspenseConfig),r=c.eagerReducer===t?c.eagerState:t(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=a,qr(r,e.memoizedState)||(Ds=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function rs(t){var e=ts(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=t(o,a.action),a=a.next}while(a!==i);qr(o,e.memoizedState)||(Ds=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function is(t){var e=Zo();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:es,lastRenderedState:t}).dispatch=_s.bind(null,Qo,t),[e.memoizedState,t]}function os(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Qo.updateQueue)?(e={lastEffect:null},Qo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ss(){return ts().memoizedState}function as(t,e,n,r){var i=Zo();Qo.effectTag|=t,i.memoizedState=os(1|e,n,void 0,void 0===r?null:r)}function us(t,e,n,r){var i=ts();r=void 0===r?null:r;var o=void 0;if(null!==Go){var s=Go.memoizedState;if(o=s.destroy,null!==r&&Xo(r,s.deps))return void os(e,n,o,r)}Qo.effectTag|=t,i.memoizedState=os(1|e,n,o,r)}function cs(t,e){return as(516,4,t,e)}function ls(t,e){return us(516,4,t,e)}function hs(t,e){return us(4,2,t,e)}function fs(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ps(t,e,n){return n=null!=n?n.concat([t]):null,us(4,2,fs.bind(null,e,t),n)}function ds(){}function ys(t,e){return Zo().memoizedState=[t,void 0===e?null:e],t}function vs(t,e){var n=ts();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Xo(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gs(t,e){var n=ts();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Xo(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ms(t,e,n){var r=zi();Qi(98>r?98:r,(function(){t(!0)})),Qi(97<r?97:r,(function(){var r=zo.suspense;zo.suspense=void 0===e?null:e;try{t(!1),n()}finally{zo.suspense=r}}))}function _s(t,e,n){var r=au(),i=go.suspense;i={expirationTime:r=uu(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===Qo||null!==o&&o===Qo)Ko=!0,i.expirationTime=Ho,Qo.expirationTime=Ho;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(i.eagerReducer=o,i.eagerState=a,qr(a,s))return}catch(t){}cu(t,r)}}var bs={readContext:ao,useCallback:$o,useContext:$o,useEffect:$o,useImperativeHandle:$o,useLayoutEffect:$o,useMemo:$o,useReducer:$o,useRef:$o,useState:$o,useDebugValue:$o,useResponder:$o,useDeferredValue:$o,useTransition:$o},ws={readContext:ao,useCallback:ys,useContext:ao,useEffect:cs,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,as(4,2,fs.bind(null,e,t),n)},useLayoutEffect:function(t,e){return as(4,2,t,e)},useMemo:function(t,e){var n=Zo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zo();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=_s.bind(null,Qo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Zo().memoizedState=t},useState:is,useDebugValue:ds,useResponder:Bo,useDeferredValue:function(t,e){var n=is(t),r=n[0],i=n[1];return cs((function(){var n=zo.suspense;zo.suspense=void 0===e?null:e;try{i(t)}finally{zo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=is(!1),n=e[0];return e=e[1],[ys(ms.bind(null,e,t),[e,t]),n]}},Es={readContext:ao,useCallback:vs,useContext:ao,useEffect:ls,useImperativeHandle:ps,useLayoutEffect:hs,useMemo:gs,useReducer:ns,useRef:ss,useState:function(){return ns(es)},useDebugValue:ds,useResponder:Bo,useDeferredValue:function(t,e){var n=ns(es),r=n[0],i=n[1];return ls((function(){var n=zo.suspense;zo.suspense=void 0===e?null:e;try{i(t)}finally{zo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ns(es),n=e[0];return e=e[1],[vs(ms.bind(null,e,t),[e,t]),n]}},Ts={readContext:ao,useCallback:vs,useContext:ao,useEffect:ls,useImperativeHandle:ps,useLayoutEffect:hs,useMemo:gs,useReducer:rs,useRef:ss,useState:function(){return rs(es)},useDebugValue:ds,useResponder:Bo,useDeferredValue:function(t,e){var n=rs(es),r=n[0],i=n[1];return ls((function(){var n=zo.suspense;zo.suspense=void 0===e?null:e;try{i(t)}finally{zo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=rs(es),n=e[0];return e=e[1],[vs(ms.bind(null,e,t),[e,t]),n]}},Cs=null,Ss=null,Is=!1;function xs(t,e){var n=Uu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Ns(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function ks(t){if(Is){var e=Ss;if(e){var n=e;if(!Ns(t,e)){if(!(e=Sn(n.nextSibling))||!Ns(t,e))return t.effectTag=-1025&t.effectTag|2,Is=!1,void(Cs=t);xs(Cs,n)}Cs=t,Ss=Sn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Is=!1,Cs=t}}function As(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Cs=t}function Ps(t){if(t!==Cs)return!1;if(!Is)return As(t),Is=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!En(e,t.memoizedProps))for(e=Ss;e;)xs(t,e),e=Sn(e.nextSibling);if(As(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if(n===vn){if(0===e){Ss=Sn(t.nextSibling);break t}e--}else n!==yn&&n!==mn&&n!==gn||e++}t=t.nextSibling}Ss=null}}else Ss=Cs?Sn(t.stateNode.nextSibling):null;return!0}function Os(){Ss=Cs=null,Is=!1}var Rs=$.ReactCurrentOwner,Ds=!1;function Ls(t,e,n,r){e.child=null===t?Ao(e,null,n,r):ko(e,t.child,n,r)}function Fs(t,e,n,r,i){n=n.render;var o=e.ref;return so(e,i),r=Jo(t,e,n,r,o,i),null===t||Ds?(e.effectTag|=1,Ls(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Zs(t,e,i))}function Ms(t,e,n,r,i,o){if(null===t){var s=n.type;return"function"!=typeof s||Vu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Bu(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,js(t,e,s,r,i,o))}return s=t.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:Wr)(i,r)&&t.ref===e.ref)?Zs(t,e,o):(e.effectTag|=1,(t=qu(s,r)).ref=e.ref,t.return=e,e.child=t)}function js(t,e,n,r,i,o){return null!==t&&Wr(t.memoizedProps,r)&&t.ref===e.ref&&(Ds=!1,i<o)?(e.expirationTime=t.expirationTime,Zs(t,e,o)):Vs(t,e,n,r,o)}function Us(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Vs(t,e,n,r,i){var o=_i(n)?gi:yi.current;return o=mi(e,o),so(e,i),n=Jo(t,e,n,r,o,i),null===t||Ds?(e.effectTag|=1,Ls(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Zs(t,e,i))}function qs(t,e,n,r,i){if(_i(n)){var o=!0;Ti(e)}else o=!1;if(so(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),Eo(e,n,r),Co(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,c=n.contextType;c="object"==typeof c&&null!==c?ao(c):mi(e,c=_i(n)?gi:yi.current);var l=n.getDerivedStateFromProps,h="function"==typeof l||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||u!==c)&&To(e,s,r,c),uo=!1;var f=e.memoizedState;s.state=f,yo(e,r,s,i),u=e.memoizedState,a!==r||f!==u||vi.current||uo?("function"==typeof l&&(_o(e,n,l,r),u=e.memoizedState),(a=uo||wo(e,n,a,r,f,u,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(e.effectTag|=4)):("function"==typeof s.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=a):("function"==typeof s.componentDidMount&&(e.effectTag|=4),r=!1)}else s=e.stateNode,lo(t,e),a=e.memoizedProps,s.props=e.type===e.elementType?a:Ji(e.type,a),u=s.context,c="object"==typeof(c=n.contextType)&&null!==c?ao(c):mi(e,c=_i(n)?gi:yi.current),(h="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||u!==c)&&To(e,s,r,c),uo=!1,u=e.memoizedState,s.state=u,yo(e,r,s,i),f=e.memoizedState,a!==r||u!==f||vi.current||uo?("function"==typeof l&&(_o(e,n,l,r),f=e.memoizedState),(l=uo||wo(e,n,a,r,u,f,c))?(h||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,c),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,c)),"function"==typeof s.componentDidUpdate&&(e.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),s.props=r,s.state=f,s.context=c,r=l):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return Bs(t,e,n,r,o,i)}function Bs(t,e,n,r,i,o){Us(t,e);var s=0!=(64&e.effectTag);if(!r&&!s)return i&&Ci(e,n,!1),Zs(t,e,o);r=e.stateNode,Rs.current=e;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&s?(e.child=ko(e,t.child,null,o),e.child=ko(e,null,a,o)):Ls(t,e,a,o),e.memoizedState=r.state,i&&Ci(e,n,!0),e.child}function Ws(t){var e=t.stateNode;e.pendingContext?wi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&wi(0,e.context,!1),Fo(t,e.containerInfo)}var zs,Hs,Qs,Gs,Ys={dehydrated:null,retryTime:0};function Ks(t,e,n){var r,i=e.mode,o=e.pendingProps,s=Vo.current,a=!1;if((r=0!=(64&e.effectTag))||(r=0!=(2&s)&&(null===t||null!==t.memoizedState)),r?(a=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),pi(Vo,1&s),null===t){if(void 0!==o.fallback&&ks(e),a){if(a=o.fallback,(o=Wu(null,i,0,null)).return=e,0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Wu(a,i,n,null)).return=e,o.sibling=n,e.memoizedState=Ys,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=Ao(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,a){if(o=o.fallback,(n=qu(t,t.pendingProps)).return=e,0==(2&e.mode)&&(a=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=qu(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=Ys,e.child=n,i}return n=ko(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,a){if(a=o.fallback,(o=Wu(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Wu(a,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=Ys,e.child=o,n}return e.memoizedState=null,e.child=ko(e,t,o.children,n)}function $s(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),oo(t.return,e)}function Xs(t,e,n,r,i,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=i,s.lastEffect=o)}function Js(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ls(t,e,r.children,n),0!=(2&(r=Vo.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&$s(t,n);else if(19===t.tag)$s(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pi(Vo,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===qo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Xs(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===qo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Xs(e,!0,n,null,o,e.lastEffect);break;case"together":Xs(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Zs(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&wu(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=qu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=qu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function ta(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ea(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return _i(e.type)&&bi(),null;case 3:return Mo(),fi(vi),fi(yi),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Ps(e)||(e.effectTag|=4),Hs(e),null;case 5:Uo(e),n=Lo(Do.current);var o=e.type;if(null!==t&&null!=e.stateNode)Qs(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(s(166));return null}if(t=Lo(Oo.current),Ps(e)){r=e.stateNode,o=e.type;var a=e.memoizedProps;switch(r[Nn]=e,r[kn]=a,o){case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(t=0;t<Kt.length;t++)Qe(Kt[t],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"form":Qe("reset",r),Qe("submit",r);break;case"details":Qe("toggle",r);break;case"input":Tt(r,a),Qe("invalid",r),an(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qe("invalid",r),an(n,"onChange");break;case"textarea":Pt(r,a),Qe("invalid",r),an(n,"onChange")}for(var u in rn(o,a),t=null,a)if(a.hasOwnProperty(u)){var c=a[u];"children"===u?"string"==typeof c?r.textContent!==c&&(t=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(t=["children",""+c]):C.hasOwnProperty(u)&&null!=c&&an(n,u)}switch(o){case"input":bt(r),It(r,a,!0);break;case"textarea":bt(r),Rt(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=un)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===sn&&(t=Dt(o)),t===sn?"script"===o?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=u.createElement(o,{is:r.is}):(t=u.createElement(o),"select"===o&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,o),t[Nn]=e,t[kn]=r,zs(t,e,!1,!1),e.stateNode=t,u=on(o,r),o){case"iframe":case"object":case"embed":Qe("load",t),c=r;break;case"video":case"audio":for(c=0;c<Kt.length;c++)Qe(Kt[c],t);c=r;break;case"source":Qe("error",t),c=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),c=r;break;case"form":Qe("reset",t),Qe("submit",t),c=r;break;case"details":Qe("toggle",t),c=r;break;case"input":Tt(t,r),c=Et(t,r),Qe("invalid",t),an(n,"onChange");break;case"option":c=Nt(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Qe("invalid",t),an(n,"onChange");break;case"textarea":Pt(t,r),c=At(t,r),Qe("invalid",t),an(n,"onChange");break;default:c=r}rn(o,c);var l=c;for(a in l)if(l.hasOwnProperty(a)){var h=l[a];"style"===a?en(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&jt(t,h):"children"===a?"string"==typeof h?("textarea"!==o||""!==h)&&Ut(t,h):"number"==typeof h&&Ut(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(C.hasOwnProperty(a)?null!=h&&an(n,a):null!=h&&X(t,a,h,u))}switch(o){case"input":bt(t),It(t,r,!1);break;case"textarea":bt(t),Rt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+mt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?kt(t,!!r.multiple,n,!1):null!=r.defaultValue&&kt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof c.onClick&&(t.onclick=un)}wn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Gs(t,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(s(166));n=Lo(Do.current),Lo(Oo.current),Ps(e)?(n=e.stateNode,r=e.memoizedProps,n[Nn]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Nn]=e,e.stateNode=n)}return null;case 13:return fi(Vo),r=e.memoizedState,0!=(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Ps(e):(r=null!==(o=t.memoizedState),n||null===o||null!==(o=t.child.sibling)&&(null!==(a=e.firstEffect)?(e.firstEffect=o,o.nextEffect=a):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&Vo.current)?qa===Pa&&(qa=Da):(qa!==Pa&&qa!==Da||(qa=La),0!==Qa&&null!==ja&&(Yu(ja,Va),Ku(ja,Qa)))),(n||r)&&(e.effectTag|=4),null);case 4:return Mo(),Hs(e),null;case 10:return io(e),null;case 19:if(fi(Vo),null===(r=e.memoizedState))return null;if(o=0!=(64&e.effectTag),null===(a=r.rendering)){if(o)ta(r,!1);else if(qa!==Pa||null!==t&&0!=(64&t.effectTag))for(a=e.child;null!==a;){if(null!==(t=qo(a))){for(e.effectTag|=64,ta(r,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)a=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,a=t.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return pi(Vo,1&Vo.current|2),e.child}a=a.sibling}}else{if(!o)if(null!==(t=qo(a))){if(e.effectTag|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),ta(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Wi()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,ta(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(a.sibling=e.child,e.child=a):(null!==(n=r.last)?n.sibling=a:e.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Wi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Wi(),n.sibling=null,e=Vo.current,pi(Vo,o?1&e|2:1&e),n):null}throw Error(s(156,e.tag))}function na(t){switch(t.tag){case 1:_i(t.type)&&bi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Mo(),fi(vi),fi(yi),0!=(64&(e=t.effectTag)))throw Error(s(285));return t.effectTag=-4097&e|64,t;case 5:return Uo(t),null;case 13:return fi(Vo),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return fi(Vo),null;case 4:return Mo(),null;case 10:return io(t),null;default:return null}}function ra(t,e){return{value:t,source:e,stack:gt(e)}}zs=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Hs=function(){},Qs=function(t,e,n,r,o){var s=t.memoizedProps;if(s!==r){var a,u,c=e.stateNode;switch(Lo(Oo.current),t=null,n){case"input":s=Et(c,s),r=Et(c,r),t=[];break;case"option":s=Nt(c,s),r=Nt(c,r),t=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":s=At(c,s),r=At(c,r),t=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(c.onclick=un)}for(a in rn(n,r),n=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(u in c=s[a])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(C.hasOwnProperty(a)?t||(t=[]):(t=t||[]).push(a,null));for(a in r){var l=r[a];if(c=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&l!==c&&(null!=l||null!=c))if("style"===a)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(t||(t=[]),t.push(a,n)),n=l;else"dangerouslySetInnerHTML"===a?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(t=t||[]).push(a,l)):"children"===a?c===l||"string"!=typeof l&&"number"!=typeof l||(t=t||[]).push(a,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(C.hasOwnProperty(a)?(null!=l&&an(o,a),t||c===l||(t=[])):(t=t||[]).push(a,l))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Gs=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var ia="function"==typeof WeakSet?WeakSet:Set;function oa(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=gt(n)),null!==n&&vt(n.type),e=e.value,null!==t&&1===t.tag&&vt(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function sa(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){Ru(t,e)}else e.current=null}function aa(t,e){switch(e.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Ji(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return}throw Error(s(163))}function ua(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function ca(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function la(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ca(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:Ji(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&vo(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}vo(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&wn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Le(n)))))}throw Error(s(163))}function ha(t,e,n){switch("function"==typeof Mu&&Mu(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Qi(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(t){Ru(i,t)}}t=t.next}while(t!==r)}))}break;case 1:sa(e),"function"==typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Ru(t,e)}}(e,n);break;case 5:sa(e);break;case 4:ga(t,e,n)}}function fa(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&fa(e)}function pa(t){return 5===t.tag||3===t.tag||4===t.tag}function da(t){t:{for(var e=t.return;null!==e;){if(pa(e)){var n=e;break t}e=e.return}throw Error(s(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(Ut(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||pa(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?ya(t,n,e):va(t,n,e)}function ya(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=un));else if(4!==r&&null!==(t=t.child))for(ya(t,e,n),t=t.sibling;null!==t;)ya(t,e,n),t=t.sibling}function va(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(va(t,e,n),t=t.sibling;null!==t;)va(t,e,n),t=t.sibling}function ga(t,e,n){for(var r,i,o=e,a=!1;;){if(!a){a=o.return;t:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}a=a.return}a=!0}if(5===o.tag||6===o.tag){t:for(var u=t,c=o,l=n,h=c;;)if(ha(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break t;for(;null===h.sibling;){if(null===h.return||h.return===c)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(ha(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ma(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void ua(3,e);case 1:case 12:case 17:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[kn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Ct(n,r),on(t,i),e=on(t,r),i=0;i<o.length;i+=2){var a=o[i],u=o[i+1];"style"===a?en(n,u):"dangerouslySetInnerHTML"===a?jt(n,u):"children"===a?Ut(n,u):X(n,a,u,e)}switch(t){case"input":St(n,r);break;case"textarea":Ot(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?kt(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?kt(n,!!r.multiple,r.defaultValue,!0):kt(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(s(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,Le(e.containerInfo)));case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,Ya=Wi()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=null!=(i=t.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=tn("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void _a(e);case 19:return void _a(e)}throw Error(s(163))}function _a(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new ia),e.forEach((function(e){var r=Lu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var ba="function"==typeof WeakMap?WeakMap:Map;function wa(t,e,n){(n=ho(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xa||(Xa=!0,Ja=r),oa(t,e)},n}function Ea(t,e,n){(n=ho(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return oa(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Za?Za=new Set([this]):Za.add(this),oa(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var Ta,Ca=Math.ceil,Sa=$.ReactCurrentDispatcher,Ia=$.ReactCurrentOwner,xa=0,Na=8,ka=16,Aa=32,Pa=0,Oa=1,Ra=2,Da=3,La=4,Fa=5,Ma=xa,ja=null,Ua=null,Va=0,qa=Pa,Ba=null,Wa=1073741823,za=1073741823,Ha=null,Qa=0,Ga=!1,Ya=0,Ka=500,$a=null,Xa=!1,Ja=null,Za=null,tu=!1,eu=null,nu=90,ru=null,iu=0,ou=null,su=0;function au(){return(Ma&(ka|Aa))!==xa?1073741821-(Wi()/10|0):0!==su?su:su=1073741821-(Wi()/10|0)}function uu(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var r=zi();if(0==(4&e))return 99===r?1073741823:1073741822;if((Ma&ka)!==xa)return Va;if(null!==n)t=Xi(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Xi(t,150,100);break;case 97:case 96:t=Xi(t,5e3,250);break;case 95:t=2;break;default:throw Error(s(326))}return null!==ja&&t===Va&&--t,t}function cu(t,e){if(50<iu)throw iu=0,ou=null,Error(s(185));if(null!==(t=lu(t,e))){var n=zi();1073741823===e?(Ma&Na)!==xa&&(Ma&(ka|Aa))===xa?du(t):(fu(t),Ma===xa&&Ki()):fu(t),(4&Ma)===xa||98!==n&&99!==n||(null===ru?ru=new Map([[t,e]]):(void 0===(n=ru.get(t))||n>e)&&ru.set(t,e))}}function lu(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(ja===i&&(wu(e),qa===La&&Yu(i,Va)),Ku(i,e)),i}function hu(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Gu(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function fu(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Yi(du.bind(null,t));else{var e=hu(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=au();if(r=1073741823===e?99:1===e||2===e?95:0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Fi&&xi(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Yi(du.bind(null,t)):Gi(r,pu.bind(null,t),{timeout:10*(1073741821-e)-Wi()}),t.callbackNode=e}}}function pu(t,e){if(su=0,e)return $u(t,e=au()),fu(t),null;var n=hu(t);if(0!==n){if(e=t.callbackNode,(Ma&(ka|Aa))!==xa)throw Error(s(327));if(Au(),t===ja&&n===Va||gu(t,n),null!==Ua){var r=Ma;Ma|=ka;for(var i=_u();;)try{Tu();break}catch(e){mu(t,e)}if(ro(),Ma=r,Sa.current=i,qa===Oa)throw e=Ba,gu(t,n),Yu(t,n),fu(t),e;if(null===Ua)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=qa,ja=null,r){case Pa:case Oa:throw Error(s(345));case Ra:$u(t,2<n?2:n);break;case Da:if(Yu(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=Iu(i)),1073741823===Wa&&10<(i=Ya+Ka-Wi())){if(Ga){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,gu(t,n);break}}if(0!==(o=hu(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=Tn(xu.bind(null,t),i);break}xu(t);break;case La:if(Yu(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=Iu(i)),Ga&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,gu(t,n);break}if(0!==(i=hu(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==za?r=10*(1073741821-za)-Wi():1073741823===Wa?r=0:(r=10*(1073741821-Wa)-5e3,0>(r=(i=Wi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ca(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=Tn(xu.bind(null,t),r);break}xu(t);break;case Fa:if(1073741823!==Wa&&null!==Ha){o=Wa;var a=Ha;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=Wi()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Yu(t,n),t.timeoutHandle=Tn(xu.bind(null,t),r);break}}xu(t);break;default:throw Error(s(329))}if(fu(t),t.callbackNode===e)return pu.bind(null,t)}}return null}function du(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,(Ma&(ka|Aa))!==xa)throw Error(s(327));if(Au(),t===ja&&e===Va||gu(t,e),null!==Ua){var n=Ma;Ma|=ka;for(var r=_u();;)try{Eu();break}catch(e){mu(t,e)}if(ro(),Ma=n,Sa.current=r,qa===Oa)throw n=Ba,gu(t,e),Yu(t,e),fu(t),n;if(null!==Ua)throw Error(s(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,ja=null,xu(t),fu(t)}return null}function yu(t,e){var n=Ma;Ma|=1;try{return t(e)}finally{(Ma=n)===xa&&Ki()}}function vu(t,e){var n=Ma;Ma&=-2,Ma|=Na;try{return t(e)}finally{(Ma=n)===xa&&Ki()}}function gu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Cn(n)),null!==Ua)for(n=Ua.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&bi();break;case 3:Mo(),fi(vi),fi(yi);break;case 5:Uo(r);break;case 4:Mo();break;case 13:case 19:fi(Vo);break;case 10:io(r)}n=n.return}ja=t,Ua=qu(t.current,null),Va=e,qa=Pa,Ba=null,za=Wa=1073741823,Ha=null,Qa=0,Ga=!1}function mu(t,e){for(;;){try{if(ro(),Wo.current=bs,Ko)for(var n=Qo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ho=0,Yo=Go=Qo=null,Ko=!1,null===Ua||null===Ua.return)return qa=Oa,Ba=e,Ua=null;t:{var i=t,o=Ua.return,s=Ua,a=e;if(e=Va,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"==typeof a&&"function"==typeof a.then){var u=a;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.expirationTime=c.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var l=0!=(1&Vo.current),h=o;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var d=h.memoizedProps;f=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!l)}}if(f){var y=h.updateQueue;if(null===y){var v=new Set;v.add(u),h.updateQueue=v}else y.add(u);if(0==(2&h.mode)){if(h.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=ho(1073741823,null);g.tag=2,fo(s,g)}s.expirationTime=1073741823;break t}a=void 0,s=e;var m=i.pingCache;if(null===m?(m=i.pingCache=new ba,a=new Set,m.set(u,a)):void 0===(a=m.get(u))&&(a=new Set,m.set(u,a)),!a.has(s)){a.add(s);var _=Du.bind(null,i,u,s);u.then(_,_)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);a=Error((vt(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+gt(s))}qa!==Fa&&(qa=Ra),a=ra(a,s),h=o;do{switch(h.tag){case 3:u=a,h.effectTag|=4096,h.expirationTime=e,po(h,wa(h,u,e));break t;case 1:u=a;var b=h.type,w=h.stateNode;if(0==(64&h.effectTag)&&("function"==typeof b.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Za||!Za.has(w)))){h.effectTag|=4096,h.expirationTime=e,po(h,Ea(h,u,e));break t}}h=h.return}while(null!==h)}Ua=Su(Ua)}catch(t){e=t;continue}break}}function _u(){var t=Sa.current;return Sa.current=bs,null===t?bs:t}function bu(t,e){t<Wa&&2<t&&(Wa=t),null!==e&&t<za&&2<t&&(za=t,Ha=e)}function wu(t){t>Qa&&(Qa=t)}function Eu(){for(;null!==Ua;)Ua=Cu(Ua)}function Tu(){for(;null!==Ua&&!Mi();)Ua=Cu(Ua)}function Cu(t){var e=Ta(t.alternate,t,Va);return t.memoizedProps=t.pendingProps,null===e&&(e=Su(t)),Ia.current=null,e}function Su(t){Ua=t;do{var e=Ua.alternate;if(t=Ua.return,0==(2048&Ua.effectTag)){if(e=ea(e,Ua,Va),1===Va||1!==Ua.childExpirationTime){for(var n=0,r=Ua.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Ua.childExpirationTime=n}if(null!==e)return e;null!==t&&0==(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Ua.firstEffect),null!==Ua.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Ua.firstEffect),t.lastEffect=Ua.lastEffect),1<Ua.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Ua:t.firstEffect=Ua,t.lastEffect=Ua))}else{if(null!==(e=na(Ua)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Ua.sibling))return e;Ua=t}while(null!==Ua);return qa===Pa&&(qa=Fa),null}function Iu(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function xu(t){var e=zi();return Qi(99,Nu.bind(null,t,e)),null}function Nu(t,e){do{Au()}while(null!==eu);if((Ma&(ka|Aa))!==xa)throw Error(s(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=Iu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===ja&&(Ua=ja=null,Va=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ma;Ma|=Aa,Ia.current=null,_n=He;var a=pn();if(dn(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else t:{var c=(u=(u=a.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(t){u=null;break t}var f=0,p=-1,d=-1,y=0,v=0,g=a,m=null;e:for(;;){for(var _;g!==u||0!==l&&3!==g.nodeType||(p=f+l),g!==h||0!==c&&3!==g.nodeType||(d=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(_=g.firstChild);)m=g,g=_;for(;;){if(g===a)break e;if(m===u&&++y===l&&(p=f),m===h&&++v===c&&(d=f),null!==(_=g.nextSibling))break;m=(g=m).parentNode}g=_}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;bn={activeElementDetached:null,focusedElem:a,selectionRange:u},He=!1,$a=i;do{try{ku()}catch(t){if(null===$a)throw Error(s(330));Ru($a,t),$a=$a.nextEffect}}while(null!==$a);$a=i;do{try{for(a=t,u=e;null!==$a;){var b=$a.effectTag;if(16&b&&Ut($a.stateNode,""),128&b){var w=$a.alternate;if(null!==w){var E=w.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(1038&b){case 2:da($a),$a.effectTag&=-3;break;case 6:da($a),$a.effectTag&=-3,ma($a.alternate,$a);break;case 1024:$a.effectTag&=-1025;break;case 1028:$a.effectTag&=-1025,ma($a.alternate,$a);break;case 4:ma($a.alternate,$a);break;case 8:ga(a,l=$a,u),fa(l)}$a=$a.nextEffect}}catch(t){if(null===$a)throw Error(s(330));Ru($a,t),$a=$a.nextEffect}}while(null!==$a);if(E=bn,w=pn(),b=E.focusedElem,u=E.selectionRange,w!==b&&b&&b.ownerDocument&&fn(b.ownerDocument.documentElement,b)){null!==u&&dn(b)&&(w=u.start,void 0===(E=u.end)&&(E=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(E,b.value.length)):(E=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(E=E.getSelection(),l=b.textContent.length,a=Math.min(u.start,l),u=void 0===u.end?a:Math.min(u.end,l),!E.extend&&a>u&&(l=u,u=a,a=l),l=hn(b,a),h=hn(b,u),l&&h&&(1!==E.rangeCount||E.anchorNode!==l.node||E.anchorOffset!==l.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((w=w.createRange()).setStart(l.node,l.offset),E.removeAllRanges(),a>u?(E.addRange(w),E.extend(h.node,h.offset)):(w.setEnd(h.node,h.offset),E.addRange(w))))),w=[];for(E=b;E=E.parentNode;)1===E.nodeType&&w.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(E=w[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}He=!!_n,bn=_n=null,t.current=n,$a=i;do{try{for(b=t;null!==$a;){var T=$a.effectTag;if(36&T&&la(b,$a.alternate,$a),128&T){w=void 0;var C=$a.ref;if(null!==C){var S=$a.stateNode;$a.tag,w=S,"function"==typeof C?C(w):C.current=w}}$a=$a.nextEffect}}catch(t){if(null===$a)throw Error(s(330));Ru($a,t),$a=$a.nextEffect}}while(null!==$a);$a=null,ji(),Ma=o}else t.current=n;if(tu)tu=!1,eu=t,nu=e;else for($a=i;null!==$a;)e=$a.nextEffect,$a.nextEffect=null,$a=e;if(0===(e=t.firstPendingTime)&&(Za=null),1073741823===e?t===ou?iu++:(iu=0,ou=t):iu=0,"function"==typeof Fu&&Fu(n.stateNode,r),fu(t),Xa)throw Xa=!1,t=Ja,Ja=null,t;return(Ma&Na)!==xa||Ki(),null}function ku(){for(;null!==$a;){var t=$a.effectTag;0!=(256&t)&&aa($a.alternate,$a),0==(512&t)||tu||(tu=!0,Gi(97,(function(){return Au(),null}))),$a=$a.nextEffect}}function Au(){if(90!==nu){var t=97<nu?97:nu;return nu=90,Qi(t,Pu)}}function Pu(){if(null===eu)return!1;var t=eu;if(eu=null,(Ma&(ka|Aa))!==xa)throw Error(s(331));var e=Ma;for(Ma|=Aa,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ua(5,n),ca(5,n)}}catch(e){if(null===t)throw Error(s(330));Ru(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return Ma=e,Ki(),!0}function Ou(t,e,n){fo(t,e=wa(t,e=ra(n,e),1073741823)),null!==(t=lu(t,1073741823))&&fu(t)}function Ru(t,e){if(3===t.tag)Ou(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Ou(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Za||!Za.has(r))){fo(n,t=Ea(n,t=ra(e,t),1073741823)),null!==(n=lu(n,1073741823))&&fu(n);break}}n=n.return}}function Du(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),ja===t&&Va===n?qa===La||qa===Da&&1073741823===Wa&&Wi()-Ya<Ka?gu(t,Va):Ga=!0:Gu(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,fu(t)))}function Lu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0==(e=0)&&(e=uu(e=au(),t,null)),null!==(t=lu(t,e))&&fu(t)}Ta=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||vi.current)Ds=!0;else{if(r<n){switch(Ds=!1,e.tag){case 3:Ws(e),Os();break;case 5:if(jo(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:_i(e.type)&&Ti(e);break;case 4:Fo(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,pi(Zi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?Ks(t,e,n):(pi(Vo,1&Vo.current),null!==(e=Zs(t,e,n))?e.sibling:null);pi(Vo,1&Vo.current);break;case 19:if(r=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(r)return Js(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),pi(Vo,Vo.current),!r)return null}return Zs(t,e,n)}Ds=!1}}else Ds=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=mi(e,yi.current),so(e,n),i=Jo(null,e,r,t,i,n),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,_i(r)){var o=!0;Ti(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,co(e);var a=r.getDerivedStateFromProps;"function"==typeof a&&_o(e,r,a,t),i.updater=bo,e.stateNode=i,i._reactInternalFiber=e,Co(e,r,t,n),e=Bs(null,e,r,!0,o,n)}else e.tag=0,Ls(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"==typeof t)return Vu(t)?1:0;if(null!=t){if((t=t.$$typeof)===ut)return 11;if(t===ht)return 14}return 2}(i),t=Ji(i,t),o){case 0:e=Vs(null,e,i,t,n);break t;case 1:e=qs(null,e,i,t,n);break t;case 11:e=Fs(null,e,i,t,n);break t;case 14:e=Ms(null,e,i,Ji(i.type,t),r,n);break t}throw Error(s(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Vs(t,e,r,i=e.elementType===r?i:Ji(r,i),n);case 1:return r=e.type,i=e.pendingProps,qs(t,e,r,i=e.elementType===r?i:Ji(r,i),n);case 3:if(Ws(e),r=e.updateQueue,null===t||null===r)throw Error(s(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,lo(t,e),yo(e,r,null,n),(r=e.memoizedState.element)===i)Os(),e=Zs(t,e,n);else{if((i=e.stateNode.hydrate)&&(Ss=Sn(e.stateNode.containerInfo.firstChild),Cs=e,i=Is=!0),i)for(n=Ao(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ls(t,e,r,n),Os();e=e.child}return e;case 5:return jo(e),null===t&&ks(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,En(r,i)?a=null:null!==o&&En(r,o)&&(e.effectTag|=16),Us(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Ls(t,e,a,n),e=e.child),e;case 6:return null===t&&ks(e),null;case 13:return Ks(t,e,n);case 4:return Fo(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=ko(e,null,r,n):Ls(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Fs(t,e,r,i=e.elementType===r?i:Ji(r,i),n);case 7:return Ls(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ls(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value;var u=e.type._context;if(pi(Zi,u._currentValue),u._currentValue=o,null!==a)if(u=a.value,0==(o=qr(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(a.children===i.children&&!vi.current){e=Zs(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){a=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===u.tag&&((l=ho(n,null)).tag=2,fo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),oo(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else a=10===u.tag&&u.type===e.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===e){a=null;break}if(null!==(u=a.sibling)){u.return=a.return,a=u;break}a=a.return}u=a}Ls(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,so(e,n),r=r(i=ao(i,o.unstable_observedBits)),e.effectTag|=1,Ls(t,e,r,n),e.child;case 14:return o=Ji(i=e.type,e.pendingProps),Ms(t,e,i,o=Ji(i.type,o),r,n);case 15:return js(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,_i(r)?(t=!0,Ti(e)):t=!1,so(e,n),Eo(e,r,i),Co(e,r,i,n),Bs(null,e,r,!0,t,n);case 19:return Js(t,e,n)}throw Error(s(156,e.tag))};var Fu=null,Mu=null;function ju(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Uu(t,e,n,r){return new ju(t,e,n,r)}function Vu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function qu(t,e){var n=t.alternate;return null===n?((n=Uu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bu(t,e,n,r,i,o){var a=2;if(r=t,"function"==typeof t)Vu(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case nt:return Wu(n.children,i,o,e);case at:a=8,i|=7;break;case rt:a=8,i|=1;break;case it:return(t=Uu(12,n,e,8|i)).elementType=it,t.type=it,t.expirationTime=o,t;case ct:return(t=Uu(13,n,e,i)).type=ct,t.elementType=ct,t.expirationTime=o,t;case lt:return(t=Uu(19,n,e,i)).elementType=lt,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case ot:a=10;break t;case st:a=9;break t;case ut:a=11;break t;case ht:a=14;break t;case ft:a=16,r=null;break t;case pt:a=22;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Uu(a,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Wu(t,e,n,r){return(t=Uu(7,t,r,e)).expirationTime=n,t}function zu(t,e,n){return(t=Uu(6,t,null,e)).expirationTime=n,t}function Hu(t,e,n){return(e=Uu(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Qu(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Gu(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Yu(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Ku(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function $u(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Xu(t,e,n,r){var i=e.current,o=au(),a=go.suspense;o=uu(o,i,a);t:if(n){e:{if(Jt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(_i(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(s(171))}if(1===n.tag){var c=n.type;if(_i(c)){n=Ei(n,c,u);break t}}n=u}else n=di;return null===e.context?e.context=n:e.pendingContext=n,(e=ho(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),fo(i,e),cu(i,o),o}function Ju(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Zu(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function tc(t,e){Zu(t,e),(t=t.alternate)&&Zu(t,e)}function ec(t,e,n){var r=new Qu(t,e,n=null!=n&&!0===n.hydrate),i=Uu(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,co(i),t[An]=r.current,n&&0!==e&&function(t,e){var n=Xt(e);Se.forEach((function(t){pe(t,e,n)})),Ie.forEach((function(t){pe(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function nc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function rc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"==typeof i){var a=i;i=function(){var t=Ju(s);a.call(t)}}Xu(e,s,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new ec(t,0,e?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"==typeof i){var u=i;i=function(){var t=Ju(s);u.call(t)}}vu((function(){Xu(e,s,t,i)}))}return Ju(s)}function ic(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(e))throw Error(s(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}ec.prototype.render=function(t){Xu(t,this._internalRoot,null,null)},ec.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Xu(null,t,null,(function(){e[An]=null}))},de=function(t){if(13===t.tag){var e=Xi(au(),150,100);cu(t,e),tc(t,e)}},ye=function(t){13===t.tag&&(cu(t,3),tc(t,3))},ve=function(t){if(13===t.tag){var e=au();cu(t,e=uu(e,t,null)),tc(t,e)}},N=function(t,e,n){switch(e){case"input":if(St(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Dn(r);if(!i)throw Error(s(90));wt(r),St(r,i)}}}break;case"textarea":Ot(t,n);break;case"select":null!=(e=n.value)&&kt(t,!!n.multiple,e,!1)}},D=yu,L=function(t,e,n,r,i){var o=Ma;Ma|=4;try{return Qi(98,t.bind(null,e,n,r,i))}finally{(Ma=o)===xa&&Ki()}},F=function(){(Ma&(1|ka|Aa))===xa&&(function(){if(null!==ru){var t=ru;ru=null,t.forEach((function(t,e){$u(e,t),fu(e)})),Ki()}}(),Au())},M=function(t,e){var n=Ma;Ma|=2;try{return t(e)}finally{(Ma=n)===xa&&Ki()}};var oc={Events:[On,Rn,Dn,I,T,qn,function(t){re(t,Vn)},O,R,$e,se,Au,{current:!1}]};!function(t){var e=t.findFiberByHostInstance;!function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Fu=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},Mu=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}}(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ee(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Pn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,e.createPortal=ic,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"==typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return null===(t=ee(e))?null:t.stateNode},e.flushSync=function(t,e){if((Ma&(ka|Aa))!==xa)throw Error(s(187));var n=Ma;Ma|=1;try{return Qi(99,t.bind(null,e))}finally{Ma=n,Ki()}},e.hydrate=function(t,e,n){if(!nc(e))throw Error(s(200));return rc(null,t,e,!0,n)},e.render=function(t,e,n){if(!nc(e))throw Error(s(200));return rc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!nc(t))throw Error(s(40));return!!t._reactRootContainer&&(vu((function(){rc(null,null,t,!1,(function(){t._reactRootContainer=null,t[An]=null}))})),!0)},e.unstable_batchedUpdates=yu,e.unstable_createPortal=function(t,e){return ic(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nc(n))throw Error(s(200));if(null==t||void 0===t._reactInternalFiber)throw Error(s(38));return rc(t,e,n,!1,r)},e.version="16.14.0"},935:(t,e,n)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(448)},408:(t,e,n)=>{"use strict";var r=n(418),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,v="function"==typeof Symbol&&Symbol.iterator;function g(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function b(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||m}function w(){}function E(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||m}b.prototype.isReactComponent={},b.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(g(85));this.updater.enqueueSetState(this,t,e,"setState")},b.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=b.prototype;var T=E.prototype=new w;T.constructor=E,r(T,b.prototype),T.isPureReactComponent=!0;var C={current:null},S=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function x(t,e,n){var r,i={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)S.call(e,r)&&!I.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:s,ref:a,props:i,_owner:C.current}}function N(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var k=/\/+/g,A=[];function P(t,e,n,r){if(A.length){var i=A.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function O(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>A.length&&A.push(t)}function R(t,e,n,r){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var a=!1;if(null===t)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case o:case s:a=!0}}if(a)return n(r,t,""===e?"."+L(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=e+L(i=t[u],u);a+=R(i,c,n,r)}else if("function"==typeof(c=null===t||"object"!=typeof t?null:"function"==typeof(c=v&&t[v]||t["@@iterator"])?c:null))for(t=c.call(t),u=0;!(i=t.next()).done;)a+=R(i=i.value,c=e+L(i,u++),n,r);else if("object"===i)throw n=""+t,Error(g(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function D(t,e,n){return null==t?0:R(t,"",e,n)}function L(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function F(t,e){t.func.call(t.context,e,t.count++)}function M(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?j(t,r,n,(function(t){return t})):null!=t&&(N(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(k,"$&/")+"/")+n)),r.push(t))}function j(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(k,"$&/")+"/"),D(t,M,e=P(e,o,r,i)),O(e)}var U={current:null};function V(){var t=U.current;if(null===t)throw Error(g(321));return t}var q={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return j(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;D(t,F,e=P(null,null,e,n)),O(e)},count:function(t){return D(t,(function(){return null}),null)},toArray:function(t){var e=[];return j(t,e,null,(function(t){return t})),e},only:function(t){if(!N(t))throw Error(g(143));return t}},e.Component=b,e.Fragment=a,e.Profiler=c,e.PureComponent=E,e.StrictMode=u,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,e.cloneElement=function(t,e,n){if(null==t)throw Error(g(267,t));var i=r({},t.props),s=t.key,a=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,u=C.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)S.call(e,l)&&!I.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:t.type,key:s,ref:a,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:t},t.Consumer=t},e.createElement=x,e.createFactory=function(t){var e=x.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:f,render:t}},e.isValidElement=N,e.lazy=function(t){return{$$typeof:y,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return V().useCallback(t,e)},e.useContext=function(t,e){return V().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return V().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return V().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return V().useLayoutEffect(t,e)},e.useMemo=function(t,e){return V().useMemo(t,e)},e.useReducer=function(t,e,n){return V().useReducer(t,e,n)},e.useRef=function(t){return V().useRef(t)},e.useState=function(t){return V().useState(t)},e.version="16.14.0"},294:(t,e,n)=>{"use strict";t.exports=n(408)},53:(t,e)=>{"use strict";var n,r,i,o,s;if("undefined"==typeof window||"function"!=typeof MessageChannel){var a=null,u=null,c=function(){if(null!==a)try{var t=e.unstable_now();a(!0,t),a=null}catch(t){throw setTimeout(c,0),t}},l=Date.now();e.unstable_now=function(){return Date.now()-l},n=function(t){null!==a?setTimeout(n,0,t):(a=t,setTimeout(c,0))},r=function(t,e){u=setTimeout(t,e)},i=function(){clearTimeout(u)},o=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var h=window.performance,f=window.Date,p=window.setTimeout,d=window.clearTimeout;if("undefined"!=typeof console){var y=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof h&&"function"==typeof h.now)e.unstable_now=function(){return h.now()};else{var v=f.now();e.unstable_now=function(){return f.now()-v}}var g=!1,m=null,_=-1,b=5,w=0;o=function(){return e.unstable_now()>=w},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<t?Math.floor(1e3/t):5};var E=new MessageChannel,T=E.port2;E.port1.onmessage=function(){if(null!==m){var t=e.unstable_now();w=t+b;try{m(!0,t)?T.postMessage(null):(g=!1,m=null)}catch(t){throw T.postMessage(null),t}}else g=!1},n=function(t){m=t,g||(g=!0,T.postMessage(null))},r=function(t,n){_=p((function(){t(e.unstable_now())}),n)},i=function(){d(_),_=-1}}function C(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<x(i,e)))break t;t[r]=e,t[n]=i,n=r}}function S(t){return void 0===(t=t[0])?null:t}function I(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,s=t[o],a=o+1,u=t[a];if(void 0!==s&&0>x(s,n))void 0!==u&&0>x(u,s)?(t[r]=u,t[a]=n,r=a):(t[r]=s,t[o]=n,r=o);else{if(!(void 0!==u&&0>x(u,n)))break t;t[r]=u,t[a]=n,r=a}}}return e}return null}function x(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var N=[],k=[],A=1,P=null,O=3,R=!1,D=!1,L=!1;function F(t){for(var e=S(k);null!==e;){if(null===e.callback)I(k);else{if(!(e.startTime<=t))break;I(k),e.sortIndex=e.expirationTime,C(N,e)}e=S(k)}}function M(t){if(L=!1,F(t),!D)if(null!==S(N))D=!0,n(j);else{var e=S(k);null!==e&&r(M,e.startTime-t)}}function j(t,n){D=!1,L&&(L=!1,i()),R=!0;var s=O;try{for(F(n),P=S(N);null!==P&&(!(P.expirationTime>n)||t&&!o());){var a=P.callback;if(null!==a){P.callback=null,O=P.priorityLevel;var u=a(P.expirationTime<=n);n=e.unstable_now(),"function"==typeof u?P.callback=u:P===S(N)&&I(N),F(n)}else I(N);P=S(N)}if(null!==P)var c=!0;else{var l=S(k);null!==l&&r(M,l.startTime-n),c=!1}return c}finally{P=null,O=s,R=!1}}function U(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var V=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){D||R||(D=!0,n(j))},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return S(N)},e.unstable_next=function(t){switch(O){case 1:case 2:case 3:var e=3;break;default:e=O}var n=O;O=e;try{return t()}finally{O=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=V,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=O;O=t;try{return e()}finally{O=n}},e.unstable_scheduleCallback=function(t,o,s){var a=e.unstable_now();if("object"==typeof s&&null!==s){var u=s.delay;u="number"==typeof u&&0<u?a+u:a,s="number"==typeof s.timeout?s.timeout:U(t)}else s=U(t),u=a;return t={id:A++,callback:o,priorityLevel:t,startTime:u,expirationTime:s=u+s,sortIndex:-1},u>a?(t.sortIndex=u,C(k,t),null===S(N)&&t===S(k)&&(L?i():L=!0,r(M,u-a))):(t.sortIndex=s,C(N,t),D||R||(D=!0,n(j))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();F(t);var n=S(N);return n!==P&&null!==P&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<P.expirationTime||o()},e.unstable_wrapCallback=function(t){var e=O;return function(){var n=O;O=e;try{return t.apply(this,arguments)}finally{O=n}}}},840:(t,e,n)=>{"use strict";t.exports=n(53)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{chartInit:()=>tK,dblClickNodeUpdate:()=>nK,hoverNodeUpdate:()=>eK,selectNodeUpdate:()=>ZY,updateJSON:()=>JY});var t=n(155),e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},e(t,n)};function i(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var f={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},p=function(t,e){if(!t)throw d(e)},d=function(t){return new Error("Firebase Database ("+f.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},y=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},v={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(y(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},g=function(t){try{return v.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function m(t){return _(void 0,t)}function _(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=_(t[n],e[n]));return t}var b=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function w(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function E(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w())}function T(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function C(){return!0===f.NODE_ADMIN}var S=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,I.prototype.create),i}return i(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,e){return t.replace(x,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new S(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}(),x=/\{\$([^}]+)}/g;function N(t){return JSON.parse(t)}function k(t){return JSON.stringify(t)}var A=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=N(g(o[0])||""),n=N(g(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^u&(c^l),s=1518500249):(o=u^c^l,s=1859775393):r<60?(o=u&c|l&(u|c),s=2400959708):(o=u^c^l,s=3395469782),i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new M(t,e);return n.subscribe.bind(n)}var M=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function j(){}var U=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function V(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(r+" argument ")}function q(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(V(t,e,r)+"must be a valid function.")}function B(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(V(t,e,r)+"must be a valid context object.")}var W,z=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},H=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),Q="[DEFAULT]",G=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=Q);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new b;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=o({identifier:Q,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(i);if(!s){if(r)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(Q)}catch(t){}try{for(var r=u(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=c(i.value,2),s=o[0],a=o[1],l=this.normalizeInstanceIdentifier(s);try{var h=this.getOrInitializeService(l);a.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=Q),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return s(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===Q?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:Q:t},t}(),Y=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new G(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function K(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var $,X=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}($||($={}));var J,Z={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},tt=$.INFO,et=((W={})[$.DEBUG]="log",W[$.VERBOSE]="log",W[$.INFO]="info",W[$.WARN]="warn",W[$.ERROR]="error",W),nt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=et[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,K(["["+i+"]  "+t.name+":"],n))}},rt=function(){function t(t){this.name=t,this._logLevel=tt,this._logHandler=nt,this._userLogHandler=null,X.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in $))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Z[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,K([this,$.DEBUG],t)),this._logHandler.apply(this,K([this,$.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,K([this,$.VERBOSE],t)),this._logHandler.apply(this,K([this,$.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,K([this,$.INFO],t)),this._logHandler.apply(this,K([this,$.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,K([this,$.WARN],t)),this._logHandler.apply(this,K([this,$.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,K([this,$.ERROR],t)),this._logHandler.apply(this,K([this,$.ERROR],t))},t}();function it(t){X.forEach((function(e){e.setLogLevel(t)}))}var ot,st=((J={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",J["bad-app-name"]="Illegal App name: '{$appName}",J["duplicate-app"]="Firebase App named '{$appName}' already exists",J["app-deleted"]="Firebase App named '{$appName}' already deleted",J["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",J["invalid-log-argument"]="First argument to `onLog` must be null or a function.",J),at=new I("app","Firebase",st),ut="@firebase/app",ct="[DEFAULT]",lt=((ot={})[ut]="fire-core",ot["@firebase/analytics"]="fire-analytics",ot["@firebase/auth"]="fire-auth",ot["@firebase/database"]="fire-rtdb",ot["@firebase/functions"]="fire-fn",ot["@firebase/installations"]="fire-iid",ot["@firebase/messaging"]="fire-fcm",ot["@firebase/performance"]="fire-perf",ot["@firebase/remote-config"]="fire-rc",ot["@firebase/storage"]="fire-gcs",ot["@firebase/firestore"]="fire-fst",ot["fire-js"]="fire-js",ot["firebase-wrapper"]="fire-js-all",ot),ht=new rt("@firebase/app"),ft=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=m(t),this.container=new Y(e.name),this._addComponent(new H("app",(function(){return o}),"PUBLIC"));try{for(var s=u(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var c=a.value;this._addComponent(c)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=ct),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=ct),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){ht.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw at.create("app-deleted",{appName:this.name_})},t}();ft.prototype.name&&ft.prototype.options||ft.prototype.delete||console.log("dc");var pt=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=ct);var s=o.name;if("string"!=typeof s||!s)throw at.create("bad-app-name",{appName:String(s)});if(P(e,s))throw at.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=lt[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ht.warn(u.join(" "))}o(new H(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:it,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw at.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Z[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:$[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=X;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"7.16.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!P(e,t=t||ct))throw at.create("no-app",{appName:t});return e[t]}function o(o){var s,a,c=o.name;if(n.has(c))return ht.debug("There were multiple attempts to register component "+c+"."),"PUBLIC"===o.type?r[c]:null;if(n.set(c,o),"PUBLIC"===o.type){var l=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[c])throw at.create("invalid-app-argument",{appName:c});return t[c]()};void 0!==o.serviceProps&&_(l,o.serviceProps),r[c]=l,t.prototype[c]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,c).apply(this,o.multipleInstances?t:[])}}try{for(var h=u(Object.keys(e)),f=h.next();!f.done;f=h.next()){var p=f.value;e[p]._addComponent(o)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[c]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(ft);return e.INTERNAL=o(o({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){_(e,t)},createSubscribe:F,ErrorFactory:I,deepExtend:_}),e}(),dt=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ht.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var yt=self.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&ht.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var vt=pt.initializeApp;pt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()&&ht.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),vt.apply(void 0,t)};var gt=pt;!function(t,e){t.INTERNAL.registerComponent(new H("platform-logger",(function(t){return new dt(t)}),"PRIVATE")),t.registerVersion(ut,"0.6.8",void 0),t.registerVersion("fire-js","")}(gt);var mt=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),k(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:N(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),_t=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return P(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),bt=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new mt(e)}}catch(t){}return new _t},wt=bt("localStorage"),Et=bt("sessionStorage"),Tt=new rt("@firebase/database"),Ct=function(){var t=1;return function(){return t++}}(),St=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,p(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new L;n.update(e);var r=n.digest();return v.encodeByteArray(r)},It=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=It.apply(null,i):n+="object"==typeof i?k(i):i,n+=" "}return n},xt=null,Nt=!0,kt=function(t,e){p(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Tt.logLevel=$.VERBOSE,xt=Tt.log.bind(Tt),e&&Et.set("logging_enabled",!0)):"function"==typeof t?xt=t:(xt=null,Et.remove("logging_enabled"))},At=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===Nt&&(Nt=!1,null===xt&&!0===Et.get("logging_enabled")&&kt(!0)),xt){var n=It.apply(null,t);xt(n)}},Pt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];At.apply(void 0,l([t],e))}},Ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+It.apply(void 0,l(t));Tt.error(n)},Rt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+It.apply(void 0,l(t));throw Tt.error(n),new Error(n)},Dt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+It.apply(void 0,l(t));Tt.warn(n)},Lt=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Ft="[MIN_NAME]",Mt="[MAX_NAME]",jt=function(t,e){if(t===e)return 0;if(t===Ft||e===Mt)return-1;if(e===Ft||t===Mt)return 1;var n=ne(t),r=ne(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Ut=function(t,e){return t===e?0:t<e?-1:1},Vt=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+k(e))},qt=function(t){if("object"!=typeof t||null===t)return k(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=k(e[i]),r+=":",r+=qt(t[e[i]]);return r+"}"},Bt=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Wt(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var zt,Ht,Qt,Gt,Yt,Kt,$t,Xt,Jt,Zt,te=function(t){p(!Lt(t),"Invalid JSON number");var e,n,r,i,o;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var a=s.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},ee=new RegExp("^-?(0*)\\d{1,10}$"),ne=function(t){if(ee.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},re=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw Dt("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ie=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},oe=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=jt(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),se=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=z(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=z(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=z(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),ae="firebaseio.com",ue="websocket",ce="long_polling",le=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=wt.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&wt.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(p("string"==typeof t,"typeof type must == string"),p("object"==typeof e,"typeof params must == object"),t===ue)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==ce)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Wt(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),he=function(t){var e=fe(t),n=e.namespace;"firebase.com"===e.domain&&Rt(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||Rt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Dt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new le(e.host,e.secure,n,r,"",n!==e.subdomain),path:new oe(e.pathString)}},fe=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=u(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Dt("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===a||"wss"===a,c=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),o=r}"ns"in p&&(o=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},pe=/[\[\].#$\/\u0000-\u001F\u007F]/,de=/[\[\].#$\u0000-\u001F\u007F]/,ye=10485760,ve=function(t){return"string"==typeof t&&0!==t.length&&!pe.test(t)},ge=function(t){return"string"==typeof t&&0!==t.length&&!de.test(t)},me=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Lt(t)||t&&"object"==typeof t&&P(t,".sv")},_e=function(t,e,n,r,i){i&&void 0===n||be(V(t,e,i),n,r)},be=function(t,e,n){var r=n instanceof oe?new se(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(Lt(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>ye/3&&z(e)>ye)throw new Error(t+"contains a string greater than "+ye+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(Wt(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!ve(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),be(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},we=function(t,e,n,r,i){if(!i||void 0!==n){var o=V(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Wt(n,(function(t,e){var n=new oe(t);if(be(o,e,r.child(n)),".priority"===n.getBack()&&!me(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ve(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(oe.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Ee=function(t,e,n,r){if(!r||void 0!==n){if(Lt(n))throw new Error(V(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!me(n))throw new Error(V(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Te=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(V(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ce=function(t,e,n,r){if(!(r&&void 0===n||ve(n)))throw new Error(V(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Se=function(t,e,n,r){if(!(r&&void 0===n||ge(n)))throw new Error(V(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ie=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},xe=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ve(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ge(t)}(r))throw new Error(V(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ne=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){U("OnDisconnect.cancel",0,1,arguments.length),q("OnDisconnect.cancel",1,t,!0);var e=new b;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){U("OnDisconnect.remove",0,1,arguments.length),Ie("OnDisconnect.remove",this.path_),q("OnDisconnect.remove",1,t,!0);var e=new b;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){U("OnDisconnect.set",1,2,arguments.length),Ie("OnDisconnect.set",this.path_),_e("OnDisconnect.set",1,t,this.path_,!1),q("OnDisconnect.set",2,e,!0);var n=new b;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){U("OnDisconnect.setWithPriority",2,3,arguments.length),Ie("OnDisconnect.setWithPriority",this.path_),_e("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ee("OnDisconnect.setWithPriority",2,e,!1),q("OnDisconnect.setWithPriority",3,n,!0);var r=new b;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(U("OnDisconnect.update",1,2,arguments.length),Ie("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Dt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}we("OnDisconnect.update",1,t,this.path_,!1),q("OnDisconnect.update",2,e,!0);var i=new b;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),ke=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return U("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ae=(zt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ht=0,Qt=[],function(t){var e,n=t===Ht;Ht=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=zt.charAt(t%64),t=Math.floor(t/64);p(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===Qt[e];e--)Qt[e]=0;Qt[e]++}else for(e=0;e<12;e++)Qt[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=zt.charAt(Qt[e]);return p(20===i.length,"nextPushId: Length should be 20."),i}),Pe=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Oe=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Pe(Ft,t),r=new Pe(Ft,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Pe.MIN},t}(),Re=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Gt},set:function(t){Gt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return jt(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw d("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Pe.MIN},e.prototype.maxPost=function(){return new Pe(Mt,Gt)},e.prototype.makePost=function(t,e){return p("string"==typeof t,"KeyIndex indexValue must always be a string."),new Pe(t,Gt)},e.prototype.toString=function(){return".key"},e}(Oe),De=new Re,Le=function(t){return"number"==typeof t?"number:"+te(t):"string:"+t},Fe=function(t){if(t.isLeafNode()){var e=t.val();p("string"==typeof e||"number"==typeof e||"object"==typeof e&&P(e,".sv"),"Priority must be a string or number.")}else p(t===Yt||t.isEmpty(),"priority of unexpected type.");p(t===Yt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Me=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,p(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Fe(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Kt},set:function(t){Kt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(p(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Le(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?te(this.value_):this.value_,this.lazyHash_=St(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(p(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return p(i>=0,"Unknown leaf type: "+n),p(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),je=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?jt(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Pe.MIN},e.prototype.maxPost=function(){return new Pe(Mt,new Me("[PRIORITY-POST]",Xt))},e.prototype.makePost=function(t,e){var n=$t(t);return new Pe(e,new Me("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Oe),Ue=new je,Ve=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),qe=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:We.EMPTY_NODE,this.right=null!=o?o:We.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return We.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return We.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Be=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new qe(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),We=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,qe.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qe.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ve(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ve(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ve(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ve(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Be,t}(),ze=Math.log(2),He=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/ze,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Qe=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new qe(s,o.node,qe.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new qe(s,o.node,qe.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new qe(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,qe.BLACK):(a(h,qe.BLACK),a(h,qe.RED))}return o}(new He(t.length));return new We(r||e,o)},Ge={},Ye=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return p(Ge&&Ue,"ChildrenNode.ts has not been loaded"),Jt=Jt||new t({".priority":Ge},{".priority":Ue})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=O(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof We?e:null},t.prototype.hasIndex=function(t){return P(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){p(e!==De,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],s=!1,a=n.getIterator(Pe.Wrap),u=a.getNext();u;)s=s||e.isDefinedOn(u.node),i.push(u),u=a.getNext();r=s?Qe(i,e.getCompare()):Ge;var c=e.toString(),l=o({},this.indexSet_);l[c]=e;var h=o({},this.indexes_);return h[c]=r,new t(h,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(D(this.indexes_,(function(t,i){var o=O(r.indexSet_,i);if(p(o,"Missing index implementation for "+i),t===Ge){if(o.isDefinedOn(e.node)){for(var s=[],a=n.getIterator(Pe.Wrap),u=a.getNext();u;)u.name!==e.name&&s.push(u),u=a.getNext();return s.push(e),Qe(s,o.getCompare())}return Ge}var c=n.get(e.name),l=t;return c&&(l=l.remove(new Pe(e.name,c))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(D(this.indexes_,(function(t){if(t===Ge)return t;var r=n.get(e.name);return r?t.remove(new Pe(e.name,r)):t})),this.indexSet_)},t}();function Ke(t,e){return jt(t.name,e.name)}function $e(t,e){return jt(t,e)}var Xe=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Fe(this.priorityNode_),this.children_.isEmpty()&&p(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Zt||(Zt=new t(new We($e),null,Ye.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Zt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Zt:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(p(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Pe(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Zt:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;p(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ue,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Le(this.getPriority().val())+":"),this.forEachChild(Ue,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":St(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Pe(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Pe(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Pe(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Pe.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Pe.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Je?-1:0},t.prototype.withIndex=function(e){if(e===De||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===De||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ue),r=e.getIterator(Ue),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===De?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Je=new(function(t){function e(){return t.call(this,new We($e),Xe.EMPTY_NODE,Ye.Default)||this}return i(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Xe.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Xe));Object.defineProperties(Pe,{MIN:{value:new Pe(Ft,Xe.EMPTY_NODE)},MAX:{value:new Pe(Mt,Je)}}),Re.__EMPTY_NODE=Xe.EMPTY_NODE,Me.__childrenNodeConstructor=Xe,Yt=Je,Xt=Je;var Ze=!0;function tn(t,e){if(void 0===e&&(e=null),null===t)return Xe.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),p(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Me(t,tn(e));if(t instanceof Array||!Ze){var n=Xe.EMPTY_NODE;return Wt(t,(function(e,r){if(P(t,e)&&"."!==e.substring(0,1)){var i=tn(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(tn(e))}var r=[],i=!1;if(Wt(t,(function(t,e){if("."!==t.substring(0,1)){var n=tn(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Pe(t,n)))}})),0===r.length)return Xe.EMPTY_NODE;var o=Qe(r,Ke,(function(t){return t.name}),$e);if(i){var s=Qe(r,Ue.getCompare());return new Xe(o,tn(e),new Ye({".priority":s},{".priority":Ue}))}return new Xe(o,tn(e),Ye.Default)}!function(t){$t=t}(tn);var en,nn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?jt(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Pe.MIN},e.prototype.maxPost=function(){return Pe.MAX},e.prototype.makePost=function(t,e){var n=tn(t);return new Pe(e,n)},e.prototype.toString=function(){return".value"},e}(Oe),rn=new nn,on=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,p(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return i(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?jt(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=tn(t),r=Xe.EMPTY_NODE.updateChild(this.indexPath_,n);return new Pe(e,r)},e.prototype.maxPost=function(){var t=Xe.EMPTY_NODE.updateChild(this.indexPath_,Je);return new Pe(Mt,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Oe),sn=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return U("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return U("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return U("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return U("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){U("DataSnapshot.child",0,1,arguments.length),e=String(e),Se("DataSnapshot.child",1,e,!1);var n=new oe(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ue)},t.prototype.hasChild=function(t){U("DataSnapshot.hasChild",1,1,arguments.length),Se("DataSnapshot.hasChild",1,t,!1);var e=new oe(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return U("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;return U("DataSnapshot.forEach",1,1,arguments.length),q("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Ue))}))},t.prototype.hasChildren=function(){return U("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return U("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return U("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),an=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+k(this.snapshot.exportVal())},t}(),un=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),cn=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new an("value",this,new sn(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){p(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new un(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),ln=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,P(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new un(this,t,e):null},t.prototype.createEvent=function(t,e){p(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new an(t.type,this,new sn(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){p(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),hn=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return p(en,"Reference.ts has not been loaded"),en},set:function(t){en=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===De){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ft)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Mt)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ue){if(null!=e&&!me(e)||null!=n&&!me(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(p(t.getIndex()instanceof on||t.getIndex()===rn,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return U("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){U("Query.on",2,4,arguments.length),Te("Query.on",1,e,!1),q("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new cn(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new ln(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){U("Query.off",0,3,arguments.length),Te("Query.off",1,t,!0),q("Query.off",2,e,!0),B("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new cn(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new ln(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;U("Query.once",1,4,arguments.length),Te("Query.once",1,e,!1),q("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=!0,u=new b;u.promise.catch((function(){}));var c=function(t){a&&(a=!1,o.off(e,c),n&&n.bind(s.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if(U("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(U("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(U("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Se("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new oe(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new on(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){U("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(De);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){U("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Ue);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){U("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(rn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),U("Query.startAt",0,2,arguments.length),_e("Query.startAt",1,e,this.path,!0),Ce("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),U("Query.endAt",0,2,arguments.length),_e("Query.endAt",1,e,this.path,!0),Ce("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(U("Query.equalTo",1,2,arguments.length),_e("Query.equalTo",1,t,this.path,!1),Ce("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return U("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return U("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=qt(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(U("Query.isEqual",1,1,arguments.length),!(e instanceof t))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var n=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return n&&r&&i},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,q(t,3,r.cancel,!0),r.context=n,B(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(V(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),fn=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),pn=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),dn=function(t,e,n){return t&&"object"==typeof t?(p(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?yn(t[".sv"],e,n):"object"==typeof t[".sv"]?vn(t[".sv"],e):void p(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},yn=function(t,e,n){if("timestamp"===t)return n.timestamp;p(!1,"Unexpected server value: "+t)},vn=function(t,e,n){t.hasOwnProperty("increment")||p(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&p(!1,"Unexpected increment value: "+r);var i=e.node();if(p(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},gn=function(t,e,n,r){return _n(e,new pn(n,t),r)},mn=function(t,e,n){return _n(t,new fn(e),n)};function _n(t,e,n){var r,i=t.getPriority().val(),o=dn(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=dn(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Me(a,tn(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Me(o))),u.forEachChild(Ue,(function(t,i){var o=_n(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var bn,wn=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Ue,(function(t,e){n.remember(new oe(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new oe(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(bn||(bn={}));var En,Tn,Cn=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,p(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),Sn=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=bn.ACK_USER_WRITE,this.source=Cn.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return p(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new oe(e));return new t(oe.Empty,n,this.revert)}return p(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),In=function(){function t(t,e){void 0===e&&(En||(En=new We(Ut)),e=En),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return Wt(e,(function(t,e){n=n.set(new oe(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:oe.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new oe(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(oe.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,oe.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,oe.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(oe.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),xn=function(){function t(t,e){this.source=t,this.path=e,this.type=bn.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,oe.Empty):new t(this.source,this.path.popFront())},t}(),Nn=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=bn.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,oe.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),kn=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=bn.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new oe(e));return n.isEmpty()?null:n.value?new Nn(this.source,oe.Empty,n.value):new t(this.source,oe.Empty,n)}return p(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),An=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Pn=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new An(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new An(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new An(Xe.EMPTY_NODE,!1,!1),new An(Xe.EMPTY_NODE,!1,!1)),t}(),On=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),Rn=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){p(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(On.childRemovedChange(e,s)):p(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(On.childAddedChange(e,n)):o.trackChildChange(On.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ue,(function(t,r){e.hasChild(t)||n.trackChildChange(On.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Ue,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(On.childChangedChange(e,r,i))}else n.trackChildChange(On.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Xe.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Dn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;p(e===On.CHILD_ADDED||e===On.CHILD_CHANGED||e===On.CHILD_REMOVED,"Only child changes supported for tracking"),p(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===On.CHILD_ADDED&&i===On.CHILD_REMOVED)this.changeMap.set(n,On.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===On.CHILD_REMOVED&&i===On.CHILD_ADDED)this.changeMap.delete(n);else if(e===On.CHILD_REMOVED&&i===On.CHILD_CHANGED)this.changeMap.set(n,On.childRemovedChange(n,r.oldSnap));else if(e===On.CHILD_CHANGED&&i===On.CHILD_ADDED)this.changeMap.set(n,On.childAddedChange(n,t.snapshotNode));else{if(e!==On.CHILD_CHANGED||i!==On.CHILD_CHANGED)throw d("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,On.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ln=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Fn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new An(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Mn=function(t,e){this.viewCache=t,this.changes=e},jn=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){p(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),p(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,a=new Dn;if(n.type===bn.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,a):(p(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,s,a))}else if(n.type===bn.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,a):(p(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,s,a))}else if(n.type===bn.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,r,i,a):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,a)}else{if(n.type!==bn.LISTEN_COMPLETE)throw d("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,a)}var h=a.getChanges();return t.maybeAddValueEvent_(e,o,h),new Mn(o,h)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(On.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(p(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof Xe?u:Xe.EMPTY_NODE,l=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){p(1===e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();a=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,d,a);s=null!=y?this.filter_.updatePriority(d,y):o.getNode()}else{var v=e.popFront(),g=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);g=null!=m?o.getNode().getImmediateChild(f).updateChild(v,m):o.getNode().getImmediateChild(f)}else g=n.calcCompleteChild(f,t.getServerCache());s=null!=g?this.filter_.updateChild(o.getNode(),f,g,v,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,Ln,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new Fn(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,y,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Fn(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):Xe.EMPTY_NODE}if(f.equals(p))s=t;else{var y=this.filter_.updateChild(u.getNode(),l,p,h,c,o);s=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:In.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new oe(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new oe(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=In.Empty;return a.getNode().forEachChild(De,(function(t,e){u=u.set(new oe(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=In.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ln,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new Fn(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();p(l instanceof Xe,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}u=this.filter_.updateFullNode(a,c,i)}else{var h=e.getFront(),f=n.calcCompleteChild(h,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(h)&&(f=a.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(a,h,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(a,h,Xe.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(oe.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Un=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===On.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(On.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,On.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,On.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,On.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,On.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,On.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw d("Should only compare child_ events.");var n=new Pe(t.childName,t.snapshotNode),r=new Pe(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Vn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Rn(n.getIndex()),i=n.getNodeFilter();this.processor_=new jn(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Xe.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Xe.EMPTY_NODE,s.getNode(),null),c=new An(a,o.isFullyInitialized(),r.filtersNodes()),l=new An(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Pn(l,c),this.eventGenerator_=new Un(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){p(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===bn.MERGE&&null!==t.source.queryId&&(p(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),p(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),p(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ue,(function(t,e){n.push(On.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(On.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),qn=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return p(Tn,"Reference.ts has not been loaded"),Tn},set:function(t){p(!Tn,"__referenceConstructor has already been defined"),Tn=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return p(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var c=u(this.views.values()),l=c.next();!l.done;l=c.next())s=l.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return a},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Xe?(a=n.calcCompleteEventChildren(r),u=!1):(a=Xe.EMPTY_NODE,u=!1);var c=new Pn(new An(a,u,!1),new An(r,i,!1));s=new Vn(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),a=[],l=[],h=this.hasCompleteView();if("default"===s)try{for(var f=u(this.views.entries()),p=f.next();!p.done;p=f.next()){var d=c(p.value,2),y=d[0],v=d[1];l=l.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(y),v.getQuery().getQueryParams().loadsAllData()||a.push(v.getQuery()))}}catch(t){i={error:t}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}else(v=this.views.get(s))&&(l=l.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(s),v.getQuery().getQueryParams().loadsAllData()||a.push(v.getQuery())));return h&&!this.hasCompleteView()&&a.push(new t.__referenceConstructor(e.repo,e.path)),{removed:a,events:l}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=u(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=u(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=u(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Bn=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new In(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=oe.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new In(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return Wt(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,In.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(oe.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Ue,(function(e,n){t.push(new Pe(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Pe(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new In(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return Wn(oe.Empty,this.writeTree_,t)},t.Empty=new t(new In(null)),t}();function Wn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(p(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Wn(t.child(e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var zn=function(){function t(){this.visibleWrites_=Bn.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Hn(t,this)},t.prototype.addOverwrite=function(t,e,n,r){p(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){p(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));p(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var a=this.allWrites_[s];a.visible&&(s>=n&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Wt(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(oe.Empty)){var s=t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);return c=n||Xe.EMPTY_NODE,s.apply(c)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(oe.Empty)){var c=n||Xe.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Xe.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Ue,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Ue,(function(t,e){var r=i.childCompoundWrite(new oe(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){p(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(oe.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,oe.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Bn.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=oe.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=oe.relativePath(s,n),r=r.addWrite(oe.Empty,o.snap.getChild(a)));else{if(!o.children)throw d("WriteRecord should have .snap or .children");if(n.contains(s))a=oe.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=oe.relativePath(s,n)).isEmpty())r=r.addWrites(oe.Empty,o.children);else{var u=O(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(oe.Empty,c)}}}}}return r},t}(),Hn=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Qn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=In.Empty,this.pendingWriteTree_=new zn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Nn(Cn.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=In.fromObject(e);return this.applyOperationToSyncPoints_(new kn(Cn.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=In.Empty;return null!=n.snap?r=r.set(oe.Empty,!0):Wt(n.children,(function(t,e){r=r.set(new oe(t),e)})),this.applyOperationToSyncPoints_(new Sn(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Nn(Cn.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=In.fromObject(e);return this.applyOperationToSyncPoints_(new kn(Cn.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new xn(Cn.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=oe.relativePath(s,e),c=new Nn(Cn.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=oe.relativePath(s,e),c=In.fromObject(n),l=new kn(Cn.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=oe.relativePath(o,e),u=new xn(Cn.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=oe.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var s,a=this.syncPointTree_.get(r);a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(oe.Empty)):(a=new qn,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i?s=!0:(s=!1,i=Xe.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(oe.Empty);n&&(i=i.updateImmediateChild(t,n))})));var u=a.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);p(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(c,l),this.tagToQueryMap.set(l,c)}var h=this.pendingWriteTree_.childWrites(r),f=a.addEventRegistration(e,n,h,i,s);if(!u&&!o){var d=a.viewForQuery(e);f=f.concat(this.setupListener_(e,d))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var y=p[d],v=y.getQuery(),g=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),g.hashFn,g.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=oe.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Wt(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(r);if(i)p(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),Wt(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=u[c];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Xe.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return p(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new oe(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);p(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(oe.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(oe.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(oe.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(oe.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(oe.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Gn=function(){function t(){this.rootNode_=Xe.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Yn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(At("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Dt(t)},t}(),Kn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),P(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return m(this.counters_)},t}(),$n=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Kn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Xn=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=o({},t);return this.last_&&Wt(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Jn=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Xn(t);var n=1e4+2e4*Math.random();ie(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Wt(e,(function(e,i){i>0&&P(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),ie(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Zn=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new tr(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),tr=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();xt&&At("event: "+e.toString()),re(n)}}},t.prototype.getPath=function(){return this.path_},t}(),er=function(){function t(t){this.allowedEvents_=t,this.listeners_={},p(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=l(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){p(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),nr=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return i(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return p("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(er),rr=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||E()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return i(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return p("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(er),ir=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&re((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),or="start",sr=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pt(t),this.stats_=$n.getCollection(e),this.urlFn=function(t){return e.connectionURL(ce,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ir(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new ar((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=c(t,5),i=r[0],o=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===or)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=c(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={};t[or]="t",t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(ae)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=k(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=y(e),v.encodeByteArray(n,!0)),i=Bt(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=k(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),ar=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Ct(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){At("frame writing exception"),t.stack&&At(t.stack),At(t)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||At("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){At("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),ur="",cr=null;"undefined"!=typeof MozWebSocket?cr=MozWebSocket:"undefined"!=typeof WebSocket&&(cr=WebSocket);var lr=function(){function e(t,n,r,i,o){this.connId=t,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pt(this.connId),this.stats_=$n.getCollection(n),this.connURL=e.connectionURL_(n,i,o)}return e.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(ae)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(ue,r)},e.prototype.open=function(e,n){var r=this;this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wt.set("previous_websocket_failure",!0);try{if(C()){var i=f.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+ur+"/"+t.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}},s=t.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(o.proxy={origin:a}),this.mySock=new cr(this.connURL,[],o)}else o={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new cr(this.connURL,[],o)}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&r.log_(e),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==cr&&!e.forceDisallow_},e.previouslyFailed=function(){return wt.isInMemoryStorage||!0===wt.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){wt.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=N(e);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(p(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(t){this.resetKeepAlive();var e=k(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Bt(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),hr=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[sr,lr]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=lr&&lr.isAvailable(),o=i&&!lr.previouslyFailed();if(e.webSocketOnly&&(i||Dt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[lr];else{var s=this.transports_=[];try{for(var a=u(t.ALL_TRANSPORTS),c=a.next();!c.done;c=a.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),fr=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pt("c:"+this.id+":"),this.transportManager_=new hr(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ie((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Vt("t",t),n=Vt("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Vt("t",t),n=Vt("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=Vt("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Ot("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ot("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Dt("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ie((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ie((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),pr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),dr=1e3,yr=function(t){function e(n,r,i,o,s,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=s,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=Pt("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=dr,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!C())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),nr.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&rr.getInstance().on("online",c.onOnline_,c),c}return i(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_(k(i)),p(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),p(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),p(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&P(t,"w")){var n=O(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();Dt("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=A(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=A(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),p(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+k(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Ot("Unrecognized action received from server: "+k(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;p(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=dr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=dr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())};this.realtime_={close:c,sendRequest:function(t){p(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(e){a?At("getToken() completed but was canceled"):(At("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new fr(i,o.repoInfo_,o.applicationId_,t,n,r,(function(t){Dt(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),s))})).then(null,(function(t){o.log_("Failed to get token: "+t),a||c()}))}},e.prototype.interrupt=function(t){At("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){At("Resuming connection for reason: "+t),delete this.interruptReasons_[t],R(this.interruptReasons_)&&(this.reconnectDelay_=dr,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return qt(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new oe(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){At("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=u(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,u(s.values())),c=a.next();!c.done;c=a.next()){var l=c.value;this.sendListen_(l)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+ur.replace(/\./g,"-")]=1,E()?t["framework.cordova"]=1:T()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=rr.getInstance().currentlyOnline();return R(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(pr),vr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=Pt("p:rest:"),i.listens_={},i}return i(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(p(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=e.getListenId_(t,r),u={};this.listens_[a]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",c,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),O(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(a.status>=200&&a.status<300){try{t=N(a.responseText)}catch(t){Dt("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Dt("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},e}(pr),gr="repo_interrupt",mr=function(){function t(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Zn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new wn,this.persistentConnection_=null;var o=new Yn(n,r);if(this.stats_=$n.getCollection(t),e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new vr(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var s=n.options.databaseAuthVariableOverride;if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{k(s)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new yr(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,s),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=$n.getOrCreateReporter(t,(function(){return new Jn(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new Gn,this.infoSyncTree_=new Qn({startListening:function(t,e,n,r){var o=[],s=i.infoData_.getNode(t.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Qn({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new oe(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new oe(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=D(e,(function(t){return tn(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=tn(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=D(e,(function(t){return tn(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=tn(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;Wt(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new oe("/.info/"+t),r=tn(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=tn(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=mn(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||Dt("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(Wt(e,(function(e,n){i=!1,s[e]=gn(t.child(e),tn(n),r.serverSyncTree_,o)})),i)At("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||Dt("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),Wt(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new wn;this.onDisconnect_.forEachTree(oe.Empty,(function(r,i){var o=gn(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(oe.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new wn,this.eventQueue_.raiseEventsForChangedPath(oe.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=tn(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=tn(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(R(e))return At("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&Wt(e,(function(e,n){var i=tn(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(gr)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(gr)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Xn(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);Wt(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),At.apply(void 0,l([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&re((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new kr(this))},enumerable:!1,configurable:!0}),t}(),_r=function(){function t(e){this.indexedFilter_=new Rn(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Pe(e,n))||(n=Xe.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Xe.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Xe.EMPTY_NODE);var i=this;return e.forEachChild(Ue,(function(t,e){i.matches(new Pe(t,e))||(r=r.updateImmediateChild(t,Xe.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),br=function(){function t(t){this.rangedFilter_=new _r(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Pe(e,n))||(n=Xe.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Xe.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Xe.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Xe.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Xe.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;p(a.numChildren()===this.limit_,"");var u=new Pe(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var h=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(On.childChangedChange(e,n,h)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(On.childRemovedChange(e,h));var y=a.updateImmediateChild(e,Xe.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(On.childAddedChange(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(On.childRemovedChange(c.name,c.node)),i.trackChildChange(On.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Xe.EMPTY_NODE)):t},t}(),wr=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ue}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return p(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return p(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ft},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return p(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return p(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mt},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return p(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Ue&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ue},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Rn(this.getIndex()):this.hasLimit()?new br(this):new _r(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Ue?e=n.PRIORITY_INDEX:this.index_===rn?e=n.VALUE_INDEX:this.index_===De?e=n.KEY_INDEX:(p(this.index_ instanceof on,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=k(e),this.startSet_&&(r[n.START_AT]=k(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+k(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=k(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+k(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),Er=function(t){function e(e,n){if(!(e instanceof mr))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,wr.DEFAULT,!1)||this}return i(e,t),e.prototype.getKey=function(){return U("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return U("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof oe||(null===this.path.getFront()?function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Se("Reference.child",1,n,!1)}(0,0,t):Se("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){U("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){U("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){U("Reference.set",1,2,arguments.length),Ie("Reference.set",this.path),_e("Reference.set",1,t,this.path,!1),q("Reference.set",2,e,!0);var n=new b;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(U("Reference.update",1,2,arguments.length),Ie("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Dt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}we("Reference.update",1,t,this.path,!1),q("Reference.update",2,e,!0);var i=new b;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(U("Reference.setWithPriority",2,3,arguments.length),Ie("Reference.setWithPriority",this.path),_e("Reference.setWithPriority",1,t,this.path,!1),Ee("Reference.setWithPriority",2,e,!1),q("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new b;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return U("Reference.remove",0,1,arguments.length),Ie("Reference.remove",this.path),q("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(U("Reference.transaction",1,3,arguments.length),Ie("Reference.transaction",this.path),q("Reference.transaction",1,t,!1),q("Reference.transaction",2,e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(V("Reference.transaction",3,true)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new b;return"function"==typeof e&&r.promise.catch((function(){})),this.repo.startTransaction(this.path,t,(function(t,n,i){t?r.reject(t):r.resolve(new ke(n,i)),"function"==typeof e&&e(t,n,i)}),n),r.promise},e.prototype.setPriority=function(t,e){U("Reference.setPriority",1,2,arguments.length),Ie("Reference.setPriority",this.path),Ee("Reference.setPriority",1,t,!1),q("Reference.setPriority",2,e,!0);var n=new b;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){U("Reference.push",0,2,arguments.length),Ie("Reference.push",this.path),_e("Reference.push",1,t,this.path,!0),q("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Ae(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return Ie("Reference.onDisconnect",this.path),new Ne(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(hn);hn.__referenceConstructor=Er,qn.__referenceConstructor=Er;var Tr,Cr=function(){this.children={},this.childCount=0,this.value=null},Sr=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Cr),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof oe?e:new oe(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,O(r.node_.children,i)||new Cr),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){p(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;Wt(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new oe(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=P(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(Tr||(Tr={})),mr.MAX_TRANSACTION_RETRIES_=25,mr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Sr},mr.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new Er(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:Ct(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new sn(s.currentInputSnapshot,new Er(this,s.path),Ue);s.onComplete(null,!1,c)}}else{be("transaction failed: Data returned ",u,s.path),s.status=Tr.RUN;var l=this.transactionQueueTree_.subTree(t),h=l.getValue()||[];h.push(s),l.setValue(h);var f=void 0;"object"==typeof u&&null!==u&&P(u,".priority")?(f=O(u,".priority"),p(me(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(t)||Xe.EMPTY_NODE).getPriority().val();var d=this.generateServerValues(),y=tn(u,f),v=mn(y,a,d);s.currentOutputSnapshotRaw=y,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var g=this.serverSyncTree_.applyUserOverwrite(t,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,g),this.sendReadyTransactions_()}},mr.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Xe.EMPTY_NODE},mr.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);p(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===Tr.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},mr.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];p(u.status===Tr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Tr.SENT,u.retryCount++;var c=oe.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;this.server_.put(h.toString(),l,(function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Tr.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new Er(n,e[s].path),c=new sn(a,u,Ue);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)re(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===Tr.SENT_NEEDS_ABORT?e[s].status=Tr.NEEDS_ABORT:e[s].status=Tr.RUN;else for(Dt("transaction at "+h.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=Tr.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),s)},mr.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},mr.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===Tr.RUN})),s=o.map((function(t){return t.currentWriteId})),a=0;a<t.length;a++){var u=t[a],c=oe.relativePath(e,u.path),l=!1,h=void 0;if(p(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===Tr.NEEDS_ABORT)l=!0,h=u.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else if(u.status===Tr.RUN)if(u.retryCount>=mr.MAX_TRANSACTION_RETRIES_)l=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else{var f=this.getLatestState_(u.path,s);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){be("transaction failed: Data returned ",d,u.path);var y=tn(d);"object"==typeof d&&null!=d&&P(d,".priority")||(y=y.updatePriority(f.getPriority()));var v=u.currentWriteId,g=this.generateServerValues(),m=mn(y,f,g);u.currentOutputSnapshotRaw=y,u.currentOutputSnapshotResolved=m,u.currentWriteId=this.getNextWriteId_(),s.splice(s.indexOf(v),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(u.path,m,u.currentWriteId,u.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(v,!0))}else l=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],l&&(t[a].status=Tr.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===h){var _=new Er(this,t[a].path),b=t[a].currentInputSnapshot,w=new sn(b,_,Ue);r.push(t[a].onComplete.bind(null,null,!1,w))}else r.push(t[a].onComplete.bind(null,new Error(h),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<r.length;a++)re(r[a]);this.sendReadyTransactions_()}},mr.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},mr.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},mr.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},mr.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Tr.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},mr.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},mr.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===Tr.SENT_NEEDS_ABORT||(e[o].status===Tr.SENT?(p(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=Tr.SENT_NEEDS_ABORT,e[o].abortReason="set"):(p(e[o].status===Tr.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)re(n[o])}};var Ir,xr="databaseURL",Nr=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return Ir||(Ir=new e),Ir},e.prototype.interrupt=function(){var t,e,n,r;try{for(var i=u(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,u(Object.keys(this.repos_[s]))),c=a.next();!c.done;c=a.next()){var l=c.value;this.repos_[s][l].interrupt()}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e.prototype.resume=function(){var t,e,n,r;try{for(var i=u(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,u(Object.keys(this.repos_[s]))),c=a.next();!c.done;c=a.next()){var l=c.value;this.repos_[s][l].resume()}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e.prototype.databaseFromApp=function(e,n,r){var i=r||e.options[xr];void 0===i&&Rt("Can't determine Firebase Database URL.  Be sure to include "+xr+" option when calling firebase.initializeApp().");var o=he(i),s=o.repoInfo,a=void 0;return void 0!==t&&(a=t.env.FIREBASE_DATABASE_EMULATOR_HOST),a&&(i="http://"+a+"?ns="+s.namespace,s=(o=he(i)).repoInfo),xe("Invalid Firebase Database URL",1,o),o.path.isEmpty()||Rt("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(s,e,n).database},e.prototype.deleteRepo=function(t){var e=O(this.repos_,t.app.name);e&&O(e,t.repoInfo_.toURLString())===t||Rt("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},e.prototype.createRepo=function(t,e,n){var r=O(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=O(r,t.toURLString());return i&&Rt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new mr(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},e.prototype.forceRestClient=function(t){this.useRestClient_=t},e}(),kr=function(){function t(t){this.repo_=t,t instanceof mr||Rt("Don't call new Database() directly - please use firebase.database()."),this.root_=new Er(t,oe.Empty),this.INTERNAL=new Ar(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),U("database.ref",0,1,arguments.length),t instanceof Er?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),U(e,1,1,arguments.length);var n=he(t);xe(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Rt(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&Rt("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){U("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){U("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Ar=function(){function t(t){this.database=t}return t.prototype.delete=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.database.checkDeleted_("delete"),Nr.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),Pr=Object.freeze({__proto__:null,forceLongPolling:function(){lr.forceDisallow(),sr.forceAllow()},forceWebSockets:function(){sr.forceDisallow()},isWebSocketsAvailable:function(){return lr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),Or=yr;yr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},yr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Rr=fr,Dr=le,Lr=Object.freeze({__proto__:null,DataConnection:Or,RealTimeConnection:Rr,hijackHash:function(t){var e=yr.prototype.put;return yr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){yr.prototype.put=e}},ConnectionTarget:Dr,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Nr.getInstance().forceRestClient(t)}}),Fr=kr.ServerValue;function Mr(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}!function(t){var e;e=t.SDK_VERSION,ur=e,t.INTERNAL.registerComponent(new H("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Nr.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Er,Query:hn,Database:kr,DataSnapshot:sn,enableLogging:kt,INTERNAL:Pr,ServerValue:Fr,TEST_ACCESS:Lr}).setMultipleInstances(!0)),t.registerVersion("@firebase/database","0.6.7")}(gt);var jr,Ur="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Vr=Vr||{},qr=Ur||self;function Br(){}function Wr(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function zr(t){var e=Wr(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Hr(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Qr="closure_uid_"+(1e9*Math.random()>>>0),Gr=0;function Yr(t,e,n){return t.call.apply(t.bind,arguments)}function Kr(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function $r(t,e,n){return($r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yr:Kr).apply(null,arguments)}function Xr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var Jr=Date.now||function(){return+new Date};function Zr(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function ti(){this.j=this.j,this.i=this.i}ti.prototype.j=!1,ti.prototype.da=function(){!this.j&&(this.j=!0,this.C(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Qr)&&t[Qr]||(t[Qr]=++Gr)}(this)},ti.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ei=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ni=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ri(t){return Array.prototype.concat.apply([],arguments)}function ii(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function oi(t){return/^[\s\xa0]*$/.test(t)}var si,ai=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ui(t,e){return-1!=t.indexOf(e)}function ci(t,e){return t<e?-1:t>e?1:0}t:{var li=qr.navigator;if(li){var hi=li.userAgent;if(hi){si=hi;break t}}si=""}function fi(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function pi(t){var e={};for(var n in t)e[n]=t[n];return e}var di="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yi(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<di.length;o++)n=di[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vi(t){return vi[" "](t),t}vi[" "]=Br;var gi,mi=ui(si,"Opera"),_i=ui(si,"Trident")||ui(si,"MSIE"),bi=ui(si,"Edge"),wi=bi||_i,Ei=ui(si,"Gecko")&&!(ui(si.toLowerCase(),"webkit")&&!ui(si,"Edge"))&&!(ui(si,"Trident")||ui(si,"MSIE"))&&!ui(si,"Edge"),Ti=ui(si.toLowerCase(),"webkit")&&!ui(si,"Edge");function Ci(){var t=qr.document;return t?t.documentMode:void 0}t:{var Si="",Ii=function(){var t=si;return Ei?/rv:([^\);]+)(\)|;)/.exec(t):bi?/Edge\/([\d\.]+)/.exec(t):_i?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Ti?/WebKit\/(\S+)/.exec(t):mi?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ii&&(Si=Ii?Ii[1]:""),_i){var xi=Ci();if(null!=xi&&xi>parseFloat(Si)){gi=String(xi);break t}}gi=Si}var Ni,ki={};function Ai(t){return function(t,e){var n=ki;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=ai(String(gi)).split("."),r=ai(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ci(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ci(0==s[2].length,0==a[2].length)||ci(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}qr.document&&_i?Ni=Ci()||parseInt(gi,10)||void 0:Ni=void 0;var Pi=Ni,Oi=!_i||9<=Number(Pi),Ri=_i&&!Ai("9"),Di=function(){if(!qr.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{qr.addEventListener("test",Br,e),qr.removeEventListener("test",Br,e)}catch(t){}return t}();function Li(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Fi(t,e){if(Li.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ei){t:{try{vi(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Mi[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Li.prototype.b=function(){this.defaultPrevented=!0},Zr(Fi,Li);var Mi={2:"touch",3:"pen",4:"mouse"};Fi.prototype.b=function(){Fi.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ri)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ji="closure_listenable_"+(1e6*Math.random()|0),Ui=0;function Vi(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++Ui,this.V=this.X=!1}function qi(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function Bi(t){this.src=t,this.a={},this.b=0}function Wi(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=ei(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(qi(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function zi(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}Bi.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=zi(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new Vi(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var Hi="closure_lm_"+(1e6*Math.random()|0),Qi={};function Gi(t,e,n,r,i){if(r&&r.once)return Ki(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Gi(t,e[o],n,r,i);return null}return n=ro(n),t&&t[ji]?t.ra(e,n,Hr(r)?!!r.capture:!!r,i):Yi(t,e,n,!1,r,i)}function Yi(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Hr(i)?!!i.capture:!!i;if(s&&!Oi)return null;var a=eo(t);if(a||(t[Hi]=a=new Bi(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=to,e=Oi?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Di||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ji(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ki(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ki(t,e[o],n,r,i);return null}return n=ro(n),t&&t[ji]?t.sa(e,n,Hr(r)?!!r.capture:!!r,i):Yi(t,e,n,!0,r,i)}function $i(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)$i(t,e[o],n,r,i);else r=Hr(r)?!!r.capture:!!r,n=ro(n),t&&t[ji]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=zi(o=t.a[e],n,r,i))&&(qi(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=eo(t))&&(e=t.a[e.toString()],t=-1,e&&(t=zi(e,n,r,i)),(n=-1<t?e[t]:null)&&Xi(n))}function Xi(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[ji])Wi(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ji(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=eo(e))?(Wi(n,t),0==n.b&&(n.src=null,e[Hi]=null)):qi(t)}}}function Ji(t){return t in Qi?Qi[t]:Qi[t]="on"+t}function Zi(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&Xi(t),n.call(r,e)}function to(t,e){if(t.V)return!0;if(!Oi){if(!e)t:{e=["window","event"];for(var n=qr,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Zi(t,e=new Fi(e,this))}return Zi(t,new Fi(e,this))}function eo(t){return(t=t[Hi])instanceof Bi?t:null}var no="__closure_events_fn_"+(1e9*Math.random()>>>0);function ro(t){return"function"==Wr(t)?t:(t[no]||(t[no]=function(e){return t.handleEvent(e)}),t[no])}function io(){ti.call(this),this.c=new Bi(this),this.J=this,this.A=null}function oo(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.V&&s.capture==n){var a=s.listener,u=s.aa||s.src;s.X&&Wi(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Zr(io,ti),io.prototype[ji]=!0,(jr=io.prototype).addEventListener=function(t,e,n,r){Gi(this,t,e,n,r)},jr.removeEventListener=function(t,e,n,r){$i(this,t,e,n,r)},jr.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new Li(t,n);else if(t instanceof Li)t.target=t.target||n;else{var i=t;yi(t=new Li(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=oo(s,r,!0,t)&&i}if(i=oo(s=t.a=n,r,!0,t)&&i,i=oo(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=oo(s=t.a=e[o],r,!1,t)&&i;return i},jr.C=function(){if(io.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)qi(n[r]);delete e.a[t],e.b--}}this.A=null},jr.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},jr.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var so=qr.JSON.stringify;function ao(){this.b=this.a=null}var uo,co=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new ho}),(function(t){t.reset()}),100);function lo(){var t=vo,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ho(){this.next=this.b=this.a=null}function fo(t){qr.setTimeout((function(){throw t}),0)}function po(t,e){uo||function(){var t=qr.Promise.resolve(void 0);uo=function(){t.then(go)}}(),yo||(uo(),yo=!0),vo.add(t,e)}ao.prototype.add=function(t,e){var n=co.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ho.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ho.prototype.reset=function(){this.next=this.b=this.a=null};var yo=!1,vo=new ao;function go(){for(var t;t=lo();){try{t.a.call(t.b)}catch(t){fo(t)}var e=co;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}yo=!1}function mo(t,e){io.call(this),this.b=t||1,this.a=e||qr,this.f=$r(this.Ua,this),this.g=Jr()}function _o(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function bo(t,e,n){if("function"==Wr(t))n&&(t=$r(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=$r(t.handleEvent,t)}return 2147483647<Number(e)?-1:qr.setTimeout(t,e||0)}function wo(t,e,n){ti.call(this),this.f=null!=n?$r(t,n):t,this.c=e,this.b=$r(this.Pa,this),this.a=[]}function Eo(t){t.T=bo(t.b,t.c),t.f.apply(null,t.a)}function To(t){ti.call(this),this.b=t,this.a={}}Zr(mo,io),(jr=mo.prototype).Z=!1,jr.L=null,jr.Ua=function(){if(this.Z){var t=Jr()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(_o(this),this.start()))}},jr.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=Jr())},jr.C=function(){mo.M.C.call(this),_o(this),delete this.a},Zr(wo,ti),(jr=wo.prototype).ba=!1,jr.T=null,jr.Ia=function(t){this.a=arguments,this.T?this.ba=!0:Eo(this)},jr.C=function(){wo.M.C.call(this),this.T&&(qr.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},jr.Pa=function(){this.T=null,this.ba&&(this.ba=!1,Eo(this))},Zr(To,ti);var Co=[];function So(t,e,n,r){Array.isArray(n)||(n&&(Co[0]=n.toString()),n=Co);for(var i=0;i<n.length;i++){var o=Gi(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Io(t){fi(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Xi(t)}),t),t.a={}}function xo(){}To.prototype.C=function(){To.M.C.call(this),Io(this)},To.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var No=null;function ko(){return No=No||new io}function Ao(t){Li.call(this,"serverreachability",t)}function Po(t){var e=ko();e.dispatchEvent(new Ao(e,t))}function Oo(t){Li.call(this,"statevent",t)}function Ro(t){var e=ko();e.dispatchEvent(new Oo(e,t))}function Do(t){Li.call(this,"timingevent",t)}function Lo(t,e){if("function"!=Wr(t))throw Error("Fn must not be null and must be a function");return qr.setTimeout((function(){t()}),e)}Zr(Ao,Li),Zr(Oo,Li),Zr(Do,Li);var Fo={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},Mo={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function jo(){}function Uo(t){var e;return(e=t.a)||(e=t.a={}),e}function Vo(){}jo.prototype.a=null;var qo,Bo={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function Wo(){Li.call(this,"d")}function zo(){Li.call(this,"c")}function Ho(){}function Qo(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new To(this),this.N=Go,t=wi?125:void 0,this.O=new mo(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}Zr(Wo,Li),Zr(zo,Li),Zr(Ho,jo),qo=new Ho;var Go=45e3,Yo={},Ko={};function $o(t,e,n){t.B=1,t.f=ms(fs(e)),t.j=n,t.F=!0,Xo(t,null)}function Xo(t,e){t.s=Jr(),ts(t),t.A=fs(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),Ps(n.b,"t",r),t.w=0,t.a=Ea(t.g,t.g.w?e:null),0<t.J&&(t.D=new wo($r(t.ya,t,t.a),t.J)),So(t.G,t.a,"readystatechange",t.Sa),e=t.m?pi(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),Po(1)}function Jo(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=Zo(t,n);if(i==Ko){4==e&&(t.c=4,Ro(14),r=!1);break}if(i==Yo){t.c=4,Ro(15),r=!1;break}os(t,i)}4==e&&0==n.length&&(t.c=1,Ro(16),r=!1),t.b=t.b&&r,r||(is(t),rs(t))}function Zo(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?Ko:(n=Number(e.substring(n,r)),isNaN(n)?Yo:(r+=1)+n>e.length?Ko:(e=e.substr(r,n),t.w=r+n,e))}function ts(t){t.P=Jr()+t.N,es(t,t.N)}function es(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=Lo($r(t.Qa,t),e)}function ns(t){t.h&&(qr.clearTimeout(t.h),t.h=null)}function rs(t){0==t.g.u||t.l||ga(t.g,t)}function is(t){ns(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,_o(t.O),Io(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function os(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||js(n.b,t)))if(n.A=t.H,!t.o&&js(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;va(n),n.a.cancel(),n.a=null}ya(n),Ro(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=Lo($r(n.Na,n),6e3));if(1>=Ms(n.b)&&n.O){try{n.O()}catch(t){}n.O=void 0}}else _a(n,11)}else if((t.o||n.a==t)&&va(n),!oi(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.G=i[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var s=i[5];null!=s&&"number"==typeof s&&0<s&&(n.D=1.5*s);var a=n,u=t.a;if(u){var c=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var l=a.b;!l.a&&(ui(c,"spdy")||ui(c,"quic")||ui(c,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Us(l,l.b),l.b=null))}if(a.s){var h=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(a.ha=h,gs(a.v,a.s,h))}}n.u=3,n.c&&n.c.na();var f=t;if((a=n).ea=wa(a,a.w?a.R:null,a.P),f.o){Vs(a.b,f);var p=f,d=a.D;d&&p.setTimeout(d),p.h&&(ns(p),ts(p)),a.a=f}else da(a);0<n.f.length&&la(n)}else"stop"!=i[0]&&"close"!=i[0]||_a(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?_a(n,7):aa(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);Po(4)}catch(t){}}function ss(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(zr(t)||"string"==typeof t)ni(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(zr(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(zr(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function as(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof as)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function us(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];cs(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)cs(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function cs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(jr=Qo.prototype).setTimeout=function(t){this.N=t},jr.Sa=function(t){t=t.target;var e=this.D;e&&3==ra(t)?e.Ia():this.ya(t)},jr.ya=function(t){try{if(t==this.a)t:{var e=ra(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!wi&&!this.a.Y())){this.l||4!=e||7==n||Po(8==n||0>=r?3:2),ns(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oi(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.c=3,Ro(12),is(this),rs(this);break t}this.o=!0,os(this,u)}this.F?(Jo(this,e,o),wi&&this.b&&3==e&&(So(this.G,this.O,"tick",this.Ra),this.O.start())):os(this,o),4==e&&is(this),this.b&&!this.l&&(4==e?ga(this.g,this):(this.b=!1,ts(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Ro(12)):(this.c=0,Ro(13)),is(this),rs(this)}}}catch(t){}},jr.Ra=function(){if(this.a){var t=ra(this.a),e=this.a.Y();this.w<e.length&&(ns(this),Jo(this,t,e),this.b&&4!=t&&ts(this))}},jr.cancel=function(){this.l=!0,is(this)},jr.Qa=function(){this.h=null;var t=Jr();0<=t-this.P?(2!=this.B&&(Po(3),Ro(17)),is(this),this.c=2,rs(this)):es(this,this.P-t)},(jr=as.prototype).I=function(){us(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},jr.K=function(){return us(this),this.a.concat()},jr.get=function(t,e){return cs(this.b,t)?this.b[t]:e},jr.set=function(t,e){cs(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},jr.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ls=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function hs(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof hs){this.a=void 0!==e?e:t.a,ps(this,t.f),this.j=t.j,ds(this,t.c),ys(this,t.h),this.g=t.g,e=t.b;var n=new xs;n.c=e.c,e.a&&(n.a=new as(e.a),n.b=e.b),vs(this,n),this.i=t.i}else t&&(n=String(t).match(ls))?(this.a=!!e,ps(this,n[1]||"",!0),this.j=_s(n[2]||""),ds(this,n[3]||"",!0),ys(this,n[4]),this.g=_s(n[5]||"",!0),vs(this,n[6]||"",!0),this.i=_s(n[7]||"")):(this.a=!!e,this.b=new xs(null,this.a))}function fs(t){return new hs(t)}function ps(t,e,n){t.f=n?_s(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ds(t,e,n){t.c=n?_s(e,!0):e}function ys(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function vs(t,e,n){e instanceof xs?(t.b=e,function(t,e){e&&!t.f&&(Ns(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ks(this,e),Ps(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=bs(e,Ss)),t.b=new xs(e,t.a))}function gs(t,e,n){t.b.set(e,n)}function ms(t){return gs(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Jr()).toString(36)),t}function _s(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function bs(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ws),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ws(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}hs.prototype.toString=function(){var t=[],e=this.f;e&&t.push(bs(e,Es,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(bs(e,Es,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(bs(n,"/"==n.charAt(0)?Cs:Ts,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",bs(n,Is)),t.join("")};var Es=/[#\/\?@]/g,Ts=/[#\?:]/g,Cs=/[#\?]/g,Ss=/[#\?@]/g,Is=/#/g;function xs(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ns(t){t.a||(t.a=new as,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function ks(t,e){Ns(t),e=Os(t,e),cs(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,cs((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&us(t)))}function As(t,e){return Ns(t),e=Os(t,e),cs(t.a.b,e)}function Ps(t,e,n){ks(t,e),0<n.length&&(t.c=null,t.a.set(Os(t,e),ii(n)),t.b+=n.length)}function Os(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Rs(t,e){this.b=t,this.a=e}function Ds(t){this.g=t||Ls,t=qr.PerformanceNavigationTiming?0<(t=qr.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(qr.ca&&qr.ca.ua&&qr.ca.ua()&&qr.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(jr=xs.prototype).add=function(t,e){Ns(this),this.c=null,t=Os(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},jr.forEach=function(t,e){Ns(this),this.a.forEach((function(n,r){ni(n,(function(n){t.call(e,n,r,this)}),this)}),this)},jr.K=function(){Ns(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},jr.I=function(t){Ns(this);var e=[];if("string"==typeof t)As(this,t)&&(e=ri(e,this.a.get(Os(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=ri(e,t[n])}return e},jr.set=function(t,e){return Ns(this),this.c=null,As(this,t=Os(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},jr.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},jr.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ls=10;function Fs(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Ms(t){return t.b?1:t.a?t.a.size:0}function js(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Us(t,e){t.a?t.a.add(e):t.b=e}function Vs(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function qs(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Mr(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ii(t.c)}function Bs(){}function Ws(){this.a=new Bs}function zs(t,e,n){var r=n||"";try{ss(t,(function(t,n){var i=t;Hr(t)&&(i=so(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Hs(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Ds.prototype.cancel=function(){var t,e;if(this.c=qs(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Mr(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Bs.prototype.stringify=function(t){return qr.JSON.stringify(t,void 0)},Bs.prototype.parse=function(t){return qr.JSON.parse(t,void 0)};var Qs=qr.JSON.parse;function Gs(t){io.call(this),this.headers=new as,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=Ys,this.B=this.F=!1}Zr(Gs,io);var Ys="",Ks=/^https?$/i,$s=["POST","PUT"];function Xs(t){return"content-type"==t.toLowerCase()}function Js(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Zs(t),ea(t)}function Zs(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ta(t){if(t.b&&void 0!==Vr&&(!t.s[1]||4!=ra(t)||2!=t.S()))if(t.l&&4==ra(t))bo(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==ra(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(ls)[1]||null;if(!o&&qr.self&&qr.self.location){var s=qr.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ks.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<ra(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.S()+"]",Zs(t)}}finally{ea(t)}}}function ea(t,e){if(t.a){na(t);var n=t.a,r=t.s[0]?Br:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function na(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(qr.clearTimeout(t.m),t.m=null)}function ra(t){return t.a?t.a.readyState:0}function ia(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return fi(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):gs(t,e,n))}function oa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function sa(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=oa("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=oa("baseRetryDelayMs",5e3,t),this.Ga=oa("retryDelaySeedMs",1e4,t),this.Da=oa("forwardChannelMaxRetries",2,t),this.ga=oa("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Ds(t&&t.concurrentRequestLimit),this.ja=new Ws,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function aa(t){if(ua(t),3==t.u){var e=t.H++,n=fs(t.v);gs(n,"SID",t.B),gs(n,"RID",e),gs(n,"TYPE","terminate"),fa(t,n),(e=new Qo(t,e,void 0)).B=2,e.f=ms(fs(n)),n=!1,qr.navigator&&qr.navigator.sendBeacon&&(n=qr.navigator.sendBeacon(e.f.toString(),"")),!n&&qr.Image&&((new Image).src=e.f,n=!0),n||(e.a=Ea(e.g,null),e.a.$(e.f)),e.s=Jr(),ts(e)}ba(t)}function ua(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(qr.clearTimeout(t.i),t.i=null),va(t),t.b.cancel(),t.g&&("number"==typeof t.g&&qr.clearTimeout(t.g),t.g=null)}function ca(t,e){t.f.push(new Rs(t.Fa++,e)),3==t.u&&la(t)}function la(t){Fs(t.b)||t.g||(t.g=!0,po(t.xa,t),t.o=0)}function ha(t,e){var n;n=e?e.W:t.H++;var r=fs(t.v);gs(r,"SID",t.B),gs(r,"RID",n),gs(r,"AID",t.G),fa(t,r),t.h&&t.j&&ia(r,t.h,t.j),n=new Qo(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=pa(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),Us(t.b,n),$o(n,r,e)}function fa(t,e){t.c&&ss({},(function(t,n){gs(e,n,t)}))}function pa(t,e,n){n=Math.min(t.f.length,n);var r=t.c?$r(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{zs(l,s,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function da(t){t.a||t.i||(t.J=1,po(t.wa,t),t.m=0)}function ya(t){return!(t.a||t.i||3<=t.m||(t.J++,t.i=Lo($r(t.wa,t),ma(t,t.m)),t.m++,0))}function va(t){null!=t.l&&(qr.clearTimeout(t.l),t.l=null)}function ga(t,e){var n=null;if(t.a==e){va(t),t.a=null;var r=2}else{if(!js(t.b,e))return;n=e.i,Vs(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Jr()-e.s;var i=t.o;(r=ko()).dispatchEvent(new Do(r,n,e,i)),la(t)}else da(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(Ms(t.b)>=t.b.f-(t.g?1:0)||(t.g?(t.f=e.i.concat(t.f),0):1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da)||(t.g=Lo($r(t.xa,t,e),ma(t,t.o)),t.o++,0)))}(t,e)||2==r&&ya(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:_a(t,5);break;case 4:_a(t,10);break;case 3:_a(t,6);break;default:_a(t,2)}}function ma(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function _a(t,e){if(2==e){var n=null;t.c&&(n=null);var r=$r(t.Ta,t);n||(n=new hs("//www.google.com/images/cleardot.gif"),qr.location&&"http"==qr.location.protocol||ps(n,"https"),ms(n)),function(t,e){var n=new xo;if(qr.Image){var r=new Image;r.onload=Xr(Hs,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Xr(Hs,n,r,"TestLoadImage: error",!1,e),r.onabort=Xr(Hs,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xr(Hs,n,r,"TestLoadImage: timeout",!1,e),qr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ro(2);t.u=0,t.c&&t.c.la(e),ba(t),ua(t)}function ba(t){t.u=0,t.A=-1,t.c&&(0==qs(t.b).length&&0==t.f.length||(t.b.c.length=0,ii(t.f),t.f.length=0),t.c.ka())}function wa(t,e,n){var r=function(t){return t instanceof hs?fs(t):new hs(t,void 0)}(n);if(""!=r.c)e&&ds(r,e+"."+r.c),ys(r,r.h);else{var i=qr.location;r=function(t,e,n,r){var i=new hs(null,void 0);return t&&ps(i,t),e&&ds(i,e),n&&ys(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&fi(t.N,(function(t,e){gs(r,e,t)})),e=t.s,n=t.ha,e&&n&&gs(r,e,n),gs(r,"VER",t.oa),fa(t,r),r}function Ea(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gs(t.Ea)).F=t.w,e}function Ta(){}function Ca(){if(_i&&!(10<=Number(Pi)))throw Error("Environmental error: no available transport.")}function Sa(t,e){io.call(this),this.a=new sa(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!oi(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!oi(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Na(this)}function Ia(t){Wo.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function xa(){zo.call(this),this.status=1}function Na(t){this.a=t}(jr=Gs.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?Uo(this.G):Uo(qo),this.a.onreadystatechange=$r(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Js(this,t)}t=n||"";var i=new as(this.headers);r&&ss(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Xs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.K()),n=qr.FormData&&t instanceof qr.FormData,!(0<=ei($s,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{na(this),0<this.o&&((this.B=function(t){return _i&&Ai(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=$r(this.ta,this)):this.m=bo(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Js(this,t)}},jr.ta=function(){void 0!==Vr&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},jr.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ea(this))},jr.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ea(this,!0)),Gs.M.C.call(this)},jr.va=function(){this.j||(this.w||this.l||this.g?ta(this):this.Oa())},jr.Oa=function(){ta(this)},jr.S=function(){try{return 2<ra(this)?this.a.status:-1}catch(t){return-1}},jr.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},jr.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Qs(e)}},jr.qa=function(){return this.h},jr.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(jr=sa.prototype).oa=8,jr.u=1,jr.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new Qo(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?yi(r=pi(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=pa(this,n,e),gs(i=fs(this.v),"RID",t),gs(i,"CVER",22),this.s&&gs(i,"X-HTTP-Session-Id",this.s),fa(this,i),this.h&&r&&ia(i,this.h,r),Us(this.b,n),this.fa?(gs(i,"$req",e),gs(i,"SID","null"),n.R=!0,$o(n,i,null)):$o(n,i,e),this.u=2}}else 3==this.u&&(t?ha(this,t):0==this.f.length||Fs(this.b)||ha(this))},jr.wa=function(){this.i=null,this.a=new Qo(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=fs(this.ea);gs(t,"RID","rpc"),gs(t,"SID",this.B),gs(t,"CI",this.U?"0":"1"),gs(t,"AID",this.G),fa(this,t),gs(t,"TYPE","xmlhttp"),this.h&&this.j&&ia(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=ms(fs(t)),e.j=null,e.F=!0,Xo(e,n)},jr.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,ya(this),Ro(19))},jr.Ta=function(t){Ro(t?2:1)},(jr=Ta.prototype).na=function(){},jr.ma=function(){},jr.la=function(){},jr.ka=function(){},jr.Ha=function(){},Ca.prototype.a=function(t,e){return new Sa(t,e)},Zr(Sa,io),(jr=Sa.prototype).addEventListener=function(t,e,n,r){Sa.M.addEventListener.call(this,t,e,n,r)},jr.removeEventListener=function(t,e,n,r){Sa.M.removeEventListener.call(this,t,e,n,r)},jr.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;Ro(0),t.P=e,t.N=n||{},t.U=t.W,t.v=wa(t,null,t.P),la(t)},jr.close=function(){aa(this.a)},jr.La=function(t){if("string"==typeof t){var e={};e.__data__=t,ca(this.a,e)}else this.g?((e={}).__data__=so(t),ca(this.a,e)):ca(this.a,t)},jr.C=function(){this.a.c=null,delete this.f,aa(this.a),delete this.a,Sa.M.C.call(this)},Zr(Ia,Wo),Zr(xa,zo),Zr(Na,Ta),Na.prototype.na=function(){this.a.dispatchEvent("a")},Na.prototype.ma=function(t){this.a.dispatchEvent(new Ia(t))},Na.prototype.la=function(t){this.a.dispatchEvent(new xa(t))},Na.prototype.ka=function(){this.a.dispatchEvent("b")},Ca.prototype.createWebChannel=Ca.prototype.a,Sa.prototype.send=Sa.prototype.La,Sa.prototype.open=Sa.prototype.Ka,Sa.prototype.close=Sa.prototype.close,Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,Mo.COMPLETE="complete",Vo.EventType=Bo,Bo.OPEN="a",Bo.CLOSE="b",Bo.ERROR="c",Bo.MESSAGE="d",io.prototype.listen=io.prototype.ra,Gs.prototype.listenOnce=Gs.prototype.sa,Gs.prototype.getLastError=Gs.prototype.Ma,Gs.prototype.getLastErrorCode=Gs.prototype.qa,Gs.prototype.getStatus=Gs.prototype.S,Gs.prototype.getResponseJson=Gs.prototype.Ja,Gs.prototype.getResponseText=Gs.prototype.Y,Gs.prototype.send=Gs.prototype.$;var ka={createWebChannelTransport:function(){return new Ca},ErrorCode:Fo,EventType:Mo,WebChannel:Vo,XhrIo:Gs},Aa=ka.createWebChannelTransport,Pa=ka.ErrorCode,Oa=ka.EventType,Ra=ka.WebChannel,Da=ka.XhrIo,La=gt.SDK_VERSION,Fa=new rt("@firebase/firestore");function Ma(){return Fa.logLevel}function ja(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fa.logLevel<=$.DEBUG){var r=e.map(Va);Fa.debug.apply(Fa,h(["Firestore ("+La+"): "+t],r))}}function Ua(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fa.logLevel<=$.ERROR){var r=e.map(Va);Fa.error.apply(Fa,h(["Firestore ("+La+"): "+t],r))}}function Va(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function qa(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+La+") INTERNAL ASSERTION FAILED: "+t;throw Ua(e),new Error(e)}function Ba(t,e){t||qa()}function Wa(t,e){return t}function za(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ha=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=za(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Qa(t,e){return t<e?-1:t>e?1:0}function Ga(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ya(t){return t+"\0"}var Ka=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},$a=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.o=function(t){return Qa(this.projectId,t.projectId)||Qa(this.database,t.database)},t}();function Xa(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ja(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Za(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var tu=function(){function t(t,e){this.h=t,this.u=e,this.l={}}return t.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ja(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype._=function(){return Za(this.l)},t}(),eu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},nu=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return i(e,t),e}(Error),ru=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new nu(eu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new nu(eu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new nu(eu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nu(eu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.T=function(t){return this.seconds===t.seconds?Qa(this.nanoseconds,t.nanoseconds):Qa(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),iu=function(){function t(t){this.timestamp=t}return t.I=function(e){return new t(e)},t.min=function(){return new t(new ru(0,0))},t.prototype.o=function(t){return this.timestamp.T(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.m=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.A=function(){return this.timestamp},t}(),ou=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&qa(),void 0===n?n=t.length-e:n>t.length-e&&qa(),this.segments=t,this.offset=e,this.R=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.P(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.V(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.g=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},t.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},t.prototype.v=function(){return this.segments[this.offset]},t.prototype.S=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype._=function(){return 0===this.length},t.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},t.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.prototype.N=function(){return this.F().join("/")},e.prototype.toString=function(){return this.N()},e.$=function(t){if(t.indexOf("//")>=0)throw new nu(eu.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.k=function(){return new e([])},e}(ou),au=/^[_a-zA-Z][_a-zA-Z0-9]*$/,uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.M=function(t){return au.test(t)},e.prototype.N=function(){return this.F().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.M(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.N()},e.prototype.O=function(){return 1===this.length&&"__name__"===this.get(0)},e.L=function(){return new e(["__name__"])},e.B=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new nu(eu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new nu(eu.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new nu(eu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new nu(eu.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.k=function(){return new e([])},e}(ou),cu=function(){function t(t){this.path=t}return t.q=function(e){return new t(su.$(e).g(5))},t.prototype.U=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===su.P(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.P=function(t,e){return su.P(t.path,e.path)},t.W=function(t){return t.length%2==0},t.j=function(e){return new t(new su(e.slice()))},t}();function lu(t){return null==t}function hu(t){return-0===t&&1/t==-1/0}function fu(t){return"number"==typeof t&&Number.isInteger(t)&&!hu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var pu=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.K=null};function du(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new pu(t,e,n,r,i,o,s)}function yu(t){var e=Wa(t);if(null===e.K){var n=e.path.N();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.N()+t.op.toString()+sc(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.N()+e.dir;var e})).join(","),lu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=zl(e.startAt)),e.endAt&&(n+="|ub:",n+=zl(e.endAt)),e.K=n}return e.K}function vu(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Kl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],!(i instanceof Ml&&o instanceof Ml&&i.op===o.op&&i.field.isEqual(o.field)&&nc(i.value,o.value)))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ql(t.startAt,e.startAt)&&Ql(t.endAt,e.endAt)}function gu(t){return cu.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}var mu=function(){function t(t){this.G=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.G,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.G)},t.prototype.H=function(){return 2*this.G.length},t.prototype.o=function(t){return Qa(this.G,t.G)},t.prototype.isEqual=function(t){return this.G===t.G},t}();mu.Y=new mu("");var _u,bu,wu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=iu.min()),void 0===o&&(o=iu.min()),void 0===s&&(s=mu.Y),this.target=t,this.targetId=e,this.J=n,this.sequenceNumber=r,this.X=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Z=function(e){return new t(this.target,this.targetId,this.J,e,this.X,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.tt=function(e,n){return new t(this.target,this.targetId,this.J,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.et=function(e){return new t(this.target,this.targetId,this.J,this.sequenceNumber,this.X,e,this.resumeToken)},t}(),Eu=function(t){this.count=t};function Tu(t){switch(t){case eu.OK:return qa();case eu.CANCELLED:case eu.UNKNOWN:case eu.DEADLINE_EXCEEDED:case eu.RESOURCE_EXHAUSTED:case eu.INTERNAL:case eu.UNAVAILABLE:case eu.UNAUTHENTICATED:return!1;case eu.INVALID_ARGUMENT:case eu.NOT_FOUND:case eu.ALREADY_EXISTS:case eu.PERMISSION_DENIED:case eu.FAILED_PRECONDITION:case eu.ABORTED:case eu.OUT_OF_RANGE:case eu.UNIMPLEMENTED:case eu.DATA_LOSS:return!0;default:return qa()}}function Cu(t){if(void 0===t)return Ua("GRPC error has no .code"),eu.UNKNOWN;switch(t){case _u.OK:return eu.OK;case _u.CANCELLED:return eu.CANCELLED;case _u.UNKNOWN:return eu.UNKNOWN;case _u.DEADLINE_EXCEEDED:return eu.DEADLINE_EXCEEDED;case _u.RESOURCE_EXHAUSTED:return eu.RESOURCE_EXHAUSTED;case _u.INTERNAL:return eu.INTERNAL;case _u.UNAVAILABLE:return eu.UNAVAILABLE;case _u.UNAUTHENTICATED:return eu.UNAUTHENTICATED;case _u.INVALID_ARGUMENT:return eu.INVALID_ARGUMENT;case _u.NOT_FOUND:return eu.NOT_FOUND;case _u.ALREADY_EXISTS:return eu.ALREADY_EXISTS;case _u.PERMISSION_DENIED:return eu.PERMISSION_DENIED;case _u.FAILED_PRECONDITION:return eu.FAILED_PRECONDITION;case _u.ABORTED:return eu.ABORTED;case _u.OUT_OF_RANGE:return eu.OUT_OF_RANGE;case _u.UNIMPLEMENTED:return eu.UNIMPLEMENTED;case _u.DATA_LOSS:return eu.DATA_LOSS;default:return qa()}}(bu=_u||(_u={}))[bu.OK=0]="OK",bu[bu.CANCELLED=1]="CANCELLED",bu[bu.UNKNOWN=2]="UNKNOWN",bu[bu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bu[bu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bu[bu.NOT_FOUND=5]="NOT_FOUND",bu[bu.ALREADY_EXISTS=6]="ALREADY_EXISTS",bu[bu.PERMISSION_DENIED=7]="PERMISSION_DENIED",bu[bu.UNAUTHENTICATED=16]="UNAUTHENTICATED",bu[bu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bu[bu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bu[bu.ABORTED=10]="ABORTED",bu[bu.OUT_OF_RANGE=11]="OUT_OF_RANGE",bu[bu.UNIMPLEMENTED=12]="UNIMPLEMENTED",bu[bu.INTERNAL=13]="INTERNAL",bu[bu.UNAVAILABLE=14]="UNAVAILABLE",bu[bu.DATA_LOSS=15]="DATA_LOSS";var Su=function(){function t(t,e){this.P=t,this.root=e||xu.EMPTY}return t.prototype.nt=function(e,n){return new t(this.P,this.root.nt(e,n,this.P).copy(null,null,xu.st,null,null))},t.prototype.remove=function(e){return new t(this.P,this.root.remove(e,this.P).copy(null,null,xu.st,null,null))},t.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype._=function(){return this.root._()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.it=function(){return this.root.it()},t.prototype.rt=function(){return this.root.rt()},t.prototype.ot=function(t){return this.root.ot(t)},t.prototype.forEach=function(t){this.ot((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ot((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.at=function(){return new Iu(this.root,null,this.P,!1)},t.prototype.ut=function(t){return new Iu(this.root,t,this.P,!1)},t.prototype.ct=function(){return new Iu(this.root,null,this.P,!0)},t.prototype.lt=function(t){return new Iu(this.root,t,this.P,!0)},t}(),Iu=function(){function t(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}return t.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},t.prototype.wt=function(){return this.ft.length>0},t.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},t}(),xu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype._=function(){return!1},t.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left._()?this:this.left.min()},t.prototype.it=function(){return this.min().key},t.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},t.prototype.nt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.nt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.nt(t,e,n))).Et()},t.prototype.It=function(){if(this.left._())return t.EMPTY;var e=this;return e.left.At()||e.left.left.At()||(e=e.Rt()),(e=e.copy(null,null,null,e.left.It(),null)).Et()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left._()||i.left.At()||i.left.left.At()||(i=i.Rt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.At()&&(i=i.Pt()),i.right._()||i.right.At()||i.right.left.At()||(i=i.Vt()),0===n(e,i.key)){if(i.right._())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.It())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Et()},t.prototype.At=function(){return this.color},t.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.yt()),t},t.prototype.Rt=function(){var t=this.yt();return t.right.left.At()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Pt())).gt()).yt()),t},t.prototype.Vt=function(){var t=this.yt();return t.left.left.At()&&(t=(t=t.Pt()).yt()),t},t.prototype.gt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Pt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.yt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.pt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},t.prototype.bt=function(){if(this.At()&&this.left.At())throw qa();if(this.right.At())throw qa();var t=this.left.bt();if(t!==this.right.bt())throw qa();return t+(this.At()?0:1)},t}();xu.EMPTY=null,xu.RED=!0,xu.st=!1,xu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw qa()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw qa()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw qa()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw qa()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw qa()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.nt=function(t,e,n){return new xu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype._=function(){return!0},t.prototype.ot=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.it=function(){return null},t.prototype.rt=function(){return null},t.prototype.At=function(){return!1},t.prototype.pt=function(){return!0},t.prototype.bt=function(){return 0},t}());var Nu=function(){function t(t){this.P=t,this.data=new Su(this.P)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.it()},t.prototype.last=function(){return this.data.rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ot((function(e,n){return t(e),!1}))},t.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(this.P(r.key,t[1])>=0)return;e(r.key)}},t.prototype.St=function(t,e){var n;for(n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},t.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},t.prototype.at=function(){return new ku(this.data.at())},t.prototype.ut=function(t){return new ku(this.data.ut(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).nt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype._=function(){return this.data._()},t.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.at(),r=e.data.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(0!==this.P(i,o))return!1}return!0},t.prototype.F=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.P);return n.data=e,n},t}(),ku=function(){function t(t){this.Ft=t}return t.prototype.dt=function(){return this.Ft.dt().key},t.prototype.wt=function(){return this.Ft.wt()},t}(),Au=new Su(cu.P);function Pu(){return Au}function Ou(){return Pu()}var Ru=new Su(cu.P);function Du(){return Ru}var Lu=new Su(cu.P),Fu=new Nu(cu.P);function Mu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Fu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ju=new Nu(Qa);function Uu(){return ju}var Vu=function(){function t(t){this.P=t?function(e,n){return t(e,n)||cu.P(e.key,n.key)}:function(t,e){return cu.P(t.key,e.key)},this.Nt=Du(),this.$t=new Su(this.P)}return t.kt=function(e){return new t(e.P)},t.prototype.has=function(t){return null!=this.Nt.get(t)},t.prototype.get=function(t){return this.Nt.get(t)},t.prototype.first=function(){return this.$t.it()},t.prototype.last=function(){return this.$t.rt()},t.prototype._=function(){return this.$t._()},t.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ot((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Nt.nt(t.key,t),e.$t.nt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Nt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.at(),r=e.$t.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.P=this.P,r.Nt=e,r.$t=n,r},t}(),qu=function(){function t(){this.xt=new Su(cu.P)}return t.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);n?0!==t.type&&3===n.type?this.xt=this.xt.nt(e,t):3===t.type&&1!==n.type?this.xt=this.xt.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):qa():this.xt=this.xt.nt(e,t)},t.prototype.Mt=function(){var t=[];return this.xt.ot((function(e,n){t.push(n)})),t},t}(),Bu=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ot=n,this.docChanges=r,this.Lt=i,this.fromCache=o,this.Bt=s,this.qt=a}return t.Ut=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Vu.kt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Lt._()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.Lt.isEqual(t.Lt)&&Ol(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ot.isEqual(t.Ot)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Wu=function(){function t(t,e,n,r,i){this.X=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}return t.Gt=function(e,n){var r=new Map;return r.set(e,zu.zt(e,n)),new t(iu.min(),r,Uu(),Pu(),Mu())},t}(),zu=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}return t.zt=function(e,n){return new t(mu.Y,n,Mu(),Mu(),Mu())},t}(),Hu=function(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r},Qu=function(t,e){this.targetId=t,this.ee=e},Gu=function(t,e,n,r){void 0===n&&(n=mu.Y),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Yu=function(){function t(){this.ne=0,this.se=Xu(),this.ie=mu.Y,this.re=!1,this.oe=!0}return Object.defineProperty(t.prototype,"Ht",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"he",{get:function(){return 0!==this.ne},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ae",{get:function(){return this.oe},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){t.H()>0&&(this.oe=!0,this.ie=t)},t.prototype.ce=function(){var t=Mu(),e=Mu(),n=Mu();return this.se.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:qa()}})),new zu(this.ie,this.re,t,e,n)},t.prototype.le=function(){this.oe=!1,this.se=Xu()},t.prototype._e=function(t,e){this.oe=!0,this.se=this.se.nt(t,e)},t.prototype.fe=function(t){this.oe=!0,this.se=this.se.remove(t)},t.prototype.de=function(){this.ne+=1},t.prototype.we=function(){this.ne-=1},t.prototype.Te=function(){this.oe=!0,this.re=!0},t}(),Ku=function(){function t(t){this.Ee=t,this.Ie=new Map,this.me=Pu(),this.Ae=$u(),this.Re=new Nu(Qa)}return t.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof Nl?this.Ve(r,t.te):t.te instanceof kl&&this.ge(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ge(s,t.key,t.te)}},t.prototype.ye=function(t){var e=this;this.pe(t,(function(n){var r=e.be(n);switch(t.state){case 0:e.ve(n)&&r.ue(t.resumeToken);break;case 1:r.we(),r.he||r.le(),r.ue(t.resumeToken);break;case 2:r.we(),r.he||e.removeTarget(n);break;case 3:e.ve(n)&&(r.Te(),r.ue(t.resumeToken));break;case 4:e.ve(n)&&(e.Se(n),r.ue(t.resumeToken));break;default:qa()}}))},t.prototype.pe=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ie.forEach((function(t,r){n.ve(r)&&e(r)}))},t.prototype.De=function(t){var e=t.targetId,n=t.ee.count,r=this.Ce(e);if(r){var i=r.target;if(gu(i))if(0===n){var o=new cu(i.path);this.ge(e,o,new kl(o,iu.min()))}else Ba(1===n);else this.Fe(e)!==n&&(this.Se(e),this.Re=this.Re.add(e))}},t.prototype.Ne=function(t){var e=this,n=new Map;this.Ie.forEach((function(r,i){var o=e.Ce(i);if(o){if(r.Ht&&gu(o.target)){var s=new cu(o.target.path);null!==e.me.get(s)||e.$e(i,s)||e.ge(i,s,new kl(s,t))}r.ae&&(n.set(i,r.ce()),r.le())}}));var r=Mu();this.Ae.forEach((function(t,n){var i=!0;n.St((function(t){var n=e.Ce(t);return!n||2===n.J||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Wu(t,n,this.Re,this.me,r);return this.me=Pu(),this.Ae=$u(),this.Re=new Nu(Qa),i},t.prototype.Ve=function(t,e){if(this.ve(t)){var n=this.$e(t,e.key)?2:0;this.be(t)._e(e.key,n),this.me=this.me.nt(e.key,e),this.Ae=this.Ae.nt(e.key,this.ke(e.key).add(t))}},t.prototype.ge=function(t,e,n){if(this.ve(t)){var r=this.be(t);this.$e(t,e)?r._e(e,1):r.fe(e),this.Ae=this.Ae.nt(e,this.ke(e).delete(t)),n&&(this.me=this.me.nt(e,n))}},t.prototype.removeTarget=function(t){this.Ie.delete(t)},t.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},t.prototype.de=function(t){this.be(t).de()},t.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new Yu,this.Ie.set(t,e)),e},t.prototype.ke=function(t){var e=this.Ae.get(t);return e||(e=new Nu(Qa),this.Ae=this.Ae.nt(t,e)),e},t.prototype.ve=function(t){var e=null!==this.Ce(t);return e||ja("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},t.prototype.Se=function(t){var e=this;this.Ie.set(t,new Yu),this.Ee.xe(t).forEach((function(n){e.ge(t,n,null)}))},t.prototype.$e=function(t,e){return this.Ee.xe(t).has(e)},t}();function $u(){return new Su(cu.P)}function Xu(){return new Su(cu.P)}function Ju(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zu(t){var e=ac(t.mapValue.fields.__local_write_time__.timestampValue);return new ru(e.seconds,e.nanos)}var tc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ec(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ju(t)?4:10:qa()}function nc(t,e){var n=ec(t);if(n!==ec(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zu(t).isEqual(Zu(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ac(t.timestampValue),r=ac(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return cc(t.bytesValue).isEqual(cc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return uc(t.geoPointValue.latitude)===uc(e.geoPointValue.latitude)&&uc(t.geoPointValue.longitude)===uc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return uc(t.integerValue)===uc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=uc(t.doubleValue),r=uc(e.doubleValue);return n===r?hu(n)===hu(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ga(t.arrayValue.values||[],e.arrayValue.values||[],nc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Xa(n)!==Xa(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!nc(n[i],r[i])))return!1;return!0}(t,e);default:return qa()}}function rc(t,e){return void 0!==(t.values||[]).find((function(t){return nc(t,e)}))}function ic(t,e){var n=ec(t),r=ec(e);if(n!==r)return Qa(n,r);switch(n){case 0:return 0;case 1:return Qa(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=uc(t.integerValue||t.doubleValue),r=uc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return oc(t.timestampValue,e.timestampValue);case 4:return oc(Zu(t),Zu(e));case 5:return Qa(t.stringValue,e.stringValue);case 6:return function(t,e){var n=cc(t),r=cc(e);return n.o(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Qa(n[i],r[i]);if(0!==o)return o}return Qa(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Qa(uc(t.latitude),uc(e.latitude));return 0!==n?n:Qa(uc(t.longitude),uc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ic(n[i],r[i]);if(o)return o}return Qa(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Qa(r[s],o[s]);if(0!==a)return a;var u=ic(n[r[s]],i[o[s]]);if(0!==u)return u}return Qa(r.length,o.length)}(t.mapValue,e.mapValue);default:throw qa()}}function oc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Qa(t,e);var n=ac(t),r=ac(e),i=Qa(n.seconds,r.seconds);return 0!==i?i:Qa(n.nanos,r.nanos)}function sc(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=ac(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?cc(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,cu.q(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=t(s)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):qa();var n,r}(t)}function ac(t){if(Ba(!!t),"string"==typeof t){var e=0,n=tc.exec(t);if(Ba(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:uc(t.seconds),nanos:uc(t.nanos)}}function uc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function cc(t){return"string"==typeof t?mu.fromBase64String(t):mu.fromUint8Array(t)}function lc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function hc(t){return!!t&&"integerValue"in t}function fc(t){return!!t&&"arrayValue"in t}function pc(t){return!!t&&"nullValue"in t}function dc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yc(t){return!!t&&"mapValue"in t}var vc={asc:"ASCENDING",desc:"DESCENDING"},gc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mc=function(t,e){this.s=t,this.Oe=e};function _c(t){return{integerValue:""+t}}function bc(t,e){if(t.Oe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hu(e)?"-0":e}}function wc(t,e){return fu(e)?_c(e):bc(t,e)}function Ec(t,e){return t.Oe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tc(t,e){return t.Oe?e.toBase64():e.toUint8Array()}function Cc(t,e){return Ec(t,e.A())}function Sc(t){return Ba(!!t),iu.I(function(t){var e=ac(t);return new ru(e.seconds,e.nanos)}(t))}function Ic(t,e){return function(t){return new su(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).N()}function xc(t){var e=su.$(t);return Ba(Qc(e)),e}function Nc(t,e){return Ic(t.s,e.path)}function kc(t,e){var n=xc(e);return Ba(n.get(1)===t.s.projectId),Ba(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new cu(Rc(n))}function Ac(t,e){return Ic(t.s,e)}function Pc(t){var e=xc(t);return 4===e.length?su.k():Rc(e)}function Oc(t){return new su(["projects",t.s.projectId,"databases",t.s.database]).N()}function Rc(t){return Ba(t.length>4&&"documents"===t.get(4)),t.g(5)}function Dc(t,e,n){return{name:Nc(t,e),fields:n.proto.mapValue.fields}}function Lc(t,e){var n;if(e instanceof vl)n={update:Dc(t,e.key,e.value)};else if(e instanceof El)n={delete:Nc(t,e.key)};else if(e instanceof gl)n={update:Dc(t,e.key,e.data),updateMask:Hc(e.Le)};else if(e instanceof _l)n={transform:{document:Nc(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Xc)return{fieldPath:e.field.N(),setToServerValue:"REQUEST_TIME"};if(n instanceof Jc)return{fieldPath:e.field.N(),appendMissingElements:{values:n.elements}};if(n instanceof tl)return{fieldPath:e.field.N(),removeAllFromArray:{values:n.elements}};if(n instanceof nl)return{fieldPath:e.field.N(),increment:n.Be};throw qa()}(0,t)}))}};else{if(!(e instanceof Tl))return qa();n={verify:Nc(t,e.key)}}return e.Ue.qe||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Cc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:qa()}(t,e.Ue)),n}function Fc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ul.updateTime(Sc(t.updateTime)):void 0!==t.exists?ul.exists(t.exists):ul.Qe()}(e.currentDocument):ul.Qe();if(e.update){e.update.name;var r=kc(t,e.update.name),i=new Cl({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new ol(e.map((function(t){return uu.B(t)})))}(e.updateMask);return new gl(r,i,o,n)}return new vl(r,i,n)}if(e.delete){var s=kc(t,e.delete);return new El(s,n)}if(e.transform){var a=kc(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Ba("REQUEST_TIME"===e.setToServerValue),n=new Xc;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Jc(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new tl(i)}else"increment"in e?n=new nl(t,e.increment):qa();var o=uu.B(e.fieldPath);return new sl(o,n)}(t,e)}));return Ba(!0===n.exists),new _l(a,u)}if(e.verify){var c=kc(t,e.verify);return new Tl(c,n)}return qa()}function Mc(t,e){return{documents:[Ac(t,e.path)]}}function jc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ac(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ac(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return t instanceof Ml?function(t){if("=="===t.op){if(dc(t.value))return{unaryFilter:{field:qc(t.field),op:"IS_NAN"}};if(pc(t.value))return{unaryFilter:{field:qc(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:qc(t.field),op:(e=t.op,gc[e]),value:t.value}};var e}(t):qa()}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:qc((e=t).field),direction:(n=e.dir,vc[n])};var e,n}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Oe||lu(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Uc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Uc(e.endAt)),n}function Uc(t){return{before:t.before,values:t.position}}function Vc(t){var e=!!t.before,n=t.values||[];return new Wl(n,e)}function qc(t){return{fieldPath:t.N()}}function Bc(t){return uu.B(t.fieldPath)}function Wc(t){return Ml.create(Bc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qa()}}(t.fieldFilter.op),t.fieldFilter.value)}function zc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Bc(t.unaryFilter.field);return Ml.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Bc(t.unaryFilter.field);return Ml.create(n,"==",{nullValue:"NULL_VALUE"});default:return qa()}}function Hc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.N())})),{fieldPaths:e}}function Qc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Gc=function(){this.je=void 0};function Yc(t,e,n){return t instanceof Xc?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Jc?Zc(t,e):t instanceof tl?el(t,e):function(t,e){var n=$c(t,e),r=rl(n)+rl(t.Be);return hc(n)&&hc(t.Be)?_c(r):bc(t.serializer,r)}(t,e)}function Kc(t,e,n){return t instanceof Jc?Zc(t,e):t instanceof tl?el(t,e):n}function $c(t,e){return t instanceof nl?hc(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Xc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(Gc),Jc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return i(e,t),e}(Gc);function Zc(t,e){for(var n=il(e),r=function(t){n.some((function(e){return nc(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var tl=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return i(e,t),e}(Gc);function el(t,e){for(var n=il(e),r=function(t){n=n.filter((function(e){return!nc(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var nl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Be=n,r}return i(e,t),e}(Gc);function rl(t){return uc(t.integerValue||t.doubleValue)}function il(t){return fc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ol=function(){function t(t){this.fields=t,t.sort(uu.P)}return t.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},t.prototype.isEqual=function(t){return Ga(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),sl=function(t,e){this.field=t,this.transform=e},al=function(t,e){this.version=t,this.transformResults=e},ul=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Qe=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"qe",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function cl(t,e){return void 0!==t.updateTime?e instanceof Nl&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Nl}var ll=function(){};function hl(t,e,n){return t instanceof vl?function(t,e,n){return new Nl(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof gl?function(t,e,n){if(!cl(t.Ue,e))return new Al(t.key,n.version);var r=ml(t,e);return new Nl(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof _l?function(t,e,n){if(Ba(null!=n.transformResults),!cl(t.Ue,e))return new Al(t.key,n.version);var r=bl(0,e),i=function(t,e,n){var r=[];Ba(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Nl&&(a=e.field(o.field)),r.push(Kc(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=wl(t,r.data(),i);return new Nl(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new kl(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function fl(t,e,n,r){return t instanceof vl?function(t,e){if(!cl(t.Ue,e))return e;var n=yl(e);return new Nl(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof gl?function(t,e){if(!cl(t.Ue,e))return e;var n=yl(e),r=ml(t,e);return new Nl(t.key,n,r,{Ge:!0})}(t,e):t instanceof _l?function(t,e,n,r){if(!cl(t.Ue,e))return e;var i=bl(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Nl&&(c=n.field(a.field)),null===c&&r instanceof Nl&&(c=r.field(a.field)),i.push(Yc(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=wl(t,i.data(),o);return new Nl(t.key,i.version,s,{Ge:!0})}(t,e,r,n):function(t,e){return cl(t.Ue,e)?new kl(t.key,iu.min()):e}(t,e)}function pl(t,e){return t instanceof _l?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof Nl?e.field(o.field):void 0,a=$c(o.transform,s||null);null!=a&&(n=null==n?(new Sl).set(o.field,a):n.set(o.field,a))}return n?n.ze():null}(t,e):null}function dl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ue.isEqual(e.Ue)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Le.isEqual(e.Le):2!==t.type||Ga(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Jc&&e instanceof Jc||t instanceof tl&&e instanceof tl?Ga(t.elements,e.elements,nc):t instanceof nl&&e instanceof nl?nc(t.Be,e.Be):t instanceof Xc&&e instanceof Xc}(t.transform,e.transform)}(t,e)})))}function yl(t){return t instanceof Nl?t.version:iu.min()}var vl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ue=r,i.type=0,i}return i(e,t),e}(ll),gl=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Le=r,o.Ue=i,o.type=1,o}return i(e,t),e}(ll);function ml(t,e){return function(t,e){var n=new Sl(e);return t.Le.fields.forEach((function(e){if(!e._()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.ze()}(t,e instanceof Nl?e.data():Cl.empty())}var _l=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ue=ul.exists(!0),r}return i(e,t),e}(ll);function bl(t,e){return e}function wl(t,e,n){for(var r=new Sl(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.ze()}var El=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=3,r}return i(e,t),e}(ll),Tl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=4,r}return i(e,t),e}(ll),Cl=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!yc(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},t.prototype.isEqual=function(t){return nc(this.proto,t.proto)},t}(),Sl=function(){function t(t){void 0===t&&(t=Cl.empty()),this.He=t,this.Ye=new Map}return t.prototype.set=function(t,e){return this.Je(t,e),this},t.prototype.delete=function(t){return this.Je(t,null),this},t.prototype.Je=function(t,e){for(var n=this.Ye,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ec(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.S(),e)},t.prototype.ze=function(){var t=this.Xe(uu.k(),this.Ye);return null!=t?new Cl(t):this.He},t.prototype.Xe=function(t,e){var n=this,r=!1,i=this.He.field(t),o=yc(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.Xe(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Il(t){var e=[];return Ja(t.fields||{},(function(t,n){var r=new uu([t]);if(yc(n)){var i=Il(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new ol(e)}var xl=function(t,e){this.key=t,this.version=e},Nl=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ze=r,o.Ge=!!i.Ge,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return i(e,t),e.prototype.field=function(t){return this.Ze.field(t)},e.prototype.data=function(){return this.Ze},e.prototype.tn=function(){return this.Ze.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(xl),kl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return i(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(xl),Al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(xl),Pl=function(){function t(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.en=n,this.filters=r,this.limit=i,this.nn=o,this.startAt=s,this.endAt=a,this.sn=null,this.rn=null,this.startAt&&this.on(this.startAt),this.endAt&&this.on(this.endAt)}return t.hn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.sn){this.sn=[];var t=this.an(),e=this.un();if(null!==t&&null===e)t.O()||this.sn.push(new Gl(t)),this.sn.push(new Gl(uu.L(),"asc"));else{for(var n=!1,r=0,i=this.en;r<i.length;r++){var o=i[r];this.sn.push(o),o.field.O()&&(n=!0)}if(!n){var s=this.en.length>0?this.en[this.en.length-1].dir:"asc";this.sn.push(new Gl(uu.L(),s))}}}return this.sn},enumerable:!1,configurable:!0}),t.prototype.cn=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.en.slice(),n,this.limit,this.nn,this.startAt,this.endAt)},t.prototype.ln=function(e){var n=this.en.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype._n=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.fn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.dn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,e,this.endAt)},t.prototype.wn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,e)},t.prototype.Tn=function(e){return new t(e,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype.En=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.O())},t.prototype.In=function(){return!lu(this.limit)&&"F"===this.nn},t.prototype.mn=function(){return!lu(this.limit)&&"L"===this.nn},t.prototype.un=function(){return this.en.length>0?this.en[0].field:null},t.prototype.an=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Ml&&n.An())return n.field}return null},t.prototype.Rn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Ml&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Pn=function(){return gu(this.We())},t.prototype.Vn=function(){return null!==this.collectionGroup},t.prototype.We=function(){if(!this.rn)if("F"===this.nn)this.rn=du(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new Gl(r.field,i))}var o=this.endAt?new Wl(this.endAt.position,!this.endAt.before):null,s=this.startAt?new Wl(this.startAt.position,!this.startAt.before):null;this.rn=du(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.rn},t.prototype.on=function(t){},t}();function Ol(t,e){return vu(t.We(),e.We())&&t.nn===e.nn}function Rl(t){return yu(t.We())+"|lt:"+t.nn}function Dl(t){return"Query(target="+function(t){var e=t.path.N();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.N()+" "+e.op+" "+sc(e.value);var e})).join(", ")+"]"),lu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.N()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+zl(t.startAt)),t.endAt&&(e+=", endAt: "+zl(t.endAt)),"Target("+e+")"}(t.We())+"; limitType="+t.nn+")"}function Ll(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.U(t.collectionGroup)&&t.path.D(n):cu.W(t.path)?t.path.isEqual(n):t.path.C(n)}(t,e)&&function(t,e){for(var n=0,r=t.en;n<r.length;n++){var i=r[n];if(!i.field.O()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Hl(t.startAt,t.orderBy,e)||t.endAt&&Hl(t.endAt,t.orderBy,e))}(t,e)}function Fl(t){return function(e,n){for(var r=!1,i=0,o=t.orderBy;i<o.length;i++){var s=o[i],a=Yl(s,e,n);if(0!==a)return a;r=r||s.field.O()}return 0}}var Ml=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return i(e,t),e.create=function(t,n,r){if(t.O())return"in"===n?new Ul(t,r):new jl(t,n,r);if(pc(r)){if("=="!==n)throw new nu(eu.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(dc(r)){if("=="!==n)throw new nu(eu.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new Vl(t,r):"in"===n?new ql(t,r):"array-contains-any"===n?new Bl(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ec(this.value)===ec(e)&&this.gn(ic(e,this.value))},e.prototype.gn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return qa()}},e.prototype.An=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e}((function(){})),jl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=cu.q(r.referenceValue),i}return i(e,t),e.prototype.matches=function(t){var e=cu.P(t.key,this.key);return this.gn(e)},e}(Ml),Ul=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return cu.q(t.referenceValue)})),r}return i(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ml),Vl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return i(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return fc(e)&&rc(e.arrayValue,this.value)},e}(Ml),ql=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return i(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&rc(this.value.arrayValue,e)},e}(Ml),Bl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return i(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!fc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return rc(e.value.arrayValue,t)}))},e}(Ml),Wl=function(t,e){this.position=t,this.before=e};function zl(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return sc(t)})).join(",")}function Hl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.O()?cu.P(cu.q(s.referenceValue),n.key):ic(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ql(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!nc(t.position[n],e.position[n]))return!1;return!0}var Gl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Yl(t,e,n){var r=t.field.O()?cu.P(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ic(r,i):qa()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return qa()}}function Kl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var $l=function(){function t(t,e,n,r){this.batchId=t,this.yn=e,this.baseMutations=n,this.mutations=r}return t.prototype.pn=function(t,e,n){for(var r=n.bn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=hl(o,e,r[i]))}return e},t.prototype.vn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=fl(i,e,e,this.yn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=fl(u,e,o,this.yn))}return e},t.prototype.Sn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.vn(r.key,t.get(r.key));i&&(n=n.nt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Mu())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ga(this.mutations,t.mutations,(function(t,e){return dl(t,e)}))&&Ga(this.baseMutations,t.baseMutations,(function(t,e){return dl(t,e)}))},t}(),Xl=function(){function t(t,e,n,r){this.batch=t,this.Dn=e,this.bn=n,this.Cn=r}return t.from=function(e,n,r){Ba(e.mutations.length===r.length);for(var i=Lu,o=e.mutations,s=0;s<o.length;s++)i=i.nt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Jl=function(){function t(t){var e=this;this.Fn=null,this.Nn=null,this.result=void 0,this.error=void 0,this.$n=!1,this.kn=!1,t((function(t){e.$n=!0,e.result=t,e.Fn&&e.Fn(t)}),(function(t){e.$n=!0,e.error=t,e.Nn&&e.Nn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.kn&&qa(),this.kn=!0,this.$n?this.error?this.xn(n,this.error):this.Mn(e,this.result):new t((function(t,i){r.Fn=function(n){r.Mn(e,n).next(t,i)},r.Nn=function(e){r.xn(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Mn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.xn=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Bn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.qn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Bn(r)},t}(),Zl=function(){function t(){this.Un=new tu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Qn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Wn},set:function(t){this.Wn=t},enumerable:!1,configurable:!0}),t.prototype.jn=function(t,e){this.Kn(),this.readTime=e,this.Un.set(t.key,t)},t.prototype.Gn=function(t,e){this.Kn(),e&&(this.readTime=e),this.Un.set(t,null)},t.prototype.zn=function(t,e){this.Kn();var n=this.Un.get(e);return void 0!==n?Jl.resolve(n):this.Hn(t,e)},t.prototype.getEntries=function(t,e){return this.Yn(t,e)},t.prototype.apply=function(t){return this.Kn(),this.Qn=!0,this.Jn(t)},t.prototype.Kn=function(){},t}(),th="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",eh=function(){function t(){this.Xn=[]}return t.prototype.Zn=function(t){this.Xn.push(t)},t.prototype.ts=function(){this.Xn.forEach((function(t){return t()}))},t}(),nh=function(){function t(t,e,n){this.es=t,this.ns=e,this.ss=n}return t.prototype.rs=function(t,e){var n=this;return this.ns.os(t,e).next((function(r){return n.hs(t,e,r)}))},t.prototype.hs=function(t,e,n){return this.es.zn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].vn(e,t);return t}))},t.prototype.as=function(t,e,n){var r=Ou();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].vn(t,e);r=r.nt(t,e)})),r},t.prototype.us=function(t,e){var n=this;return this.es.getEntries(t,e).next((function(e){return n.cs(t,e)}))},t.prototype.cs=function(t,e){var n=this;return this.ns.ls(t,e).next((function(r){var i=n.as(t,e,r),o=Pu();return i.forEach((function(t,e){e||(e=new kl(t,iu.min())),o=o.nt(t,e)})),o}))},t.prototype._s=function(t,e,n){return e.Pn()?this.fs(t,e.path):e.Vn()?this.ds(t,e,n):this.ws(t,e,n)},t.prototype.fs=function(t,e){return this.rs(t,new cu(e)).next((function(t){var e=Du();return t instanceof Nl&&(e=e.nt(t.key,t)),e}))},t.prototype.ds=function(t,e,n){var r=this,i=e.collectionGroup,o=Du();return this.ss.Ts(t,i).next((function(s){return Jl.forEach(s,(function(s){var a=e.Tn(s.child(i));return r.ws(t,a,n).next((function(t){t.forEach((function(t,e){o=o.nt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.ws=function(t,e,n){var r,i,o=this;return this.es._s(t,e,n).next((function(n){return r=n,o.ns.Es(t,e)})).next((function(e){return i=e,o.Is(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=fl(u,l,l,o.yn);r=h instanceof Nl?r.nt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Ll(e,n)||(r=r.remove(t))})),r}))},t.prototype.Is=function(t,e,n){for(var r=Mu(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof gl&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.es.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Nl&&(c=c.nt(t,e))})),c}))},t}(),rh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ms=n,this.As=r}return t.Rs=function(e,n){for(var r=Mu(),i=Mu(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ih=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Ps=function(t){return n.Vs(t)},this.gs=function(t){return e.ys(t)})}return t.prototype.Vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.gs&&this.gs(t),t},t}();ih.ps=-1;var oh=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},sh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.bs=t,this.vs=e,this.Ss=n,this.Ds=r,this.Cs=i,this.Fs=0,this.Ns=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fs=0},t.prototype.ks=function(){this.Fs=this.Cs},t.prototype.xs=function(t){var e=this;this.cancel();var n=Math.floor(this.Fs+this.Ms()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&ja("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ns=this.bs.Os(this.vs,i,(function(){return e.$s=Date.now(),t()})),this.Fs*=this.Ds,this.Fs<this.Ss&&(this.Fs=this.Ss),this.Fs>this.Cs&&(this.Fs=this.Cs)},t.prototype.Ls=function(){null!==this.Ns&&(this.Ns.Bs(),this.Ns=null)},t.prototype.cancel=function(){null!==this.Ns&&(this.Ns.cancel(),this.Ns=null)},t.prototype.Ms=function(){return(Math.random()-.5)*this.Fs},t}();function ah(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ch(e)),e=uh(t.get(n),e);return ch(e)}function uh(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function ch(t){return t+""}function lh(t){var e=t.length;if(Ba(e>=2),2===e)return Ba(""===t.charAt(0)&&""===t.charAt(1)),su.k();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&qa(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:qa()}o=s+2}return new su(r)}var hh=function(){function t(){this.qs=new fh}return t.prototype.Us=function(t,e){return this.qs.add(e),Jl.resolve()},t.prototype.Ts=function(t,e){return Jl.resolve(this.qs.getEntries(e))},t}(),fh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new Nu(su.P),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Nu(su.P)).F()},t}(),ph=function(){function t(){this.Qs=new fh}return t.prototype.Us=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.S(),i=e.p();t.Zn((function(){n.Qs.add(e)}));var o={collectionId:r,parent:ah(i)};return dh(t).put(o)}return Jl.resolve()},t.prototype.Ts=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ya(e),""],!1,!0);return dh(t).Ws(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(lh(o.parent))}return n}))},t}();function dh(t){return Mh.js(t,cf.store)}var yh=function(t){this.Ks=t};function vh(t,e){if(e.document)return function(t,e,n){var r=kc(t,e.name),i=Sc(e.updateTime),o=new Cl({mapValue:{fields:e.fields}});return new Nl(r,i,o,{hasCommittedMutations:!!n})}(t.Ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=cu.j(e.noDocument.path),r=wh(e.noDocument.readTime);return new kl(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=cu.j(e.unknownDocument.path),o=wh(e.unknownDocument.version);return new Al(i,o)}return qa()}function gh(t,e,n){var r=mh(n),i=e.key.path.p().F();if(e instanceof Nl){var o=function(t,e){return{name:Nc(t,e.key),fields:e.tn().mapValue.fields,updateTime:Ec(t,e.version.A())}}(t.Ks,e),s=e.hasCommittedMutations;return new rf(null,null,o,s,r,i)}if(e instanceof kl){var a=e.key.path.F(),u=bh(e.version),c=e.hasCommittedMutations;return new rf(null,new ef(a,u),null,c,r,i)}if(e instanceof Al){var l=e.key.path.F(),h=bh(e.version);return new rf(new nf(l,h),null,null,!0,r,i)}return qa()}function mh(t){var e=t.A();return[e.seconds,e.nanoseconds]}function _h(t){var e=new ru(t[0],t[1]);return iu.I(e)}function bh(t){var e=t.A();return new $h(e.seconds,e.nanoseconds)}function wh(t){var e=new ru(t.seconds,t.nanoseconds);return iu.I(e)}function Eh(t,e){var n=(e.baseMutations||[]).map((function(e){return Fc(t.Ks,e)})),r=e.mutations.map((function(e){return Fc(t.Ks,e)})),i=ru.fromMillis(e.localWriteTimeMs);return new $l(e.batchId,i,n,r)}function Th(t){var e,n=wh(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?wh(t.lastLimboFreeSnapshotVersion):iu.min();return e=void 0!==t.query.documents?function(t){Ba(1===t.documents.length);var e=t.documents[0];return Pl.hn(Pc(e)).We()}(t.query):function(t){var e=Pc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ba(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[zc(e)]:void 0!==e.fieldFilter?[Wc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):qa():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Gl(Bc((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u=null;n.limit&&(u=function(t){var e;return lu(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Vc(n.startAt));var l=null;return n.endAt&&(l=Vc(n.endAt)),new Pl(e,i,a,s,u,"F",c,l).We()}(t.query),new wu(e,t.targetId,0,t.lastListenSequenceNumber,n,r,mu.fromBase64String(t.resumeToken))}function Ch(t,e){var n,r=bh(e.X),i=bh(e.lastLimboFreeSnapshotVersion);n=gu(e.target)?Mc(t.Ks,e.target):jc(t.Ks,e.target);var o=e.resumeToken.toBase64();return new sf(e.targetId,yu(e.target),r,o,e.sequenceNumber,i,n)}var Sh=function(){function t(t,e){this.serializer=t,this.ss=e}return t.prototype.jn=function(t,e,n){return xh(t).put(Nh(e),n)},t.prototype.Gn=function(t,e){var n=xh(t),r=Nh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Gs(t,r)}))},t.prototype.zn=function(t,e){var n=this;return xh(t).get(Nh(e)).next((function(t){return n.zs(t)}))},t.prototype.Hs=function(t,e){var n=this;return xh(t).get(Nh(e)).next((function(t){var e=n.zs(t);return e?{Ys:e,size:kh(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Ou();return this.Js(t,e,(function(t,e){var i=n.zs(e);r=r.nt(t,i)})).next((function(){return r}))},t.prototype.Xs=function(t,e){var n=this,r=Ou(),i=new Su(cu.P);return this.Js(t,e,(function(t,e){var o=n.zs(e);o?(r=r.nt(t,o),i=i.nt(t,kh(e))):(r=r.nt(t,null),i=i.nt(t,0))})).next((function(){return{Zs:r,ti:i}}))},t.prototype.Js=function(t,e,n){if(e._())return Jl.resolve();var r=IDBKeyRange.bound(e.first().path.F(),e.last().path.F()),i=e.at(),o=i.dt();return xh(t).ei({range:r},(function(t,e,r){for(var s=cu.j(t);o&&cu.P(o,s)<0;)n(o,null),o=i.dt();o&&o.isEqual(s)&&(n(o,e),o=i.wt()?i.dt():null),o?r.ni(o.path.F()):r.done()})).next((function(){for(;o;)n(o,null),o=i.wt()?i.dt():null}))},t.prototype._s=function(t,e,n){var r=this,i=Du(),o=e.path.length+1,s={};if(n.isEqual(iu.min())){var a=e.path.F();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.F(),c=mh(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=rf.collectionReadTimeIndex}return xh(t).ei(s,(function(t,n,s){if(t.length===o){var a=vh(r.serializer,n);e.path.D(a.key.path)?a instanceof Nl&&Ll(e,a)&&(i=i.nt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.si=function(t,e){var n=this,r=Pu(),i=mh(e),o=xh(t),s=IDBKeyRange.lowerBound(i,!0);return o.ei({index:rf.readTimeIndex,range:s},(function(t,e){var o=vh(n.serializer,e);r=r.nt(o.key,o),i=e.readTime})).next((function(){return{ii:r,readTime:_h(i)}}))},t.prototype.ri=function(t){var e=xh(t),n=iu.min();return e.ei({index:rf.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=_h(e.readTime)),r.done()})).next((function(){return n}))},t.prototype.oi=function(e){return new t.hi(this,!!e&&e.ai)},t.prototype.ui=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ih(t).get(of.key).next((function(t){return Ba(!!t),t}))},t.prototype.Gs=function(t,e){return Ih(t).put(of.key,e)},t.prototype.zs=function(t){if(t){var e=vh(this.serializer,t);return e instanceof kl&&e.version.isEqual(iu.min())?null:e}return null},t}();function Ih(t){return Mh.js(t,of.store)}function xh(t){return Mh.js(t,rf.store)}function Nh(t){return t.path.F()}function kh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw qa();e=t.noDocument}return JSON.stringify(e).length}Sh.hi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ci=e,r.ai=n,r.li=new tu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return i(e,t),e.prototype.Jn=function(t){var e=this,n=[],r=0,i=new Nu((function(t,e){return Qa(t.N(),e.N())}));return this.Un.forEach((function(o,s){var a=e.li.get(o);if(s){var u=gh(e.ci.serializer,s,e.readTime);i=i.add(o.path.p());var c=kh(u);r+=c-a,n.push(e.ci.jn(t,o,u))}else if(r-=a,e.ai){var l=gh(e.ci.serializer,new kl(o,iu.min()),e.readTime);n.push(e.ci.jn(t,o,l))}else n.push(e.ci.Gn(t,o))})),i.forEach((function(r){n.push(e.ci.ss.Us(t,r))})),n.push(this.ci.updateMetadata(t,r)),Jl.Bn(n)},e.prototype.Hn=function(t,e){var n=this;return this.ci.Hs(t,e).next((function(t){return null===t?(n.li.set(e,0),null):(n.li.set(e,t.size),t.Ys)}))},e.prototype.Yn=function(t,e){var n=this;return this.ci.Xs(t,e).next((function(t){var e=t.Zs;return t.ti.forEach((function(t,e){n.li.set(t,e)})),e}))},e}(Zl);var Ah=function(){function t(t){this._i=t}return t.prototype.next=function(){return this._i+=2,this._i},t.fi=function(){return new t(0)},t.di=function(){return new t(-1)},t}(),Ph=function(){function t(t,e){this.wi=t,this.serializer=e}return t.prototype.Ti=function(t){var e=this;return this.Ei(t).next((function(n){var r=new Ah(n.highestTargetId);return n.highestTargetId=r.next(),e.Ii(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.mi=function(t){return this.Ei(t).next((function(t){return iu.I(new ru(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ai=function(t){return this.Ei(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Ri=function(t,e,n){var r=this;return this.Ei(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ii(t,i)}))},t.prototype.Pi=function(t,e){var n=this;return this.Vi(t,e).next((function(){return n.Ei(t).next((function(r){return r.targetCount+=1,n.gi(e,r),n.Ii(t,r)}))}))},t.prototype.yi=function(t,e){return this.Vi(t,e)},t.prototype.pi=function(t,e){var n=this;return this.bi(t,e.targetId).next((function(){return Oh(t).delete(e.targetId)})).next((function(){return n.Ei(t)})).next((function(e){return Ba(e.targetCount>0),e.targetCount-=1,n.Ii(t,e)}))},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return Oh(t).ei((function(s,a){var u=Th(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.pi(t,u)))})).next((function(){return Jl.Bn(o)})).next((function(){return i}))},t.prototype.pe=function(t,e){return Oh(t).ei((function(t,n){var r=Th(n);e(r)}))},t.prototype.Ei=function(t){return Rh(t).get(uf.key).next((function(t){return Ba(null!==t),t}))},t.prototype.Ii=function(t,e){return Rh(t).put(uf.key,e)},t.prototype.Vi=function(t,e){return Oh(t).put(Ch(this.serializer,e))},t.prototype.gi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Si=function(t){return this.Ei(t).next((function(t){return t.targetCount}))},t.prototype.Di=function(t,e){var n=yu(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Oh(t).ei({range:r,index:sf.queryTargetsIndexName},(function(t,n,r){var o=Th(n);vu(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Ci=function(t,e,n){var r=this,i=[],o=Dh(t);return e.forEach((function(e){var s=ah(e.path);i.push(o.put(new af(n,s))),i.push(r.wi.Fi(t,n,e))})),Jl.Bn(i)},t.prototype.Ni=function(t,e,n){var r=this,i=Dh(t);return Jl.forEach(e,(function(e){var o=ah(e.path);return Jl.Bn([i.delete([n,o]),r.wi.$i(t,n,e)])}))},t.prototype.bi=function(t,e){var n=Dh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ki=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Dh(t),i=Mu();return r.ei({range:n,xi:!0},(function(t,e,n){var r=lh(t[1]),o=new cu(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=ah(e.path),r=IDBKeyRange.bound([n],[Ya(n)],!1,!0),i=0;return Dh(t).ei({index:af.documentTargetsIndex,xi:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Me=function(t,e){return Oh(t).get(e).next((function(t){return t?Th(t):null}))},t}();function Oh(t){return Mh.js(t,sf.store)}function Rh(t){return Mh.js(t,uf.store)}function Dh(t){return Mh.js(t,af.store)}var Lh="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Fh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Oi=e,r.Li=n,r}return i(e,t),e}(eh),Mh=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.bs=o,this.window=s,this.document=a,this.Bi=c,this.qi=l,this.Ui=null,this.Qi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Wi=null,this.inForeground=!1,this.ji=null,this.Ki=null,this.Gi=Number.NEGATIVE_INFINITY,this.zi=function(t){return Promise.resolve()},!t.Hi())throw new nu(eu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.wi=new Vh(this,i),this.Yi=n+t.Ji,this.serializer=new yh(u),this.Xi=new Ph(this.wi,this.serializer),this.ss=new ph,this.es=new Sh(this.serializer,this.ss),this.window&&this.window.localStorage?this.Zi=this.window.localStorage:(this.Zi=null,!1===l&&Ua("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.js=function(t,e){if(t instanceof Fh)return pf.js(t.Oi,e);throw qa()},t.prototype.start=function(){var t=this;return pf.tr(this.Yi,Yh,new Kh(this.serializer)).then((function(e){return t.er=e,t.nr()})).then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new nu(eu.FAILED_PRECONDITION,Lh);return t.sr(),t.ir(),t.rr(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Xi.Ai(e)}))})).then((function(e){t.Ui=new ih(e,t.Bi)})).then((function(){t.Qi=!0})).catch((function(e){return t.er&&t.er.close(),Promise.reject(e)}))},t.prototype.or=function(t){var e=this;return this.zi=function(n){return s(e,void 0,void 0,(function(){return a(this,(function(e){return this.hr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ar=function(t){var e=this;this.er.ur((function(n){return s(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.cr=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.bs.lr((function(){return s(e,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.hr?[4,this.nr()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.nr=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Uh(e).put(new hf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._r(e).next((function(e){e||(t.isPrimary=!1,t.bs.dr((function(){return t.zi(!1)})))}))})).next((function(){return t.wr(e)})).next((function(n){return t.isPrimary&&!n?t.Tr(e).next((function(){return!1})):!!n&&t.Er(e).next((function(){return!0}))}))})).catch((function(e){if(vf(e))return ja("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ja("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.bs.dr((function(){return t.zi(e)})),t.isPrimary=e}))},t.prototype._r=function(t){var e=this;return jh(t).get(Xh.key).next((function(t){return Jl.resolve(e.Ir(t))}))},t.prototype.mr=function(t){return Uh(t).delete(this.clientId)},t.prototype.Ar=function(){return s(this,void 0,void 0,(function(){var e,n,r,i,o=this;return a(this,(function(s){switch(s.label){case 0:return!this.isPrimary||this.Rr(this.Gi,18e5)?[3,2]:(this.Gi=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.js(e,hf.store);return n.Ws().next((function(t){var e=o.Pr(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Jl.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=s.sent(),this.Zi)for(n=0,r=e;n<r.length;n++)i=r[n],this.Zi.removeItem(this.Vr(i.clientId));s.label=2;case 2:return[2]}}))}))},t.prototype.rr=function(){var t=this;this.Ki=this.bs.Os("client_metadata_refresh",4e3,(function(){return t.nr().then((function(){return t.Ar()})).then((function(){return t.rr()}))}))},t.prototype.Ir=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.wr=function(t){var e=this;return this.qi?Jl.resolve(!0):jh(t).get(Xh.key).next((function(n){if(null!==n&&e.Rr(n.leaseTimestampMs,5e3)&&!e.gr(n.ownerId)){if(e.Ir(n)&&e.networkEnabled)return!0;if(!e.Ir(n)){if(!n.allowTabSynchronization)throw new nu(eu.FAILED_PRECONDITION,Lh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Uh(t).Ws().next((function(t){return void 0===e.Pr(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&ja("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.yr=function(){return s(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){switch(e.label){case 0:return this.Qi=!1,this.pr(),this.Ki&&(this.Ki.cancel(),this.Ki=null),this.br(),this.vr(),[4,this.runTransaction("shutdown","readwrite",(function(e){return t.Tr(e).next((function(){return t.mr(e)}))})).catch((function(t){ja("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)}))];case 1:return e.sent(),this.er.close(),this.Sr(),[2]}}))}))},t.prototype.Pr=function(t,e){var n=this;return t.filter((function(t){return n.Rr(t.updateTimeMs,e)&&!n.gr(t.clientId)}))},t.prototype.Dr=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Uh(e).Ws().next((function(e){return t.Pr(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return t.Hi()?(n=e+t.Ji,[4,pf.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t){return Bh.Fr(t,this.serializer,this.ss,this.wi)},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.kr=function(){return this.ss},t.prototype.runTransaction=function(t,e,n){var r=this;ja("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.er.runTransaction(o,ff,(function(o){return i=new Fh(o,r.Ui?r.Ui.next():ih.ps),"readwrite-primary"===e?r._r(i).next((function(t){return!!t||r.wr(i)})).next((function(e){if(!e)throw Ua("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.bs.dr((function(){return r.zi(!1)})),new nu(eu.FAILED_PRECONDITION,th);return n(i)})).next((function(t){return r.Er(i).next((function(){return t}))})):r.xr(i).next((function(){return n(i)}))})).then((function(t){return i.ts(),t}))},t.prototype.xr=function(t){var e=this;return jh(t).get(Xh.key).next((function(t){if(null!==t&&e.Rr(t.leaseTimestampMs,5e3)&&!e.gr(t.ownerId)&&!e.Ir(t)&&!(e.qi||e.allowTabSynchronization&&t.allowTabSynchronization))throw new nu(eu.FAILED_PRECONDITION,Lh)}))},t.prototype.Er=function(t){var e=new Xh(this.clientId,this.allowTabSynchronization,Date.now());return jh(t).put(Xh.key,e)},t.Hi=function(){return pf.Hi()},t.Mr=function(t){var e=t.s.projectId;return t.s.i||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.Tr=function(t){var e=this,n=jh(t);return n.get(Xh.key).next((function(t){return e.Ir(t)?(ja("IndexedDbPersistence","Releasing primary lease."),n.delete(Xh.key)):Jl.resolve()}))},t.prototype.Rr=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ua("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.sr=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ji=function(){t.bs.lr((function(){return t.inForeground="visible"===t.document.visibilityState,t.nr()}))},this.document.addEventListener("visibilitychange",this.ji),this.inForeground="visible"===this.document.visibilityState)},t.prototype.br=function(){this.ji&&(this.document.removeEventListener("visibilitychange",this.ji),this.ji=null)},t.prototype.ir=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Wi=function(){e.pr(),e.bs.lr((function(){return e.yr()}))},this.window.addEventListener("unload",this.Wi))},t.prototype.vr=function(){this.Wi&&(this.window.removeEventListener("unload",this.Wi),this.Wi=null)},t.prototype.gr=function(t){var e;try{var n=null!==(null===(e=this.Zi)||void 0===e?void 0:e.getItem(this.Vr(t)));return ja("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Ua("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.pr=function(){if(this.Zi)try{this.Zi.setItem(this.Vr(this.clientId),String(Date.now()))}catch(t){Ua("Failed to set zombie client id.",t)}},t.prototype.Sr=function(){if(this.Zi)try{this.Zi.removeItem(this.Vr(this.clientId))}catch(t){}},t.prototype.Vr=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function jh(t){return Mh.js(t,Xh.store)}function Uh(t){return Mh.js(t,hf.store)}Mh.Ji="main";var Vh=function(){function t(t,e){this.db=t,this.Or=new Pf(this,e)}return t.prototype.Lr=function(t){var e=this.Br(t);return this.db.Nr().Si(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Br=function(t){var e=0;return this.qr(t,(function(t){e++})).next((function(){return e}))},t.prototype.pe=function(t,e){return this.db.Nr().pe(t,e)},t.prototype.qr=function(t,e){return this.Ur(t,(function(t,n){return e(n)}))},t.prototype.Fi=function(t,e,n){return qh(t,n)},t.prototype.$i=function(t,e,n){return qh(t,n)},t.prototype.vi=function(t,e,n){return this.db.Nr().vi(t,e,n)},t.prototype.Qr=function(t,e){return qh(t,e)},t.prototype.Wr=function(t,e){return function(t,e){var n=!1;return Gh(t).jr((function(r){return Wh(t,r,e).next((function(t){return t&&(n=!0),Jl.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Kr=function(t,e){var n=this,r=this.db.$r().oi(),i=[],o=0;return this.Ur(t,(function(s,a){if(a<=e){var u=n.Wr(t,s).next((function(e){if(!e)return o++,r.zn(t,s).next((function(){return r.Gn(s),Dh(t).delete([0,ah(s.path)])}))}));i.push(u)}})).next((function(){return Jl.Bn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Z(t.Li);return this.db.Nr().yi(t,n)},t.prototype.Gr=function(t,e){return qh(t,e)},t.prototype.Ur=function(t,e){var n,r=Dh(t),i=ih.ps;return r.ei({index:af.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==ih.ps&&e(new cu(lh(n)),i),i=a,n=s):i=ih.ps})).next((function(){i!==ih.ps&&e(new cu(lh(n)),i)}))},t.prototype.zr=function(t){return this.db.$r().ui(t)},t}();function qh(t,e){return Dh(t).put(function(t,e){return new af(0,ah(t.path),e)}(e,t.Li))}var Bh=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ss=n,this.wi=r,this.Hr={}}return t.Fr=function(e,n,r,i){return Ba(""!==e.uid),new t(e.Yr()?e.uid:"",n,r,i)},t.prototype.Jr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hh(t).ei({index:Zh.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Xr=function(t,e,n,r){var i=this,o=Qh(t),s=Hh(t);return s.add({}).next((function(a){Ba("number"==typeof a);for(var u=new $l(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Lc(t.Ks,e)})),i=n.mutations.map((function(e){return Lc(t.Ks,e)}));return new Zh(e,n.batchId,n.yn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new Nu((function(t,e){return Qa(t.N(),e.N())})),f=0,p=r;f<p.length;f++){var d=p[f],y=tf.key(i.userId,d.key.path,a);h=h.add(d.key.path.p()),l.push(s.put(c)),l.push(o.put(y,tf.PLACEHOLDER))}return h.forEach((function(e){l.push(i.ss.Us(t,e))})),t.Zn((function(){i.Hr[a]=u.keys()})),Jl.Bn(l).next((function(){return u}))}))},t.prototype.Zr=function(t,e){var n=this;return Hh(t).get(e).next((function(t){return t?(Ba(t.userId===n.userId),Eh(n.serializer,t)):null}))},t.prototype.to=function(t,e){var n=this;return this.Hr[e]?Jl.resolve(this.Hr[e]):this.Zr(t,e).next((function(t){if(t){var r=t.keys();return n.Hr[e]=r,r}return null}))},t.prototype.eo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Hh(t).ei({index:Zh.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ba(e.batchId>=r),o=Eh(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.no=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Hh(t).ei({index:Zh.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.so=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hh(t).Ws(Zh.userMutationsIndex,n).next((function(t){return t.map((function(t){return Eh(e.serializer,t)}))}))},t.prototype.os=function(t,e){var n=this,r=tf.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Qh(t).ei({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=lh(u);if(a===n.userId&&e.path.isEqual(l))return Hh(t).get(c).next((function(t){if(!t)throw qa();Ba(t.userId===n.userId),o.push(Eh(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.ls=function(t,e){var n=this,r=new Nu(Qa),i=[];return e.forEach((function(e){var o=tf.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Qh(t).ei({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=lh(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Jl.Bn(i).next((function(){return n.io(t,r)}))},t.prototype.Es=function(t,e){var n=this,r=e.path,i=r.length+1,o=tf.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Nu(Qa);return Qh(t).ei({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=lh(u);s===n.userId&&r.D(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.io(t,a)}))},t.prototype.io=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Hh(t).get(e).next((function(t){if(null===t)throw qa();Ba(t.userId===n.userId),r.push(Eh(n.serializer,t))})))})),Jl.Bn(i).next((function(){return r}))},t.prototype.ro=function(t,e){var n=this;return zh(t.Oi,this.userId,e).next((function(r){return t.Zn((function(){n.oo(e.batchId)})),Jl.forEach(r,(function(e){return n.wi.Qr(t,e)}))}))},t.prototype.oo=function(t){delete this.Hr[t]},t.prototype.ho=function(t){var e=this;return this.Jr(t).next((function(n){if(!n)return Jl.resolve();var r=IDBKeyRange.lowerBound(tf.prefixForUser(e.userId)),i=[];return Qh(t).ei({range:r},(function(t,n,r){if(t[0]===e.userId){var o=lh(t[1]);i.push(o)}else r.done()})).next((function(){Ba(0===i.length)}))}))},t.prototype.Mi=function(t,e){return Wh(t,this.userId,e)},t.prototype.ao=function(t){var e=this;return Gh(t).get(this.userId).next((function(t){return t||new Jh(e.userId,-1,"")}))},t}();function Wh(t,e,n){var r=tf.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Qh(t).ei({range:o,xi:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function zh(t,e,n){var r=t.store(Zh.store),i=t.store(tf.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ei({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Ba(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=tf.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Jl.Bn(o).next((function(){return c}))}function Hh(t){return Mh.js(t,Zh.store)}function Qh(t){return Mh.js(t,tf.store)}function Gh(t){return Mh.js(t,Jh.store)}var Yh=10,Kh=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Ba(n<r&&n>=0&&r<=Yh);var o=new gf(e);n<1&&r>=1&&(function(t){t.createObjectStore(Xh.store)}(t),function(t){t.createObjectStore(Jh.store,{keyPath:Jh.keyPath}),t.createObjectStore(Zh.store,{keyPath:Zh.keyPath,autoIncrement:!0}).createIndex(Zh.userMutationsIndex,Zh.userMutationsKeyPath,{unique:!0}),t.createObjectStore(tf.store)}(t),lf(t),function(t){t.createObjectStore(rf.store)}(t));var s=Jl.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(af.store),t.deleteObjectStore(sf.store),t.deleteObjectStore(uf.store)}(t),lf(t)),s=s.next((function(){return function(t){var e=t.store(uf.store),n=new uf(0,0,iu.min().A(),0);return e.put(uf.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Zh.store).Ws().next((function(n){t.deleteObjectStore(Zh.store),t.createObjectStore(Zh.store,{keyPath:Zh.keyPath,autoIncrement:!0}).createIndex(Zh.userMutationsIndex,Zh.userMutationsKeyPath,{unique:!0});var r=e.store(Zh.store),i=n.map((function(t){return r.put(t)}));return Jl.Bn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(hf.store,{keyPath:hf.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(of.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(rf.store);e.createIndex(rf.readTimeIndex,rf.readTimeIndexPath,{unique:!1}),e.createIndex(rf.collectionReadTimeIndex,rf.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(rf.store).ei((function(t,n){e+=kh(n)})).next((function(){var n=new of(e);return t.store(of.store).put(of.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Jh.store),r=t.store(Zh.store);return n.Ws().next((function(n){return Jl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ws(Zh.userMutationsIndex,i).next((function(r){return Jl.forEach(r,(function(r){Ba(r.userId===n.userId);var i=Eh(e.serializer,r);return zh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(af.store),n=t.store(rf.store);return t.store(uf.store).get(uf.key).next((function(t){var r=[];return n.ei((function(n,i){var o=new su(n),s=function(t){return[0,ah(t)]}(o);r.push(e.get(s).next((function(n){return n?Jl.resolve():function(n){return e.put(new af(0,ah(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Jl.Bn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(cf.store,{keyPath:cf.keyPath});var n=e.store(cf.store),r=new fh,i=function(t){if(r.add(t)){var e=t.S(),i=t.p();return n.put({collectionId:e,parent:ah(i)})}};return e.store(rf.store).ei({xi:!0},(function(t,e){var n=new su(t);return i(n.p())})).next((function(){return e.store(tf.store).ei({xi:!0},(function(t,e){t[0];var n=t[1],r=(t[2],lh(n));return i(r.p())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(sf.store);return n.ei((function(t,r){var i=Th(r),o=Ch(e.serializer,i);return n.put(o)}))},t}(),$h=function(t,e){this.seconds=t,this.nanoseconds=e},Xh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Xh.store="owner",Xh.key="owner";var Jh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Jh.store="mutationQueues",Jh.keyPath="userId";var Zh=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Zh.store="mutations",Zh.keyPath="batchId",Zh.userMutationsIndex="userMutationsIndex",Zh.userMutationsKeyPath=["userId","batchId"];var tf=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ah(e)]},t.key=function(t,e,n){return[t,ah(e),n]},t}();tf.store="documentMutations",tf.PLACEHOLDER=new tf;var ef=function(t,e){this.path=t,this.readTime=e},nf=function(t,e){this.path=t,this.version=e},rf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};rf.store="remoteDocuments",rf.readTimeIndex="readTimeIndex",rf.readTimeIndexPath="readTime",rf.collectionReadTimeIndex="collectionReadTimeIndex",rf.collectionReadTimeIndexPath=["parentPath","readTime"];var of=function(t){this.byteSize=t};of.store="remoteDocumentGlobal",of.key="remoteDocumentGlobalKey";var sf=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};sf.store="targets",sf.keyPath="targetId",sf.queryTargetsIndexName="queryTargetsIndex",sf.queryTargetsKeyPath=["canonicalId","targetId"];var af=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};af.store="targetDocuments",af.keyPath=["targetId","path"],af.documentTargetsIndex="documentTargetsIndex",af.documentTargetsKeyPath=["path","targetId"];var uf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};uf.key="targetGlobalKey",uf.store="targetGlobal";var cf=function(t,e){this.collectionId=t,this.parent=e};function lf(t){t.createObjectStore(af.store,{keyPath:af.keyPath}).createIndex(af.documentTargetsIndex,af.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(sf.store,{keyPath:sf.keyPath}).createIndex(sf.queryTargetsIndexName,sf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(uf.store)}cf.store="collectionParents",cf.keyPath=["collectionId","parent"];var hf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};hf.store="clientMetadata",hf.keyPath="clientId";var ff=h(h(h([Jh.store,Zh.store,tf.store,rf.store,sf.store,Xh.store,uf.store,af.store],[hf.store]),[of.store]),[cf.store]),pf=function(){function e(t){this.db=t,12.2===e.uo(w())&&Ua("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.tr=function(t,n,r){return ja("SimpleDb","Opening database:",t),new Jl((function(i,o){var s=indexedDB.open(t,n);s.onsuccess=function(t){var n=t.target.result;i(new e(n))},s.onblocked=function(){o(new nu(eu.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new nu(eu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},s.onupgradeneeded=function(e){ja("SimpleDb",'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result;r.createOrUpgrade(n,s.transaction,e.oldVersion,Yh).next((function(){ja("SimpleDb","Database upgrade to version "+Yh+" complete")}))}})).On()},e.delete=function(t){return ja("SimpleDb","Removing database:",t),_f(window.indexedDB.deleteDatabase(t)).On()},e.Hi=function(){if("undefined"==typeof indexedDB)return!1;if(e.co())return!0;var t=w(),n=e.uo(t),r=0<n&&n<10,i=e.lo(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.co=function(){var e;return void 0!==t&&"YES"===(null===(e=t.env)||void 0===e?void 0:e._o)},e.js=function(t,e){return t.store(e)},e.uo=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.lo=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.ur=function(t){this.db.onversionchange=function(e){return t(e)}},e.prototype.runTransaction=function(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,s,u;return a(this,(function(c){switch(c.label){case 0:r="readonly"===t,i=0,o=function(){var t,o,u,c,l;return a(this,(function(a){switch(a.label){case 0:++i,t=gf.open(s.db,r?"readonly":"readwrite",e),a.label=1;case 1:return a.trys.push([1,3,,4]),o=n(t).catch((function(e){return t.abort(e),Jl.reject(e)})).On(),u={},o.catch((function(){})),[4,t.fo];case 2:return[2,(u.value=(a.sent(),o),u)];case 3:return c=a.sent(),l="FirebaseError"!==c.name&&i<3,ja("SimpleDb","Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},s=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db.close()},e}(),df=function(){function t(t){this.do=t,this.wo=!1,this.To=null}return Object.defineProperty(t.prototype,"$n",{get:function(){return this.wo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Eo",{get:function(){return this.To},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.do=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.wo=!0},t.prototype.ni=function(t){this.To=t},t.prototype.delete=function(){return _f(this.do.delete())},t}(),yf=function(t){function e(e){var n=this;return(n=t.call(this,eu.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return i(e,t),e}(nu);function vf(t){return"IndexedDbTransactionError"===t.name}var gf=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.Io=new oh,this.transaction.oncomplete=function(){e.Io.resolve()},this.transaction.onabort=function(){t.error?e.Io.reject(new yf(t.error)):e.Io.resolve()},this.transaction.onerror=function(t){var n=wf(t.target.error);e.Io.reject(new yf(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"fo",{get:function(){return this.Io.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Io.reject(t),this.aborted||(ja("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new mf(e)},t}(),mf=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ja("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ja("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),_f(n)},t.prototype.add=function(t){return ja("SimpleDb","ADD",this.store.name,t,t),_f(this.store.add(t))},t.prototype.get=function(t){var e=this;return _f(this.store.get(t)).next((function(n){return void 0===n&&(n=null),ja("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return ja("SimpleDb","DELETE",this.store.name,t),_f(this.store.delete(t))},t.prototype.count=function(){return ja("SimpleDb","COUNT",this.store.name),_f(this.store.count())},t.prototype.Ws=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.mo(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ao=function(t,e){ja("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.xi=!1;var r=this.cursor(n);return this.mo(r,(function(t,e,n){return n.delete()}))},t.prototype.ei=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.mo(r,e)},t.prototype.jr=function(t){var e=this.cursor({});return new Jl((function(n,r){e.onerror=function(t){var e=wf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.mo=function(t,e){var n=[];return new Jl((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new df(i),s=e(i.primaryKey,i.value,o);if(s instanceof Jl){var a=s.catch((function(t){return o.done(),Jl.reject(t)}));n.push(a)}o.$n?r():null===o.Eo?i.continue():i.continue(o.Eo)}else r()}})).next((function(){return Jl.Bn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.xi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function _f(t){return new Jl((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=wf(t.target.error);n(e)}}))}var bf=!1;function wf(t){var e=pf.uo(w());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new nu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return bf||(bf=!0,setTimeout((function(){throw r}),0)),r}}return t}function Ef(){return"undefined"!=typeof window?window:null}var Tf=function(){function t(t,e,n,r,i){this.Ro=t,this.vs=e,this.Po=n,this.op=r,this.Vo=i,this.yo=new oh,this.then=this.yo.promise.then.bind(this.yo.promise),this.yo.promise.catch((function(t){}))}return t.po=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.bo=setTimeout((function(){return e.vo()}),t)},t.prototype.Bs=function(){return this.vo()},t.prototype.cancel=function(t){null!==this.bo&&(this.clearTimeout(),this.yo.reject(new nu(eu.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.vo=function(){var t=this;this.Ro.lr((function(){return null!==t.bo?(t.clearTimeout(),t.op().then((function(e){return t.yo.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.bo&&(this.Vo(this),clearTimeout(this.bo),this.bo=null)},t}(),Cf=function(){function t(){var t=this;this.So=Promise.resolve(),this.Do=[],this.Co=!1,this.Fo=[],this.No=null,this.$o=!1,this.ko=[],this.xo=new sh(this,"async_queue_retry"),this.Mo=function(){return t.xo.Ls()};var e=Ef();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Mo)}return Object.defineProperty(t.prototype,"Oo",{get:function(){return this.Co},enumerable:!1,configurable:!0}),t.prototype.lr=function(t){this.enqueue(t)},t.prototype.Lo=function(t){this.Bo(),this.qo(t)},t.prototype.Uo=function(t){return this.Bo(),this.qo(t)},t.prototype.Qo=function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return this.Bo(),this.Co?[3,2]:(this.Co=!0,(e=Ef())&&e.removeEventListener("visibilitychange",this.Mo),[4,this.Uo(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.Bo(),this.Co?new Promise((function(t){})):this.qo(t)},t.prototype.dr=function(t){var e=this;this.Do.push(t),this.lr((function(){return e.Wo()}))},t.prototype.Wo=function(){return s(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){switch(n.label){case 0:if(0===this.Do.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Do[0]()];case 2:return n.sent(),this.Do.shift(),this.xo.reset(),[3,4];case 3:if(!vf(t=n.sent()))throw t;return ja("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Do.length>0&&this.xo.xs((function(){return e.Wo()})),n.label=5;case 5:return[2]}}))}))},t.prototype.qo=function(t){var e=this,n=this.So.then((function(){return e.$o=!0,t().catch((function(t){throw e.No=t,e.$o=!1,Ua("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.$o=!1,t}))}));return this.So=n,n},t.prototype.Os=function(t,e,n){var r=this;this.Bo(),this.ko.indexOf(t)>-1&&(e=0);var i=Tf.po(this,t,e,n,(function(t){return r.jo(t)}));return this.Fo.push(i),i},t.prototype.Bo=function(){this.No&&qa()},t.prototype.Ko=function(){},t.prototype.Go=function(){return s(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return[4,t=this.So];case 1:e.sent(),e.label=2;case 2:if(t!==this.So)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.zo=function(t){for(var e=0,n=this.Fo;e<n.length;e++)if(n[e].vs===t)return!0;return!1},t.prototype.Ho=function(t){var e=this;return this.Go().then((function(){e.Fo.sort((function(t,e){return t.Po-e.Po}));for(var n=0,r=e.Fo;n<r.length;n++){var i=r[n];if(i.Bs(),"all"!==t&&i.vs===t)break}return e.Go()}))},t.prototype.Yo=function(t){this.ko.push(t)},t.prototype.jo=function(t){var e=this.Fo.indexOf(t);this.Fo.splice(e,1)},t}();function Sf(t,e){if(Ua("AsyncQueue",e+": "+t),vf(t))return new nu(eu.UNAVAILABLE,e+": "+t);throw t}function If(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Qa(n,i);return 0===s?Qa(r,o):s}var xf=function(){function t(t){this.Jo=t,this.buffer=new Nu(If),this.Xo=0}return t.prototype.Zo=function(){return++this.Xo},t.prototype.th=function(t){var e=[t,this.Zo()];if(this.buffer.size<this.Jo)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();If(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Nf={eh:!1,nh:0,sh:0,ih:0},kf=function(){function t(t,e,n){this.rh=t,this.oh=e,this.hh=n}return t.ah=function(e){return new t(e,t.uh,t.lh)},t}();kf._h=-1,kf.fh=1048576,kf.dh=41943040,kf.uh=10,kf.lh=1e3,kf.wh=new kf(kf.dh,kf.uh,kf.lh),kf.Th=new kf(kf._h,0,0);var Af=function(){function t(t,e){this.Or=t,this.Ro=e,this.Eh=!1,this.Ih=null}return t.prototype.start=function(t){this.Or.params.rh!==kf._h&&this.mh(t)},t.prototype.stop=function(){this.Ih&&(this.Ih.cancel(),this.Ih=null)},Object.defineProperty(t.prototype,"hr",{get:function(){return null!==this.Ih},enumerable:!1,configurable:!0}),t.prototype.mh=function(t){var e=this,n=this.Eh?3e5:6e4;ja("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Ih=this.Ro.Os("lru_garbage_collection",n,(function(){return s(e,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:this.Ih=null,this.Eh=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ah(this.Or)];case 2:return n.sent(),[3,7];case 3:return vf(e=n.sent())?(ja("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Df(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.mh(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Pf=function(){function t(t,e){this.Rh=t,this.params=e}return t.prototype.Ph=function(t,e){return this.Rh.Lr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Vh=function(t,e){var n=this;if(0===e)return Jl.resolve(ih.ps);var r=new xf(e);return this.Rh.pe(t,(function(t){return r.th(t.sequenceNumber)})).next((function(){return n.Rh.qr(t,(function(t){return r.th(t)}))})).next((function(){return r.maxValue}))},t.prototype.vi=function(t,e,n){return this.Rh.vi(t,e,n)},t.prototype.Kr=function(t,e){return this.Rh.Kr(t,e)},t.prototype.gh=function(t,e){var n=this;return this.params.rh===kf._h?(ja("LruGarbageCollector","Garbage collection skipped; disabled"),Jl.resolve(Nf)):this.zr(t).next((function(r){return r<n.params.rh?(ja("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.rh),Nf):n.yh(t,e)}))},t.prototype.zr=function(t){return this.Rh.zr(t)},t.prototype.yh=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ph(t,this.params.oh).next((function(e){return e>c.params.hh?(ja("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.hh+" from "+e),r=c.params.hh):r=e,o=Date.now(),c.Vh(t,r)})).next((function(r){return n=r,s=Date.now(),c.vi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.Kr(t,n)})).next((function(t){return u=Date.now(),Ma()<=$.DEBUG&&ja("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Jl.resolve({eh:!0,nh:r,sh:i,ih:t})}))},t}(),Of=function(){function t(t,e,n){this.persistence=t,this.ph=e,this.bh=new Su(Qa),this.vh=new tu((function(t){return yu(t)}),vu),this.Sh=iu.min(),this.ns=t.Cr(n),this.Dh=t.$r(),this.Xi=t.Nr(),this.Ch=new nh(this.Dh,this.ns,this.persistence.kr()),this.ph.Fh(this.Ch)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Nh=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i=this;return a(this,(function(o){switch(o.label){case 0:return e=this.ns,n=this.Ch,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var o;return i.ns.so(r).next((function(s){return o=s,e=i.persistence.Cr(t),n=new nh(i.Dh,e,i.persistence.kr()),e.so(r)})).next((function(t){for(var e=[],i=[],s=Mu(),a=0,u=o;a<u.length;a++){var c=u[a];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=t;p<d.length;p++){var y=d[p];i.push(y.batchId);for(var v=0,g=y.mutations;v<g.length;v++){var m=g[v];s=s.add(m.key)}}return n.us(r,s).next((function(t){return{$h:t,kh:e,xh:i}}))}))}))];case 1:return r=o.sent(),[2,(this.ns=e,this.Ch=n,this.ph.Fh(this.Ch),r)]}}))}))},t.prototype.Mh=function(t){var e,n=this,r=ru.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Mu());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.Ch.us(o,i).next((function(i){e=i;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],l=pl(c,e.get(c.key));null!=l&&s.push(new gl(c.key,l,Il(l.proto.mapValue),ul.exists(!0)))}return n.ns.Xr(o,r,s,t)}))})).then((function(t){var n=t.Sn(e);return{batchId:t.batchId,Un:n}}))},t.prototype.Oh=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.Dh.oi({ai:!0});return e.Lh(n,t,i).next((function(){return i.apply(n)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.Bh=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.ns.Zr(n,t).next((function(t){return Ba(null!==t),r=t.keys(),e.ns.ro(n,t)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.no=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.ns.no(e)}))},t.prototype.mi=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Xi.mi(e)}))},t.prototype.qh=function(e){var n=this,r=e.X,i=this.bh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var s=n.Dh.oi({ai:!0});i=n.bh;var a=[];e.Qt.forEach((function(e,s){var u=i.get(s);if(u){a.push(n.Xi.Ni(o,e.Xt,s).next((function(){return n.Xi.Ci(o,e.Yt,s)})));var c=e.resumeToken;if(c.H()>0){var l=u.tt(c,r).Z(o.Li);i=i.nt(s,l),t.Uh(u,l,e)&&a.push(n.Xi.yi(o,l))}}}));var u=Pu(),c=Mu();if(e.jt.forEach((function(t,e){c=c.add(t)})),a.push(s.getEntries(o,c).next((function(t){e.jt.forEach((function(i,c){var l=t.get(i);c instanceof kl&&c.version.isEqual(iu.min())?(s.Gn(i,r),u=u.nt(i,c)):null==l||c.version.o(l.version)>0||0===c.version.o(l.version)&&l.hasPendingWrites?(s.jn(c,r),u=u.nt(i,c)):ja("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),e.Kt.has(i)&&a.push(n.persistence.wi.Gr(o,i))}))}))),!r.isEqual(iu.min())){var l=n.Xi.mi(o).next((function(t){return n.Xi.Ri(o,o.Li,r)}));a.push(l)}return Jl.Bn(a).next((function(){return s.apply(o)})).next((function(){return n.Ch.cs(o,u)}))})).then((function(t){return n.bh=i,t}))},t.Uh=function(t,e,n){return Ba(e.resumeToken.H()>0),0===t.resumeToken.H()||e.X.m()-t.X.m()>=this.Qh||n.Yt.size+n.Jt.size+n.Xt.size>0},t.prototype.Wh=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o,s,u,c,l=this;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Jl.forEach(t,(function(t){return Jl.forEach(t.ms,(function(n){return l.persistence.wi.Fi(e,t.targetId,n)})).next((function(){return Jl.forEach(t.As,(function(n){return l.persistence.wi.$i(e,t.targetId,n)}))}))}))}))];case 1:return a.sent(),[3,3];case 2:if(!vf(e=a.sent()))throw e;return ja("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=t;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(s=this.bh.get(o),u=s.X,c=s.et(u),this.bh=this.bh.nt(o,c));return[2]}}))}))},t.prototype.jh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.ns.eo(n,t)}))},t.prototype.Kh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.Ch.rs(n,t)}))},t.prototype.Gh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Xi.Di(n,t).next((function(i){return i?(r=i,Jl.resolve(r)):e.Xi.Ti(n).next((function(i){return r=new wu(t,i,0,n.Li),e.Xi.Pi(n,r).next((function(){return r}))}))}))})).then((function(n){var r=e.bh.get(n.targetId);return(null===r||n.X.o(r.X)>0)&&(e.bh=e.bh.nt(n.targetId,n),e.vh.set(t,n.targetId)),n}))},t.prototype.Di=function(t,e){var n=this.vh.get(e);return void 0!==n?Jl.resolve(this.bh.get(n)):this.Xi.Di(t,e)},t.prototype.zh=function(t,e){var n=this,r=this.bh.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,(function(t){return e?Jl.resolve():n.persistence.wi.removeTarget(t,r)})).then((function(){n.bh=n.bh.remove(t),n.vh.delete(r.target)}))},t.prototype.Hh=function(t,e){var n=this,r=iu.min(),i=Mu();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.Di(o,t.We()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Xi.ki(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.ph._s(o,t,e?r:iu.min(),e?i:Mu())})).next((function(t){return{documents:t,Yh:i}}))}))},t.prototype.Lh=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=Jl.resolve();return o.forEach((function(r){s=s.next((function(){return n.zn(t,r)})).next((function(t){var o=t,s=e.Cn.get(r);Ba(null!==s),(!o||o.version.o(s)<0)&&(o=i.pn(r,o,e))&&n.jn(o,e.Dn)}))})),s.next((function(){return r.ns.ro(t,i)}))},t.prototype.Ah=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.gh(n,e.bh)}))},t}();Of.Qh=3e8;var Rf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.ns=e.Cr(r),i.Dh=e.$r(),i.Xi=e.Nr(),i}return i(e,t),e.prototype.start=function(){return this.Jh()},e.prototype.Xh=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.ns.to(n,t).next((function(t){return t?e.Ch.us(n,t):Jl.resolve(null)}))}))},e.prototype.Zh=function(t){this.ns.oo(t)},e.prototype.cr=function(t){this.persistence.cr(t)},e.prototype.Dr=function(){return this.persistence.Dr()},e.prototype.ta=function(t){var e=this,n=this.bh.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Xi.Me(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.si=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Dh.si(e,t.Sh)})).then((function(e){var n=e.ii,r=e.readTime;return t.Sh=r,n}))},e.prototype.Jh=function(){return s(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Dh.ri(t)}))];case 1:return t.Sh=n.sent(),[2]}}))}))},e}(Of);function Df(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){if(t.code!==eu.FAILED_PRECONDITION||t.message!==th)throw t;return ja("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Lf=function(){function t(){this.ea=new Nu(Ff.na),this.sa=new Nu(Ff.ia)}return t.prototype._=function(){return this.ea._()},t.prototype.Fi=function(t,e){var n=new Ff(t,e);this.ea=this.ea.add(n),this.sa=this.sa.add(n)},t.prototype.ra=function(t,e){var n=this;t.forEach((function(t){return n.Fi(t,e)}))},t.prototype.$i=function(t,e){this.oa(new Ff(t,e))},t.prototype.ha=function(t,e){var n=this;t.forEach((function(t){return n.$i(t,e)}))},t.prototype.aa=function(t){var e=this,n=new cu(new su([])),r=new Ff(n,t),i=new Ff(n,t+1),o=[];return this.sa.vt([r,i],(function(t){e.oa(t),o.push(t.key)})),o},t.prototype.ua=function(){var t=this;this.ea.forEach((function(e){return t.oa(e)}))},t.prototype.oa=function(t){this.ea=this.ea.delete(t),this.sa=this.sa.delete(t)},t.prototype.ca=function(t){var e=new cu(new su([])),n=new Ff(e,t),r=new Ff(e,t+1),i=Mu();return this.sa.vt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new Ff(t,0),n=this.ea.Dt(e);return null!==n&&t.isEqual(n.key)},t}(),Ff=function(){function t(t,e){this.key=t,this.la=e}return t.na=function(t,e){return cu.P(t.key,e.key)||Qa(t.la,e.la)},t.ia=function(t,e){return Qa(t.la,e.la)||cu.P(t.key,e.key)},t}();function Mf(t,e){if(0!==e.length)throw new nu(eu.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+ep(e.length,"argument")+".")}function jf(t,e,n){if(e.length!==n)throw new nu(eu.INVALID_ARGUMENT,"Function "+t+"() requires "+ep(n,"argument")+", but was called with "+ep(e.length,"argument")+".")}function Uf(t,e,n){if(e.length<n)throw new nu(eu.INVALID_ARGUMENT,"Function "+t+"() requires at least "+ep(n,"argument")+", but was called with "+ep(e.length,"argument")+".")}function Vf(t,e,n,r){if(e.length<n||e.length>r)throw new nu(eu.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+ep(e.length,"argument")+".")}function qf(t,e,n,r){Gf(t,e,tp(n)+" argument",r)}function Bf(t,e,n,r){void 0!==r&&qf(t,e,n,r)}function Wf(t,e,n,r){Gf(t,e,n+" option",r)}function zf(t,e,n,r){void 0!==r&&Wf(t,e,n,r)}function Hf(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(Kf(u))}var c=Kf(r);throw new nu(eu.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function Qf(t,e,n,r){if(!e.some((function(t){return t===r})))throw new nu(eu.INVALID_ARGUMENT,"Invalid value "+Kf(r)+" provided to function "+t+"() for its "+tp(n)+" argument. Acceptable values: "+e.join(", "));return r}function Gf(t,e,n,r){if(!("object"===e?Yf(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Kf(r);throw new nu(eu.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Yf(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Kf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":qa()}function $f(t,e,n){if(void 0===n)throw new nu(eu.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+tp(e)+" argument, but it was undefined.")}function Xf(t,e,n){Ja(e,(function(e,r){if(n.indexOf(e)<0)throw new nu(eu.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Jf(t,e,n,r){var i=Kf(r);return new nu(eu.INVALID_ARGUMENT,"Function "+t+"() requires its "+tp(n)+" argument to be a "+e+", but it was: "+i)}function Zf(t,e,n){if(n<=0)throw new nu(eu.INVALID_ARGUMENT,"Function "+t+"() requires its "+tp(e)+" argument to be a positive number, but it was: "+n+".")}function tp(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function ep(t,e){return t+" "+e+(1===t?"":"s")}function np(){if("undefined"==typeof Uint8Array)throw new nu(eu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function rp(){if("undefined"==typeof atob)throw new nu(eu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ip=function(){function t(t){rp(),this._a=t}return t.fromBase64String=function(e){jf("Blob.fromBase64String",arguments,1),qf("Blob.fromBase64String","string",1,e),rp();try{return new t(mu.fromBase64String(e))}catch(e){throw new nu(eu.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(jf("Blob.fromUint8Array",arguments,1),np(),!(e instanceof Uint8Array))throw Jf("Blob.fromUint8Array","Uint8Array",1,e);return new t(mu.fromUint8Array(e))},t.prototype.toBase64=function(){return jf("Blob.toBase64",arguments,0),rp(),this._a.toBase64()},t.prototype.toUint8Array=function(){return jf("Blob.toUint8Array",arguments,0),np(),this._a.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._a.isEqual(t._a)},t}(),op=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new nu(eu.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+ep(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(qf("FieldPath","string",e,t[e]),0===t[e].length)throw new nu(eu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.fa=new uu(t)},sp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return i(e,t),e.documentId=function(){return new e(uu.L().N())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Jf("isEqual","FieldPath",1,t);return this.fa.isEqual(t.fa)},e}(op),ap=new RegExp("[~\\*/\\[\\]]"),up=function(){this.da=this},cp=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return i(e,t),e.prototype.Ta=function(t){if(2!==t.Ea)throw 1===t.Ea?t.Ia(this.wa+"() can only appear at the top level of your update data"):t.Ia(this.wa+"() cannot be used with set() unless you pass {merge:true}");return t.Le.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(up);function lp(t,e,n){return new Cp({Ea:3,ma:e.settings.ma,methodName:t.wa,Aa:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var hp=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return i(e,t),e.prototype.Ta=function(t){return new sl(t.path,new Xc)},e.prototype.isEqual=function(t){return t instanceof e},e}(up),fp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return i(e,t),e.prototype.Ta=function(t){var e=lp(this,t,!0),n=this.Ra.map((function(t){return Ap(t,e)})),r=new Jc(n);return new sl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(up),pp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return i(e,t),e.prototype.Ta=function(t){var e=lp(this,t,!0),n=this.Ra.map((function(t){return Ap(t,e)})),r=new tl(n);return new sl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(up),dp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Pa=n,r}return i(e,t),e.prototype.Ta=function(t){var e=new nl(t.serializer,wc(t.serializer,this.Pa));return new sl(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(up),yp=function(t){function e(){return t.call(this)||this}return i(e,t),e.delete=function(){return Mf("FieldValue.delete",arguments),new vp(new cp("FieldValue.delete"))},e.serverTimestamp=function(){return Mf("FieldValue.serverTimestamp",arguments),new vp(new hp("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Uf("FieldValue.arrayUnion",arguments,1),new vp(new fp("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Uf("FieldValue.arrayRemove",arguments,1),new vp(new pp("FieldValue.arrayRemove",t))},e.increment=function(t){return qf("FieldValue.increment","number",1,t),jf("FieldValue.increment",arguments,1),new vp(new dp("FieldValue.increment",t))},e}(up),vp=function(t){function e(e){var n=this;return(n=t.call(this)||this).da=e,n.wa=e.wa,n}return i(e,t),e.prototype.Ta=function(t){return this.da.Ta(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.da.isEqual(t.da)},e}(yp),gp=function(){function t(t,e){if(jf("GeoPoint",arguments,2),qf("GeoPoint","number",1,t),qf("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new nu(eu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new nu(eu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Va=t,this.ga=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Va},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.ga},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.Va===t.Va&&this.ga===t.ga},t.prototype.T=function(t){return Qa(this.Va,t.Va)||Qa(this.ga,t.ga)},t}();function mp(t){return new mc(t,!0)}var _p=/^__.*__$/,bp=function(t,e,n){this.ya=t,this.pa=e,this.ba=n},wp=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[];return null!==this.Le?n.push(new gl(t,this.data,this.Le,e)):n.push(new vl(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new _l(t,this.fieldTransforms)),n},t}(),Ep=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[new gl(t,this.data,this.Le,e)];return this.fieldTransforms.length>0&&n.push(new _l(t,this.fieldTransforms)),n},t}();function Tp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qa()}}var Cp=function(){function t(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.Le=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ea",{get:function(){return this.settings.Ea},enumerable:!1,configurable:!0}),t.prototype.Da=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Le)},t.prototype.Ca=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Fa(t),r},t.prototype.Na=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Sa(),r},t.prototype.$a=function(t){return this.Da({path:void 0,Aa:!0})},t.prototype.Ia=function(t){return Fp(t,this.settings.methodName,this.settings.ka||!1,this.path,this.settings.ma)},t.prototype.contains=function(t){return void 0!==this.Le.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},t.prototype.Sa=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fa(this.path.get(t))},t.prototype.Fa=function(t){if(0===t.length)throw this.Ia("Document fields must not be empty");if(Tp(this.Ea)&&_p.test(t))throw this.Ia('Document fields cannot begin and end with "__"')},t}(),Sp=function(){function t(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||mp(t)}return t.prototype.xa=function(t,e,n,r){return void 0===r&&(r=!1),new Cp({Ea:t,methodName:e,ma:n,path:uu.k(),Aa:!1,ka:r},this.s,this.serializer,this.ignoreUndefinedProperties)},t}();function Ip(t,e,n,r,i,o){void 0===o&&(o={});var s=t.xa(o.merge||o.mergeFields?2:0,e,n,i);Rp("Data must be an object, but it was:",s,r);var a,u,c=Pp(r,s);if(o.merge)a=new ol(s.Le),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=f[h],d=void 0;if(p instanceof op)d=p.fa;else{if("string"!=typeof p)throw qa();d=Lp(e,p,n)}if(!s.contains(d))throw new nu(eu.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Mp(l,d)||l.push(d)}a=new ol(l),u=s.fieldTransforms.filter((function(t){return a.Ke(t.field)}))}else a=null,u=s.fieldTransforms;return new wp(new Cl(c),a,u)}function xp(t,e,n,r){var i=t.xa(1,e,n);Rp("Data must be an object, but it was:",i,r);var o=[],s=new Sl;Ja(r,(function(t,r){var a=Lp(e,t,n),u=i.Na(a);if(r instanceof up&&r.da instanceof cp)o.push(a);else{var c=Ap(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new ol(o);return new Ep(s.ze(),a,i.fieldTransforms)}function Np(t,e,n,r,i,o){var s=t.xa(1,e,n),a=[Dp(e,r,n)],u=[i];if(o.length%2!=0)throw new nu(eu.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Dp(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Sl,f=a.length-1;f>=0;--f)if(!Mp(l,a[f])){var p=a[f],d=u[f],y=s.Na(p);if(d instanceof up&&d.da instanceof cp)l.push(p);else{var v=Ap(d,y);null!=v&&(l.push(p),h.set(p,v))}}var g=new ol(l);return new Ep(h.ze(),g,s.fieldTransforms)}function kp(t,e,n,r){return void 0===r&&(r=!1),Ap(n,t.xa(r?4:3,e))}function Ap(t,e){if(Op(t))return Rp("Unsupported field value:",e,t),Pp(t,e);if(t instanceof up)return function(t,e){if(!Tp(e.Ea))throw e.Ia(t.wa+"() can only be used with update() and set()");if(!e.path)throw e.Ia(t.wa+"() is not currently supported inside arrays");var n=t.Ta(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Le.push(e.path),t instanceof Array){if(e.settings.Aa&&4!==e.Ea)throw e.Ia("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ap(o[i],e.$a(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wc(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ru.fromDate(t);return{timestampValue:Ec(e.serializer,n)}}if(t instanceof ru){var r=new ru(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ec(e.serializer,r)}}if(t instanceof gp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ip)return{bytesValue:Tc(e.serializer,t)};if(t instanceof bp){var i=e.s,o=t.ya;if(!o.isEqual(i))throw e.Ia("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Ic(t.ya||e.s,t.pa.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Ia("Unsupported field value: "+Kf(t))}(t,e)}function Pp(t,e){var n={};return Za(t)?e.path&&e.path.length>0&&e.Le.push(e.path):Ja(t,(function(t,r){var i=Ap(r,e.Ca(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Op(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ru||t instanceof gp||t instanceof ip||t instanceof bp||t instanceof up)}function Rp(t,e,n){if(!Op(n)||!Yf(n)){var r=Kf(n);throw"an object"===r?e.Ia(t+" a custom object"):e.Ia(t+" "+r)}}function Dp(t,e,n){if(e instanceof op)return e.fa;if("string"==typeof e)return Lp(t,e);throw Fp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Lp(t,e,n){try{return function(t){if(t.search(ap)>=0)throw new nu(eu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(sp.bind.apply(sp,h([void 0],t.split("."))))}catch(e){throw new nu(eu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).fa}catch(e){throw Fp((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function Fp(t,e,n,r,i){var o=r&&!r._(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new nu(eu.INVALID_ARGUMENT,(a+=". ")+t+u)}function Mp(t,e){return t.some((function(t){return t.isEqual(e)}))}var jp=function(){function t(t){this.uid=t}return t.prototype.Yr=function(){return null!=this.uid},t.prototype.Ma=function(){return this.Yr()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();jp.UNAUTHENTICATED=new jp(null),jp.Oa=new jp("google-credentials-uid"),jp.La=new jp("first-party-uid");var Up=function(t,e){this.user=e,this.type="OAuth",this.Ba={},this.Ba.Authorization="Bearer "+t},Vp=function(){function t(){this.qa=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Ua=function(){},t.prototype.Qa=function(t){this.qa=t,t(jp.UNAUTHENTICATED)},t.prototype.Wa=function(){this.qa=null},t}(),qp=function(){function t(t){var e=this;this.ja=null,this.currentUser=jp.UNAUTHENTICATED,this.Ka=!1,this.Ga=0,this.qa=null,this.forceRefresh=!1,this.ja=function(){e.Ga++,e.currentUser=e.za(),e.Ka=!0,e.qa&&e.qa(e.currentUser)},this.Ga=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ja):(this.ja(null),t.get().then((function(t){e.auth=t,e.ja&&e.auth.addAuthTokenListener(e.ja)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Ga,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Ga!==e?(ja("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ba("string"==typeof n.accessToken),new Up(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Ua=function(){this.forceRefresh=!0},t.prototype.Qa=function(t){this.qa=t,this.Ka&&t(this.currentUser)},t.prototype.Wa=function(){this.auth&&this.auth.removeAuthTokenListener(this.ja),this.ja=null,this.qa=null},t.prototype.za=function(){var t=this.auth&&this.auth.getUid();return Ba(null===t||"string"==typeof t),new jp(t)},t}(),Bp=function(){function t(t,e){this.Ha=t,this.Ya=e,this.type="FirstParty",this.user=jp.La}return Object.defineProperty(t.prototype,"Ba",{get:function(){var t={"X-Goog-AuthUser":this.Ya},e=this.Ha.auth.Ja([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Wp=function(){function t(t,e){this.Ha=t,this.Ya=e}return t.prototype.getToken=function(){return Promise.resolve(new Bp(this.Ha,this.Ya))},t.prototype.Qa=function(t){t(jp.La)},t.prototype.Wa=function(){},t.prototype.Ua=function(){},t}(),zp=function(){function t(t,e,n,r,i,o){this.bs=t,this.Xa=n,this.Za=r,this.tu=i,this.listener=o,this.state=0,this.eu=0,this.nu=null,this.stream=null,this.xo=new sh(t,e)}return t.prototype.su=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.iu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ru()},t.prototype.stop=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.su()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ou=function(){this.state=0,this.xo.reset()},t.prototype.hu=function(){var t=this;this.iu()&&null===this.nu&&(this.nu=this.bs.Os(this.Xa,6e4,(function(){return t.au()})))},t.prototype.uu=function(t){this.cu(),this.stream.send(t)},t.prototype.au=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.iu()?[2,this.close(0)]:[2]}))}))},t.prototype.cu=function(){this.nu&&(this.nu.cancel(),this.nu=null)},t.prototype.close=function(t,e){return s(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return this.cu(),this.xo.cancel(),this.eu++,3!==t?this.xo.reset():e&&e.code===eu.RESOURCE_EXHAUSTED?(Ua(e.toString()),Ua("Using maximum backoff delay to prevent overloading the backend."),this.xo.ks()):e&&e.code===eu.UNAUTHENTICATED&&this.tu.Ua(),null!==this.stream&&(this.lu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener._u(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.lu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.fu(this.eu),n=this.eu;this.tu.getToken().then((function(e){t.eu===n&&t.du(e)}),(function(n){e((function(){var e=new nu(eu.UNKNOWN,"Fetching auth token failed: "+n.message);return t.wu(e)}))}))},t.prototype.du=function(t){var e=this,n=this.fu(this.eu);this.stream=this.Tu(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream._u((function(t){n((function(){return e.wu(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ru=function(){var t=this;this.state=4,this.xo.xs((function(){return s(t,void 0,void 0,(function(){return a(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.wu=function(t){return ja("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.fu=function(t){var e=this;return function(n){e.bs.lr((function(){return e.eu===t?n():(ja("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Hp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return i(e,t),e.prototype.Tu=function(t){return this.Za.Iu("Listen",t)},e.prototype.onMessage=function(t){this.xo.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:qa()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Oe?(Ba(void 0===e||"string"==typeof e),mu.fromBase64String(e||"")):(Ba(void 0===e||e instanceof Uint8Array),mu.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?eu.UNKNOWN:Cu(t.code);return new nu(e,t.message||"")}(s);n=new Gu(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=kc(t,u.document.name),l=Sc(u.document.updateTime),h=new Cl({mapValue:{fields:u.document.fields}}),f=new Nl(c,l,h,{}),p=u.targetIds||[],d=u.removedTargetIds||[];n=new Hu(p,d,f.key,f)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var v=kc(t,y.document),g=y.readTime?Sc(y.readTime):iu.min(),m=new kl(v,g),_=y.removedTargetIds||[];n=new Hu([],_,m.key,m)}else if("documentRemove"in e){e.documentRemove;var b=e.documentRemove;b.document;var w=kc(t,b.document),E=b.removedTargetIds||[];n=new Hu([],E,w,null)}else{if(!("filter"in e))return qa();e.filter;var T=e.filter;T.targetId;var C=T.count||0,S=new Eu(C),I=T.targetId;n=new Qu(I,S)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return iu.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?iu.min():e.readTime?Sc(e.readTime):iu.min()}(t);return this.listener.mu(e,n)},e.prototype.Au=function(t){var e={};e.database=Oc(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=gu(r)?{documents:Mc(t,r)}:{query:jc(t,r)}).targetId=e.targetId,e.resumeToken.H()>0&&(n.resumeToken=Tc(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return qa()}}(0,e.J);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.uu(e)},e.prototype.Ru=function(t){var e={};e.database=Oc(this.serializer),e.removeTarget=t,this.uu(e)},e}(zp),Qp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Pu=!1,s}return i(e,t),Object.defineProperty(e.prototype,"Vu",{get:function(){return this.Pu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Pu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.lu=function(){this.Pu&&this.gu([])},e.prototype.Tu=function(t){return this.Za.Iu("Write",t)},e.prototype.onMessage=function(t){if(Ba(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Pu){this.xo.reset();var e=function(t,e){return t&&t.length>0?(Ba(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Sc(t.updateTime):Sc(e);n.isEqual(iu.min())&&(n=Sc(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new al(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Sc(t.commitTime);return this.listener.yu(n,e)}return Ba(!t.writeResults||0===t.writeResults.length),this.Pu=!0,this.listener.pu()},e.prototype.bu=function(){var t={};t.database=Oc(this.serializer),this.uu(t)},e.prototype.gu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Lc(e.serializer,t)}))};this.uu(n)},e}(zp),Gp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Za=e,i.credentials=n,i.serializer=r,i.vu=!1,i}return i(e,t),e.prototype.Su=function(){if(this.vu)throw new nu(eu.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Du=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Du(t,e,r)})).catch((function(t){throw t.code===eu.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e.prototype.Cu=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Cu(t,e,r)})).catch((function(t){throw t.code===eu.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e}((function(){this.je=void 0})),Yp=function(){function t(t){this.Fu=t,this.Nu=new Map,this.mutations=[],this.$u=!1,this.ku=null,this.xu=new Set}return t.prototype.Mu=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:if(this.Ou(),this.mutations.length>0)throw new nu(eu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s;return a(this,(function(a){switch(a.label){case 0:return n=Wa(t),r={database:Oc(n.serializer),documents:e.map((function(t){return Nc(n.serializer,t)}))},[4,n.Cu("BatchGetDocuments",r)];case 1:return i=a.sent(),o=new Map,i.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Ba(!!e.found),e.found.name,e.found.updateTime;var n=kc(t,e.found.name),r=Sc(e.found.updateTime),i=new Cl({mapValue:{fields:e.found.fields}});return new Nl(n,r,i,{})}(t,e):"missing"in e?function(t,e){Ba(!!e.missing),Ba(!!e.readTime);var n=kc(t,e.missing),r=Sc(e.readTime);return new kl(n,r)}(t,e):qa()}(n.serializer,t);o.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=o.get(t.toString());Ba(!!e),s.push(e)})),s)]}}))}))}(this.Fu,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof kl||t instanceof Nl?n.Lu(t):qa()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.va(t,this.Ue(t))),this.xu.add(t)},t.prototype.update=function(t,e){try{this.write(e.va(t,this.Bu(t)))}catch(t){this.ku=t}this.xu.add(t)},t.prototype.delete=function(t){this.write([new El(t,this.Ue(t))]),this.xu.add(t)},t.prototype.commit=function(){return s(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){switch(n.label){case 0:if(this.Ou(),this.ku)throw this.ku;return t=this.Nu,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=new cu(su.$(n));e.mutations.push(new Tl(r,e.Ue(r)))})),[4,function(t,e){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return n=Wa(t),r={database:Oc(n.serializer),writes:e.map((function(t){return Lc(n.serializer,t)}))},[4,n.Du("Commit",r)];case 1:return i.sent(),[2]}}))}))}(this.Fu,this.mutations)];case 1:return n.sent(),this.$u=!0,[2]}}))}))},t.prototype.Lu=function(t){var e;if(t instanceof Nl)e=t.version;else{if(!(t instanceof kl))throw qa();e=iu.min()}var n=this.Nu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new nu(eu.ABORTED,"Document version changed between two reads.")}else this.Nu.set(t.key.toString(),e)},t.prototype.Ue=function(t){var e=this.Nu.get(t.toString());return!this.xu.has(t)&&e?ul.updateTime(e):ul.Qe()},t.prototype.Bu=function(t){var e=this.Nu.get(t.toString());if(!this.xu.has(t)&&e){if(e.isEqual(iu.min()))throw new nu(eu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ul.updateTime(e)}return ul.exists(!0)},t.prototype.write=function(t){this.Ou(),this.mutations=this.mutations.concat(t)},t.prototype.Ou=function(){},t}(),Kp=function(){function t(t,e){this.Ro=t,this.qu=e,this.state="Unknown",this.Uu=0,this.Qu=null,this.Wu=!0}return t.prototype.ju=function(){var t=this;0===this.Uu&&(this.Ku("Unknown"),this.Qu=this.Ro.Os("online_state_timeout",1e4,(function(){return t.Qu=null,t.Gu("Backend didn't respond within 10 seconds."),t.Ku("Offline"),Promise.resolve()})))},t.prototype.zu=function(t){"Online"===this.state?this.Ku("Unknown"):(this.Uu++,this.Uu>=1&&(this.Hu(),this.Gu("Connection failed 1 times. Most recent error: "+t.toString()),this.Ku("Offline")))},t.prototype.set=function(t){this.Hu(),this.Uu=0,"Online"===t&&(this.Wu=!1),this.Ku(t)},t.prototype.Ku=function(t){t!==this.state&&(this.state=t,this.qu(t))},t.prototype.Gu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Wu?(Ua(e),this.Wu=!1):ja("OnlineStateTracker",e)},t.prototype.Hu=function(){null!==this.Qu&&(this.Qu.cancel(),this.Qu=null)},t}(),$p=function(){function t(t,e,n,r,i){var o=this;this.Yu=t,this.Fu=e,this.Ro=n,this.Ju=[],this.Xu=new Map,this.Zu=null,this.tc=new Set,this.ec=i,this.ec.nc((function(t){n.lr((function(){return s(o,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.sc()?(ja("RemoteStore","Restarting streams for network reachability change."),[4,this.ic()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.rc=new Kp(n,r),this.oc=function(t,e,n){var r=Wa(t);return new Hp(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.hc.bind(this),_u:this.ac.bind(this),mu:this.uc.bind(this)}),this.cc=function(t,e,n){var r=Wa(t);return new Qp(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.lc.bind(this),_u:this._c.bind(this),pu:this.fc.bind(this),yu:this.yu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.tc.delete(0),this.dc()},t.prototype.dc=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.sc()?(this.wc()?this.Tc():this.rc.set("Unknown"),[4,this.Ec()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.tc.add(0),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Offline"),[2]}}))}))},t.prototype.Ic=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.cc.stop()];case 1:return t.sent(),[4,this.oc.stop()];case 2:return t.sent(),this.Ju.length>0&&(ja("RemoteStore","Stopping write stream with "+this.Ju.length+" pending writes"),this.Ju=[]),this.mc(),[2]}}))}))},t.prototype.yr=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return ja("RemoteStore","RemoteStore shutting down."),this.tc.add(5),[4,this.Ic()];case 1:return t.sent(),this.ec.yr(),this.rc.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Xu.has(t.targetId)||(this.Xu.set(t.targetId,t),this.wc()?this.Tc():this.oc.iu()&&this.Ac(t))},t.prototype.Rc=function(t){this.Xu.delete(t),this.oc.iu()&&this.Pc(t),0===this.Xu.size&&(this.oc.iu()?this.oc.hu():this.sc()&&this.rc.set("Unknown"))},t.prototype.Me=function(t){return this.Xu.get(t)||null},t.prototype.xe=function(t){return this.Vc.xe(t)},t.prototype.Ac=function(t){this.Zu.de(t.targetId),this.oc.Au(t)},t.prototype.Pc=function(t){this.Zu.de(t),this.oc.Ru(t)},t.prototype.Tc=function(){this.Zu=new Ku(this),this.oc.start(),this.rc.ju()},t.prototype.wc=function(){return this.sc()&&!this.oc.su()&&this.Xu.size>0},t.prototype.sc=function(){return 0===this.tc.size},t.prototype.mc=function(){this.Zu=null},t.prototype.hc=function(){return s(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){return this.Xu.forEach((function(e,n){t.Ac(e)})),[2]}))}))},t.prototype.ac=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return this.mc(),this.wc()?(this.rc.zu(t),this.Tc()):this.rc.set("Unknown"),[2]}))}))},t.prototype.uc=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:if(this.rc.set("Online"),!(t instanceof Gu&&2===t.state&&t.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.gc(t)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),ja("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.yc(n)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Hu?this.Zu.Pe(t):t instanceof Qu?this.Zu.De(t):this.Zu.ye(t),e.isEqual(iu.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,this.Yu.mi()];case 8:return r=o.sent(),e.o(r)>=0?[4,this.pc(e)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return ja("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,this.yc(i)];case 12:return o.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.yc=function(t,e){return s(this,void 0,void 0,(function(){var n=this;return a(this,(function(r){switch(r.label){case 0:if(!vf(t))throw t;return this.tc.add(1),[4,this.Ic()];case 1:return r.sent(),this.rc.set("Offline"),e||(e=function(){return n.Yu.mi()}),this.Ro.dr((function(){return s(n,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return ja("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.tc.delete(1),[4,this.dc()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.bc=function(t){var e=this;return t().catch((function(n){return e.yc(n,t)}))},t.prototype.pc=function(t){var e=this,n=this.Zu.Ne(t);return n.Qt.forEach((function(n,r){if(n.resumeToken.H()>0){var i=e.Xu.get(r);i&&e.Xu.set(r,i.tt(n.resumeToken,t))}})),n.Wt.forEach((function(t){var n=e.Xu.get(t);if(n){e.Xu.set(t,n.tt(mu.Y,n.X)),e.Pc(t);var r=new wu(n.target,t,1,n.sequenceNumber);e.Ac(r)}})),this.Vc.qh(n)},t.prototype.gc=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i;return a(this,(function(o){switch(o.label){case 0:e=t.cause,n=0,r=t.targetIds,o.label=1;case 1:return n<r.length?(i=r[n],this.Xu.has(i)?[4,this.Vc.vc(i,e)]:[3,3]):[3,5];case 2:o.sent(),this.Xu.delete(i),this.Zu.removeTarget(i),o.label=3;case 3:o.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.Ec=function(){return s(this,void 0,void 0,(function(){var t,e,n;return a(this,(function(r){switch(r.label){case 0:t=this.Ju.length>0?this.Ju[this.Ju.length-1].batchId:-1,r.label=1;case 1:if(!this.Sc())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,this.Yu.jh(t)];case 3:return null===(e=r.sent())?(0===this.Ju.length&&this.cc.hu(),[3,7]):(t=e.batchId,this.Dc(e),[3,6]);case 4:return n=r.sent(),[4,this.yc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.Sc=function(){return this.sc()&&this.Ju.length<10},t.prototype.Nc=function(){return this.Ju.length},t.prototype.Dc=function(t){this.Ju.push(t),this.cc.iu()&&this.cc.Vu&&this.cc.gu(t.mutations)},t.prototype.Cc=function(){return this.sc()&&!this.cc.su()&&this.Ju.length>0},t.prototype.Fc=function(){this.cc.start()},t.prototype.lc=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.cc.bu(),[2]}))}))},t.prototype.fc=function(){return s(this,void 0,void 0,(function(){var t,e,n;return a(this,(function(r){for(t=0,e=this.Ju;t<e.length;t++)n=e[t],this.cc.gu(n.mutations);return[2]}))}))},t.prototype.yu=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i=this;return a(this,(function(o){switch(o.label){case 0:return n=this.Ju.shift(),r=Xl.from(n,t,e),[4,this.bc((function(){return i.Vc.$c(r)}))];case 1:return o.sent(),[4,this.Ec()];case 2:return o.sent(),[2]}}))}))},t.prototype._c=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return t&&this.cc.Vu?[4,this.kc(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.kc=function(t){return s(this,void 0,void 0,(function(){var e,n,r=this;return a(this,(function(i){switch(i.label){case 0:return Tu(n=t.code)&&n!==eu.ABORTED?(e=this.Ju.shift(),this.cc.ou(),[4,this.bc((function(){return r.Vc.xc(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.Ec()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.Mc=function(){return new Yp(this.Fu)},t.prototype.ic=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.tc.add(4),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Unknown"),this.tc.delete(4),[4,this.dc()];case 2:return t.sent(),[2]}}))}))},t.prototype.Oc=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.Ro.Ko(),ja("RemoteStore","RemoteStore received new credentials"),this.tc.add(3),[4,this.Ic()];case 1:return e.sent(),this.rc.set("Unknown"),[4,this.Vc.Oc(t)];case 2:return e.sent(),this.tc.delete(3),[4,this.dc()];case 3:return e.sent(),[2]}}))}))},t.prototype.Lc=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return t?(this.tc.delete(2),[4,this.dc()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.tc.add(2),[4,this.Ic()]);case 3:e.sent(),this.rc.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();function Xp(t,e){return"firestore_clients_"+t+"_"+e}function Jp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Yr()&&(r+="_"+e.uid),r}function Zp(t,e){return"firestore_targets_"+t+"_"+e}var td=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Bc=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new nu(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Ua("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ed=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Bc=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new nu(r.error.code,r.error.message)),i?new t(e,r.state,o):(Ua("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),nd=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Bc=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Uu(),s=0;i&&s<r.activeTargetIds.length;++s)i=fu(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ua("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),rd=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Bc=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ua("SharedClientState","Failed to parse online state: "+e),null)},t}(),id=function(){function t(){this.activeTargetIds=Uu()}return t.prototype.Uc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Qc=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.qc=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),od=function(){function t(t,e,n,r,i){this.window=t,this.bs=e,this.persistenceKey=n,this.Wc=r,this.Vc=null,this.qu=null,this.Ps=null,this.jc=this.Kc.bind(this),this.Gc=new Su(Qa),this.hr=!1,this.zc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Hc=Xp(this.persistenceKey,this.Wc),this.Yc=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Gc=this.Gc.nt(this.Wc,new id),this.Jc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Xc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Zc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.tl=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.jc)}return t.Hi=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return s(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,c,l,h,f=this;return a(this,(function(a){switch(a.label){case 0:return[4,this.Vc.Dr()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Wc&&(i=this.getItem(Xp(this.persistenceKey,r)))&&(o=nd.Bc(r,i))&&(this.Gc=this.Gc.nt(o.clientId,o));for(this.el(),(s=this.storage.getItem(this.tl))&&(u=this.nl(s))&&this.sl(u),c=0,l=this.zc;c<l.length;c++)h=l[c],this.Kc(h);return this.zc=[],this.window.addEventListener("unload",(function(){return f.yr()})),this.hr=!0,[2]}}))}))},t.prototype.ys=function(t){this.setItem(this.Yc,JSON.stringify(t))},t.prototype.il=function(){return this.rl(this.Gc)},t.prototype.ol=function(t){var e=!1;return this.Gc.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.hl=function(t){this.al(t,"pending")},t.prototype.ul=function(t,e,n){this.al(t,e,n),this.cl(t)},t.prototype.ll=function(t){var e="not-current";if(this.ol(t)){var n=this.storage.getItem(Zp(this.persistenceKey,t));if(n){var r=ed.Bc(t,n);r&&(e=r.state)}}return this._l.Uc(t),this.el(),e},t.prototype.fl=function(t){this._l.Qc(t),this.el()},t.prototype.dl=function(t){return this._l.activeTargetIds.has(t)},t.prototype.wl=function(t){this.removeItem(Zp(this.persistenceKey,t))},t.prototype.Tl=function(t,e,n){this.El(t,e,n)},t.prototype.Nh=function(t,e,n){var r=this;e.forEach((function(t){r.cl(t)})),this.currentUser=t,n.forEach((function(t){r.hl(t)}))},t.prototype.Il=function(t){this.ml(t)},t.prototype.yr=function(){this.hr&&(this.window.removeEventListener("storage",this.jc),this.removeItem(this.Hc),this.hr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ja("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ja("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ja("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Kc=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ja("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Hc)return void Ua("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bs.dr((function(){return s(e,void 0,void 0,(function(){var t,e,r,i,o,s;return a(this,(function(a){if(this.hr){if(null!==n.key)if(this.Jc.test(n.key)){if(null==n.newValue)return t=this.Al(n.key),[2,this.Rl(t,null)];if(e=this.Pl(n.key,n.newValue))return[2,this.Rl(e.clientId,e)]}else if(this.Xc.test(n.key)){if(null!==n.newValue&&(r=this.Vl(n.key,n.newValue)))return[2,this.gl(r)]}else if(this.Zc.test(n.key)){if(null!==n.newValue&&(i=this.yl(n.key,n.newValue)))return[2,this.pl(i)]}else if(n.key===this.tl){if(null!==n.newValue&&(o=this.nl(n.newValue)))return[2,this.sl(o)]}else n.key===this.Yc&&(s=function(t){var e=ih.ps;if(null!=t)try{var n=JSON.parse(t);Ba("number"==typeof n),e=n}catch(t){Ua("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ih.ps&&this.Ps(s)}else this.zc.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"_l",{get:function(){return this.Gc.get(this.Wc)},enumerable:!1,configurable:!0}),t.prototype.el=function(){this.setItem(this.Hc,this._l.qc())},t.prototype.al=function(t,e,n){var r=new td(this.currentUser,t,e,n),i=Jp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.qc())},t.prototype.cl=function(t){var e=Jp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ml=function(t){var e={clientId:this.Wc,onlineState:t};this.storage.setItem(this.tl,JSON.stringify(e))},t.prototype.El=function(t,e,n){var r=Zp(this.persistenceKey,t),i=new ed(t,e,n);this.setItem(r,i.qc())},t.prototype.Al=function(t){var e=this.Jc.exec(t);return e?e[1]:null},t.prototype.Pl=function(t,e){var n=this.Al(t);return nd.Bc(n,e)},t.prototype.Vl=function(t,e){var n=this.Xc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return td.Bc(new jp(i),r,e)},t.prototype.yl=function(t,e){var n=this.Zc.exec(t),r=Number(n[1]);return ed.Bc(r,e)},t.prototype.nl=function(t){return rd.Bc(t)},t.prototype.gl=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Vc.bl(t.batchId,t.state,t.error)]:(ja("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.pl=function(t){return this.Vc.vl(t.targetId,t.state,t.error)},t.prototype.Rl=function(t,e){var n=this,r=e?this.Gc.nt(t,e):this.Gc.remove(t),i=this.rl(this.Gc),o=this.rl(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.Vc.Sl(s,a).then((function(){n.Gc=r}))},t.prototype.sl=function(t){this.Gc.get(t.clientId)&&this.qu(t.onlineState)},t.prototype.rl=function(t){var e=Uu();return t.forEach((function(t,n){e=e.Ct(n.activeTargetIds)})),e},t}(),sd=function(){function t(){this.Dl=new id,this.Cl={},this.Vc=null,this.qu=null,this.Ps=null}return t.prototype.hl=function(t){},t.prototype.ul=function(t,e,n){},t.prototype.ll=function(t){return this.Dl.Uc(t),this.Cl[t]||"not-current"},t.prototype.Tl=function(t,e,n){this.Cl[t]=e},t.prototype.fl=function(t){this.Dl.Qc(t)},t.prototype.dl=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.wl=function(t){delete this.Cl[t]},t.prototype.il=function(){return this.Dl.activeTargetIds},t.prototype.ol=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.start=function(){return this.Dl=new id,Promise.resolve()},t.prototype.Nh=function(t,e,n){},t.prototype.Il=function(t){},t.prototype.yr=function(){},t.prototype.ys=function(t){},t}(),ad=function(t){this.key=t},ud=function(t){this.key=t},cd=function(){function t(t,e){this.query=t,this.Fl=e,this.Nl=null,this.Ht=!1,this.$l=Mu(),this.Lt=Mu(),this.kl=Fl(t),this.xl=new Vu(this.kl)}return Object.defineProperty(t.prototype,"Ml",{get:function(){return this.Fl},enumerable:!1,configurable:!0}),t.prototype.Ol=function(t,e){var n=this,r=e?e.Ll:new qu,i=e?e.xl:this.xl,o=e?e.Lt:this.Lt,s=i,a=!1,u=this.query.In()&&i.size===this.query.limit?i.last():null,c=this.query.mn()&&i.size===this.query.limit?i.first():null;if(t.ot((function(t,e){var l=i.get(t),h=e instanceof Nl?e:null;h&&(h=Ll(n.query,h)?h:null);var f=!!l&&n.Lt.has(l.key),p=!!h&&(h.Ge||n.Lt.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Bl(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.kl(h,u)>0||c&&n.kl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),this.query.In()||this.query.mn())for(;s.size>this.query.limit;){var l=this.query.In()?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{xl:s,Ll:r,ql:a,Lt:o}},t.prototype.Bl=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},t.prototype.Jn=function(t,e,n){var r=this,i=this.xl;this.xl=t.xl,this.Lt=t.Lt;var o=t.Ll.Mt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qa()}};return n(t)-n(e)}(t.type,e.type)||r.kl(t.doc,e.doc)})),this.Ul(n);var s=e?this.Ql():[],a=0===this.$l.size&&this.Ht?1:0,u=a!==this.Nl;return this.Nl=a,0!==o.length||u?{snapshot:new Bu(this.query,t.xl,i,o,t.Lt,0===a,u,!1),Wl:s}:{Wl:s}},t.prototype.jl=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.Jn({xl:this.xl,Ll:new qu,Lt:this.Lt,ql:!1},!1)):{Wl:[]}},t.prototype.Kl=function(t){return!this.Fl.has(t)&&!!this.xl.has(t)&&!this.xl.get(t).Ge},t.prototype.Ul=function(t){var e=this;t&&(t.Yt.forEach((function(t){return e.Fl=e.Fl.add(t)})),t.Jt.forEach((function(t){})),t.Xt.forEach((function(t){return e.Fl=e.Fl.delete(t)})),this.Ht=t.Ht)},t.prototype.Ql=function(){var t=this;if(!this.Ht)return[];var e=this.$l;this.$l=Mu(),this.xl.forEach((function(e){t.Kl(e.key)&&(t.$l=t.$l.add(e.key))}));var n=[];return e.forEach((function(e){t.$l.has(e)||n.push(new ud(e))})),this.$l.forEach((function(t){e.has(t)||n.push(new ad(t))})),n},t.prototype.Gl=function(t){this.Fl=t.Yh,this.$l=Mu();var e=this.Ol(t.documents);return this.Jn(e,!0)},t.prototype.zl=function(){return Bu.Ut(this.query,this.xl,this.Lt,0===this.Nl)},t}(),ld=function(){function t(t,e,n,r){this.Ro=t,this.Fu=e,this.updateFunction=n,this.yo=r,this.Hl=5,this.xo=new sh(this.Ro,"transaction_retry")}return t.prototype.run=function(){this.Yl()},t.prototype.Yl=function(){var t=this;this.xo.xs((function(){return s(t,void 0,void 0,(function(){var t,e,n=this;return a(this,(function(r){return t=new Yp(this.Fu),(e=this.Jl(t))&&e.then((function(e){n.Ro.lr((function(){return t.commit().then((function(){n.yo.resolve(e)})).catch((function(t){n.Xl(t)}))}))})).catch((function(t){n.Xl(t)})),[2]}))}))}))},t.prototype.Jl=function(t){try{var e=this.updateFunction(t);return!lu(e)&&e.catch&&e.then?e:(this.yo.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.yo.reject(t),null}},t.prototype.Xl=function(t){var e=this;this.Hl>0&&this.Zl(t)?(this.Hl-=1,this.Ro.lr((function(){return e.Yl(),Promise.resolve()}))):this.yo.reject(t)},t.prototype.Zl=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Tu(e)}return!1},t}(),hd=function(t,e,n){this.query=t,this.targetId=e,this.view=n},fd=function(t){this.key=t,this.t_=!1},pd=function(){function t(t,e,n,r,i,o){this.Yu=t,this.e_=e,this.Fu=n,this.n_=r,this.currentUser=i,this.s_=o,this.i_=null,this.r_=new tu((function(t){return Rl(t)}),Ol),this.o_=new Map,this.h_=[],this.a_=new Su(cu.P),this.u_=new Map,this.c_=new Lf,this.l_={},this.__=new Map,this.f_=Ah.di(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"d_",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){this.i_=t},t.prototype.listen=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o;return a(this,(function(s){switch(s.label){case 0:return this.w_("listen()"),(r=this.r_.get(t))?(e=r.targetId,this.n_.ll(e),n=r.view.zl(),[3,4]):[3,1];case 1:return[4,this.Yu.Gh(t.We())];case 2:return i=s.sent(),o=this.n_.ll(i.targetId),e=i.targetId,[4,this.T_(t,e,"current"===o)];case 3:n=s.sent(),this.d_&&this.e_.listen(i),s.label=4;case 4:return[2,n]}}))}))},t.prototype.T_=function(t,e,n){return s(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a(this,(function(a){switch(a.label){case 0:return[4,this.Yu.Hh(t,!0)];case 1:return r=a.sent(),i=new cd(t,r.Yh),o=i.Ol(r.documents),s=zu.zt(e,n&&"Offline"!==this.onlineState),u=i.Jn(o,this.d_,s),this.E_(e,u.Wl),c=new hd(t,e,i),[2,(this.r_.set(t,c),this.o_.has(e)?this.o_.get(e).push(t):this.o_.set(e,[t]),u.snapshot)]}}))}))},t.prototype.Rc=function(t){return s(this,void 0,void 0,(function(){var e,n,r=this;return a(this,(function(i){switch(i.label){case 0:return this.w_("unlisten()"),e=this.r_.get(t),(n=this.o_.get(e.targetId)).length>1?[2,(this.o_.set(e.targetId,n.filter((function(e){return!Ol(e,t)}))),void this.r_.delete(t))]:this.d_?(this.n_.fl(e.targetId),this.n_.ol(e.targetId)?[3,2]:[4,this.Yu.zh(e.targetId,!1).then((function(){r.n_.wl(e.targetId),r.e_.Rc(e.targetId),r.I_(e.targetId)})).catch(Df)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.I_(e.targetId),[4,this.Yu.zh(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:this.w_("write()"),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,this.Yu.Mh(t)];case 2:return n=o.sent(),this.n_.hl(n.batchId),this.m_(n.batchId,e),[4,this.A_(n.Un)];case 3:return o.sent(),[4,this.e_.Ec()];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),i=Sf(r,"Failed to persist write"),e.reject(i),[3,6];case 6:return[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new ld(t,this.Fu,e,n).run()},t.prototype.qh=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:this.w_("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.qh(t)];case 2:return e=r.sent(),t.Qt.forEach((function(t,e){var r=n.u_.get(e);r&&(Ba(t.Yt.size+t.Jt.size+t.Xt.size<=1),t.Yt.size>0?r.t_=!0:t.Jt.size>0?Ba(r.t_):t.Xt.size>0&&(Ba(r.t_),r.t_=!1))})),[4,this.A_(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Df(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.jl=function(t,e){this.w_("applyOnlineStateChange()");var n=[];this.r_.forEach((function(e,r){var i=r.view.jl(t);i.snapshot&&n.push(i.snapshot)})),this.i_.R_(t),this.i_.mu(n),this.onlineState=t},t.prototype.vc=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s,u=this;return a(this,(function(a){switch(a.label){case 0:return this.w_("rejectListens()"),this.n_.Tl(t,"rejected",e),n=this.u_.get(t),(r=n&&n.key)?(i=(i=new Su(cu.P)).nt(r,new kl(r,iu.min())),o=Mu().add(r),s=new Wu(iu.min(),new Map,new Nu(Qa),i,o),[4,this.qh(s)]):[3,2];case 1:return a.sent(),this.a_=this.a_.remove(r),this.u_.delete(t),this.P_(),[3,4];case 2:return[4,this.Yu.zh(t,!1).then((function(){return u.I_(t,e)})).catch(Df)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},t.prototype.$c=function(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:this.w_("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Oh(t)];case 2:return n=r.sent(),this.V_(e,null),this.g_(e),this.n_.ul(e,"acknowledged"),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,Df(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.xc=function(t,e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:this.w_("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Bh(t)];case 2:return n=r.sent(),this.V_(t,e),this.g_(t),this.n_.ul(t,"rejected",e),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,Df(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.y_=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i;return a(this,(function(o){switch(o.label){case 0:this.e_.sc()||ja("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.Yu.no()];case 2:return-1===(e=o.sent())?[2,void t.resolve()]:((n=this.__.get(e)||[]).push(t),this.__.set(e,n),[3,4]);case 3:return r=o.sent(),i=Sf(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(i),[3,4];case 4:return[2]}}))}))},t.prototype.g_=function(t){(this.__.get(t)||[]).forEach((function(t){t.resolve()})),this.__.delete(t)},t.prototype.p_=function(t){this.__.forEach((function(e){e.forEach((function(e){e.reject(new nu(eu.CANCELLED,t))}))})),this.__.clear()},t.prototype.m_=function(t,e){var n=this.l_[this.currentUser.Ma()];n||(n=new Su(Qa)),n=n.nt(t,e),this.l_[this.currentUser.Ma()]=n},t.prototype.V_=function(t,e){var n=this.l_[this.currentUser.Ma()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.l_[this.currentUser.Ma()]=n}},t.prototype.I_=function(t,e){var n=this;void 0===e&&(e=null),this.n_.fl(t);for(var r=0,i=this.o_.get(t);r<i.length;r++){var o=i[r];this.r_.delete(o),e&&this.i_.b_(o,e)}this.o_.delete(t),this.d_&&this.c_.aa(t).forEach((function(t){n.c_.Mi(t)||n.v_(t)}))},t.prototype.v_=function(t){var e=this.a_.get(t);null!==e&&(this.e_.Rc(e),this.a_=this.a_.remove(t),this.u_.delete(e),this.P_())},t.prototype.E_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof ad?(this.c_.Fi(i.key,t),this.S_(i)):i instanceof ud?(ja("SyncEngine","Document no longer in limbo: "+i.key),this.c_.$i(i.key,t),this.c_.Mi(i.key)||this.v_(i.key)):qa()}},t.prototype.S_=function(t){var e=t.key;this.a_.get(e)||(ja("SyncEngine","New document in limbo: "+e),this.h_.push(e),this.P_())},t.prototype.P_=function(){for(;this.h_.length>0&&this.a_.size<this.s_;){var t=this.h_.shift(),e=this.f_.next();this.u_.set(e,new fd(t)),this.a_=this.a_.nt(t,e),this.e_.listen(new wu(Pl.hn(t.path).We(),e,2,ih.ps))}},t.prototype.D_=function(){return this.a_},t.prototype.C_=function(){return this.h_},t.prototype.A_=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o=this;return a(this,(function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.r_.forEach((function(s,a){i.push(Promise.resolve().then((function(){var e=a.view.Ol(t);return e.ql?o.Yu.Hh(a.query,!1).then((function(t){var n=t.documents;return a.view.Ol(n,e)})):e})).then((function(t){var i=e&&e.Qt.get(a.targetId),s=a.view.Jn(t,o.d_,i);if(o.E_(a.targetId,s.Wl),s.snapshot){o.d_&&o.n_.Tl(a.targetId,s.snapshot.fromCache?"not-current":"current"),n.push(s.snapshot);var u=rh.Rs(a.targetId,s.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return s.sent(),this.i_.mu(n),[4,this.Yu.Wh(r)];case 2:return s.sent(),[2]}}))}))},t.prototype.w_=function(t){},t.prototype.Oc=function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(ja("SyncEngine","User change. New user:",t.Ma()),[4,this.Yu.Nh(t)]);case 1:return e=n.sent(),this.currentUser=t,this.p_("'waitForPendingWrites' promise is rejected due to a user change."),this.n_.Nh(t,e.kh,e.xh),[4,this.A_(e.$h)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.e_.enableNetwork()},t.prototype.disableNetwork=function(){return this.e_.disableNetwork()},t.prototype.xe=function(t){var e=this.u_.get(t);if(e&&e.t_)return Mu().add(e.key);var n=Mu(),r=this.o_.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.r_.get(s);n=n.Ct(a.view.Ml)}return n},t}(),dd=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,o,s)||this).Yu=e,a.F_=void 0,a}return i(e,t),Object.defineProperty(e.prototype,"d_",{get:function(){return!0===this.F_},enumerable:!1,configurable:!0}),e.prototype.enableNetwork=function(){return this.Yu.cr(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.Yu.cr(!1),t.prototype.disableNetwork.call(this)},e.prototype.N_=function(t){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,this.Yu.Hh(t.query,!0)];case 1:return e=r.sent(),n=t.view.Gl(e),[2,(this.F_&&this.E_(t.targetId,n.Wl),n)]}}))}))},e.prototype.jl=function(e,n){this.d_&&0===n&&(t.prototype.jl.call(this,e,n),this.n_.Il(e)),this.d_||1!==n||t.prototype.jl.call(this,e,n)},e.prototype.bl=function(t,e,n){return s(this,void 0,void 0,(function(){var r;return a(this,(function(i){switch(i.label){case 0:return this.w_("applyBatchState()"),[4,this.Yu.Xh(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.e_.Ec()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.V_(t,n||null),this.Yu.Zh(t)):qa(),i.label=4;case 4:return[4,this.A_(r)];case 5:return i.sent(),[3,7];case 6:ja("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},e.prototype.Lc=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o,s,u,c=this;return a(this,(function(a){switch(a.label){case 0:return!0!==t||!0===this.F_?[3,3]:(e=this.n_.il(),[4,this.k_(e.F(),!0)]);case 1:return n=a.sent(),this.F_=!0,[4,this.e_.Lc(!0)];case 2:for(a.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.e_.listen(o);return[3,7];case 3:return!1!==t||!1===this.F_?[3,7]:(s=[],u=Promise.resolve(),this.o_.forEach((function(t,e){c.n_.dl(e)?s.push(e):u=u.then((function(){return c.I_(e),c.Yu.zh(e,!0)})),c.e_.Rc(e)})),[4,u]);case 4:return a.sent(),[4,this.k_(s,!1)];case 5:return a.sent(),this.x_(),this.F_=!1,[4,this.e_.Lc(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},e.prototype.x_=function(){var t=this;this.u_.forEach((function(e,n){t.e_.Rc(n)})),this.c_.ua(),this.u_=new Map,this.a_=new Su(cu.P)},e.prototype.k_=function(t,e){return s(this,void 0,void 0,(function(){var e,n,r,i,o,s,u,c,l,h,f,p,d;return a(this,(function(a){switch(a.label){case 0:e=[],n=[],r=0,i=t,a.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(u=this.o_.get(o))&&0!==u.length?[4,this.Yu.Gh(u[0].We())]:[3,7]):[3,13];case 2:s=a.sent(),c=0,l=u,a.label=3;case 3:return c<l.length?(h=l[c],f=this.r_.get(h),[4,this.N_(f)]):[3,6];case 4:(p=a.sent()).snapshot&&n.push(p.snapshot),a.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,this.Yu.ta(o)];case 8:return d=a.sent(),[4,this.Yu.Gh(d)];case 9:return s=a.sent(),[4,this.T_(this.M_(d),o,!1)];case 10:a.sent(),a.label=11;case 11:e.push(s),a.label=12;case 12:return r++,[3,1];case 13:return[2,(this.i_.mu(n),e)]}}))}))},e.prototype.M_=function(t){return new Pl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype.Dr=function(){return this.Yu.Dr()},e.prototype.vl=function(t,e,n){return s(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:return this.F_?(ja("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.o_.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Yu.si()];case 3:return r=o.sent(),i=Wu.Gt(t,"current"===e),[4,this.A_(r,i)];case 4:return o.sent(),[3,8];case 5:return[4,this.Yu.zh(t,!0)];case 6:return o.sent(),this.I_(t,n),[3,8];case 7:qa(),o.label=8;case 8:return[2]}}))}))},e.prototype.Sl=function(t,e){return s(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,f,p=this;return a(this,(function(d){switch(d.label){case 0:if(!this.F_)return[3,10];n=0,r=t,d.label=1;case 1:return n<r.length?(i=r[n],this.o_.has(i)?(ja("SyncEngine","Adding an already active target "+i),[3,5]):[4,this.Yu.ta(i)]):[3,6];case 2:return o=d.sent(),[4,this.Yu.Gh(o)];case 3:return s=d.sent(),[4,this.T_(this.M_(o),s.targetId,!1)];case 4:d.sent(),this.e_.listen(s),d.label=5;case 5:return n++,[3,1];case 6:u=function(t){return a(this,(function(e){switch(e.label){case 0:return c.o_.has(t)?[4,c.Yu.zh(t,!1).then((function(){p.e_.Rc(t),p.I_(t)})).catch(Df)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},c=this,l=0,h=e,d.label=7;case 7:return l<h.length?(f=h[l],[5,u(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))},e}(pd),yd=function(){this.O_=void 0,this.listeners=[]},vd=function(){function t(t){this.Vc=t,this.L_=new tu((function(t){return Rl(t)}),Ol),this.onlineState="Unknown",this.B_=new Set,this.Vc.subscribe(this)}return t.prototype.listen=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i,o,s;return a(this,(function(a){switch(a.label){case 0:if(e=t.query,n=!1,(r=this.L_.get(e))||(n=!0,r=new yd),!n)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),i=r,[4,this.Vc.listen(e)];case 2:return i.O_=a.sent(),[3,4];case 3:return o=a.sent(),s=Sf(o,"Initialization of query '"+Dl(t.query)+"' failed"),[2,void t.onError(s)];case 4:return this.L_.set(e,r),r.listeners.push(t),t.jl(this.onlineState),r.O_&&t.q_(r.O_)&&this.U_(),[2]}}))}))},t.prototype.Rc=function(t){return s(this,void 0,void 0,(function(){var e,n,r,i;return a(this,(function(o){return e=t.query,n=!1,(r=this.L_.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.L_.delete(e),this.Vc.Rc(e))]:[2]}))}))},t.prototype.mu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.L_.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].q_(i)&&(e=!0);s.O_=i}}e&&this.U_()},t.prototype.b_=function(t,e){var n=this.L_.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.L_.delete(t)},t.prototype.R_=function(t){this.onlineState=t;var e=!1;this.L_.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].jl(t)&&(e=!0)})),e&&this.U_()},t.prototype.Q_=function(t){this.B_.add(t),t.next()},t.prototype.W_=function(t){this.B_.delete(t)},t.prototype.U_=function(){this.B_.forEach((function(t){t.next()}))},t}(),gd=function(){function t(t,e,n){this.query=t,this.j_=e,this.K_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.q_=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Bu(t.query,t.docs,t.Ot,e,t.Lt,t.fromCache,t.Bt,!0)}var o=!1;return this.K_?this.z_(t)&&(this.j_.next(t),o=!0):this.H_(t,this.onlineState)&&(this.Y_(t),o=!0),this.G_=t,o},t.prototype.onError=function(t){this.j_.error(t)},t.prototype.jl=function(t){this.onlineState=t;var e=!1;return this.G_&&!this.K_&&this.H_(this.G_,t)&&(this.Y_(this.G_),e=!0),e},t.prototype.H_=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.J_&&n||t.docs._()&&"Offline"!==e)},t.prototype.z_=function(t){if(t.docChanges.length>0)return!0;var e=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Y_=function(t){t=Bu.Ut(t.query,t.docs,t.Lt,t.fromCache),this.K_=!0,this.j_.next(t)},t}(),md=function(){function t(){}return t.prototype.Fh=function(t){this.X_=t},t.prototype._s=function(t,e,n,r){var i=this;return e.En()||n.isEqual(iu.min())?this.Z_(t,e):this.X_.us(t,r).next((function(o){var s=i.tf(e,o);return(e.In()||e.mn())&&i.ql(e.nn,s,r,n)?i.Z_(t,e):(Ma()<=$.DEBUG&&ja("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Dl(e)),i.X_._s(t,e,n).next((function(t){return s.forEach((function(e){t=t.nt(e.key,e)})),t})))}))},t.prototype.tf=function(t,e){var n=new Nu(Fl(t));return e.forEach((function(e,r){r instanceof Nl&&Ll(t,r)&&(n=n.add(r))})),n},t.prototype.ql=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.o(r)>0)},t.prototype.Z_=function(t,e){return Ma()<=$.DEBUG&&ja("IndexFreeQueryEngine","Using full collection scan to execute query:",Dl(e)),this.X_._s(t,e,iu.min())},t}(),_d=function(){function t(t,e){this.ss=t,this.wi=e,this.ns=[],this.ef=1,this.nf=new Nu(Ff.na)}return t.prototype.Jr=function(t){return Jl.resolve(0===this.ns.length)},t.prototype.Xr=function(t,e,n,r){var i=this.ef;this.ef++,this.ns.length>0&&this.ns[this.ns.length-1];var o=new $l(i,e,n,r);this.ns.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.nf=this.nf.add(new Ff(u.key,i)),this.ss.Us(t,u.key.path.p())}return Jl.resolve(o)},t.prototype.Zr=function(t,e){return Jl.resolve(this.sf(e))},t.prototype.eo=function(t,e){var n=e+1,r=this.if(n),i=r<0?0:r;return Jl.resolve(this.ns.length>i?this.ns[i]:null)},t.prototype.no=function(){return Jl.resolve(0===this.ns.length?-1:this.ef-1)},t.prototype.so=function(t){return Jl.resolve(this.ns.slice())},t.prototype.os=function(t,e){var n=this,r=new Ff(e,0),i=new Ff(e,Number.POSITIVE_INFINITY),o=[];return this.nf.vt([r,i],(function(t){var e=n.sf(t.la);o.push(e)})),Jl.resolve(o)},t.prototype.ls=function(t,e){var n=this,r=new Nu(Qa);return e.forEach((function(t){var e=new Ff(t,0),i=new Ff(t,Number.POSITIVE_INFINITY);n.nf.vt([e,i],(function(t){r=r.add(t.la)}))})),Jl.resolve(this.rf(r))},t.prototype.Es=function(t,e){var n=e.path,r=n.length+1,i=n;cu.W(i)||(i=i.child(""));var o=new Ff(new cu(i),0),s=new Nu(Qa);return this.nf.St((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.la)),!0)}),o),Jl.resolve(this.rf(s))},t.prototype.rf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.sf(t);null!==r&&n.push(r)})),n},t.prototype.ro=function(t,e){var n=this;Ba(0===this.hf(e.batchId,"removed")),this.ns.shift();var r=this.nf;return Jl.forEach(e.mutations,(function(i){var o=new Ff(i.key,e.batchId);return r=r.delete(o),n.wi.Qr(t,i.key)})).next((function(){n.nf=r}))},t.prototype.oo=function(t){},t.prototype.Mi=function(t,e){var n=new Ff(e,0),r=this.nf.Dt(n);return Jl.resolve(e.isEqual(r&&r.key))},t.prototype.ho=function(t){return this.ns.length,Jl.resolve()},t.prototype.hf=function(t,e){return this.if(t)},t.prototype.if=function(t){return 0===this.ns.length?0:t-this.ns[0].batchId},t.prototype.sf=function(t){var e=this.if(t);return e<0||e>=this.ns.length?null:this.ns[e]},t}(),bd=function(){function t(t,e){this.ss=t,this.af=e,this.docs=new Su(cu.P),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.af(e);return this.docs=this.docs.nt(r,{Ys:e,size:s,readTime:n}),this.size+=s-o,this.ss.Us(t,r.path.p())},t.prototype.Gn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.zn=function(t,e){var n=this.docs.get(e);return Jl.resolve(n?n.Ys:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ou();return e.forEach((function(t){var e=n.docs.get(t);r=r.nt(t,e?e.Ys:null)})),Jl.resolve(r)},t.prototype._s=function(t,e,n){for(var r=Du(),i=new cu(e.path.child("")),o=this.docs.ut(i);o.wt();){var s=o.dt(),a=s.key,u=s.value,c=u.Ys,l=u.readTime;if(!e.path.D(a.path))break;l.o(n)<=0||c instanceof Nl&&Ll(e,c)&&(r=r.nt(c.key,c))}return Jl.resolve(r)},t.prototype.uf=function(t,e){return Jl.forEach(this.docs,(function(t){return e(t)}))},t.prototype.oi=function(e){return new t.hi(this)},t.prototype.ui=function(t){return Jl.resolve(this.size)},t}();bd.hi=function(t){function e(e){var n=this;return(n=t.call(this)||this).ci=e,n}return i(e,t),e.prototype.Jn=function(t){var e=this,n=[];return this.Un.forEach((function(r,i){i?n.push(e.ci.jn(t,i,e.readTime)):e.ci.Gn(r)})),Jl.Bn(n)},e.prototype.Hn=function(t,e){return this.ci.zn(t,e)},e.prototype.Yn=function(t,e){return this.ci.getEntries(t,e)},e}(Zl);var wd=function(){function t(t){this.persistence=t,this.cf=new tu((function(t){return yu(t)}),vu),this.lastRemoteSnapshotVersion=iu.min(),this.highestTargetId=0,this.lf=0,this._f=new Lf,this.targetCount=0,this.ff=Ah.fi()}return t.prototype.pe=function(t,e){return this.cf.forEach((function(t,n){return e(n)})),Jl.resolve()},t.prototype.mi=function(t){return Jl.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ai=function(t){return Jl.resolve(this.lf)},t.prototype.Ti=function(t){return this.highestTargetId=this.ff.next(),Jl.resolve(this.highestTargetId)},t.prototype.Ri=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.lf&&(this.lf=e),Jl.resolve()},t.prototype.Vi=function(t){this.cf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ff=new Ah(e),this.highestTargetId=e),t.sequenceNumber>this.lf&&(this.lf=t.sequenceNumber)},t.prototype.Pi=function(t,e){return this.Vi(e),this.targetCount+=1,Jl.resolve()},t.prototype.yi=function(t,e){return this.Vi(e),Jl.resolve()},t.prototype.pi=function(t,e){return this.cf.delete(e.target),this._f.aa(e.targetId),this.targetCount-=1,Jl.resolve()},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return this.cf.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.cf.delete(s),o.push(r.bi(t,a.targetId)),i++)})),Jl.Bn(o).next((function(){return i}))},t.prototype.Si=function(t){return Jl.resolve(this.targetCount)},t.prototype.Di=function(t,e){var n=this.cf.get(e)||null;return Jl.resolve(n)},t.prototype.Ci=function(t,e,n){return this._f.ra(e,n),Jl.resolve()},t.prototype.Ni=function(t,e,n){this._f.ha(e,n);var r=this.persistence.wi,i=[];return r&&e.forEach((function(e){i.push(r.Qr(t,e))})),Jl.Bn(i)},t.prototype.bi=function(t,e){return this._f.aa(e),Jl.resolve()},t.prototype.ki=function(t,e){var n=this._f.ca(e);return Jl.resolve(n)},t.prototype.Mi=function(t,e){return Jl.resolve(this._f.Mi(e))},t}(),Ed=function(){function t(t){var e=this;this.df={},this.Ui=new ih(0),this.Qi=!1,this.Qi=!0,this.wi=t(this),this.Xi=new wd(this),this.ss=new hh,this.es=new bd(this.ss,(function(t){return e.wi.wf(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.yr=function(){return this.Qi=!1,Promise.resolve()},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.ar=function(){},t.prototype.kr=function(){return this.ss},t.prototype.Cr=function(t){var e=this.df[t.Ma()];return e||(e=new _d(this.ss,this.wi),this.df[t.Ma()]=e),e},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.runTransaction=function(t,e,n){var r=this;ja("MemoryPersistence","Starting transaction:",t);var i=new Td(this.Ui.next());return this.wi.Tf(),n(i).next((function(t){return r.wi.Ef(i).next((function(){return t}))})).On().then((function(t){return i.ts(),t}))},t.prototype.If=function(t,e){return Jl.qn(Object.values(this.df).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),Td=function(t){function e(e){var n=this;return(n=t.call(this)||this).Li=e,n}return i(e,t),e}(eh),Cd=function(){function t(t){this.persistence=t,this.mf=new Lf,this.Af=null}return t.Rf=function(e){return new t(e)},Object.defineProperty(t.prototype,"Pf",{get:function(){if(this.Af)return this.Af;throw qa()},enumerable:!1,configurable:!0}),t.prototype.Fi=function(t,e,n){return this.mf.Fi(n,e),this.Pf.delete(n),Jl.resolve()},t.prototype.$i=function(t,e,n){return this.mf.$i(n,e),this.Pf.add(n),Jl.resolve()},t.prototype.Qr=function(t,e){return this.Pf.add(e),Jl.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.mf.aa(e.targetId).forEach((function(t){return n.Pf.add(t)}));var r=this.persistence.Nr();return r.ki(t,e.targetId).next((function(t){t.forEach((function(t){return n.Pf.add(t)}))})).next((function(){return r.pi(t,e)}))},t.prototype.Tf=function(){this.Af=new Set},t.prototype.Ef=function(t){var e=this,n=this.persistence.$r().oi();return Jl.forEach(this.Pf,(function(r){return e.Vf(t,r).next((function(t){t||n.Gn(r)}))})).next((function(){return e.Af=null,n.apply(t)}))},t.prototype.Gr=function(t,e){var n=this;return this.Vf(t,e).next((function(t){t?n.Pf.delete(e):n.Pf.add(e)}))},t.prototype.wf=function(t){return 0},t.prototype.Vf=function(t,e){var n=this;return Jl.qn([function(){return Jl.resolve(n.mf.Mi(e))},function(){return n.persistence.Nr().Mi(t,e)},function(){return n.persistence.If(t,e)}])},t}(),Sd=function(){function t(t){this.gf=t.gf,this.yf=t.yf}return t.prototype.Eu=function(t){this.pf=t},t.prototype._u=function(t){this.bf=t},t.prototype.onMessage=function(t){this.vf=t},t.prototype.close=function(){this.yf()},t.prototype.send=function(t){this.gf(t)},t.prototype.Sf=function(){this.pf()},t.prototype.Df=function(t){this.bf(t)},t.prototype.Cf=function(t){this.vf(t)},t}(),Id={BatchGetDocuments:"batchGet",Commit:"commit"},xd="gl-js/ fire/"+La,Nd=function(){function t(t){this.s=t.s;var e=t.ssl?"https":"http";this.Ff=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Nf=function(t,e){if(e)for(var n in e.Ba)e.Ba.hasOwnProperty(n)&&(t[n]=e.Ba[n]);t["X-Goog-Api-Client"]=xd},t.prototype.Du=function(t,e,n){var r=this,i=this.$f(t);return new Promise((function(o,s){var a=new Da;a.listenOnce(Oa.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Pa.NO_ERROR:var e=a.getResponseJson();ja("Connection","XHR received:",JSON.stringify(e)),o(e);break;case Pa.TIMEOUT:ja("Connection",'RPC "'+t+'" timed out'),s(new nu(eu.DEADLINE_EXCEEDED,"Request time out"));break;case Pa.HTTP_ERROR:var n=a.getStatus();if(ja("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(eu).indexOf(e)>=0?e:eu.UNKNOWN}(r.status);s(new nu(i,r.message))}else s(new nu(eu.UNKNOWN,"Server responded with status "+a.getStatus()))}else ja("Connection",'RPC "'+t+'" failed'),s(new nu(eu.UNAVAILABLE,"Connection failed."));break;default:qa()}}finally{ja("Connection",'RPC "'+t+'" completed.')}}));var u=Object.assign({},e);delete u.database;var c=JSON.stringify(u);ja("Connection","XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.Nf(l,n),a.send(i,"POST",c,l,15)}))},t.prototype.Cu=function(t,e,n){return this.Du(t,e,n)},t.prototype.Iu=function(t,e){var n,r,i=[this.Ff,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Aa(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Nf(s.initMessageHeaders,e),E()||T()||w().indexOf("Electron/")>=0||(r=w()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0||w().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");ja("Connection","Creating WebChannel: "+a+" "+s);var u=o.createWebChannel(a,s),c=!1,l=!1,f=new Sd({gf:function(t){l?ja("Connection","Not sending because WebChannel is closed:",t):(c||(ja("Connection","Opening WebChannel transport."),u.open(),c=!0),ja("Connection","WebChannel sending:",t),u.send(t))},yf:function(){return u.close()}}),p=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return p(Ra.EventType.OPEN,(function(){l||ja("Connection","WebChannel transport opened.")})),p(Ra.EventType.CLOSE,(function(){l||(l=!0,ja("Connection","WebChannel transport closed"),f.Df())})),p(Ra.EventType.ERROR,(function(t){l||(l=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fa.logLevel<=$.WARN){var r=e.map(Va);Fa.warn.apply(Fa,h(["Firestore ("+La+"): "+t],r))}}("Connection","WebChannel transport errored:",t),f.Df(new nu(eu.UNAVAILABLE,"The operation could not be completed")))})),p(Ra.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];Ba(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){ja("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=_u[t];if(void 0!==e)return Cu(e)}(o),a=i.message;void 0===s&&(s=eu.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),l=!0,f.Df(new nu(s,a)),u.close()}else ja("Connection","WebChannel received:",n),f.Cf(n)}})),setTimeout((function(){f.Sf()}),0),f},t.prototype.$f=function(t){var e=Id[t];return this.Ff+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},t}(),kd=function(){function t(){var t=this;this.kf=function(){return t.xf()},this.Mf=function(){return t.Of()},this.Lf=[],this.Bf()}return t.prototype.nc=function(t){this.Lf.push(t)},t.prototype.yr=function(){window.removeEventListener("online",this.kf),window.removeEventListener("offline",this.Mf)},t.prototype.Bf=function(){window.addEventListener("online",this.kf),window.addEventListener("offline",this.Mf)},t.prototype.xf=function(){ja("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(0)},t.prototype.Of=function(){ja("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(1)},t.Hi=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ad=function(){function t(){}return t.prototype.nc=function(t){},t.prototype.yr=function(){},t}(),Pd="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Od=function(){function t(){}return t.prototype.initialize=function(t){return s(this,void 0,void 0,(function(){var e=this;return a(this,(function(n){switch(n.label){case 0:return this.n_=this.qf(t),this.persistence=this.Uf(t),[4,this.persistence.start()];case 1:return n.sent(),this.Qf=this.Wf(t),this.Yu=this.jf(t),this.e_=this.Kf(t),this.Vc=this.Gf(t),this.zf=this.Hf(t),this.n_.qu=function(t){return e.Vc.jl(t,1)},this.e_.Vc=this.Vc,[4,this.Yu.start()];case 2:return n.sent(),[4,this.n_.start()];case 3:return n.sent(),[4,this.e_.start()];case 4:return n.sent(),[4,this.e_.Lc(this.Vc.d_)];case 5:return n.sent(),[2]}}))}))},t.prototype.Hf=function(t){return new vd(this.Vc)},t.prototype.Wf=function(t){return null},t.prototype.jf=function(t){return e=this.persistence,n=new md,r=t.Yf,new Of(e,n,r);var e,n,r},t.prototype.Uf=function(t){if(t.Xf.Jf)throw new nu(eu.FAILED_PRECONDITION,Pd);return new Ed(Cd.Rf)},t.prototype.Kf=function(t){var e=this;return new $p(this.Yu,t.Fu,t.Ro,(function(t){return e.Vc.jl(t,0)}),kd.Hi()?new kd:new Ad)},t.prototype.qf=function(t){return new sd},t.prototype.Gf=function(t){return e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,s=t.s_,new pd(e,n,r,i,o,s);var e,n,r,i,o,s},t.prototype.clearPersistence=function(t){throw new nu(eu.FAILED_PRECONDITION,Pd)},t}(),Rd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initialize=function(e){return s(this,void 0,void 0,(function(){var n=this;return a(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.or((function(t){return s(n,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.Vc.Lc(t)];case 1:return e.sent(),this.Qf&&(t&&!this.Qf.hr?this.Qf.start(this.Yu):t||this.Qf.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.jf=function(t){return e=this.persistence,n=new md,r=t.Yf,new Rf(e,n,r);var e,n,r},e.prototype.Gf=function(t){var e,n,r,i,o,s,a=(e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,s=t.s_,new dd(e,n,r,i,o,s));return this.n_ instanceof od&&(this.n_.Vc=a),a},e.prototype.Wf=function(t){var e=this.persistence.wi.Or;return new Af(e,t.Ro)},e.prototype.Uf=function(t){var e=Mh.Mr(t.Zf),n=mp(t.Zf.s);return new Mh(t.Xf.synchronizeTabs,e,t.clientId,kf.ah(t.Xf.cacheSizeBytes),t.Ro,Ef(),"undefined"!=typeof document?document:null,n,this.n_,t.Xf.qi)},e.prototype.qf=function(t){if(t.Xf.Jf&&t.Xf.synchronizeTabs){var e=Ef();if(!od.Hi(e))throw new nu(eu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Mh.Mr(t.Zf);return new od(e,t.Ro,n,t.clientId,t.Yf)}return new sd},e.prototype.clearPersistence=function(t){var e=Mh.Mr(t);return Mh.clearPersistence(e)},e}(Od),Dd=function(){function t(t,e){this.credentials=t,this.Ro=e,this.clientId=Ha.t()}return t.prototype.start=function(t,e,n){var r=this;this.Su(),this.Zf=t;var i=new oh,o=new oh,s=!1;return this.credentials.Qa((function(t){if(!s)return s=!0,ja("FirestoreClient","Initializing. user=",t.uid),r.td(e,n,t,o).then(i.resolve,i.reject);r.Ro.dr((function(){return r.e_.Oc(t)}))})),this.Ro.lr((function(){return i.promise})),o.promise},t.prototype.enableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.enableNetwork()}))},t.prototype.td=function(t,e,n,r){return s(this,void 0,void 0,(function(){var i,o,u,c,l,h=this;return a(this,(function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),[4,(l=this.Zf,Promise.resolve(new Nd(l)))];case 1:return i=f.sent(),o=mp(this.Zf.s),u=function(t,e,n){return new Gp(t,e,n)}(i,this.credentials,o),[4,t.initialize({Ro:this.Ro,Zf:this.Zf,Fu:u,clientId:this.clientId,Yf:n,s_:100,Xf:e})];case 2:return f.sent(),this.persistence=t.persistence,this.n_=t.n_,this.Yu=t.Yu,this.e_=t.e_,this.Vc=t.Vc,this.Qf=t.Qf,this.ed=t.zf,this.persistence.ar((function(){return s(h,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(c=f.sent(),r.reject(c),!this.nd(c))throw c;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),this.td(new Od,{Jf:!1},n,r))];case 4:return[2]}}))}))},t.prototype.nd=function(t){return"FirebaseError"===t.name?t.code===eu.FAILED_PRECONDITION||t.code===eu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Su=function(){if(this.Ro.Oo)throw new nu(eu.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Ro.Qo((function(){return s(t,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.Qf&&this.Qf.stop(),[4,this.e_.yr()];case 1:return t.sent(),[4,this.n_.yr()];case 2:return t.sent(),[4,this.persistence.yr()];case 3:return t.sent(),this.credentials.Wa(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Su();var e=new oh;return this.Ro.lr((function(){return t.Vc.y_(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Su();var i=new gd(t,e,n);return this.Ro.lr((function(){return r.ed.listen(i)})),i},t.prototype.Rc=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.Rc(t)}))},t.prototype.rd=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:return this.Su(),e=new oh,[4,this.Ro.enqueue((function(){return s(n,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.Yu.Kh(t)];case 1:return(n=o.sent())instanceof Nl?e.resolve(n):n instanceof kl?e.resolve(null):e.reject(new nu(eu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Sf(r,"Failed to get document '"+t+" from cache"),e.reject(i),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.od=function(t){return s(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:return this.Su(),e=new oh,[4,this.Ro.enqueue((function(){return s(n,void 0,void 0,(function(){var n,r,i,o,s,u;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.Yu.Hh(t,!0)];case 1:return n=a.sent(),r=new cd(t,n.Yh),i=r.Ol(n.documents),o=r.Jn(i,!1),e.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Sf(s,"Failed to execute query '"+t+" against cache"),e.reject(u),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.Su();var n=new oh;return this.Ro.lr((function(){return e.Vc.write(t,n)})),n.promise},t.prototype.s=function(){return this.Zf.s},t.prototype.Q_=function(t){var e=this;this.Su(),this.Ro.lr((function(){return e.ed.Q_(t),Promise.resolve()}))},t.prototype.W_=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.W_(t),Promise.resolve()}))},Object.defineProperty(t.prototype,"sd",{get:function(){return this.Ro.Oo},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Su();var n=new oh;return this.Ro.lr((function(){return e.Vc.runTransaction(e.Ro,t,n),Promise.resolve()})),n.promise},t}(),Ld=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.hd(this.observer.next,t)},t.prototype.error=function(t){this.hd(this.observer.error,t)},t.prototype.ad=function(){this.muted=!0},t.prototype.hd=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Fd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Md=function(){function t(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.ud=n,this.ld=r}return t.prototype._d=function(t){switch(ec(t)){case 0:return null;case 1:return t.booleanValue;case 2:return uc(t.integerValue||t.doubleValue);case 3:return this.fd(t.timestampValue);case 4:return this.dd(t);case 5:return t.stringValue;case 6:return new ip(cc(t.bytesValue));case 7:return this.wd(t.referenceValue);case 8:return this.Td(t.geoPointValue);case 9:return this.Ed(t.arrayValue);case 10:return this.Id(t.mapValue);default:throw qa()}},t.prototype.Id=function(t){var e=this,n={};return Ja(t.fields||{},(function(t,r){n[t]=e._d(r)})),n},t.prototype.Td=function(t){return new gp(uc(t.latitude),uc(t.longitude))},t.prototype.Ed=function(t){var e=this;return(t.values||[]).map((function(t){return e._d(t)}))},t.prototype.dd=function(t){switch(this.ud){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Ju(n)?t(n):n}(t);return null==e?null:this._d(e);case"estimate":return this.fd(Zu(t));default:return null}},t.prototype.fd=function(t){var e=ac(t),n=new ru(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.wd=function(t){var e=su.$(t);Ba(Qc(e));var n=new $a(e.get(1),e.get(3)),r=new cu(e.g(5));return n.isEqual(this.s)||Ua("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.ld(r)},t}(),jd=kf._h,Ud=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new nu(eu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Wf("settings","non-empty string","host",t.host),this.host=t.host,zf("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Xf("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),zf("settings","object","credentials",t.credentials),this.credentials=t.credentials,zf("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),zf("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Ua("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Ua("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,zf("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=kf.dh;else{if(t.cacheSizeBytes!==jd&&t.cacheSizeBytes<kf.fh)throw new nu(eu.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+kf.fh);this.cacheSizeBytes=t.cacheSizeBytes}zf("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Vd=function(){function t(e,n,r){var i=this;if(void 0===r&&(r=new Od),this.md=null,this.Ad=new Cf,this.INTERNAL={delete:function(){return s(i,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.Rd(),[4,this.Pd.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.md=o,this.ya=t.Vd(o),this.gd=o.name,this.yd=new qp(n)}else{var u=e;if(!u.projectId)throw new nu(eu.INVALID_ARGUMENT,"Must provide projectId");this.ya=new $a(u.projectId,u.database),this.gd="[DEFAULT]",this.yd=new Vp}this.pd=r,this.bd=new Ud({})}return Object.defineProperty(t.prototype,"vd",{get:function(){return this.Sd||(this.Sd=new Sp(this.ya,this.bd.ignoreUndefinedProperties)),this.Sd},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){jf("Firestore.settings",arguments,1),qf("Firestore.settings","object",1,t);var e=new Ud(t);if(this.Pd&&!this.bd.isEqual(e))throw new nu(eu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.bd=e,void 0!==e.credentials&&(this.yd=function(t){if(!t)return new Vp;switch(t.type){case"gapi":var e=t.Dd;return Ba(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Wp(e,t.Ya||"0");case"provider":return t.Dd;default:throw new nu(eu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.Rd(),this.Pd.enableNetwork()},t.prototype.disableNetwork=function(){return this.Rd(),this.Pd.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.Pd)throw new nu(eu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Ua("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new nu(eu.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Cd(this.pd,{Jf:!0,cacheSizeBytes:this.bd.cacheSizeBytes,synchronizeTabs:r,qi:i})},t.prototype.clearPersistence=function(){return s(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){if(void 0!==this.Pd&&!this.Pd.sd)throw new nu(eu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new oh,[2,(this.Ad.Lo((function(){return s(e,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.Fd(),[4,this.pd.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Nd",{get:function(){return this.Rd(),this.Pd.sd},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Rd(),this.Pd.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Rd(),Fd(t))return qd(this.Pd,t);qf("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return qd(this.Pd,e)},t.prototype.Rd=function(){return this.Pd||this.Cd(new Od,{Jf:!1}),this.Pd},t.prototype.Fd=function(){return new Ka(this.ya,this.gd,this.bd.host,this.bd.ssl,this.bd.forceLongPolling)},t.prototype.Cd=function(t,e){var n=this.Fd();return this.Pd=new Dd(this.yd,this.Ad),this.Pd.start(n,t,e)},t.Vd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new nu(eu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new nu(eu.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new $a(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.md)throw new nu(eu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return jf("Firestore.collection",arguments,1),qf("Firestore.collection","non-empty string",1,t),this.Rd(),new Zd(su.$(t),this,null)},t.prototype.doc=function(t){return jf("Firestore.doc",arguments,1),qf("Firestore.doc","non-empty string",1,t),this.Rd(),zd.$d(su.$(t),this,null)},t.prototype.collectionGroup=function(t){if(jf("Firestore.collectionGroup",arguments,1),qf("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new nu(eu.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Rd(),new $d(new Pl(su.k(),t),this,null)},t.prototype.runTransaction=function(t){var e=this;return jf("Firestore.runTransaction",arguments,1),qf("Firestore.runTransaction","function",1,t),this.Rd().transaction((function(n){return t(new Bd(e,n))}))},t.prototype.batch=function(){return this.Rd(),new Wd(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(Ma()){case $.DEBUG:return"debug";case $.ERROR:return"error";case $.SILENT:return"silent";case $.WARN:return"warn";case $.INFO:return"info";case $.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;jf("Firestore.setLogLevel",arguments,1),Qf("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,Fa.setLogLevel(e)},t.prototype.kd=function(){return this.bd.timestampsInSnapshots},t}();function qd(t,e){var n=new Ld({next:function(){e.next&&e.next()},error:function(t){throw qa()}});return t.Q_(n),function(){n.ad(),t.W_(n)}}var Bd=function(){function t(t,e){this.xd=t,this.Md=e}return t.prototype.get=function(t){var e=this;jf("Transaction.get",arguments,1);var n=ry("Transaction.get",t,this.xd);return this.Md.Mu([n.pa]).then((function(t){if(!t||1!==t.length)return qa();var r=t[0];if(r instanceof kl)return new Gd(e.xd,n.pa,null,!1,!1,n.ba);if(r instanceof Nl)return new Gd(e.xd,n.pa,r,!1,!1,n.ba);throw qa()}))},t.prototype.set=function(t,e,n){Vf("Transaction.set",arguments,2,3);var r=ry("Transaction.set",t,this.xd);n=ty("Transaction.set",n);var i=oy(r.ba,e,n),o=Ip(this.xd.vd,"Transaction.set",r.pa,i,null!==r.ba,n);return this.Md.set(r.pa,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof sp?(Uf("Transaction.update",arguments,3),r=ry("Transaction.update",t,this.xd),i=Np(this.xd.vd,"Transaction.update",r.pa,e,n,o)):(jf("Transaction.update",arguments,2),r=ry("Transaction.update",t,this.xd),i=xp(this.xd.vd,"Transaction.update",r.pa,e)),this.Md.update(r.pa,i),this},t.prototype.delete=function(t){jf("Transaction.delete",arguments,1);var e=ry("Transaction.delete",t,this.xd);return this.Md.delete(e.pa),this},t}(),Wd=function(){function t(t){this.xd=t,this.Od=[],this.Ld=!1}return t.prototype.set=function(t,e,n){Vf("WriteBatch.set",arguments,2,3),this.Bd();var r=ry("WriteBatch.set",t,this.xd);n=ty("WriteBatch.set",n);var i=oy(r.ba,e,n),o=Ip(this.xd.vd,"WriteBatch.set",r.pa,i,null!==r.ba,n);return this.Od=this.Od.concat(o.va(r.pa,ul.Qe())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Bd(),"string"==typeof e||e instanceof sp?(Uf("WriteBatch.update",arguments,3),r=ry("WriteBatch.update",t,this.xd),i=Np(this.xd.vd,"WriteBatch.update",r.pa,e,n,o)):(jf("WriteBatch.update",arguments,2),r=ry("WriteBatch.update",t,this.xd),i=xp(this.xd.vd,"WriteBatch.update",r.pa,e)),this.Od=this.Od.concat(i.va(r.pa,ul.exists(!0))),this},t.prototype.delete=function(t){jf("WriteBatch.delete",arguments,1),this.Bd();var e=ry("WriteBatch.delete",t,this.xd);return this.Od=this.Od.concat(new El(e.pa,ul.Qe())),this},t.prototype.commit=function(){return this.Bd(),this.Ld=!0,this.Od.length>0?this.xd.Rd().write(this.Od):Promise.resolve()},t.prototype.Bd=function(){if(this.Ld)throw new nu(eu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),zd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,e,r)||this).pa=e,i.firestore=n,i.ba=r,i.Pd=i.firestore.Rd(),i}return i(e,t),e.$d=function(t,n,r){if(t.length%2!=0)throw new nu(eu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new e(new cu(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Zd(this.pa.path.p(),this.firestore,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.pa.path.N()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(jf("DocumentReference.collection",arguments,1),qf("DocumentReference.collection","non-empty string",1,t),!t)throw new nu(eu.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=su.$(t);return new Zd(this.pa.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Jf("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.pa.isEqual(t.pa)&&this.ba===t.ba},e.prototype.set=function(t,e){Vf("DocumentReference.set",arguments,1,2),e=ty("DocumentReference.set",e);var n=oy(this.ba,t,e),r=Ip(this.firestore.vd,"DocumentReference.set",this.pa,n,null!==this.ba,e);return this.Pd.write(r.va(this.pa,ul.Qe()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof sp?(Uf("DocumentReference.update",arguments,2),n=Np(this.firestore.vd,"DocumentReference.update",this.pa,t,e,r)):(jf("DocumentReference.update",arguments,1),n=xp(this.firestore.vd,"DocumentReference.update",this.pa,t)),this.Pd.write(n.va(this.pa,ul.exists(!0)))},e.prototype.delete=function(){return jf("DocumentReference.delete",arguments,0),this.Pd.write([new El(this.pa,ul.Qe())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Vf("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Fd(i[a])||(Xf("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),zf("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u={includeMetadataChanges:s.includeMetadataChanges};if(Fd(i[a])){var c=i[a];i[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else qf("DocumentReference.onSnapshot","function",a,i[a]),Bf("DocumentReference.onSnapshot","function",a+1,i[a+1]),Bf("DocumentReference.onSnapshot","function",a+2,i[a+2]);var l={next:function(t){i[a]&&i[a](r.qd(t))},error:i[a+1],complete:i[a+2]};return Hd(this.Pd,this.pa,u,l)},e.prototype.get=function(t){var e=this;return Vf("DocumentReference.get",arguments,0,1),ny("DocumentReference.get",t),t&&"cache"===t.source?this.firestore.Rd().rd(this.pa).then((function(t){return new Gd(e.firestore,e.pa,t,!0,t instanceof Nl&&t.Ge,e.ba)})):function(t,e,n){var r=new oh,i=Hd(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i();var o=t.docs.has(e);!o&&t.fromCache?r.reject(new nu(eu.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&t.fromCache&&n&&"server"===n.source?r.reject(new nu(eu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(this.Pd,this.pa,t).then((function(t){return e.qd(t)}))},e.prototype.withConverter=function(t){return new e(this.pa,this.firestore,t)},e.prototype.qd=function(t){var e=t.docs.get(this.pa);return new Gd(this.firestore,this.pa,e,t.fromCache,t.hasPendingWrites,this.ba)},e}(bp);function Hd(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new Ld({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(Pl.hn(e.path),o,n);return function(){o.ad(),t.Rc(s)}}var Qd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Gd=function(){function t(t,e,n,r,i,o){this.xd=t,this.pa=e,this.Ud=n,this.Qd=r,this.Wd=i,this.ba=o}return t.prototype.data=function(t){var e=this;if(Vf("DocumentSnapshot.data",arguments,0,1),t=ey("DocumentSnapshot.data",t),this.Ud){if(this.ba){var n=new Yd(this.xd,this.pa,this.Ud,this.Qd,this.Wd,null);return this.ba.fromFirestore(n,t)}return new Md(this.xd.ya,this.xd.kd(),t.serverTimestamps||"none",(function(t){return new zd(t,e.xd,null)}))._d(this.Ud.tn())}},t.prototype.get=function(t,e){var n=this;if(Vf("DocumentSnapshot.get",arguments,1,2),e=ey("DocumentSnapshot.get",e),this.Ud){var r=this.Ud.data().field(Dp("DocumentSnapshot.get",t,this.pa));if(null!==r)return new Md(this.xd.ya,this.xd.kd(),e.serverTimestamps||"none",(function(t){return new zd(t,n.xd,n.ba)}))._d(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new zd(this.pa,this.xd,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ud},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Qd(this.Wd,this.Qd)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Jf("isEqual","DocumentSnapshot",1,e);return this.xd===e.xd&&this.Qd===e.Qd&&this.pa.isEqual(e.pa)&&(null===this.Ud?null===e.Ud:this.Ud.isEqual(e.Ud))&&this.ba===e.ba},t}(),Yd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Gd);function Kd(t){if(t.mn()&&0===t.en.length)throw new nu(eu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $d=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,n.vd,e)||this).jd=e,i.firestore=n,i.ba=r,i}return i(e,t),e.prototype.where=function(t,n,r){jf("Query.where",arguments,3),$f("Query.where",3,r);var i=Qf("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n),o=Dp("Query.where",t),s=this.Kd(o,i,r);return new e(this.jd.cn(s),this.firestore,this.ba)},e.prototype.orderBy=function(t,n){var r;if(Vf("Query.orderBy",arguments,1,2),Bf("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new nu(eu.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Dp("Query.orderBy",t),o=this.Yd(i,r);return new e(this.jd.ln(o),this.firestore,this.ba)},e.prototype.limit=function(t){return jf("Query.limit",arguments,1),qf("Query.limit","number",1,t),Zf("Query.limit",1,t),new e(this.jd._n(t),this.firestore,this.ba)},e.prototype.limitToLast=function(t){return jf("Query.limitToLast",arguments,1),qf("Query.limitToLast","number",1,t),Zf("Query.limitToLast",1,t),new e(this.jd.fn(t),this.firestore,this.ba)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Uf("Query.startAt",arguments,1);var i=this.ew("Query.startAt",t,n,!0);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Uf("Query.startAfter",arguments,1);var i=this.ew("Query.startAfter",t,n,!1);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Uf("Query.endBefore",arguments,1);var i=this.ew("Query.endBefore",t,n,!0);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Uf("Query.endAt",arguments,1);var i=this.ew("Query.endAt",t,n,!1);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Jf("isEqual","Query",1,t);return this.firestore===t.firestore&&Ol(this.jd,t.jd)&&this.ba===t.ba},e.prototype.withConverter=function(t){return new e(this.jd,this.firestore,t)},e.prototype.ew=function(t,e,n,r){if($f(t,1,e),e instanceof Gd)return jf(t,h([e],n),1),this.Xd(t,e.Ud,r);var i=[e].concat(n);return this.Zd(t,i,r)},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Vf("Query.onSnapshot",arguments,1,4);var s={},a=0;if("object"!=typeof i[a]||Fd(i[a])||(Xf("Query.onSnapshot",s=i[a],["includeMetadataChanges"]),zf("Query.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++),Fd(i[a])){var u=i[a];i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else qf("Query.onSnapshot","function",a,i[a]),Bf("Query.onSnapshot","function",a+1,i[a+1]),Bf("Query.onSnapshot","function",a+2,i[a+2]);var c={next:function(t){i[a]&&i[a](new Jd(r.firestore,r.jd,t,r.ba))},error:i[a+1],complete:i[a+2]};return Kd(this.jd),Xd(this.firestore.Rd(),this.jd,s,c)},e.prototype.get=function(t){var e=this;Vf("Query.get",arguments,0,1),ny("Query.get",t),Kd(this.jd);var n=this.firestore.Rd();return(t&&"cache"===t.source?n.od(this.jd):function(t,e,n){var r=new oh,i=Xd(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i(),t.fromCache&&n&&"server"===n.source?r.reject(new nu(eu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(n,this.jd,t)).then((function(t){return new Jd(e.firestore,e.jd,t,e.ba)}))},e}(function(){function t(t,e,n){this.ya=t,this.vd=e,this.jd=n}return t.prototype.Kd=function(t,e,n){var r;if(t.O()){if("array-contains"===e||"array-contains-any"===e)throw new nu(eu.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.Gd(n,e);for(var i=[],o=0,s=n;o<s.length;o++){var a=s[o];i.push(this.zd(a))}r={arrayValue:{values:i}}}else r=this.zd(n)}else"in"!==e&&"array-contains-any"!==e||this.Gd(n,e),r=kp(this.vd,"Query.where",n,"in"===e);var u=Ml.create(t,e,r);return this.Hd(u),u},t.prototype.Yd=function(t,e){if(null!==this.jd.startAt)throw new nu(eu.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.jd.endAt)throw new nu(eu.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new Gl(t,e);return this.Jd(n),n},t.prototype.Xd=function(t,e,n){if(!e)throw new nu(eu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.jd.orderBy;i<o.length;i++){var s=o[i];if(s.field.O())r.push(lc(this.ya,e.key));else{var a=e.field(s.field);if(Ju(a))throw new nu(eu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.N();throw new nu(eu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Wl(r,n)},t.prototype.Zd=function(t,e,n){var r=this.jd.en;if(e.length>r.length)throw new nu(eu.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.O()){if("string"!=typeof s)throw new nu(eu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.jd.Vn()&&-1!==s.indexOf("/"))throw new nu(eu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.jd.path.child(su.$(s));if(!cu.W(a))throw new nu(eu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new cu(a);i.push(lc(this.ya,u))}else{var c=kp(this.vd,t,s);i.push(c)}}return new Wl(i,n)},t.prototype.zd=function(t){if("string"==typeof t){if(""===t)throw new nu(eu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.jd.Vn()&&-1!==t.indexOf("/"))throw new nu(eu.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.jd.path.child(su.$(t));if(!cu.W(e))throw new nu(eu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return lc(this.ya,new cu(e))}if(t instanceof bp)return lc(this.ya,t.pa);throw new nu(eu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Kf(t)+".")},t.prototype.Gd=function(t,e){if(!Array.isArray(t)||0===t.length)throw new nu(eu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new nu(eu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new nu(eu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new nu(eu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Hd=function(t){if(t instanceof Ml){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.An()){var o=this.jd.an();if(null!==o&&!o.isEqual(t.field))throw new nu(eu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.jd.un();null!==s&&this.tw(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.jd.Rn(n)),null===a&&r&&(a=this.jd.Rn(e)),null!==a)throw a===t.op?new nu(eu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new nu(eu.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.Jd=function(t){if(null===this.jd.un()){var e=this.jd.an();null!==e&&this.tw(e,t.field)}},t.prototype.tw=function(t,e){if(!e.isEqual(t))throw new nu(eu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}());function Xd(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new Ld({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(e,o,n);return function(){o.ad(),t.Rc(s)}}var Jd=function(){function t(t,e,n,r){this.xd=t,this.nw=e,this.sw=n,this.ba=r,this.iw=null,this.rw=null,this.metadata=new Qd(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.sw.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.sw.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;Vf("QuerySnapshot.forEach",arguments,1,2),qf("QuerySnapshot.forEach","function",1,t),this.sw.docs.forEach((function(r){t.call(e,n.ow(r,n.metadata.fromCache,n.sw.Lt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new $d(this.nw,this.xd,this.ba)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(Xf("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),zf("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.sw.qt)throw new nu(eu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.iw&&this.rw===e||(this.iw=function(t,e,n){if(t.Ot._()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Lt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Ot;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Lt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:iy(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.sw,e,this.ow.bind(this)),this.rw=e),this.iw},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Jf("isEqual","QuerySnapshot",1,e);return this.xd===e.xd&&Ol(this.nw,e.nw)&&this.sw.isEqual(e.sw)&&this.ba===e.ba},t.prototype.ow=function(t,e,n){return new Yd(this.xd,t.key,t,e,n,this.ba)},t}(),Zd=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Pl.hn(e),n,r)||this).hw=e,e.length%2!=1)throw new nu(eu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.N()+" has "+e.length);return i}return i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.jd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.jd.path.p();return t._()?null:new zd(new cu(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.jd.path.N()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){Vf("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Ha.t()),qf("CollectionReference.doc","non-empty string",1,t);var e=su.$(t);return zd.$d(this.jd.path.child(e),this.firestore,this.ba)},e.prototype.add=function(t){jf("CollectionReference.add",arguments,1),qf("CollectionReference.add","object",1,this.ba?this.ba.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.hw,this.firestore,t)},e}($d);function ty(t,e){if(void 0===e)return{merge:!1};if(Xf(t,e,["merge","mergeFields"]),zf(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new nu(eu.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Kf(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new nu(eu.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+Kf(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof sp}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new nu(eu.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ey(t,e){return void 0===e?{}:(Xf(t,e,["serverTimestamps"]),Hf(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function ny(t,e){Bf(t,"object",1,e),e&&(Xf(t,e,["source"]),Hf(t,0,"source",e.source,["default","server","cache"]))}function ry(t,e,n){if(e instanceof bp){if(e.firestore!==n)throw new nu(eu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Jf(t,"DocumentReference",1,e)}function iy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qa()}}function oy(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var sy={Firestore:Vd,GeoPoint:gp,Timestamp:ru,Blob:ip,Transaction:Bd,WriteBatch:Wd,DocumentReference:zd,DocumentSnapshot:Gd,Query:$d,QueryDocumentSnapshot:Yd,QuerySnapshot:Jd,CollectionReference:Zd,FieldPath:sp,FieldValue:yp,setLogLevel:Vd.setLogLevel,CACHE_SIZE_UNLIMITED:jd};function ay(t){if(t instanceof Array){var e=[];return t.forEach((function(t){e.push(t)})),e.map((function(t){return ay(t)}))}if("object"==typeof t&&t!=={}){var n=o({},t);return Object.keys(n).forEach((function(t){n[t]=ay(n[t])})),n}return t}!function(t){!function(t,e){t.INTERNAL.registerComponent(new H("firestore",(function(t){return function(t,e){return new Vd(t,e,new Rd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},sy)))}(t),t.registerVersion("@firebase/firestore","1.16.0")}(gt),gt.registerVersion("firebase","7.16.0","app");var uy=function(){function t(t,e,n){this.label=t,this.action=e,this.args=void 0,this.metadata={},this.artifacts={extra:[]},this.eventType=void 0,this.complex=!1,this.prov=n}return t.prototype.addLabel=function(t){return this.label=t,this},t.prototype.addAction=function(t){return this.action=t,this},t.prototype.addArgs=function(t){return this.args=t,this},t.prototype.addMetadata=function(t){return this.metadata=t,this},t.prototype.addArtifacts=function(t){return this.artifacts=t,this},t.prototype.addExtra=function(t){return this.artifacts.extra.push({time:Date.now(),e:t}),this},t.prototype.addEventType=function(t){return this.eventType=t,this},t.prototype.alwaysStoreState=function(t){return this.complex=t,this},t.prototype.isEphemeral=function(t){return this.ephemeral=t,this},t.prototype.applyAction=function(){this.prov.applyAction(this.label,this.action,this.args,this.metadata,this.artifacts,this.eventType,this.complex,this.ephemeral)},t}();function cy(t){return"parent"in t&&"state"in t}function ly(t){return"parent"in t}function hy(){var t=(new Date).getTime();return t+=(new Date).valueOf(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}function fy(){return(new Date).getTime()}n(681).applyChange;var py=n(681).diff;function dy(t,e){return py(t,e)}var yy=n(681).applyChange;function vy(t,e){var n=ay(t),r=t.nodes[e];if(!r)throw new Error("No such node exists");return n.current=r.id,n}var gy="GLOBAL",my="ARTIFACT";var _y=n(681).applyChange,by=n(961).decompressFromEncodedURIComponent,wy=n(961).compressToEncodedURIComponent;function Ey(){}function Ty(t){return null==t?Ey:function(){return this.querySelector(t)}}function Cy(){return[]}function Sy(t){return null==t?Cy:function(){return this.querySelectorAll(t)}}function Iy(t){return function(){return this.matches(t)}}function xy(t){return function(e){return e.matches(t)}}var Ny=Array.prototype.find;function ky(){return this.firstElementChild}var Ay=Array.prototype.filter;function Py(){return Array.from(this.children)}function Oy(t){return new Array(t.length)}function Ry(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Dy(t,e,n,r,i,o){for(var s,a=0,u=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Ry(t,o[a]);for(;a<u;++a)(s=e[a])&&(i[a]=s)}function Ly(t,e,n,r,i,o,s){var a,u,c,l=new Map,h=e.length,f=o.length,p=new Array(h);for(a=0;a<h;++a)(u=e[a])&&(p[a]=c=s.call(u,u.__data__,a,e)+"",l.has(c)?i[a]=u:l.set(c,u));for(a=0;a<f;++a)c=s.call(t,o[a],a,o)+"",(u=l.get(c))?(r[a]=u,u.__data__=o[a],l.delete(c)):n[a]=new Ry(t,o[a]);for(a=0;a<h;++a)(u=e[a])&&l.get(p[a])===u&&(i[a]=u)}function Fy(t){return t.__data__}function My(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function jy(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Ry.prototype={constructor:Ry,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Uy="http://www.w3.org/1999/xhtml";const Vy={svg:"http://www.w3.org/2000/svg",xhtml:Uy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qy(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Vy.hasOwnProperty(e)?{space:Vy[e],local:t}:t}function By(t){return function(){this.removeAttribute(t)}}function Wy(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zy(t,e){return function(){this.setAttribute(t,e)}}function Hy(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Qy(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Gy(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Yy(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ky(t){return function(){this.style.removeProperty(t)}}function $y(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Xy(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Jy(t,e){return t.style.getPropertyValue(e)||Yy(t).getComputedStyle(t,null).getPropertyValue(e)}function Zy(t){return function(){delete this[t]}}function tv(t,e){return function(){this[t]=e}}function ev(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function nv(t){return t.trim().split(/^|\s+/)}function rv(t){return t.classList||new iv(t)}function iv(t){this._node=t,this._names=nv(t.getAttribute("class")||"")}function ov(t,e){for(var n=rv(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function sv(t,e){for(var n=rv(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function av(t){return function(){ov(this,t)}}function uv(t){return function(){sv(this,t)}}function cv(t,e){return function(){(e.apply(this,arguments)?ov:sv)(this,t)}}function lv(){this.textContent=""}function hv(t){return function(){this.textContent=t}}function fv(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function pv(){this.innerHTML=""}function dv(t){return function(){this.innerHTML=t}}function yv(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function vv(){this.nextSibling&&this.parentNode.appendChild(this)}function gv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mv(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Uy&&e.documentElement.namespaceURI===Uy?e.createElement(t):e.createElementNS(n,t)}}function _v(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function bv(t){var e=qy(t);return(e.local?_v:mv)(e)}function wv(){return null}function Ev(){var t=this.parentNode;t&&t.removeChild(this)}function Tv(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Cv(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Sv(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Iv(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function xv(t,e,n){var r=Yy(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Nv(t,e){return function(){return xv(this,t,e)}}function kv(t,e){return function(){return xv(this,t,e.apply(this,arguments))}}iv.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Av=[null];function Pv(t,e){this._groups=t,this._parents=e}function Ov(){return new Pv([[document.documentElement]],Av)}Pv.prototype=Ov.prototype={constructor:Pv,select:function(t){"function"!=typeof t&&(t=Ty(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],u=a.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=a[l])&&(s=t.call(o,o.__data__,l,a))&&("__data__"in o&&(s.__data__=o.__data__),c[l]=s);return new Pv(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):Sy(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s,a=e[o],u=a.length,c=0;c<u;++c)(s=a[c])&&(r.push(t.call(s,s.__data__,c,a)),i.push(s));return new Pv(r,i)},selectChild:function(t){return this.select(null==t?ky:function(t){return function(){return Ny.call(this.children,t)}}("function"==typeof t?t:xy(t)))},selectChildren:function(t){return this.selectAll(null==t?Py:function(t){return function(){return Ay.call(this.children,t)}}("function"==typeof t?t:xy(t)))},filter:function(t){"function"!=typeof t&&(t=Iy(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&u.push(o);return new Pv(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Fy);var n=e?Ly:Dy,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],h=i[c],f=h.length,p=My(t.call(l,l&&l.__data__,c,r)),d=p.length,y=a[c]=new Array(d),v=s[c]=new Array(d);n(l,h,y,v,u[c]=new Array(f),p,e);for(var g,m,_=0,b=0;_<d;++_)if(g=y[_]){for(_>=b&&(b=_+1);!(m=v[b])&&++b<d;);g._next=m||null}}return(s=new Pv(s,r))._enter=a,s._exit=u,s},enter:function(){return new Pv(this._enter||this._groups.map(Oy),this._parents)},exit:function(){return new Pv(this._exit||this._groups.map(Oy),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var c,l=n[u],h=r[u],f=l.length,p=a[u]=new Array(f),d=0;d<f;++d)(c=l[d]||h[d])&&(p[d]=c);for(;u<i;++u)a[u]=n[u];return new Pv(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=jy);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],u=a.length,c=i[o]=new Array(u),l=0;l<u;++l)(s=a[l])&&(c[l]=s);c.sort(e)}return new Pv(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this},attr:function(t,e){var n=qy(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Wy:By:"function"==typeof e?n.local?Gy:Qy:n.local?Hy:zy)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Ky:"function"==typeof e?Xy:$y)(t,e,null==n?"":n)):Jy(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Zy:"function"==typeof e?ev:tv)(t,e)):this.node()[t]},classed:function(t,e){var n=nv(t+"");if(arguments.length<2){for(var r=rv(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?cv:e?av:uv)(n,e))},text:function(t){return arguments.length?this.each(null==t?lv:("function"==typeof t?fv:hv)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?pv:("function"==typeof t?yv:dv)(t)):this.node().innerHTML},raise:function(){return this.each(vv)},lower:function(){return this.each(gv)},append:function(t){var e="function"==typeof t?t:bv(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:bv(t),r=null==e?wv:"function"==typeof e?e:Ty(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Ev)},clone:function(t){return this.select(t?Cv:Tv)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?Iv:Sv,r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var u,c=0,l=a.length;c<l;++c)for(r=0,u=a[c];r<s;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?kv:Nv)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};const Rv=Ov;var Dv={value:()=>{}};function Lv(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Fv(r)}function Fv(t){this._=t}function Mv(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function jv(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Dv,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Fv.prototype=Lv.prototype={constructor:Fv,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=o[s]).type)i[n]=jv(i[n],t.name,e);else if(null==e)for(n in i)i[n]=jv(i[n],t.name,null);return this}for(;++s<a;)if((n=(t=o[s]).type)&&(n=Mv(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Fv(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const Uv=Lv;var Vv,qv,Bv=0,Wv=0,zv=0,Hv=1e3,Qv=0,Gv=0,Yv=0,Kv="object"==typeof performance&&performance.now?performance:Date,$v="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xv(){return Gv||($v(Jv),Gv=Kv.now()+Yv)}function Jv(){Gv=0}function Zv(){this._call=this._time=this._next=null}function tg(t,e,n){var r=new Zv;return r.restart(t,e,n),r}function eg(){Gv=(Qv=Kv.now())+Yv,Bv=Wv=0;try{!function(){Xv(),++Bv;for(var t,e=Vv;e;)(t=Gv-e._time)>=0&&e._call.call(null,t),e=e._next;--Bv}()}finally{Bv=0,function(){for(var t,e,n=Vv,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Vv=e);qv=t,rg(r)}(),Gv=0}}function ng(){var t=Kv.now(),e=t-Qv;e>Hv&&(Yv-=e,Qv=t)}function rg(t){Bv||(Wv&&(Wv=clearTimeout(Wv)),t-Gv>24?(t<1/0&&(Wv=setTimeout(eg,t-Kv.now()-Yv)),zv&&(zv=clearInterval(zv))):(zv||(Qv=Kv.now(),zv=setInterval(ng,Hv)),Bv=1,$v(eg)))}function ig(t,e,n){var r=new Zv;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}Zv.prototype=tg.prototype={constructor:Zv,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Xv():+n)+(null==e?0:+e),this._next||qv===this||(qv?qv._next=this:Vv=this,qv=this),this._call=t,this._time=n,rg()},stop:function(){this._call&&(this._call=null,this._time=1/0,rg())}};var og=Uv("start","end","cancel","interrupt"),sg=[],ag=0,ug=2,cg=3,lg=5,hg=6;function fg(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,l,h,f;if(1!==n.state)return a();for(c in i)if((f=i[c]).name===n.name){if(f.state===cg)return ig(o);4===f.state?(f.state=hg,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=hg,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(ig((function(){n.state===cg&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(u))})),n.state=ug,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ug){for(n.state=cg,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=lg,1),o=-1,s=r.length;++o<s;)r[o].call(t,i);n.state===lg&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var r in n.state=hg,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=tg((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:og,tween:sg,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ag})}function pg(t,e){var n=yg(t,e);if(n.state>ag)throw new Error("too late; already scheduled");return n}function dg(t,e){var n=yg(t,e);if(n.state>cg)throw new Error("too late; already running");return n}function yg(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function vg(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var gg,mg=180/Math.PI,_g={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bg(t,e,n,r,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*mg,skewX:Math.atan(u)*mg,scaleX:s,scaleY:a}}function wg(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],u=[];return o=t(o),s=t(s),function(t,r,i,o,s,a){if(t!==i||r!==o){var u=s.push("translate(",null,e,null,n);a.push({i:u-4,x:vg(t,i)},{i:u-2,x:vg(r,o)})}else(i||o)&&s.push("translate("+i+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:vg(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,s.rotate,a,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:vg(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,s.skewX,a,u),function(t,e,n,r,o,s){if(t!==n||e!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:vg(t,n)},{i:a-2,x:vg(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,u),o=s=null,function(t){for(var e,n=-1,r=u.length;++n<r;)a[(e=u[n]).i]=e.x(t);return a.join("")}}}var Eg=wg((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?_g:bg(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Tg=wg((function(t){return null==t?_g:(gg||(gg=document.createElementNS("http://www.w3.org/2000/svg","g")),gg.setAttribute("transform",t),(t=gg.transform.baseVal.consolidate())?bg((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):_g)}),", ",")",")");function Cg(t,e){var n,r;return function(){var i=dg(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function Sg(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=dg(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=a;break}u===c&&i.push(a)}o.tween=i}}function Ig(t,e,n){var r=t._id;return t.each((function(){var t=dg(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return yg(t,r).value[e]}}function xg(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ng(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function kg(){}var Ag=.7,Pg=1/Ag,Og="\\s*([+-]?\\d+)\\s*",Rg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Lg=/^#([0-9a-f]{3,8})$/,Fg=new RegExp(`^rgb\\(${Og},${Og},${Og}\\)$`),Mg=new RegExp(`^rgb\\(${Dg},${Dg},${Dg}\\)$`),jg=new RegExp(`^rgba\\(${Og},${Og},${Og},${Rg}\\)$`),Ug=new RegExp(`^rgba\\(${Dg},${Dg},${Dg},${Rg}\\)$`),Vg=new RegExp(`^hsl\\(${Rg},${Dg},${Dg}\\)$`),qg=new RegExp(`^hsla\\(${Rg},${Dg},${Dg},${Rg}\\)$`),Bg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Wg(){return this.rgb().formatHex()}function zg(){return this.rgb().formatRgb()}function Hg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Lg.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Qg(e):3===n?new Kg(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Gg(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Gg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Fg.exec(t))?new Kg(e[1],e[2],e[3],1):(e=Mg.exec(t))?new Kg(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=jg.exec(t))?Gg(e[1],e[2],e[3],e[4]):(e=Ug.exec(t))?Gg(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Vg.exec(t))?em(e[1],e[2]/100,e[3]/100,1):(e=qg.exec(t))?em(e[1],e[2]/100,e[3]/100,e[4]):Bg.hasOwnProperty(t)?Qg(Bg[t]):"transparent"===t?new Kg(NaN,NaN,NaN,0):null}function Qg(t){return new Kg(t>>16&255,t>>8&255,255&t,1)}function Gg(t,e,n,r){return r<=0&&(t=e=n=NaN),new Kg(t,e,n,r)}function Yg(t,e,n,r){return 1===arguments.length?((i=t)instanceof kg||(i=Hg(i)),i?new Kg((i=i.rgb()).r,i.g,i.b,i.opacity):new Kg):new Kg(t,e,n,null==r?1:r);var i}function Kg(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function $g(){return`#${tm(this.r)}${tm(this.g)}${tm(this.b)}`}function Xg(){const t=Jg(this.opacity);return`${1===t?"rgb(":"rgba("}${Zg(this.r)}, ${Zg(this.g)}, ${Zg(this.b)}${1===t?")":`, ${t})`}`}function Jg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zg(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function tm(t){return((t=Zg(t))<16?"0":"")+t.toString(16)}function em(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new rm(t,e,n,r)}function nm(t){if(t instanceof rm)return new rm(t.h,t.s,t.l,t.opacity);if(t instanceof kg||(t=Hg(t)),!t)return new rm;if(t instanceof rm)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new rm(s,a,u,t.opacity)}function rm(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function im(t){return(t=(t||0)%360)<0?t+360:t}function om(t){return Math.max(0,Math.min(1,t||0))}function sm(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function am(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}xg(kg,Hg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Wg,formatHex:Wg,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return nm(this).formatHsl()},formatRgb:zg,toString:zg}),xg(Kg,Yg,Ng(kg,{brighter(t){return t=null==t?Pg:Math.pow(Pg,t),new Kg(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Ag:Math.pow(Ag,t),new Kg(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Kg(Zg(this.r),Zg(this.g),Zg(this.b),Jg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$g,formatHex:$g,formatHex8:function(){return`#${tm(this.r)}${tm(this.g)}${tm(this.b)}${tm(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Xg,toString:Xg})),xg(rm,(function(t,e,n,r){return 1===arguments.length?nm(t):new rm(t,e,n,null==r?1:r)}),Ng(kg,{brighter(t){return t=null==t?Pg:Math.pow(Pg,t),new rm(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Ag:Math.pow(Ag,t),new rm(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Kg(sm(t>=240?t-240:t+120,i,r),sm(t,i,r),sm(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new rm(im(this.h),om(this.s),om(this.l),Jg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jg(this.opacity);return`${1===t?"hsl(":"hsla("}${im(this.h)}, ${100*om(this.s)}%, ${100*om(this.l)}%${1===t?")":`, ${t})`}`}}));const um=t=>()=>t;function cm(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):um(isNaN(t)?e:t)}const lm=function t(e){var n=function(t){return 1==(t=+t)?cm:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):um(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Yg(t)).r,(e=Yg(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),s=cm(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function hm(t){return function(e){var n,r,i=e.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=Yg(e[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=t(o),s=t(s),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=a(t),r+""}}}hm((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],s=r>0?t[r-1]:2*i-o,a=r<e-1?t[r+2]:2*o-i;return am((n-r/e)*e,s,i,o,a)}})),hm((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],a=t[(r+2)%e];return am((n-r/e)*e,i,o,s,a)}}));var fm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pm=new RegExp(fm.source,"g");function dm(t,e){var n,r,i,o=fm.lastIndex=pm.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=fm.exec(t))&&(r=pm.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:vg(n,r)})),o=pm.lastIndex;return o<e.length&&(i=e.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})}function ym(t,e){var n;return("number"==typeof e?vg:e instanceof Hg?lm:(n=Hg(e))?(e=n,lm):dm)(t,e)}function vm(t){return function(){this.removeAttribute(t)}}function gm(t){return function(){this.removeAttributeNS(t.space,t.local)}}function mm(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function _m(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function bm(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttribute(t))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttribute(t)}}function wm(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttributeNS(t.space,t.local))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttributeNS(t.space,t.local)}}function Em(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Tm(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Cm(t,e){return function(){pg(this,t).delay=+e.apply(this,arguments)}}function Sm(t,e){return e=+e,function(){pg(this,t).delay=e}}function Im(t,e){return function(){dg(this,t).duration=+e.apply(this,arguments)}}function xm(t,e){return e=+e,function(){dg(this,t).duration=e}}var Nm=Rv.prototype.constructor;function km(t){return function(){this.style.removeProperty(t)}}var Am=0;function Pm(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Om(){return++Am}var Rm=Rv.prototype;Pm.prototype=function(t){return Rv().transition(t)}.prototype={constructor:Pm,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ty(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,u,c=r[s],l=c.length,h=o[s]=new Array(l),f=0;f<l;++f)(a=c[f])&&(u=t.call(a,a.__data__,f,c))&&("__data__"in a&&(u.__data__=a.__data__),h[f]=u,fg(h[f],e,n,f,h,yg(a,n)));return new Pm(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Sy(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u,c=r[a],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var f,p=t.call(u,u.__data__,h,c),d=yg(u,n),y=0,v=p.length;y<v;++y)(f=p[y])&&fg(f,e,n,y,p,d);o.push(p),s.push(u)}return new Pm(o,s,e,n)},selectChild:Rm.selectChild,selectChildren:Rm.selectChildren,filter:function(t){"function"!=typeof t&&(t=Iy(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&u.push(o);return new Pm(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u,c=e[a],l=n[a],h=c.length,f=s[a]=new Array(h),p=0;p<h;++p)(u=c[p]||l[p])&&(f[p]=u);for(;a<r;++a)s[a]=e[a];return new Pm(s,this._parents,this._name,this._id)},selection:function(){return new Nm(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Om(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,c=0;c<u;++c)if(s=a[c]){var l=yg(s,e);fg(s,t,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Pm(r,this._parents,t,n)},call:Rm.call,nodes:Rm.nodes,node:Rm.node,size:Rm.size,empty:Rm.empty,each:Rm.each,on:function(t,e){var n=this._id;return arguments.length<2?yg(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?pg:dg;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}(n,t,e))},attr:function(t,e){var n=qy(t),r="transform"===n?Tg:ym;return this.attrTween(t,"function"==typeof e?(n.local?wm:bm)(n,r,Ig(this,"attr."+t,e)):null==e?(n.local?gm:vm)(n):(n.local?_m:mm)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=qy(t);return this.tween(n,(r.local?Em:Tm)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Eg:ym;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Jy(this,t),s=(this.style.removeProperty(t),Jy(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}(t,r)).on("end.style."+t,km(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var s=Jy(this,t),a=n(this),u=a+"";return null==a&&(this.style.removeProperty(t),u=a=Jy(this,t)),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a))}}(t,r,Ig(this,"style."+t,e))).each(function(t,e){var n,r,i,o,s="style."+e,a="end."+s;return function(){var u=dg(this,t),c=u.on,l=null==u.value[s]?o||(o=km(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(a,i=l),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var s=Jy(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ig(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=yg(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Cg:Sg)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Cm:Sm)(e,t)):yg(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Im:xm)(e,t)):yg(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){dg(this,t).ease=e}}(e,t)):yg(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;dg(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},u={value:function(){0==--i&&o()}};n.each((function(){var n=dg(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:Rm[Symbol.iterator]};var Dm={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Lm(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Rv.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,s=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>ug&&n.state<lg,n.state=hg,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete t.__transition}}(this,t)}))},Rv.prototype.transition=function(t){var e,n;t instanceof Pm?(e=t._id,t=t._name):(e=Om(),(n=Dm).time=Xv(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,c=0;c<u;++c)(s=a[c])&&fg(s,t,e,c,a,n||Lm(s,e));return new Pm(r,this._parents,t,e)};const{abs:Fm,max:Mm,min:jm}=Math;function Um(t){return{type:t}}function Vm(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),s=new Array(r);for(n=0;n<i;++n)o[n]=zm(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=o[n](t);return s}}function qm(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Bm(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=zm(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}function Wm(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function zm(t,e){var n,r=typeof e;return null==e||"boolean"===r?um(e):("number"===r?vg:"string"===r?(n=Hg(e))?(e=n,lm):dm:e instanceof Hg?lm:e instanceof Date?qm:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Wm:Array.isArray(e)?Vm:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Bm:vg)(t,e)}["w","e"].map(Um),["n","s"].map(Um),["n","w","e","s","nw","ne","sw","se"].map(Um);var Hm=0;function Qm(){return new Gm}function Gm(){this._="@"+(++Hm).toString(36)}function Ym(t){return"string"==typeof t?new Pv([[document.querySelector(t)]],[document.documentElement]):new Pv([[t]],Av)}function Km(t){return function(){return t}}Gm.prototype=Qm.prototype={constructor:Gm,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const $m=Math.abs,Xm=Math.atan2,Jm=Math.cos,Zm=Math.max,t_=Math.min,e_=Math.sin,n_=Math.sqrt,r_=1e-12,i_=Math.PI,o_=i_/2,s_=2*i_;function a_(t){return t>=1?o_:t<=-1?-o_:Math.asin(t)}const u_=Math.PI,c_=2*u_,l_=1e-6,h_=c_-l_;function f_(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class p_{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?f_:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return f_;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,s=this._y1,a=n-t,u=r-e,c=o-t,l=s-e,h=c*c+l*l;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(h>l_)if(Math.abs(l*a-u*c)>l_&&i){let f=n-o,p=r-s,d=a*a+u*u,y=f*f+p*p,v=Math.sqrt(d),g=Math.sqrt(h),m=i*Math.tan((u_-Math.acos((d+h-y)/(2*v*g)))/2),_=m/g,b=m/v;Math.abs(_-1)>l_&&this._append`L${t+_*c},${e+_*l}`,this._append`A${i},${i},0,0,${+(l*f>c*p)},${this._x1=t+b*a},${this._y1=e+b*u}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(r),a=n*Math.sin(r),u=t+s,c=e+a,l=1^o,h=o?r-i:i-r;null===this._x1?this._append`M${u},${c}`:(Math.abs(this._x1-u)>l_||Math.abs(this._y1-c)>l_)&&this._append`L${u},${c}`,n&&(h<0&&(h=h%c_+c_),h>h_?this._append`A${n},${n},0,1,${l},${t-s},${e-a}A${n},${n},0,1,${l},${this._x1=u},${this._y1=c}`:h>l_&&this._append`A${n},${n},0,${+(h>=u_)},${l},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function d_(t){return t.innerRadius}function y_(t){return t.outerRadius}function v_(t){return t.startAngle}function g_(t){return t.endAngle}function m_(t){return t&&t.padAngle}function __(t,e,n,r,i,o,s){var a=t-n,u=e-r,c=(s?o:-o)/n_(a*a+u*u),l=c*u,h=-c*a,f=t+l,p=e+h,d=n+l,y=r+h,v=(f+d)/2,g=(p+y)/2,m=d-f,_=y-p,b=m*m+_*_,w=i-o,E=f*y-d*p,T=(_<0?-1:1)*n_(Zm(0,w*w*b-E*E)),C=(E*_-m*T)/b,S=(-E*m-_*T)/b,I=(E*_+m*T)/b,x=(-E*m+_*T)/b,N=C-v,k=S-g,A=I-v,P=x-g;return N*N+k*k>A*A+P*P&&(C=I,S=x),{cx:C,cy:S,x01:-l,y01:-h,x11:C*(i/w-1),y11:S*(i/w-1)}}function b_(){var t=d_,e=y_,n=Km(0),r=null,i=v_,o=g_,s=m_,a=null,u=function(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new p_(e)}(c);function c(){var c,l,h=+t.apply(this,arguments),f=+e.apply(this,arguments),p=i.apply(this,arguments)-o_,d=o.apply(this,arguments)-o_,y=$m(d-p),v=d>p;if(a||(a=c=u()),f<h&&(l=f,f=h,h=l),f>r_)if(y>s_-r_)a.moveTo(f*Jm(p),f*e_(p)),a.arc(0,0,f,p,d,!v),h>r_&&(a.moveTo(h*Jm(d),h*e_(d)),a.arc(0,0,h,d,p,v));else{var g,m,_=p,b=d,w=p,E=d,T=y,C=y,S=s.apply(this,arguments)/2,I=S>r_&&(r?+r.apply(this,arguments):n_(h*h+f*f)),x=t_($m(f-h)/2,+n.apply(this,arguments)),N=x,k=x;if(I>r_){var A=a_(I/h*e_(S)),P=a_(I/f*e_(S));(T-=2*A)>r_?(w+=A*=v?1:-1,E-=A):(T=0,w=E=(p+d)/2),(C-=2*P)>r_?(_+=P*=v?1:-1,b-=P):(C=0,_=b=(p+d)/2)}var O=f*Jm(_),R=f*e_(_),D=h*Jm(E),L=h*e_(E);if(x>r_){var F,M=f*Jm(b),j=f*e_(b),U=h*Jm(w),V=h*e_(w);if(y<i_)if(F=function(t,e,n,r,i,o,s,a){var u=n-t,c=r-e,l=s-i,h=a-o,f=h*u-l*c;if(!(f*f<r_))return[t+(f=(l*(e-o)-h*(t-i))/f)*u,e+f*c]}(O,R,U,V,M,j,D,L)){var q=O-F[0],B=R-F[1],W=M-F[0],z=j-F[1],H=1/e_(function(t){return t>1?0:t<-1?i_:Math.acos(t)}((q*W+B*z)/(n_(q*q+B*B)*n_(W*W+z*z)))/2),Q=n_(F[0]*F[0]+F[1]*F[1]);N=t_(x,(h-Q)/(H-1)),k=t_(x,(f-Q)/(H+1))}else N=k=0}C>r_?k>r_?(g=__(U,V,O,R,f,k,v),m=__(M,j,D,L,f,k,v),a.moveTo(g.cx+g.x01,g.cy+g.y01),k<x?a.arc(g.cx,g.cy,k,Xm(g.y01,g.x01),Xm(m.y01,m.x01),!v):(a.arc(g.cx,g.cy,k,Xm(g.y01,g.x01),Xm(g.y11,g.x11),!v),a.arc(0,0,f,Xm(g.cy+g.y11,g.cx+g.x11),Xm(m.cy+m.y11,m.cx+m.x11),!v),a.arc(m.cx,m.cy,k,Xm(m.y11,m.x11),Xm(m.y01,m.x01),!v))):(a.moveTo(O,R),a.arc(0,0,f,_,b,!v)):a.moveTo(O,R),h>r_&&T>r_?N>r_?(g=__(D,L,M,j,h,-N,v),m=__(O,R,U,V,h,-N,v),a.lineTo(g.cx+g.x01,g.cy+g.y01),N<x?a.arc(g.cx,g.cy,N,Xm(g.y01,g.x01),Xm(m.y01,m.x01),!v):(a.arc(g.cx,g.cy,N,Xm(g.y01,g.x01),Xm(g.y11,g.x11),!v),a.arc(0,0,h,Xm(g.cy+g.y11,g.cx+g.x11),Xm(m.cy+m.y11,m.cx+m.x11),v),a.arc(m.cx,m.cy,N,Xm(m.y11,m.x11),Xm(m.y01,m.x01),!v))):a.arc(0,0,h,E,w,v):a.lineTo(D,L)}else a.moveTo(0,0);if(a.closePath(),c)return a=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-i_/2;return[Jm(r)*n,e_(r)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Km(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Km(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Km(+t),c):n},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Km(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Km(+t),c):i},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Km(+t),c):o},c.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:Km(+t),c):s},c.context=function(t){return arguments.length?(a=null==t?null:t,c):a},c}function w_(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function E_(t){return t}function T_(){var t=E_,e=w_,n=null,r=Km(0),i=Km(s_),o=Km(0);function s(s){var a,u,c,l,h,f=(s=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(s)).length,p=0,d=new Array(f),y=new Array(f),v=+r.apply(this,arguments),g=Math.min(s_,Math.max(-s_,i.apply(this,arguments)-v)),m=Math.min(Math.abs(g)/f,o.apply(this,arguments)),_=m*(g<0?-1:1);for(a=0;a<f;++a)(h=y[d[a]=a]=+t(s[a],a,s))>0&&(p+=h);for(null!=e?d.sort((function(t,n){return e(y[t],y[n])})):null!=n&&d.sort((function(t,e){return n(s[t],s[e])})),a=0,c=p?(g-f*_)/p:0;a<f;++a,v=l)u=d[a],l=v+((h=y[u])>0?h*c:0)+_,y[u]={data:s[u],index:a,value:h,startAngle:v,endAngle:l,padAngle:m};return y}return s.value=function(e){return arguments.length?(t="function"==typeof e?e:Km(+e),s):t},s.sortValues=function(t){return arguments.length?(e=t,n=null,s):e},s.sort=function(t){return arguments.length?(n=t,e=null,s):n},s.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Km(+t),s):r},s.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Km(+t),s):i},s.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Km(+t),s):o},s}function C_(t,e,n){this.k=t,this.x=e,this.y=n}Array.prototype.slice,C_.prototype={constructor:C_,scale:function(t){return 1===t?this:new C_(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new C_(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new C_(1,0,0),C_.prototype;var S_={cols:[{title:"4\r",stats:[{time:2007,average:741500,frequency:8},{time:2008,average:594730.77,frequency:13},{time:2009,average:538118.75,frequency:8},{time:2010,average:578062.5,frequency:8},{time:2011,average:533875,frequency:12},{time:2012,average:637818.18,frequency:11}],color:"#000004"},{title:"3\r",stats:[{time:2007,average:336888.89,frequency:9},{time:2008,average:438400,frequency:10},{time:2009,average:392450,frequency:10},{time:2010,average:428262.5,frequency:8},{time:2011,average:455396.43,frequency:14},{time:2012,average:459958.82,frequency:17}],color:"#420a68"},{title:"5\r",stats:[{time:2007,average:667500,frequency:2},{time:2008,average:61e4,frequency:1},{time:2009,average:75e4,frequency:1},{time:2010,average:816333.33,frequency:3},{time:2011,average:56e4,frequency:1},{time:2012,average:1015e3,frequency:1}],color:"#932667"},{title:"1\r",stats:[{time:2007,average:327e3,frequency:1},{time:2008,average:38e4,frequency:1},{time:2009,frequency:0,average:518222.22250000003},{time:2010,frequency:0,average:518222.22250000003},{time:2011,frequency:0,average:518222.22250000003},{time:2012,average:527e3,frequency:1}],color:"#dd513a"},{title:"2\r",stats:[{time:2007,frequency:0,average:1},{time:2008,average:363250,frequency:2},{time:2009,average:42e4,frequency:1},{time:2010,average:372500,frequency:1},{time:2011,frequency:0,average:518222.22250000003}],color:"#fca50a"}],rows:[2007,2008,2009,2010,2011,2012],stats:["Year","price","bedrooms\r"]},I_={labels:[{title:"4\r",color:"#000004"},{title:"3\r",color:"#420a68"},{title:"5\r",color:"#932667"},{title:"1\r",color:"#dd513a"}],stats:[{label:"4\r",value:8,color:"#000004",price:741500},{label:"3\r",value:9,color:"#420a68",price:336888.89},{label:"5\r",value:2,color:"#932667",price:667500},{label:"1\r",value:1,color:"#dd513a",price:327e3}]},x_={labels:[{title:"4\r",color:"#000004"},{title:"3\r",color:"#420a68"},{title:"5\r",color:"#932667"},{title:"1\r",color:"#dd513a"},{title:"2\r",color:"#fca50a"}],stats:[{label:"4\r",value:13,color:"#000004",price:594730.77},{label:"3\r",value:10,color:"#420a68",price:438400},{label:"5\r",value:1,color:"#932667",price:61e4},{label:"1\r",value:1,color:"#dd513a",price:38e4},{label:"2\r",value:2,color:"#fca50a",price:363250}]},N_={labels:[{title:"4\r",color:"#000004"},{title:"3\r",color:"#420a68"},{title:"5\r",color:"#932667"},{title:"2\r",color:"#fca50a"}],stats:[{label:"4\r",value:8,color:"#000004",price:538118.75},{label:"3\r",value:10,color:"#420a68",price:392450},{label:"5\r",value:1,color:"#932667",price:75e4},{label:"2\r",value:1,color:"#fca50a",price:42e4}]},k_={labels:[{title:"4\r",color:"#000004"},{title:"3\r",color:"#420a68"},{title:"5\r",color:"#932667"},{title:"2\r",color:"#fca50a"}],stats:[{label:"4\r",value:8,color:"#000004",price:578062.5},{label:"3\r",value:8,color:"#420a68",price:428262.5},{label:"5\r",value:3,color:"#932667",price:816333.33},{label:"2\r",value:1,color:"#fca50a",price:372500}]},A_={labels:[{title:"4\r",color:"#000004"},{title:"3\r",color:"#420a68"},{title:"5\r",color:"#932667"}],stats:[{label:"4\r",value:12,color:"#000004",price:533875},{label:"3\r",value:14,color:"#420a68",price:455396.43},{label:"5\r",value:1,color:"#932667",price:56e4}]},P_={labels:[{title:"4\r",color:"#000004"},{title:"3\r",color:"#420a68"},{title:"5\r",color:"#932667"},{title:"1\r",color:"#dd513a"}],stats:[{label:"4\r",value:11,color:"#000004",price:637818.18},{label:"3\r",value:17,color:"#420a68",price:459958.82},{label:"5\r",value:1,color:"#932667",price:1015e3},{label:"1\r",value:1,color:"#dd513a",price:527e3}]};function O_(t){var e=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(e){return t>=e.value}));return e?(t/e.value).toFixed(1).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+e.symbol:"0"}function R_(t){var e=90*(t.startAngle+t.endAngle)/Math.PI;return e>90&&e<270?e-180:e}function D_(t){if(null!=t)return JSON.parse(JSON.stringify(t))}function L_(t,e){for(var n=[],r=!1,i=0;i<S_.cols.length;i++)S_.cols[i].stats.forEach((function(t){null!=t&&0==t.frequency&&n.push({stat:t,label:S_.cols[i].title})}));return n.forEach((function(n){n.stat.time!=e||n.label!=t||(r=!0)})),r}function F_(t,e){for(var n=0;n<S_.cols.length;n++)if(S_.cols[n].title==t)for(var r=0;r<S_.cols[n].stats.length;r++)if(S_.cols[n].stats[r].average==e)return S_.cols[n].stats[r].time}function M_(t){var e=0;return t.forEach((function(t){e+=t.radius})),e/t.length}function j_(t,e){for(var n=[],r=0;r<t.length;r++)for(var i=0;i<S_.cols.length;i++)S_.cols[i].title==t[r]&&void 0!==S_.cols[i].stats[e]?n.push(S_.cols[i].stats[e].average):S_.cols[i].title==t[r]&&void 0===S_.cols[i].stats[e]&&n.push(0);return n}var U_=function(){function t(){this.margin={},this.width=0,this.height=0,document.getElementsByClassName("pieChart2007").length>0?(this.draw_pie_o(2007,I_),this.draw_pie_o(2008,x_),this.draw_pie_o(2009,N_),this.draw_pie_o(2010,k_),this.draw_pie_o(2011,A_),this.draw_pie_o(2012,P_)):document.getElementById("pieVis").style.display="none"}return t.prototype.draw_pie_o=function(t,e){var n,r="Bedroom",i=Ym(".pieChart2007").node().getBoundingClientRect().width,o=i,s=Ym(".pieChartSvg"+t).attr("width",i).attr("height",o),a=T_().sort(null).value((function(t){return t.value})),u=b_().innerRadius(50).outerRadius(Math.min(i,o)/2-40),c=b_().innerRadius(Math.min(i,o)/2-35).outerRadius(Math.min(i,o)/2+5),l=b_().innerRadius(Math.min(i,o)/2-75).outerRadius(Math.min(i,o)/2-55),h=s.selectAll(".arc"+t).data(a(e.stats)).enter().append("g").attr("transform","translate("+i/2+","+o/2+")").classed("arc"+t,!0).attr("id",(function(e){return"donut_"+e.data.label.trim()+"_"+t})).append("path").attr("id",(function(e,n){return n+"time"+t})).attr("d",u).style("fill",(function(t){return t.data.color})),f=0;e.stats.forEach((function(t){f+=t.value}));var p="";h.on("mouseover",(function(e,i){p="donut_"+i.data.label.trim()+"_"+t,n=e.timeStamp,Ym("#tooltip").style("left",e.pageX+"px").style("top",e.pageY+"px").style("opacity",1).select("#value"),Ym("#tooltip").html("Title: "+i.data.label+" "+r+"<br/>Percentage: "+Number.parseInt((i.value/f*100).toString())+"% ("+i.value+")<br/>time: "+t+"<br/>Total Revenue: "+i.data.price*i.value+"<br/>Average: "+i.data.price)})).on("mouseout",(function(e,r){Ym("#tooltip").style("opacity",0),e.timeStamp-n>=1e3&&p=="donut_"+r.data.label.trim()+"_"+t?(console.log(p,e.timeStamp-n),eK(p,0),p="",eK("",Number.parseInt(((e.timeStamp-n)/1e3).toString()))):n=e.timeStamp})),s.append("g").attr("transform","translate("+i/2+","+(o+10)/2+")").append("text").classed("currTimeLabel",!0).attr("text-anchor","middle").text(t),s.selectAll(".arc"+t).filter((function(t){return t.endAngle-t.startAngle>=Math.PI/8})).append("text").classed("innerText",!0).attr("transform",(function(t){return"translate("+l.centroid(t)+")rotate("+R_(t)+")"})).attr("text-anchor","middle").text((function(t){return O_(t.data.price)})),s.selectAll(".arc"+t).filter((function(t){return t.endAngle-t.startAngle>=Math.PI/8})).append("text").attr("transform",(function(t){return"translate("+c.centroid(t)+")rotate("+R_(t)+")"})).attr("text-anchor","middle").text((function(t){return isNaN(t.data.label)?t.data.label:t.data.label+" "+r}))},t.prototype.selectNode=function(t){Ym(".selectedNode").classed("selectedNode",!1),Ym("#"+t).classed("selectedNode",!0)},t.prototype.hoverNode=function(t){Ym(".hoverNode").classed("hoverNode",!1),""!==t&&Ym("#"+t).classed("hoverNode",!0)},t}();const V_=U_;var q_=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},B_=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(q_(arguments[e]));return t},W_=function(){function t(){var t=this;this.margin={},this.width=Ym(".pieChart").node().getBoundingClientRect().width,this.height=this.width,this.firstTimeOrder=[],this.combinedStats=[],this.alignMode=!1,this.graphData=S_,this.graphData.rows.forEach((function(e){t.setData(e)})),this.currTime=this.graphData.rows[0],this.setData(this.graphData.rows[0]),this.prepareChart(),this.prepareData(),this.plotPie(),this.legend=Ym(".pieLegendSvg"),this.legend.html("").style("height",(function(t){return"12em"})),this.dataSet.labelsCat.sort((function(t,e){return t.title.localeCompare(e.title)})),this.dataSet.labelsCat.forEach((function(e){for(var n=e.firstTime,r=0;0==t.graphData.cols[n].stats[r].frequency;)r+=1;e.firstTime=t.graphData.cols[n].stats[r].time})),this.legend.selectAll("rect").data(this.dataSet.labelsCat).enter().append("rect").attr("x",(function(t){return"2em"})).attr("y",(function(t,e){return 2*e+1+"em"})).attr("fill",(function(t){return t.color})).attr("width",(function(t){return"1em"})).attr("height",(function(t){return"1em"})).attr("id",(function(t){return"label_"+t.title.trim()+"_"+t.firstTime})).attr("class","noselect").on("click",(function(e,n){ZY("label_"+n.title.trim()+"_"+n.firstTime),t.currTime=n.firstTime,t.setData(n.firstTime),t.setData(n.firstTime),t.prepareChart(),t.prepareData(),t.plotPie()})),this.legend.selectAll("text").data(this.dataSet.labelsCat).enter().append("text").attr("x",(function(t){return"4em"})).attr("y",(function(t,e){return 2*e+2+"em"})).text((function(t){return isNaN(t.title)?t.title:t.title+" bedroom"}))}return t.prototype.setData=function(t){var e=this;this.dataSet={labelList:[],labels:[],labelsCat:[],stats:[],radius:[]};var n=[];this.combinedStats=[];for(var r=0;r<this.graphData.cols.length;r++){this.dataSet.labelsCat.push({title:this.graphData.cols[r].title,color:this.graphData.cols[r].color,firstTime:r});var i=this.graphData.cols[r].stats.filter((function(e){return e.time==t}));i.length>0&&i[0].frequency>0&&(this.dataSet.labelList.push({label:this.graphData.cols[r].title,value:i[0].frequency}),this.dataSet.labels.push({title:this.graphData.cols[r].title,color:this.graphData.cols[r].color}),this.dataSet.stats.push({label:this.graphData.cols[r].title,value:i[0].frequency,radius:0,color:this.graphData.cols[r].color}),this.dataSet.radius.push({label:this.graphData.cols[r].title,value:i[0].frequency,radius:this.graphData.cols[r].stats[0].average,color:this.graphData.cols[r].color}));for(var o=this.graphData.cols[r].stats,s=0;s<o.length;s++)n.push({label:this.graphData.cols[r].title,time:o[s].time,radius:o[s].average})}for(r=0;r<this.graphData.rows.length;r++){var a=this.graphData.rows[r],u={time:a,data:[]};u.data=D_(this.dataSet.stats);var c=[];for(s=0;s<n.length;s++)n[s].time==a&&c.push(n[s]);for(var l=0;l<u.data.length;l++)for(s=0;s<c.length;s++)u.data[l].label==c[s].label&&(u.data[l].radius=c[s].radius);this.combinedStats.push(u)}var h=this.dataSet.radius;t==this.graphData.rows[0]?(h.sort((function(t,e){return t.value>e.value?1:-1})),this.dataSet.labelList.sort((function(t,e){return t.value>e.value?1:-1})),this.firstTimeOrder=this.dataSet.labelList.map((function(t){return t.label}))):(h.sort((function(t,n){return e.firstTimeOrder.indexOf(t.label)-e.firstTimeOrder.indexOf(n.label)})),this.dataSet.labelList.sort((function(t,n){return e.firstTimeOrder.indexOf(t.label)-e.firstTimeOrder.indexOf(n.label)})));var f=this.dataSet.labelList.map((function(t){return t.label}));this.data=this.generate_current_data(h,this.graphData.rows.length,f,this.graphData.rows,t)},t.prototype.generate_current_data=function(t,e,n,r,i){this.update_graphData(t,r,i),this.data=[];for(var o=0;o<e;o++){for(var s=j_(n,o),a=[],u=0;u<t.length;u++){var c=n.indexOf(t[u].label);if(-1!=c)if(0==o){t[c].inner=M_(t),t[c].outer=t[c].inner+t[c].radius;var l=F_(t[u].label,t[c].radius);t[c].time=l,L_(t[u].label,l)?t[c].dummy=!0:t[c].dummy=!1,t[c].time==i?t[c].selected=!0:t[c].selected=!1,a.push(D_(t[c]))}else{var h=D_(this.data[o-1][u].outer);t[c].inner=h;var f=s[c];t[c].outer=f+h,t[c].radius=f,l=F_(t[u].label,t[c].radius),t[c].time=l,L_(t[u].label,l)?t[c].dummy=!0:t[c].dummy=!1,t[c].time==i?t[c].selected=!0:t[c].selected=!1,a.push(D_(t[c]))}}this.data.push(a)}return this.data},t.prototype.update_graphData=function(t,e,n){var r=this,i=e.slice(0,e.indexOf(n));i=i.sort();for(var o=0;o<this.graphData.cols.length;o++)i.forEach((function(t){var e=[];if(r.graphData.cols[o].stats.forEach((function(t){-1==e.indexOf(t.time)&&e.push(t.time)})),-1==e.indexOf(t)){var n={time:0,average:0,frequency:0};n.time=t,n.frequency=0,r.graphData.cols[o].stats.unshift(n)}}));for(o=0;o<this.graphData.cols.length;o++){var s=this.graphData.cols[o].stats.filter((function(t){return 0==t.frequency}));s.forEach((function(e){var i=D_(t);i.sort((function(t,e){return t.value==e.value?t.radius>e.radius?-1:1:t.value>e.value?1:-1}));var s=r.graphData.cols[o].title,a=i.findIndex((function(t){return t.label==s}));e.time>n?e.average=M_(t):e.average=0==a?i[a+1].radius:-1!=a?i[a-1].radius:1}))}},t.prototype.align=function(t,e){var n=t.filter((function(t){return t.data.time==e})),r=Math.max.apply(Math,B_(n.map((function(t){return t.data.inner})))),i=[];return t.forEach((function(t){t.data.time==e&&i.push({title:t.data.label,diff:r-t.data.inner})})),t.forEach((function(t){i.forEach((function(e){e.title==t.data.label&&(t.data.inner+=e.diff,t.data.outer+=e.diff)}))})),t},t.prototype.prepareChart=function(){this.scale=function(t,e){for(var n=0,r=0;r<e[e.length-1].length;r++)n<e[e.length-1][r].outer&&(n=e[e.length-1][r].outer);return n/t*2}(this.width,this.data),this.svg=Ym(".pieChartSvg").attr("width",this.width).attr("height",this.height),this.arc=b_().innerRadius((function(t){return t.data.inner/this.scale})).outerRadius((function(t){return t.data.outer/this.scale})),this.emptyArc=b_().innerRadius(0).outerRadius(0),this.pie=T_().value((function(t){return t.value})).sort(null)},t.prototype.plotPie=function(){this.updateChart(),Ym(".pieChart").on("click",(function(t,e){Ym(".custom-menu").style("opacity",0)}))},t.prototype.updateChart=function(){var t=this,e=Qm(),n=this.svg.selectAll(".arcWedge").data(this.piedata,(function(t){return t.data.label+"_"+t.data.time})).join((function(n){return n.append("path").classed("arcWedge",!0).each((function(t,n,r){e.set(r[n],t)})).attr("transform","translate("+t.width/2+","+t.height/2+")")}),(function(t){return t}),(function(e){return e.transition().duration(100).attr("d",t.emptyArc).on("end",(function(t,e,n){Ym(n[e]).remove()}))}));n.each((function(t,e,n){t.data.selected?Ym(n[e]).classed("selected",!0):Ym(n[e]).classed("selected",!1)})).attr("id",(function(t){return"arc_"+t.data.label.trim()+"_"+t.data.time})).transition().duration(1e3).attrTween("d",(function(e,n,r){var i=zm(r[n]._current,e),o=r[n];return function(e){return o._current=i(e),t.arc(o._current)}})).attr("stroke",(function(t){return t.data.dummy?"black":"white"})).attr("stroke-width",.5).style("stroke-dasharray",(function(t){if(t.data.dummy)return"1,3"})).style("fill",(function(t){return t.data.dummy?"url(#diagonal-stripe-3)":t.data.color}));var r,i="";n.filter((function(t){return!t.data.dummy})).on("mouseover",(function(e,n){Ym(e.currentTarget).style("stroke","black").attr("stroke-width",4),i="arc_"+n.data.label.trim()+"_"+n.data.time,r=e.timeStamp,Ym("#tooltip").style("left",e.pageX-t.width/4+50+"px").style("top",e.pageY-t.width/4+50+"px").style("opacity",1).select("#value");var o,s=t.graphData.cols.find((function(t){return t.title==n.data.label})).stats.find((function(t){return t.time==n.data.time}));Ym("#tooltip").html("<div class='tooltip-title'>"+n.data.label+" bedroom for <strong>"+n.data.time+"</strong></div><div class='tooltip-body'><strong>Units Sold: </strong>"+s.frequency+" units<br/><strong>Percentage: </strong>"+Number.parseInt((s.frequency/(o=n.data.time,2007==o?20:2008==o?27:2009==o||2010==o?20:2011==o?27:2012==o?30:0)*100).toString())+"%<br/><strong>Total Revenue: </strong>"+O_(n.data.radius*s.frequency)+"<br/><strong>Average Price: </strong>"+O_(n.data.radius)+"</div>")})).on("mouseout",(function(t,e){Ym(t.currentTarget).style("stroke","white").attr("stroke-width",.5),Ym("#tooltip").style("opacity",0),t.timeStamp-r>=1e3&&i=="arc_"+e.data.label.trim()+"_"+e.data.time?(eK(i,0),i="",eK("",Number.parseInt(((t.timeStamp-r)/1e3).toString()))):r=t.timeStamp})),n.filter((function(t){return!t.data.selected})).on("click",(function(e,n){n.data.selected||(t.alignMode=!1,t.currTime=n.data.time,ZY("arc_"+n.data.label.trim()+"_"+t.currTime),t.setData(n.data.time),t.setData(n.data.time),t.prepareChart(),t.prepareData(),t.plotPie()),1==t.alignMode&&(t.alignMode=!1,nK("reset_"+t.currTime),t.currTime=n.data.time,t.setData(n.data.time),t.setData(n.data.time),t.prepareChart(),t.prepareData(),t.plotPie())})),n.filter((function(t){return t.data.selected})).on("dblclick",(function(e,n){e.preventDefault(),n.data.selected&&(Ym("#tooltip").style("opacity",0),t.alignMode=!t.alignMode,1==t.alignMode?(nK("year_"+t.currTime),t.align(t.piedata,n.data.time),t.updateChart()):(nK("reset_"+t.currTime),t.currTime=n.data.time,t.setData(n.data.time),t.setData(n.data.time),t.prepareChart(),t.prepareData(),t.plotPie()),Ym("#tooltip").style("opacity",0))})),this.labelCatChart(),this.labelChart()},t.prototype.prepareData=function(){var t=this.pie(this.data[0]);this.data=[].concat.apply([],B_(this.data)),this.piedata=this.pie(this.data),function(t,e){for(var n=t.length,r=0;r<n;r++)for(var i=r;i<e.length;i+=n)e[i].startAngle=t[r].startAngle,e[i].endAngle=t[r].endAngle}(t,this.piedata)},t.prototype.labelCatChart=function(){for(var t=this,e=b_().innerRadius((function(e){return e.data.outer/t.scale+20})).outerRadius((function(e){return e.data.outer/t.scale+25})),n=document.getElementsByClassName("arcLabelWedge");n[0];)n[0].parentNode.removeChild(n[0]);var r=this.svg.selectAll(".arcLabelWedge").data(this.piedata.slice(-this.dataSet.radius.length)).enter().append("g").classed("arcLabelWedge",!0).attr("transform","translate("+this.width/2+","+this.height/2+")");r.append("path").attr("d",this.arc).attr("fill","none"),r.append("g:text").attr("transform",(function(t){return"translate("+e.centroid(t)+")rotate("+R_(t)+")"})).attr("text-anchor","middle").text((function(t){var e;return e=isNaN(t.data.label)?t.label:t.data.label+" bedroom",t.endAngle-t.startAngle>=Math.PI/8?e:t.data.label+" bdr"})).filter((function(t){return t.startAngle>=3*Math.PI/2||t.endAngle>=3*Math.PI/2})).classed("flipText",!0)},t.prototype.labelChart=function(){for(var t=document.getElementsByClassName("arcTimeWedge");t[0];)t[0].parentNode.removeChild(t[0]);for(t=document.getElementsByClassName("smallArcTimeWedge");t[0];)t[0].parentNode.removeChild(t[0]);this.svg.append("g").classed("arcTimeWedge",!0).attr("transform","translate("+this.width/2+","+(this.height+10)/2+")").append("text").classed("currTimeLabel",!0).attr("id","currLabelSvg").attr("text-anchor","middle").text(this.currTime);var e=this.piedata.filter((function(t){return!t.data.dummy&&0!=t.data.radius})),n=this.svg.append("g").attr("id","selectedArcs2007").selectAll(".selectedLabelArc").data(this.piedata.slice(0,this.dataSet.radius.length)).enter().append("g").classed("selectedArcWedge",!0).attr("transform","translate("+this.width/2+","+this.height/2+")");this.labelSelectedArcs(n);var r=this.svg.selectAll(".arcTimeWedge").data(e).enter().append("g").classed("arcTimeWedge",!0).attr("transform","translate("+this.width/2+","+this.height/2+")");this.labelArcs(r)},t.prototype.labelSelectedArcs=function(t){var e=this;this.arc=b_().innerRadius((function(t){return t.data.inner/e.scale})).outerRadius((function(t){return t.data.outer/e.scale})),t.append("path").attr("d",this.arc).attr("fill","none")},t.prototype.labelArcs=function(t){var e=this,n=this;this.arc=b_().innerRadius((function(t){return t.data.inner/n.scale})).outerRadius((function(t){return t.data.outer/n.scale}));var r=b_().innerRadius((function(t){return t.data.outer/n.scale-10})).outerRadius((function(t){return t.data.outer/n.scale-10})),i=b_().innerRadius((function(t){return t.data.outer/n.scale-24})).outerRadius((function(t){return t.data.outer/n.scale-24})),o=b_().innerRadius((function(t){return t.data.outer/n.scale-32})).outerRadius((function(t){return t.data.outer/n.scale-32}));t.append("path").attr("d",this.arc).attr("id",(function(t,e){return e})).attr("fill","none"),t.filter((function(t){return(t.startAngle+t.endAngle)/2<=Math.PI/4})).append("g:text").classed("innerText",(function(t){return t.data.selected})).attr("transform",(function(t){return"translate("+i.centroid(t)+")rotate("+R_(t)+")"})).attr("text-anchor","middle").classed("timeLabelText",!0).text((function(t){var n=e.graphData.cols.find((function(e){return e.title==t.data.label})).stats.find((function(e){return e.time==t.data.time})),r=O_(t.data.radius*n.frequency);return t.data.time,r})).append("tspan").attr("dy","1em").attr("x",0).text((function(t){return t.data.time})),t.filter((function(t){var e=(t.startAngle+t.endAngle)/2;return e>=5*Math.PI/4&&e<=7*Math.PI/4&&e>Math.PI/4})).append("g:text").classed("innerText",(function(t){return t.data.selected})).attr("transform",(function(t){return"translate("+r.centroid(t)+")rotate("+R_(t)+")"})).attr("text-anchor","middle").classed("timeLabelText",!0).text((function(t){var n=e.graphData.cols.find((function(e){return e.title==t.data.label})).stats.find((function(e){return e.time==t.data.time})),r=O_(t.data.radius*n.frequency);return t.data.time,r})).append("tspan").attr("dy","1em").attr("x",0).text((function(t){return t.data.time})),t.filter((function(t){var e=(t.startAngle+t.endAngle)/2;return(e<5*Math.PI/4||e>7*Math.PI/4)&&e>Math.PI/4})).append("g:text").classed("innerText",(function(t){return t.data.selected})).attr("transform",(function(t){return"translate("+o.centroid(t)+")rotate("+R_(t)+")"})).attr("text-anchor","middle").classed("timeLabelText",!0).text((function(t){var n=e.graphData.cols.find((function(e){return e.title==t.data.label})).stats.find((function(e){return e.time==t.data.time})),r=O_(t.data.radius*n.frequency);return t.data.time,r})).append("tspan").attr("dy","1em").attr("x",0).text((function(t){return t.data.time})),this.svg.selectAll(".arcTimeWedge").each((function(t,e,n){var r=Ym(n[e]).node();if(3==Ym(n[e]).node().childNodes.length){var i=r.childNodes[0],o=r.childNodes[1],s=r.childNodes[2];(i.getBBox().width<=o.getBBox().width||i.getBBox().width<=s.getBBox().width)&&(o.style.display="none",s.style.display="none")}}))},t.prototype.selectNode=function(t){Ym(".selectedNode").classed("selectedNode",!1),Ym("#"+t).classed("selectedNode",!0)},t.prototype.hoverNode=function(t){Ym(".hoverNode").classed("hoverNode",!1),""!==t&&Ym("#"+t).classed("hoverNode",!0)},t.prototype.dblClickNode=function(t){Ym(".dblClickNode").classed("dblClickNode",!1),""!==t&&Ym("#"+t).classed("dblClickNode",!0)},t}();const z_=W_;var H_=n(294),Q_=n(697),G_=n.n(Q_),Y_=n(935),K_=n(155),$_=function(){return $_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},$_.apply(this,arguments)};function X_(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function J_(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Z_(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(J_(arguments[e]));return t}var tb=function(t,e){return tb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},tb(t,e)};function eb(t,e){function n(){this.constructor=t}tb(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var nb=function(){return nb=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},nb.apply(this,arguments)};function rb(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function ib(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function ob(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function sb(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ab(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(sb(arguments[e]));return t}function ub(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var cb={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},lb=function(t,e){if(!t)throw hb(e)},hb=function(t){return new Error("Firebase Database ("+cb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},fb=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},pb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fb(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},db=function(t){try{return pb.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function yb(t){return vb(void 0,t)}function vb(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=vb(t[n],e[n]));return t}var gb=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function mb(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _b(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mb())}function bb(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function wb(){return!0===cb.NODE_ADMIN}var Eb=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,Tb.prototype.create),i}return eb(e,t),e}(Error),Tb=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,e){return t.replace(Cb,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Eb(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}(),Cb=/\{\$([^}]+)}/g;function Sb(t){return JSON.parse(t)}function Ib(t){return JSON.stringify(t)}var xb=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Sb(db(o[0])||""),n=Sb(db(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};function Nb(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function kb(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Ab(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pb(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var Ob=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^u&(c^l),s=1518500249):(o=u^c^l,s=1859775393):r<60?(o=u&c|l&(u|c),s=2400959708):(o=u^c^l,s=3395469782),i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function Rb(t,e){var n=new Db(t,e);return n.subscribe.bind(n)}var Db=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=Lb),void 0===r.error&&(r.error=Lb),void 0===r.complete&&(r.complete=Lb);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function Lb(){}var Fb=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Mb(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(r+" argument ")}function jb(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Mb(t,e,r)+"must be a valid function.")}function Ub(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Mb(t,e,r)+"must be a valid context object.")}var Vb,qb=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},Bb=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),Wb="[DEFAULT]",zb=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=Wb);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new gb;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=nb({identifier:Wb,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(Wb)}catch(t){}try{for(var r=ob(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=sb(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=Wb),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return rb(this,void 0,void 0,(function(){var t;return ib(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===Wb?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:Wb:t},t}(),Hb=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new zb(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function Qb(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Gb,Yb=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Gb||(Gb={}));var Kb,$b={debug:Gb.DEBUG,verbose:Gb.VERBOSE,info:Gb.INFO,warn:Gb.WARN,error:Gb.ERROR,silent:Gb.SILENT},Xb=Gb.INFO,Jb=((Vb={})[Gb.DEBUG]="log",Vb[Gb.VERBOSE]="log",Vb[Gb.INFO]="info",Vb[Gb.WARN]="warn",Vb[Gb.ERROR]="error",Vb),Zb=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Jb[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Qb(["["+i+"]  "+t.name+":"],n))}},tw=function(){function t(t){this.name=t,this._logLevel=Xb,this._logHandler=Zb,this._userLogHandler=null,Yb.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Gb))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?$b[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Qb([this,Gb.DEBUG],t)),this._logHandler.apply(this,Qb([this,Gb.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Qb([this,Gb.VERBOSE],t)),this._logHandler.apply(this,Qb([this,Gb.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Qb([this,Gb.INFO],t)),this._logHandler.apply(this,Qb([this,Gb.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Qb([this,Gb.WARN],t)),this._logHandler.apply(this,Qb([this,Gb.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Qb([this,Gb.ERROR],t)),this._logHandler.apply(this,Qb([this,Gb.ERROR],t))},t}();function ew(t){Yb.forEach((function(e){e.setLogLevel(t)}))}var nw,rw=((Kb={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Kb["bad-app-name"]="Illegal App name: '{$appName}",Kb["duplicate-app"]="Firebase App named '{$appName}' already exists",Kb["app-deleted"]="Firebase App named '{$appName}' already deleted",Kb["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Kb["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Kb),iw=new Tb("app","Firebase",rw),ow="@firebase/app",sw="[DEFAULT]",aw=((nw={})[ow]="fire-core",nw["@firebase/analytics"]="fire-analytics",nw["@firebase/auth"]="fire-auth",nw["@firebase/database"]="fire-rtdb",nw["@firebase/functions"]="fire-fn",nw["@firebase/installations"]="fire-iid",nw["@firebase/messaging"]="fire-fcm",nw["@firebase/performance"]="fire-perf",nw["@firebase/remote-config"]="fire-rc",nw["@firebase/storage"]="fire-gcs",nw["@firebase/firestore"]="fire-fst",nw["fire-js"]="fire-js",nw["firebase-wrapper"]="fire-js-all",nw),uw=new tw("@firebase/app"),cw=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=yb(t),this.container=new Hb(e.name),this._addComponent(new Bb("app",(function(){return o}),"PUBLIC"));try{for(var s=ob(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=sw),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=sw),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){uw.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw iw.create("app-deleted",{appName:this.name_})},t}();cw.prototype.name&&cw.prototype.options||cw.prototype.delete||console.log("dc");var lw=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=sw);var s=o.name;if("string"!=typeof s||!s)throw iw.create("bad-app-name",{appName:String(s)});if(Nb(e,s))throw iw.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=aw[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void uw.warn(u.join(" "))}o(new Bb(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:ew,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw iw.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=$b[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Gb[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Yb;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"7.16.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!Nb(e,t=t||sw))throw iw.create("no-app",{appName:t});return e[t]}function o(o){var s,a,u=o.name;if(n.has(u))return uw.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw iw.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&vb(c,o.serviceProps),r[u]=c,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,u).apply(this,o.multipleInstances?t:[])}}try{for(var l=ob(Object.keys(e)),h=l.next();!h.done;h=l.next()){var f=h.value;e[f]._addComponent(o)}}catch(t){s={error:t}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(cw);return e.INTERNAL=nb(nb({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){vb(e,t)},createSubscribe:Rb,ErrorFactory:Tb,deepExtend:vb}),e}(),hw=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){uw.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var fw=self.firebase.SDK_VERSION;fw&&fw.indexOf("LITE")>=0&&uw.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var pw=lw.initializeApp;lw.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()&&uw.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),pw.apply(void 0,t)};var dw=lw;!function(t,e){t.INTERNAL.registerComponent(new Bb("platform-logger",(function(t){return new hw(t)}),"PRIVATE")),t.registerVersion(ow,"0.6.8",void 0),t.registerVersion("fire-js","")}(dw);var yw=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ib(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Sb(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),vw=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Nb(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),gw=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yw(e)}}catch(t){}return new vw},mw=gw("localStorage"),_w=gw("sessionStorage"),bw=new tw("@firebase/database"),ww=function(){var t=1;return function(){return t++}}(),Ew=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,lb(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new Ob;n.update(e);var r=n.digest();return pb.encodeByteArray(r)},Tw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Tw.apply(null,i):n+="object"==typeof i?Ib(i):i,n+=" "}return n},Cw=null,Sw=!0,Iw=function(t,e){lb(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(bw.logLevel=Gb.VERBOSE,Cw=bw.log.bind(bw),e&&_w.set("logging_enabled",!0)):"function"==typeof t?Cw=t:(Cw=null,_w.remove("logging_enabled"))},xw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===Sw&&(Sw=!1,null===Cw&&!0===_w.get("logging_enabled")&&Iw(!0)),Cw){var n=Tw.apply(null,t);Cw(n)}},Nw=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];xw.apply(void 0,ab([t],e))}},kw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Tw.apply(void 0,ab(t));bw.error(n)},Aw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Tw.apply(void 0,ab(t));throw bw.error(n),new Error(n)},Pw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Tw.apply(void 0,ab(t));bw.warn(n)},Ow=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Rw="[MIN_NAME]",Dw="[MAX_NAME]",Lw=function(t,e){if(t===e)return 0;if(t===Rw||e===Dw)return-1;if(e===Rw||t===Dw)return 1;var n=$w(t),r=$w(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Fw=function(t,e){return t===e?0:t<e?-1:1},Mw=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ib(e))},jw=function(t){if("object"!=typeof t||null===t)return Ib(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Ib(e[i]),r+=":",r+=jw(t[e[i]]);return r+"}"},Uw=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Vw(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var qw,Bw,Ww,zw,Hw,Qw,Gw,Yw=function(t){lb(!Ow(t),"Invalid JSON number");var e,n,r,i,o;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var a=s.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},Kw=new RegExp("^-?(0*)\\d{1,10}$"),$w=function(t){if(Kw.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Xw=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw Pw("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Jw=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Zw=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Lw(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),tE=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=qb(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=qb(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=qb(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),eE="firebaseio.com",nE="websocket",rE="long_polling",iE=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=mw.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&mw.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(lb("string"==typeof t,"typeof type must == string"),lb("object"==typeof e,"typeof params must == object"),t===nE)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==rE)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Vw(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),oE=function(t){var e=sE(t),n=e.namespace;"firebase.com"===e.domain&&Aw(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||Aw("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Pw("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new iE(e.host,e.secure,n,r,"",n!==e.subdomain),path:new Zw(e.pathString)}},sE=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(l,h)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=ob(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Pw("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,h)));(c=e.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},aE=/[\[\].#$\/\u0000-\u001F\u007F]/,uE=/[\[\].#$\u0000-\u001F\u007F]/,cE=10485760,lE=function(t){return"string"==typeof t&&0!==t.length&&!aE.test(t)},hE=function(t){return"string"==typeof t&&0!==t.length&&!uE.test(t)},fE=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Ow(t)||t&&"object"==typeof t&&Nb(t,".sv")},pE=function(t,e,n,r,i){i&&void 0===n||dE(Mb(t,e,i),n,r)},dE=function(t,e,n){var r=n instanceof Zw?new tE(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(Ow(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>3495253.3333333335&&qb(e)>cE)throw new Error(t+"contains a string greater than "+cE+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(Vw(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!lE(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),dE(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},yE=function(t,e,n,r,i){if(!i||void 0!==n){var o=Mb(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Vw(n,(function(t,e){var n=new Zw(t);if(dE(o,e,r.child(n)),".priority"===n.getBack()&&!fE(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!lE(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Zw.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},vE=function(t,e,n,r){if(!r||void 0!==n){if(Ow(n))throw new Error(Mb(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fE(n))throw new Error(Mb(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gE=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Mb(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},mE=function(t,e,n,r){if(!(r&&void 0===n||lE(n)))throw new Error(Mb(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},_E=function(t,e,n,r){if(!(r&&void 0===n||hE(n)))throw new Error(Mb(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},bE=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},wE=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!lE(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hE(t)}(r))throw new Error(Mb(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},EE=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Fb("OnDisconnect.cancel",0,1,arguments.length),jb("OnDisconnect.cancel",1,t,!0);var e=new gb;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Fb("OnDisconnect.remove",0,1,arguments.length),bE("OnDisconnect.remove",this.path_),jb("OnDisconnect.remove",1,t,!0);var e=new gb;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Fb("OnDisconnect.set",1,2,arguments.length),bE("OnDisconnect.set",this.path_),pE("OnDisconnect.set",1,t,this.path_,!1),jb("OnDisconnect.set",2,e,!0);var n=new gb;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Fb("OnDisconnect.setWithPriority",2,3,arguments.length),bE("OnDisconnect.setWithPriority",this.path_),pE("OnDisconnect.setWithPriority",1,t,this.path_,!1),vE("OnDisconnect.setWithPriority",2,e,!1),jb("OnDisconnect.setWithPriority",3,n,!0);var r=new gb;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Fb("OnDisconnect.update",1,2,arguments.length),bE("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Pw("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yE("OnDisconnect.update",1,t,this.path_,!1),jb("OnDisconnect.update",2,e,!0);var i=new gb;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),TE=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Fb("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),CE=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(r){var i,o=r===e;e=r;var s=new Array(8);for(i=7;i>=0;i--)s[i]=t.charAt(r%64),r=Math.floor(r/64);lb(0===r,"Cannot push at time == 0");var a=s.join("");if(o){for(i=11;i>=0&&63===n[i];i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)a+=t.charAt(n[i]);return lb(20===a.length,"nextPushId: Length should be 20."),a}}(),SE=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),IE=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new SE(Rw,t),r=new SE(Rw,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return SE.MIN},t}(),xE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eb(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return qw},set:function(t){qw=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return Lw(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw hb("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return SE.MIN},e.prototype.maxPost=function(){return new SE(Dw,qw)},e.prototype.makePost=function(t,e){return lb("string"==typeof t,"KeyIndex indexValue must always be a string."),new SE(t,qw)},e.prototype.toString=function(){return".key"},e}(IE),NE=new xE,kE=function(t){return"number"==typeof t?"number:"+Yw(t):"string:"+t},AE=function(t){if(t.isLeafNode()){var e=t.val();lb("string"==typeof e||"number"==typeof e||"object"==typeof e&&Nb(e,".sv"),"Priority must be a string or number.")}else lb(t===Bw||t.isEmpty(),"priority of unexpected type.");lb(t===Bw||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},PE=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,lb(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),AE(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ww},set:function(t){Ww=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(lb(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+kE(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?Yw(this.value_):this.value_,this.lazyHash_=Ew(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(lb(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return lb(i>=0,"Unknown leaf type: "+n),lb(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),OE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eb(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Lw(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return SE.MIN},e.prototype.maxPost=function(){return new SE(Dw,new PE("[PRIORITY-POST]",Hw))},e.prototype.makePost=function(t,e){var n=zw(t);return new SE(e,new PE("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(IE),RE=new OE,DE=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),LE=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:ME.EMPTY_NODE,this.right=null!=o?o:ME.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return ME.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return ME.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),FE=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new LE(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),ME=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,LE.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,LE.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new DE(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new DE(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new DE(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new DE(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new FE,t}(),jE=Math.log(2),UE=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/jE,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),VE=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new LE(s,o.node,LE.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new LE(s,o.node,LE.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new LE(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,LE.BLACK):(a(h,LE.BLACK),a(h,LE.RED))}return o}(new UE(t.length));return new ME(r||e,o)},qE={},BE=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return lb(qE&&RE,"ChildrenNode.ts has not been loaded"),Qw=Qw||new t({".priority":qE},{".priority":RE})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=kb(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ME?e:null},t.prototype.hasIndex=function(t){return Nb(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){lb(e!==NE,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,s=n.getIterator(SE.Wrap),a=s.getNext();a;)o=o||e.isDefinedOn(a.node),i.push(a),a=s.getNext();r=o?VE(i,e.getCompare()):qE;var u=e.toString(),c=nb({},this.indexSet_);c[u]=e;var l=nb({},this.indexes_);return l[u]=r,new t(l,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Pb(this.indexes_,(function(t,i){var o=kb(r.indexSet_,i);if(lb(o,"Missing index implementation for "+i),t===qE){if(o.isDefinedOn(e.node)){for(var s=[],a=n.getIterator(SE.Wrap),u=a.getNext();u;)u.name!==e.name&&s.push(u),u=a.getNext();return s.push(e),VE(s,o.getCompare())}return qE}var c=n.get(e.name),l=t;return c&&(l=l.remove(new SE(e.name,c))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Pb(this.indexes_,(function(t){if(t===qE)return t;var r=n.get(e.name);return r?t.remove(new SE(e.name,r)):t})),this.indexSet_)},t}();function WE(t,e){return Lw(t.name,e.name)}function zE(t,e){return Lw(t,e)}var HE=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&AE(this.priorityNode_),this.children_.isEmpty()&&lb(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Gw||(Gw=new t(new ME(zE),null,BE.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Gw},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Gw:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(lb(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new SE(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Gw:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;lb(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(RE,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+kE(this.getPriority().val())+":"),this.forEachChild(RE,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":Ew(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new SE(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new SE(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new SE(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,SE.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,SE.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===QE?-1:0},t.prototype.withIndex=function(e){if(e===NE||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===NE||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(RE),r=e.getIterator(RE),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===NE?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),QE=new(function(t){function e(){return t.call(this,new ME(zE),HE.EMPTY_NODE,BE.Default)||this}return eb(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return HE.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(HE));Object.defineProperties(SE,{MIN:{value:new SE(Rw,HE.EMPTY_NODE)},MAX:{value:new SE(Dw,QE)}}),xE.__EMPTY_NODE=HE.EMPTY_NODE,PE.__childrenNodeConstructor=HE,function(t){Bw=t}(QE),function(t){Hw=t}(QE);var GE=!0;function YE(t,e){if(void 0===e&&(e=null),null===t)return HE.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),lb(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new PE(t,YE(e));if(t instanceof Array||!GE){var n=HE.EMPTY_NODE;return Vw(t,(function(e,r){if(Nb(t,e)&&"."!==e.substring(0,1)){var i=YE(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(YE(e))}var r=[],i=!1;if(Vw(t,(function(t,e){if("."!==t.substring(0,1)){var n=YE(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new SE(t,n)))}})),0===r.length)return HE.EMPTY_NODE;var o=VE(r,WE,(function(t){return t.name}),zE);if(i){var s=VE(r,RE.getCompare());return new HE(o,YE(e),new BE({".priority":s},{".priority":RE}))}return new HE(o,YE(e),BE.Default)}!function(t){zw=t}(YE);var KE,$E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eb(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Lw(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return SE.MIN},e.prototype.maxPost=function(){return SE.MAX},e.prototype.makePost=function(t,e){var n=YE(t);return new SE(e,n)},e.prototype.toString=function(){return".value"},e}(IE),XE=new $E,JE=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,lb(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return eb(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Lw(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=YE(t),r=HE.EMPTY_NODE.updateChild(this.indexPath_,n);return new SE(e,r)},e.prototype.maxPost=function(){var t=HE.EMPTY_NODE.updateChild(this.indexPath_,QE);return new SE(Dw,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(IE),ZE=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Fb("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Fb("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Fb("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Fb("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Fb("DataSnapshot.child",0,1,arguments.length),e=String(e),_E("DataSnapshot.child",1,e,!1);var n=new Zw(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,RE)},t.prototype.hasChild=function(t){Fb("DataSnapshot.hasChild",1,1,arguments.length),_E("DataSnapshot.hasChild",1,t,!1);var e=new Zw(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Fb("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;return Fb("DataSnapshot.forEach",1,1,arguments.length),jb("DataSnapshot.forEach",1,e,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),RE))}))},t.prototype.hasChildren=function(){return Fb("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Fb("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Fb("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),tT=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Ib(this.snapshot.exportVal())},t}(),eT=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),nT=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new tT("value",this,new ZE(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){lb(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new eT(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),rT=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Nb(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new eT(this,t,e):null},t.prototype.createEvent=function(t,e){lb(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new tT(t.type,this,new ZE(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){lb(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),iT=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return lb(KE,"Reference.ts has not been loaded"),KE},set:function(t){KE=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===NE){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Rw)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Dw)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===RE){if(null!=e&&!fE(e)||null!=n&&!fE(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(lb(t.getIndex()instanceof JE||t.getIndex()===XE,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Fb("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Fb("Query.on",2,4,arguments.length),gE("Query.on",1,e,!1),jb("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new nT(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new rT(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Fb("Query.off",0,3,arguments.length),gE("Query.off",1,t,!0),jb("Query.off",2,e,!0),Ub("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new nT(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new rT(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;Fb("Query.once",1,4,arguments.length),gE("Query.once",1,e,!1),jb("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=!0,u=new gb;u.promise.catch((function(){}));var c=function(t){a&&(a=!1,o.off(e,c),n&&n.bind(s.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if(Fb("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Fb("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Fb("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');_E("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Zw(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new JE(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Fb("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(NE);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Fb("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(RE);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Fb("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(XE);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Fb("Query.startAt",0,2,arguments.length),pE("Query.startAt",1,e,this.path,!0),mE("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Fb("Query.endAt",0,2,arguments.length),pE("Query.endAt",1,e,this.path,!0),mE("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Fb("Query.equalTo",1,2,arguments.length),pE("Query.equalTo",1,t,this.path,!1),mE("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Fb("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Fb("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=jw(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Fb("Query.isEqual",1,1,arguments.length),!(e instanceof t))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var n=this.repo===e.repo,r=this.path.equals(e.path),i=this.queryIdentifier()===e.queryIdentifier();return n&&r&&i},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,jb(t,3,r.cancel,!0),r.context=n,Ub(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Mb(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),oT=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),sT=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),aT=function(t,e,n){return t&&"object"==typeof t?(lb(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?uT(t[".sv"],e,n):"object"==typeof t[".sv"]?cT(t[".sv"],e):void lb(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},uT=function(t,e,n){if("timestamp"===t)return n.timestamp;lb(!1,"Unexpected server value: "+t)},cT=function(t,e,n){t.hasOwnProperty("increment")||lb(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&lb(!1,"Unexpected increment value: "+r);var i=e.node();if(lb(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},lT=function(t,e,n,r){return fT(e,new sT(n,t),r)},hT=function(t,e,n){return fT(t,new oT(e),n)};function fT(t,e,n){var r,i=t.getPriority().val(),o=aT(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=aT(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new PE(a,YE(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new PE(o))),u.forEachChild(RE,(function(t,i){var o=fT(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var pT,dT=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(RE,(function(t,e){n.remember(new Zw(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new Zw(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(pT||(pT={}));var yT,vT,gT=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,lb(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),mT=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=pT.ACK_USER_WRITE,this.source=gT.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return lb(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Zw(e));return new t(Zw.Empty,n,this.revert)}return lb(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),_T=function(){function t(t,e){void 0===e&&(yT||(yT=new ME(Fw)),e=yT),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return Vw(e,(function(t,e){n=n.set(new Zw(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Zw.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Zw(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(Zw.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Zw.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Zw.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Zw.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),bT=function(){function t(t,e){this.source=t,this.path=e,this.type=pT.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Zw.Empty):new t(this.source,this.path.popFront())},t}(),wT=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=pT.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Zw.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ET=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=pT.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Zw(e));return n.isEmpty()?null:n.value?new wT(this.source,Zw.Empty,n.value):new t(this.source,Zw.Empty,n)}return lb(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),TT=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),CT=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new TT(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new TT(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new TT(HE.EMPTY_NODE,!1,!1),new TT(HE.EMPTY_NODE,!1,!1)),t}(),ST=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),IT=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){lb(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(ST.childRemovedChange(e,s)):lb(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(ST.childAddedChange(e,n)):o.trackChildChange(ST.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(RE,(function(t,r){e.hasChild(t)||n.trackChildChange(ST.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(RE,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ST.childChangedChange(e,r,i))}else n.trackChildChange(ST.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?HE.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),xT=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;lb(e===ST.CHILD_ADDED||e===ST.CHILD_CHANGED||e===ST.CHILD_REMOVED,"Only child changes supported for tracking"),lb(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===ST.CHILD_ADDED&&i===ST.CHILD_REMOVED)this.changeMap.set(n,ST.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===ST.CHILD_REMOVED&&i===ST.CHILD_ADDED)this.changeMap.delete(n);else if(e===ST.CHILD_REMOVED&&i===ST.CHILD_CHANGED)this.changeMap.set(n,ST.childRemovedChange(n,r.oldSnap));else if(e===ST.CHILD_CHANGED&&i===ST.CHILD_ADDED)this.changeMap.set(n,ST.childAddedChange(n,t.snapshotNode));else{if(e!==ST.CHILD_CHANGED||i!==ST.CHILD_CHANGED)throw hb("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ST.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),NT=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),kT=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new TT(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),AT=function(t,e){this.viewCache=t,this.changes=e},PT=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){lb(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),lb(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,a=new xT;if(n.type===pT.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,a):(lb(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,s,a))}else if(n.type===pT.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,a):(lb(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,s,a))}else if(n.type===pT.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,r,i,a):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,a)}else{if(n.type!==pT.LISTEN_COMPLETE)throw hb("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,a)}var h=a.getChanges();return t.maybeAddValueEvent_(e,o,h),new AT(o,h)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ST.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(lb(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof HE?u:HE.EMPTY_NODE,l=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){lb(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var y=e.popFront(),v=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);v=null!=g?o.getNode().getImmediateChild(f).updateChild(y,g):o.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());s=null!=v?this.filter_.updateChild(o.getNode(),f,v,y,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,NT,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new kT(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,y,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new kT(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):HE.EMPTY_NODE}if(f.equals(p))s=t;else{var y=this.filter_.updateChild(u.getNode(),l,p,h,c,o);s=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:_T.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new Zw(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new Zw(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=_T.Empty;return a.getNode().forEachChild(NE,(function(t,e){u=u.set(new Zw(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=_T.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,NT,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new kT(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();lb(l instanceof HE,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}u=this.filter_.updateFullNode(a,c,i)}else{var h=e.getFront(),f=n.calcCompleteChild(h,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(h)&&(f=a.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(a,h,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(a,h,HE.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Zw.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),OT=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===ST.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(ST.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,ST.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,ST.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,ST.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,ST.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,ST.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw hb("Should only compare child_ events.");var n=new SE(t.childName,t.snapshotNode),r=new SE(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),RT=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new IT(n.getIndex()),i=n.getNodeFilter();this.processor_=new PT(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(HE.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(HE.EMPTY_NODE,s.getNode(),null),c=new TT(a,o.isFullyInitialized(),r.filtersNodes()),l=new TT(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new CT(l,c),this.eventGenerator_=new OT(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){lb(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===pT.MERGE&&null!==t.source.queryId&&(lb(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),lb(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),lb(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(RE,(function(t,e){n.push(ST.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(ST.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),DT=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return lb(vT,"Reference.ts has not been loaded"),vT},set:function(t){lb(!vT,"__referenceConstructor has already been defined"),vT=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return lb(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=ob(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof HE?(a=n.calcCompleteEventChildren(r),u=!1):(a=HE.EMPTY_NODE,u=!1);var c=new CT(new TT(a,u,!1),new TT(r,i,!1));s=new RT(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),a=[],u=[],c=this.hasCompleteView();if("default"===s)try{for(var l=ob(this.views.entries()),h=l.next();!h.done;h=l.next()){var f=sb(h.value,2),p=f[0],d=f[1];u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(p),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery()))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(d=this.views.get(s))&&(u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(s),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery())));return c&&!this.hasCompleteView()&&a.push(new t.__referenceConstructor(e.repo,e.path)),{removed:a,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=ob(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=ob(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=ob(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),LT=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new _T(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Zw.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new _T(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return Vw(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,_T.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Zw.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(RE,(function(e,n){t.push(new SE(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new SE(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new _T(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return FT(Zw.Empty,this.writeTree_,t)},t.Empty=new t(new _T(null)),t}();function FT(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(lb(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=FT(t.child(e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var MT=function(){function t(){this.visibleWrites_=LT.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new jT(t,this)},t.prototype.addOverwrite=function(t,e,n,r){lb(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){lb(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));lb(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var a=this.allWrites_[s];a.visible&&(s>=n&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Vw(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(Zw.Empty)){var s=t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);return c=n||HE.EMPTY_NODE,s.apply(c)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(Zw.Empty)){var c=n||HE.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=HE.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(RE,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(RE,(function(t,e){var r=i.childCompoundWrite(new Zw(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){lb(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Zw.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Zw.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=LT.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=Zw.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=Zw.relativePath(s,n),r=r.addWrite(Zw.Empty,o.snap.getChild(a)));else{if(!o.children)throw hb("WriteRecord should have .snap or .children");if(n.contains(s))a=Zw.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=Zw.relativePath(s,n)).isEmpty())r=r.addWrites(Zw.Empty,o.children);else{var u=kb(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(Zw.Empty,c)}}}}}return r},t}(),jT=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),UT=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=_T.Empty,this.pendingWriteTree_=new MT,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new wT(gT.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=_T.fromObject(e);return this.applyOperationToSyncPoints_(new ET(gT.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=_T.Empty;return null!=n.snap?r=r.set(Zw.Empty,!0):Vw(n.children,(function(t,e){r=r.set(new Zw(t),e)})),this.applyOperationToSyncPoints_(new mT(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new wT(gT.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=_T.fromObject(e);return this.applyOperationToSyncPoints_(new ET(gT.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new bT(gT.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Zw.relativePath(s,e),c=new wT(gT.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Zw.relativePath(s,e),c=_T.fromObject(n),l=new ET(gT.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Zw.relativePath(o,e),u=new bT(gT.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Zw.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var s,a=this.syncPointTree_.get(r);a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(Zw.Empty)):(a=new DT,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i?s=!0:(s=!1,i=HE.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(Zw.Empty);n&&(i=i.updateImmediateChild(t,n))})));var u=a.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);lb(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(c,l),this.tagToQueryMap.set(l,c)}var h=this.pendingWriteTree_.childWrites(r),f=a.addEventRegistration(e,n,h,i,s);if(!u&&!o){var p=a.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var y=p[d],v=y.getQuery(),g=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),g.hashFn,g.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Zw.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Vw(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(r);if(i)lb(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),Vw(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=u[c];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||HE.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return lb(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Zw(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);lb(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Zw.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Zw.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Zw.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Zw.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Zw.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),VT=function(){function t(){this.rootNode_=HE.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),qT=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(xw("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pw(t)},t}(),BT=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Nb(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return yb(this.counters_)},t}(),WT=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new BT),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),zT=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=nb({},t);return this.last_&&Vw(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),HT=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new zT(t);var n=1e4+2e4*Math.random();Jw(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Vw(e,(function(e,i){i>0&&Nb(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Jw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),QT=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new GT(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),GT=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();Cw&&xw("event: "+e.toString()),Xw(n)}}},t.prototype.getPath=function(){return this.path_},t}(),YT=function(){function t(t){this.allowedEvents_=t,this.listeners_={},lb(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=ab(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){lb(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),KT=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return eb(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return lb("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(YT),$T=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||_b()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return eb(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return lb("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(YT),XT=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Xw((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),JT="start",ZT=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Nw(t),this.stats_=WT.getCollection(e),this.urlFn=function(t){return e.connectionURL(rE,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new XT(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new tC((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=sb(t,5),i=r[0],o=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===JT)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=sb(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={};t[JT]="t",t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(eE)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Ib(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=fb(e),pb.encodeByteArray(n,!0)),i=Uw(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=Ib(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),tC=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=ww(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){xw("frame writing exception"),t.stack&&xw(t.stack),xw(t)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||xw("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){xw("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),eC="",nC=null;"undefined"!=typeof MozWebSocket?nC=MozWebSocket:"undefined"!=typeof WebSocket&&(nC=WebSocket);var rC=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Nw(this.connId),this.stats_=WT.getCollection(n),this.connURL=t.connectionURL_(n,i,o)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(eE)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(nE,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mw.set("previous_websocket_failure",!0);try{if(wb()){var r=cb.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+eC+"/"+K_.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}},o=K_.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new nC(this.connURL,[],i)}else i={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new nC(this.connURL,[],i)}catch(t){this.log_("Error instantiating WebSocket.");var a=t.message||t.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==nC&&!t.forceDisallow_},t.previouslyFailed=function(){return mw.isInMemoryStorage||!0===mw.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){mw.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Sb(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(lb(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Ib(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Uw(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),iC=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[ZT,rC]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=rC&&rC.isAvailable(),o=i&&!rC.previouslyFailed();if(e.webSocketOnly&&(i||Pw("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[rC];else{var s=this.transports_=[];try{for(var a=ob(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var c=u.value;c&&c.isAvailable()&&s.push(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),oC=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Nw("c:"+this.id+":"),this.transportManager_=new iC(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Jw((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Mw("t",t),n=Mw("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Mw("t",t),n=Mw("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=Mw("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?kw("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):kw("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Pw("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Jw((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jw((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mw.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),sC=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),aC=1e3,uC=function(t){function e(n,r,i,o,s,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=s,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=Nw("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=aC,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!wb())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),KT.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&$T.getInstance().on("online",c.onOnline_,c),c}return eb(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_(Ib(i)),lb(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),lb(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),lb(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Nb(t,"w")){var n=kb(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();Pw("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=xb(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=xb(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),lb(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Ib(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):kw("Unrecognized action received from server: "+Ib(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;lb(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=aC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=aC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=aC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())};this.realtime_={close:c,sendRequest:function(t){lb(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(e){a?xw("getToken() completed but was canceled"):(xw("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new oC(i,o.repoInfo_,o.applicationId_,t,n,r,(function(t){Pw(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),s))})).then(null,(function(t){o.log_("Failed to get token: "+t),a||c()}))}},e.prototype.interrupt=function(t){xw("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){xw("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Ab(this.interruptReasons_)&&(this.reconnectDelay_=aC,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return jw(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Zw(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){xw("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=ob(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ob(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+eC.replace(/\./g,"-")]=1,_b()?t["framework.cordova"]=1:bb()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=$T.getInstance().currentlyOnline();return Ab(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(sC),cC=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=Nw("p:rest:"),i.listens_={},i}return eb(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(lb(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=e.getListenId_(t,r),u={};this.listens_[a]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",c,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),kb(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(a.status>=200&&a.status<300){try{t=Sb(a.responseText)}catch(t){Pw("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Pw("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},e}(sC),lC="repo_interrupt",hC=function(){function t(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new QT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new dT,this.persistentConnection_=null;var o=new qT(n,r);if(this.stats_=WT.getCollection(t),e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new cC(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var s=n.options.databaseAuthVariableOverride;if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ib(s)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new uC(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,s),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=WT.getOrCreateReporter(t,(function(){return new HT(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new VT,this.infoSyncTree_=new UT({startListening:function(t,e,n,r){var o=[],s=i.infoData_.getNode(t.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new UT({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Zw(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Zw(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=Pb(e,(function(t){return YE(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=YE(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=Pb(e,(function(t){return YE(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=YE(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;Vw(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new Zw("/.info/"+t),r=YE(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=YE(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=hT(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||Pw("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(Vw(e,(function(e,n){i=!1,s[e]=lT(t.child(e),YE(n),r.serverSyncTree_,o)})),i)xw("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||Pw("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),Vw(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new dT;this.onDisconnect_.forEachTree(Zw.Empty,(function(r,i){var o=lT(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(Zw.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new dT,this.eventQueue_.raiseEventsForChangedPath(Zw.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=YE(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=YE(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Ab(e))return xw("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&Vw(e,(function(e,n){var i=YE(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(lC)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(lC)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new zT(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);Vw(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),xw.apply(void 0,ab([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Xw((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new EC(this))},enumerable:!1,configurable:!0}),t}(),fC=function(){function t(e){this.indexedFilter_=new IT(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new SE(e,n))||(n=HE.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=HE.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(HE.EMPTY_NODE);var i=this;return e.forEachChild(RE,(function(t,e){i.matches(new SE(t,e))||(r=r.updateImmediateChild(t,HE.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),pC=function(){function t(t){this.rangedFilter_=new fC(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new SE(e,n))||(n=HE.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=HE.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=HE.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(HE.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,HE.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;lb(a.numChildren()===this.limit_,"");var u=new SE(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var h=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ST.childChangedChange(e,n,h)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ST.childRemovedChange(e,h));var d=a.updateImmediateChild(e,HE.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(ST.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(ST.childRemovedChange(c.name,c.node)),i.trackChildChange(ST.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,HE.EMPTY_NODE)):t},t}(),dC=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=RE}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return lb(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return lb(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Rw},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return lb(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return lb(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dw},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return lb(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==RE&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===RE},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new IT(this.getIndex()):this.hasLimit()?new pC(this):new fC(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===RE?e=n.PRIORITY_INDEX:this.index_===XE?e=n.VALUE_INDEX:this.index_===NE?e=n.KEY_INDEX:(lb(this.index_ instanceof JE,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Ib(e),this.startSet_&&(r[n.START_AT]=Ib(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Ib(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Ib(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Ib(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),yC=function(t){function e(e,n){if(!(e instanceof hC))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,dC.DEFAULT,!1)||this}return eb(e,t),e.prototype.getKey=function(){return Fb("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Fb("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Zw||(null===this.path.getFront()?function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_E("Reference.child",1,n,!1)}(0,0,t):_E("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Fb("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Fb("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Fb("Reference.set",1,2,arguments.length),bE("Reference.set",this.path),pE("Reference.set",1,t,this.path,!1),jb("Reference.set",2,e,!0);var n=new gb;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Fb("Reference.update",1,2,arguments.length),bE("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Pw("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yE("Reference.update",1,t,this.path,!1),jb("Reference.update",2,e,!0);var i=new gb;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Fb("Reference.setWithPriority",2,3,arguments.length),bE("Reference.setWithPriority",this.path),pE("Reference.setWithPriority",1,t,this.path,!1),vE("Reference.setWithPriority",2,e,!1),jb("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new gb;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Fb("Reference.remove",0,1,arguments.length),bE("Reference.remove",this.path),jb("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Fb("Reference.transaction",1,3,arguments.length),bE("Reference.transaction",this.path),jb("Reference.transaction",1,t,!1),jb("Reference.transaction",2,e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(Mb("Reference.transaction",3,true)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new gb;return"function"==typeof e&&r.promise.catch((function(){})),this.repo.startTransaction(this.path,t,(function(t,n,i){t?r.reject(t):r.resolve(new TE(n,i)),"function"==typeof e&&e(t,n,i)}),n),r.promise},e.prototype.setPriority=function(t,e){Fb("Reference.setPriority",1,2,arguments.length),bE("Reference.setPriority",this.path),vE("Reference.setPriority",1,t,!1),jb("Reference.setPriority",2,e,!0);var n=new gb;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Fb("Reference.push",0,2,arguments.length),bE("Reference.push",this.path),pE("Reference.push",1,t,this.path,!0),jb("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=CE(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return bE("Reference.onDisconnect",this.path),new EE(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(iT);iT.__referenceConstructor=yC,DT.__referenceConstructor=yC;var vC,gC=function(){this.children={},this.childCount=0,this.value=null},mC=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new gC),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Zw?e:new Zw(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,kb(r.node_.children,i)||new gC),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){lb(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;Vw(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Zw(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Nb(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(vC||(vC={})),hC.MAX_TRANSACTION_RETRIES_=25,hC.prototype.transactionsInit_=function(){this.transactionQueueTree_=new mC},hC.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new yC(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:ww(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new ZE(s.currentInputSnapshot,new yC(this,s.path),RE);s.onComplete(null,!1,c)}}else{dE("transaction failed: Data returned ",u,s.path),s.status=vC.RUN;var l=this.transactionQueueTree_.subTree(t),h=l.getValue()||[];h.push(s),l.setValue(h);var f=void 0;"object"==typeof u&&null!==u&&Nb(u,".priority")?(f=kb(u,".priority"),lb(fE(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(t)||HE.EMPTY_NODE).getPriority().val();var p=this.generateServerValues(),d=YE(u,f),y=hT(d,a,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,y,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},hC.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||HE.EMPTY_NODE},hC.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);lb(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===vC.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},hC.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];lb(u.status===vC.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=vC.SENT,u.retryCount++;var c=Zw.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;this.server_.put(h.toString(),l,(function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=vC.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new yC(n,e[s].path),c=new ZE(a,u,RE);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)Xw(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===vC.SENT_NEEDS_ABORT?e[s].status=vC.NEEDS_ABORT:e[s].status=vC.RUN;else for(Pw("transaction at "+h.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=vC.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),s)},hC.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},hC.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===vC.RUN})),s=o.map((function(t){return t.currentWriteId})),a=0;a<t.length;a++){var u=t[a],c=Zw.relativePath(e,u.path),l=!1,h=void 0;if(lb(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===vC.NEEDS_ABORT)l=!0,h=u.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else if(u.status===vC.RUN)if(u.retryCount>=hC.MAX_TRANSACTION_RETRIES_)l=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else{var f=this.getLatestState_(u.path,s);u.currentInputSnapshot=f;var p=t[a].update(f.val());if(void 0!==p){dE("transaction failed: Data returned ",p,u.path);var d=YE(p);"object"==typeof p&&null!=p&&Nb(p,".priority")||(d=d.updatePriority(f.getPriority()));var y=u.currentWriteId,v=this.generateServerValues(),g=hT(d,f,v);u.currentOutputSnapshotRaw=d,u.currentOutputSnapshotResolved=g,u.currentWriteId=this.getNextWriteId_(),s.splice(s.indexOf(y),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(u.path,g,u.currentWriteId,u.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(y,!0))}else l=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],l&&(t[a].status=vC.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===h){var m=new yC(this,t[a].path),_=t[a].currentInputSnapshot,b=new ZE(_,m,RE);r.push(t[a].onComplete.bind(null,null,!1,b))}else r.push(t[a].onComplete.bind(null,new Error(h),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<r.length;a++)Xw(r[a]);this.sendReadyTransactions_()}},hC.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},hC.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},hC.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},hC.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==vC.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},hC.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},hC.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===vC.SENT_NEEDS_ABORT||(e[o].status===vC.SENT?(lb(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=vC.SENT_NEEDS_ABORT,e[o].abortReason="set"):(lb(e[o].status===vC.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)Xw(n[o])}};var _C,bC="databaseURL",wC=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return _C||(_C=new t),_C},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=ob(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ob(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=ob(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ob(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[bC];void 0===r&&Aw("Can't determine Firebase Database URL.  Be sure to include "+bC+" option when calling firebase.initializeApp().");var i=oE(r),o=i.repoInfo,s=void 0;return void 0!==K_&&(s=K_.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(r="http://"+s+"?ns="+o.namespace,o=(i=oE(r)).repoInfo),wE("Invalid Firebase Database URL",1,i),i.path.isEmpty()||Aw("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},t.prototype.deleteRepo=function(t){var e=kb(this.repos_,t.app.name);e&&kb(e,t.repoInfo_.toURLString())===t||Aw("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var r=kb(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=kb(r,t.toURLString());return i&&Aw("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new hC(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),EC=function(){function t(t){this.repo_=t,t instanceof hC||Aw("Don't call new Database() directly - please use firebase.database()."),this.root_=new yC(t,Zw.Empty),this.INTERNAL=new TC(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),Fb("database.ref",0,1,arguments.length),t instanceof yC?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Fb(e,1,1,arguments.length);var n=oE(t);wE(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Aw(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&Aw("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Fb("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Fb("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),TC=function(){function t(t){this.database=t}return t.prototype.delete=function(){return rb(this,void 0,void 0,(function(){return ib(this,(function(t){return this.database.checkDeleted_("delete"),wC.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),CC=Object.freeze({__proto__:null,forceLongPolling:function(){rC.forceDisallow(),ZT.forceAllow()},forceWebSockets:function(){ZT.forceDisallow()},isWebSocketsAvailable:function(){return rC.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),SC=uC;uC.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},uC.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var IC=oC,xC=iE,NC=Object.freeze({__proto__:null,DataConnection:SC,RealTimeConnection:IC,hijackHash:function(t){var e=uC.prototype.put;return uC.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){uC.prototype.put=e}},ConnectionTarget:xC,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){wC.getInstance().forceRestClient(t)}}),kC=EC.ServerValue;function AC(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}!function(t){var e;e=t.SDK_VERSION,eC=e,t.INTERNAL.registerComponent(new Bb("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return wC.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:yC,Query:iT,Database:EC,DataSnapshot:ZE,enableLogging:Iw,INTERNAL:CC,ServerValue:kC,TEST_ACCESS:NC}).setMultipleInstances(!0)),t.registerVersion("@firebase/database","0.6.7")}(dw);var PC,OC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},RC=RC||{},DC=OC||self;function LC(){}function FC(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function MC(t){var e=FC(t);return"array"==e||"object"==e&&"number"==typeof t.length}function jC(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var UC="closure_uid_"+(1e9*Math.random()>>>0),VC=0;function qC(t,e,n){return t.call.apply(t.bind,arguments)}function BC(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function WC(t,e,n){return(WC=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qC:BC).apply(null,arguments)}function zC(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var HC=Date.now||function(){return+new Date};function QC(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function GC(){this.j=this.j,this.i=this.i}GC.prototype.j=!1,GC.prototype.da=function(){!this.j&&(this.j=!0,this.C(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,UC)&&t[UC]||(t[UC]=++VC)}(this)},GC.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var YC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},KC=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function $C(t){return Array.prototype.concat.apply([],arguments)}function XC(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function JC(t){return/^[\s\xa0]*$/.test(t)}var ZC,tS=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function eS(t,e){return-1!=t.indexOf(e)}function nS(t,e){return t<e?-1:t>e?1:0}t:{var rS=DC.navigator;if(rS){var iS=rS.userAgent;if(iS){ZC=iS;break t}}ZC=""}function oS(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function sS(t){var e={};for(var n in t)e[n]=t[n];return e}var aS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uS(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<aS.length;o++)n=aS[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function cS(t){return cS[" "](t),t}cS[" "]=LC;var lS,hS=eS(ZC,"Opera"),fS=eS(ZC,"Trident")||eS(ZC,"MSIE"),pS=eS(ZC,"Edge"),dS=pS||fS,yS=eS(ZC,"Gecko")&&!(eS(ZC.toLowerCase(),"webkit")&&!eS(ZC,"Edge"))&&!(eS(ZC,"Trident")||eS(ZC,"MSIE"))&&!eS(ZC,"Edge"),vS=eS(ZC.toLowerCase(),"webkit")&&!eS(ZC,"Edge");function gS(){var t=DC.document;return t?t.documentMode:void 0}t:{var mS="",_S=function(){var t=ZC;return yS?/rv:([^\);]+)(\)|;)/.exec(t):pS?/Edge\/([\d\.]+)/.exec(t):fS?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):vS?/WebKit\/(\S+)/.exec(t):hS?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(_S&&(mS=_S?_S[1]:""),fS){var bS=gS();if(null!=bS&&bS>parseFloat(mS)){lS=String(bS);break t}}lS=mS}var wS,ES={};function TS(t){return function(t,e){var n=ES;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=tS(String(lS)).split("."),r=tS(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=nS(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||nS(0==s[2].length,0==a[2].length)||nS(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}DC.document&&fS?wS=gS()||parseInt(lS,10)||void 0:wS=void 0;var CS=wS,SS=!fS||9<=Number(CS),IS=fS&&!TS("9"),xS=function(){if(!DC.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{DC.addEventListener("test",LC,e),DC.removeEventListener("test",LC,e)}catch(t){}return t}();function NS(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function kS(t,e){if(NS.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(yS){t:{try{cS(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:AS[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}NS.prototype.b=function(){this.defaultPrevented=!0},QC(kS,NS);var AS={2:"touch",3:"pen",4:"mouse"};kS.prototype.b=function(){kS.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,IS)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var PS="closure_listenable_"+(1e6*Math.random()|0),OS=0;function RS(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++OS,this.V=this.X=!1}function DS(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function LS(t){this.src=t,this.a={},this.b=0}function FS(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=YC(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(DS(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function MS(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}LS.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=MS(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new RS(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var jS="closure_lm_"+(1e6*Math.random()|0),US={};function VS(t,e,n,r,i){if(r&&r.once)return BS(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)VS(t,e[o],n,r,i);return null}return n=$S(n),t&&t[PS]?t.ra(e,n,jC(r)?!!r.capture:!!r,i):qS(t,e,n,!1,r,i)}function qS(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=jC(i)?!!i.capture:!!i;if(s&&!SS)return null;var a=YS(t);if(a||(t[jS]=a=new LS(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=GS,e=SS?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xS||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(HS(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function BS(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)BS(t,e[o],n,r,i);return null}return n=$S(n),t&&t[PS]?t.sa(e,n,jC(r)?!!r.capture:!!r,i):qS(t,e,n,!0,r,i)}function WS(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)WS(t,e[o],n,r,i);else r=jC(r)?!!r.capture:!!r,n=$S(n),t&&t[PS]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=MS(o=t.a[e],n,r,i))&&(DS(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=YS(t))&&(e=t.a[e.toString()],t=-1,e&&(t=MS(e,n,r,i)),(n=-1<t?e[t]:null)&&zS(n))}function zS(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[PS])FS(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(HS(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=YS(e))?(FS(n,t),0==n.b&&(n.src=null,e[jS]=null)):DS(t)}}}function HS(t){return t in US?US[t]:US[t]="on"+t}function QS(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&zS(t),n.call(r,e)}function GS(t,e){if(t.V)return!0;if(!SS){if(!e)t:{e=["window","event"];for(var n=DC,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return QS(t,e=new kS(e,this))}return QS(t,new kS(e,this))}function YS(t){return(t=t[jS])instanceof LS?t:null}var KS="__closure_events_fn_"+(1e9*Math.random()>>>0);function $S(t){return"function"==FC(t)?t:(t[KS]||(t[KS]=function(e){return t.handleEvent(e)}),t[KS])}function XS(){GC.call(this),this.c=new LS(this),this.J=this,this.A=null}function JS(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.V&&s.capture==n){var a=s.listener,u=s.aa||s.src;s.X&&FS(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}QC(XS,GC),XS.prototype[PS]=!0,(PC=XS.prototype).addEventListener=function(t,e,n,r){VS(this,t,e,n,r)},PC.removeEventListener=function(t,e,n,r){WS(this,t,e,n,r)},PC.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new NS(t,n);else if(t instanceof NS)t.target=t.target||n;else{var i=t;uS(t=new NS(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=JS(s,r,!0,t)&&i}if(i=JS(s=t.a=n,r,!0,t)&&i,i=JS(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=JS(s=t.a=e[o],r,!1,t)&&i;return i},PC.C=function(){if(XS.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)DS(n[r]);delete e.a[t],e.b--}}this.A=null},PC.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},PC.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ZS=DC.JSON.stringify;function tI(){this.b=this.a=null}var eI,nI=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new iI}),(function(t){t.reset()}),100);function rI(){var t=uI,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function iI(){this.next=this.b=this.a=null}function oI(t){DC.setTimeout((function(){throw t}),0)}function sI(t,e){eI||function(){var t=DC.Promise.resolve(void 0);eI=function(){t.then(cI)}}(),aI||(eI(),aI=!0),uI.add(t,e)}tI.prototype.add=function(t,e){var n=nI.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},iI.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},iI.prototype.reset=function(){this.next=this.b=this.a=null};var aI=!1,uI=new tI;function cI(){for(var t;t=rI();){try{t.a.call(t.b)}catch(t){oI(t)}var e=nI;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}aI=!1}function lI(t,e){XS.call(this),this.b=t||1,this.a=e||DC,this.f=WC(this.Ua,this),this.g=HC()}function hI(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function fI(t,e,n){if("function"==FC(t))n&&(t=WC(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=WC(t.handleEvent,t)}return 2147483647<Number(e)?-1:DC.setTimeout(t,e||0)}function pI(t,e,n){GC.call(this),this.f=null!=n?WC(t,n):t,this.c=e,this.b=WC(this.Pa,this),this.a=[]}function dI(t){t.T=fI(t.b,t.c),t.f.apply(null,t.a)}function yI(t){GC.call(this),this.b=t,this.a={}}QC(lI,XS),(PC=lI.prototype).Z=!1,PC.L=null,PC.Ua=function(){if(this.Z){var t=HC()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(hI(this),this.start()))}},PC.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=HC())},PC.C=function(){lI.M.C.call(this),hI(this),delete this.a},QC(pI,GC),(PC=pI.prototype).ba=!1,PC.T=null,PC.Ia=function(t){this.a=arguments,this.T?this.ba=!0:dI(this)},PC.C=function(){pI.M.C.call(this),this.T&&(DC.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},PC.Pa=function(){this.T=null,this.ba&&(this.ba=!1,dI(this))},QC(yI,GC);var vI=[];function gI(t,e,n,r){Array.isArray(n)||(n&&(vI[0]=n.toString()),n=vI);for(var i=0;i<n.length;i++){var o=VS(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function mI(t){oS(t.a,(function(t,e){this.a.hasOwnProperty(e)&&zS(t)}),t),t.a={}}function _I(){}yI.prototype.C=function(){yI.M.C.call(this),mI(this)},yI.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bI=null;function wI(){return bI=bI||new XS}function EI(t){NS.call(this,"serverreachability",t)}function TI(t){var e=wI();e.dispatchEvent(new EI(e,t))}function CI(t){NS.call(this,"statevent",t)}function SI(t){var e=wI();e.dispatchEvent(new CI(e,t))}function II(t){NS.call(this,"timingevent",t)}function xI(t,e){if("function"!=FC(t))throw Error("Fn must not be null and must be a function");return DC.setTimeout((function(){t()}),e)}QC(EI,NS),QC(CI,NS),QC(II,NS);var NI={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},kI={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function AI(){}function PI(t){var e;return(e=t.a)||(e=t.a={}),e}function OI(){}AI.prototype.a=null;var RI,DI={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function LI(){NS.call(this,"d")}function FI(){NS.call(this,"c")}function MI(){}function jI(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new yI(this),this.N=UI,t=dS?125:void 0,this.O=new lI(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}QC(LI,NS),QC(FI,NS),QC(MI,AI),RI=new MI;var UI=45e3,VI={},qI={};function BI(t,e,n){t.B=1,t.f=lx(ix(e)),t.j=n,t.F=!0,WI(t,null)}function WI(t,e){t.s=HC(),QI(t),t.A=ix(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),Tx(n.b,"t",r),t.w=0,t.a=dN(t.g,t.g.w?e:null),0<t.J&&(t.D=new pI(WC(t.ya,t,t.a),t.J)),gI(t.G,t.a,"readystatechange",t.Sa),e=t.m?sS(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),TI(1)}function zI(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=HI(t,n);if(i==qI){4==e&&(t.c=4,SI(14),r=!1);break}if(i==VI){t.c=4,SI(15),r=!1;break}XI(t,i)}4==e&&0==n.length&&(t.c=1,SI(16),r=!1),t.b=t.b&&r,r||($I(t),KI(t))}function HI(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?qI:(n=Number(e.substring(n,r)),isNaN(n)?VI:(r+=1)+n>e.length?qI:(e=e.substr(r,n),t.w=r+n,e))}function QI(t){t.P=HC()+t.N,GI(t,t.N)}function GI(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=xI(WC(t.Qa,t),e)}function YI(t){t.h&&(DC.clearTimeout(t.h),t.h=null)}function KI(t){0==t.g.u||t.l||cN(t.g,t)}function $I(t){YI(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,hI(t.O),mI(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function XI(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||Ax(n.b,t)))if(n.A=t.H,!t.o&&Ax(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;uN(n),n.a.cancel(),n.a=null}aN(n),SI(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=xI(WC(n.Na,n),6e3));if(1>=kx(n.b)&&n.O){try{n.O()}catch(t){}n.O=void 0}}else hN(n,11)}else if((t.o||n.a==t)&&uN(n),!JC(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.G=i[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var s=i[5];null!=s&&"number"==typeof s&&0<s&&(n.D=1.5*s);var a=n,u=t.a;if(u){var c=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var l=a.b;!l.a&&(eS(c,"spdy")||eS(c,"quic")||eS(c,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Px(l,l.b),l.b=null))}if(a.s){var h=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(a.ha=h,cx(a.v,a.s,h))}}n.u=3,n.c&&n.c.na();var f=t;if((a=n).ea=pN(a,a.w?a.R:null,a.P),f.o){Ox(a.b,f);var p=f,d=a.D;d&&p.setTimeout(d),p.h&&(YI(p),QI(p)),a.a=f}else sN(a);0<n.f.length&&nN(n)}else"stop"!=i[0]&&"close"!=i[0]||hN(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?hN(n,7):Zx(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);TI(4)}catch(t){}}function JI(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(MC(t)||"string"==typeof t)KC(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(MC(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(MC(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ZI(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ZI)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function tx(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ex(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)ex(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ex(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(PC=jI.prototype).setTimeout=function(t){this.N=t},PC.Sa=function(t){t=t.target;var e=this.D;e&&3==Kx(t)?e.Ia():this.ya(t)},PC.ya=function(t){try{if(t==this.a)t:{var e=Kx(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!dS&&!this.a.Y())){this.l||4!=e||7==n||TI(8==n||0>=r?3:2),YI(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!JC(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.c=3,SI(12),$I(this),KI(this);break t}this.o=!0,XI(this,u)}this.F?(zI(this,e,o),dS&&this.b&&3==e&&(gI(this.G,this.O,"tick",this.Ra),this.O.start())):XI(this,o),4==e&&$I(this),this.b&&!this.l&&(4==e?cN(this.g,this):(this.b=!1,QI(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,SI(12)):(this.c=0,SI(13)),$I(this),KI(this)}}}catch(t){}},PC.Ra=function(){if(this.a){var t=Kx(this.a),e=this.a.Y();this.w<e.length&&(YI(this),zI(this,t,e),this.b&&4!=t&&QI(this))}},PC.cancel=function(){this.l=!0,$I(this)},PC.Qa=function(){this.h=null;var t=HC();0<=t-this.P?(2!=this.B&&(TI(3),SI(17)),$I(this),this.c=2,KI(this)):GI(this,this.P-t)},(PC=ZI.prototype).I=function(){tx(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},PC.K=function(){return tx(this),this.a.concat()},PC.get=function(t,e){return ex(this.b,t)?this.b[t]:e},PC.set=function(t,e){ex(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},PC.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var nx=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function rx(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof rx){this.a=void 0!==e?e:t.a,ox(this,t.f),this.j=t.j,sx(this,t.c),ax(this,t.h),this.g=t.g,e=t.b;var n=new _x;n.c=e.c,e.a&&(n.a=new ZI(e.a),n.b=e.b),ux(this,n),this.i=t.i}else t&&(n=String(t).match(nx))?(this.a=!!e,ox(this,n[1]||"",!0),this.j=hx(n[2]||""),sx(this,n[3]||"",!0),ax(this,n[4]),this.g=hx(n[5]||"",!0),ux(this,n[6]||"",!0),this.i=hx(n[7]||"")):(this.a=!!e,this.b=new _x(null,this.a))}function ix(t){return new rx(t)}function ox(t,e,n){t.f=n?hx(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function sx(t,e,n){t.c=n?hx(e,!0):e}function ax(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ux(t,e,n){e instanceof _x?(t.b=e,function(t,e){e&&!t.f&&(bx(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(wx(this,e),Tx(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=fx(e,gx)),t.b=new _x(e,t.a))}function cx(t,e,n){t.b.set(e,n)}function lx(t){return cx(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^HC()).toString(36)),t}function hx(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function fx(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,px),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function px(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}rx.prototype.toString=function(){var t=[],e=this.f;e&&t.push(fx(e,dx,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(fx(e,dx,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(fx(n,"/"==n.charAt(0)?vx:yx,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",fx(n,mx)),t.join("")};var dx=/[#\/\?@]/g,yx=/[#\?:]/g,vx=/[#\?]/g,gx=/[#\?@]/g,mx=/#/g;function _x(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function bx(t){t.a||(t.a=new ZI,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function wx(t,e){bx(t),e=Cx(t,e),ex(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ex((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&tx(t)))}function Ex(t,e){return bx(t),e=Cx(t,e),ex(t.a.b,e)}function Tx(t,e,n){wx(t,e),0<n.length&&(t.c=null,t.a.set(Cx(t,e),XC(n)),t.b+=n.length)}function Cx(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Sx(t,e){this.b=t,this.a=e}function Ix(t){this.g=t||xx,t=DC.PerformanceNavigationTiming?0<(t=DC.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(DC.ca&&DC.ca.ua&&DC.ca.ua()&&DC.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(PC=_x.prototype).add=function(t,e){bx(this),this.c=null,t=Cx(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},PC.forEach=function(t,e){bx(this),this.a.forEach((function(n,r){KC(n,(function(n){t.call(e,n,r,this)}),this)}),this)},PC.K=function(){bx(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},PC.I=function(t){bx(this);var e=[];if("string"==typeof t)Ex(this,t)&&(e=$C(e,this.a.get(Cx(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=$C(e,t[n])}return e},PC.set=function(t,e){return bx(this),this.c=null,Ex(this,t=Cx(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},PC.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},PC.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var xx=10;function Nx(t){return!!t.b||!!t.a&&t.a.size>=t.f}function kx(t){return t.b?1:t.a?t.a.size:0}function Ax(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Px(t,e){t.a?t.a.add(e):t.b=e}function Ox(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Rx(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=AC(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return XC(t.c)}function Dx(){}function Lx(){this.a=new Dx}function Fx(t,e,n){var r=n||"";try{JI(t,(function(t,n){var i=t;jC(t)&&(i=ZS(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Mx(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Ix.prototype.cancel=function(){var t,e;if(this.c=Rx(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=AC(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Dx.prototype.stringify=function(t){return DC.JSON.stringify(t,void 0)},Dx.prototype.parse=function(t){return DC.JSON.parse(t,void 0)};var jx=DC.JSON.parse;function Ux(t){XS.call(this),this.headers=new ZI,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=Vx,this.B=this.F=!1}QC(Ux,XS);var Vx="",qx=/^https?$/i,Bx=["POST","PUT"];function Wx(t){return"content-type"==t.toLowerCase()}function zx(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Hx(t),Gx(t)}function Hx(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Qx(t){if(t.b&&void 0!==RC&&(!t.s[1]||4!=Kx(t)||2!=t.S()))if(t.l&&4==Kx(t))fI(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==Kx(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(nx)[1]||null;if(!o&&DC.self&&DC.self.location){var s=DC.self.location.protocol;o=s.substr(0,s.length-1)}i=!qx.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Kx(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.S()+"]",Hx(t)}}finally{Gx(t)}}}function Gx(t,e){if(t.a){Yx(t);var n=t.a,r=t.s[0]?LC:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Yx(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(DC.clearTimeout(t.m),t.m=null)}function Kx(t){return t.a?t.a.readyState:0}function $x(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return oS(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):cx(t,e,n))}function Xx(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Jx(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=Xx("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=Xx("baseRetryDelayMs",5e3,t),this.Ga=Xx("retryDelaySeedMs",1e4,t),this.Da=Xx("forwardChannelMaxRetries",2,t),this.ga=Xx("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Ix(t&&t.concurrentRequestLimit),this.ja=new Lx,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function Zx(t){if(tN(t),3==t.u){var e=t.H++,n=ix(t.v);cx(n,"SID",t.B),cx(n,"RID",e),cx(n,"TYPE","terminate"),iN(t,n),(e=new jI(t,e,void 0)).B=2,e.f=lx(ix(n)),n=!1,DC.navigator&&DC.navigator.sendBeacon&&(n=DC.navigator.sendBeacon(e.f.toString(),"")),!n&&DC.Image&&((new Image).src=e.f,n=!0),n||(e.a=dN(e.g,null),e.a.$(e.f)),e.s=HC(),QI(e)}fN(t)}function tN(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(DC.clearTimeout(t.i),t.i=null),uN(t),t.b.cancel(),t.g&&("number"==typeof t.g&&DC.clearTimeout(t.g),t.g=null)}function eN(t,e){t.f.push(new Sx(t.Fa++,e)),3==t.u&&nN(t)}function nN(t){Nx(t.b)||t.g||(t.g=!0,sI(t.xa,t),t.o=0)}function rN(t,e){var n;n=e?e.W:t.H++;var r=ix(t.v);cx(r,"SID",t.B),cx(r,"RID",n),cx(r,"AID",t.G),iN(t,r),t.h&&t.j&&$x(r,t.h,t.j),n=new jI(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=oN(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),Px(t.b,n),BI(n,r,e)}function iN(t,e){t.c&&JI({},(function(t,n){cx(e,n,t)}))}function oN(t,e,n){n=Math.min(t.f.length,n);var r=t.c?WC(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Fx(l,s,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function sN(t){t.a||t.i||(t.J=1,sI(t.wa,t),t.m=0)}function aN(t){return!(t.a||t.i||3<=t.m||(t.J++,t.i=xI(WC(t.wa,t),lN(t,t.m)),t.m++,0))}function uN(t){null!=t.l&&(DC.clearTimeout(t.l),t.l=null)}function cN(t,e){var n=null;if(t.a==e){uN(t),t.a=null;var r=2}else{if(!Ax(t.b,e))return;n=e.i,Ox(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=HC()-e.s;var i=t.o;(r=wI()).dispatchEvent(new II(r,n,e,i)),nN(t)}else sN(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(kx(t.b)>=t.b.f-(t.g?1:0)||(t.g?(t.f=e.i.concat(t.f),0):1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da)||(t.g=xI(WC(t.xa,t,e),lN(t,t.o)),t.o++,0)))}(t,e)||2==r&&aN(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:hN(t,5);break;case 4:hN(t,10);break;case 3:hN(t,6);break;default:hN(t,2)}}function lN(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function hN(t,e){if(2==e){var n=null;t.c&&(n=null);var r=WC(t.Ta,t);n||(n=new rx("//www.google.com/images/cleardot.gif"),DC.location&&"http"==DC.location.protocol||ox(n,"https"),lx(n)),function(t,e){var n=new _I;if(DC.Image){var r=new Image;r.onload=zC(Mx,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zC(Mx,n,r,"TestLoadImage: error",!1,e),r.onabort=zC(Mx,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zC(Mx,n,r,"TestLoadImage: timeout",!1,e),DC.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else SI(2);t.u=0,t.c&&t.c.la(e),fN(t),tN(t)}function fN(t){t.u=0,t.A=-1,t.c&&(0==Rx(t.b).length&&0==t.f.length||(t.b.c.length=0,XC(t.f),t.f.length=0),t.c.ka())}function pN(t,e,n){var r=function(t){return t instanceof rx?ix(t):new rx(t,void 0)}(n);if(""!=r.c)e&&sx(r,e+"."+r.c),ax(r,r.h);else{var i=DC.location;r=function(t,e,n,r){var i=new rx(null,void 0);return t&&ox(i,t),e&&sx(i,e),n&&ax(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&oS(t.N,(function(t,e){cx(r,e,t)})),e=t.s,n=t.ha,e&&n&&cx(r,e,n),cx(r,"VER",t.oa),iN(t,r),r}function dN(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ux(t.Ea)).F=t.w,e}function yN(){}function vN(){if(fS&&!(10<=Number(CS)))throw Error("Environmental error: no available transport.")}function gN(t,e){XS.call(this),this.a=new Jx(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!JC(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!JC(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new bN(this)}function mN(t){LI.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function _N(){FI.call(this),this.status=1}function bN(t){this.a=t}(PC=Ux.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?PI(this.G):PI(RI),this.a.onreadystatechange=WC(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void zx(this,t)}t=n||"";var i=new ZI(this.headers);r&&JI(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Wx,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.K()),n=DC.FormData&&t instanceof DC.FormData,!(0<=YC(Bx,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Yx(this),0<this.o&&((this.B=function(t){return fS&&TS(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=WC(this.ta,this)):this.m=fI(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){zx(this,t)}},PC.ta=function(){void 0!==RC&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},PC.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Gx(this))},PC.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Gx(this,!0)),Ux.M.C.call(this)},PC.va=function(){this.j||(this.w||this.l||this.g?Qx(this):this.Oa())},PC.Oa=function(){Qx(this)},PC.S=function(){try{return 2<Kx(this)?this.a.status:-1}catch(t){return-1}},PC.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},PC.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),jx(e)}},PC.qa=function(){return this.h},PC.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(PC=Jx.prototype).oa=8,PC.u=1,PC.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new jI(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?uS(r=sS(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=oN(this,n,e),cx(i=ix(this.v),"RID",t),cx(i,"CVER",22),this.s&&cx(i,"X-HTTP-Session-Id",this.s),iN(this,i),this.h&&r&&$x(i,this.h,r),Px(this.b,n),this.fa?(cx(i,"$req",e),cx(i,"SID","null"),n.R=!0,BI(n,i,null)):BI(n,i,e),this.u=2}}else 3==this.u&&(t?rN(this,t):0==this.f.length||Nx(this.b)||rN(this))},PC.wa=function(){this.i=null,this.a=new jI(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=ix(this.ea);cx(t,"RID","rpc"),cx(t,"SID",this.B),cx(t,"CI",this.U?"0":"1"),cx(t,"AID",this.G),iN(this,t),cx(t,"TYPE","xmlhttp"),this.h&&this.j&&$x(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=lx(ix(t)),e.j=null,e.F=!0,WI(e,n)},PC.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,aN(this),SI(19))},PC.Ta=function(t){SI(t?2:1)},(PC=yN.prototype).na=function(){},PC.ma=function(){},PC.la=function(){},PC.ka=function(){},PC.Ha=function(){},vN.prototype.a=function(t,e){return new gN(t,e)},QC(gN,XS),(PC=gN.prototype).addEventListener=function(t,e,n,r){gN.M.addEventListener.call(this,t,e,n,r)},PC.removeEventListener=function(t,e,n,r){gN.M.removeEventListener.call(this,t,e,n,r)},PC.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;SI(0),t.P=e,t.N=n||{},t.U=t.W,t.v=pN(t,null,t.P),nN(t)},PC.close=function(){Zx(this.a)},PC.La=function(t){if("string"==typeof t){var e={};e.__data__=t,eN(this.a,e)}else this.g?((e={}).__data__=ZS(t),eN(this.a,e)):eN(this.a,t)},PC.C=function(){this.a.c=null,delete this.f,Zx(this.a),delete this.a,gN.M.C.call(this)},QC(mN,LI),QC(_N,FI),QC(bN,yN),bN.prototype.na=function(){this.a.dispatchEvent("a")},bN.prototype.ma=function(t){this.a.dispatchEvent(new mN(t))},bN.prototype.la=function(t){this.a.dispatchEvent(new _N(t))},bN.prototype.ka=function(){this.a.dispatchEvent("b")},vN.prototype.createWebChannel=vN.prototype.a,gN.prototype.send=gN.prototype.La,gN.prototype.open=gN.prototype.Ka,gN.prototype.close=gN.prototype.close,NI.NO_ERROR=0,NI.TIMEOUT=8,NI.HTTP_ERROR=6,kI.COMPLETE="complete",OI.EventType=DI,DI.OPEN="a",DI.CLOSE="b",DI.ERROR="c",DI.MESSAGE="d",XS.prototype.listen=XS.prototype.ra,Ux.prototype.listenOnce=Ux.prototype.sa,Ux.prototype.getLastError=Ux.prototype.Ma,Ux.prototype.getLastErrorCode=Ux.prototype.qa,Ux.prototype.getStatus=Ux.prototype.S,Ux.prototype.getResponseJson=Ux.prototype.Ja,Ux.prototype.getResponseText=Ux.prototype.Y,Ux.prototype.send=Ux.prototype.$;var wN={createWebChannelTransport:function(){return new vN},ErrorCode:NI,EventType:kI,WebChannel:OI,XhrIo:Ux},EN=wN.createWebChannelTransport,TN=wN.ErrorCode,CN=wN.EventType,SN=wN.WebChannel,IN=wN.XhrIo,xN=dw.SDK_VERSION,NN=new tw("@firebase/firestore");function kN(){return NN.logLevel}function AN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(NN.logLevel<=Gb.DEBUG){var r=e.map(ON);NN.debug.apply(NN,ub(["Firestore ("+xN+"): "+t],r))}}function PN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(NN.logLevel<=Gb.ERROR){var r=e.map(ON);NN.error.apply(NN,ub(["Firestore ("+xN+"): "+t],r))}}function ON(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function RN(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+xN+") INTERNAL ASSERTION FAILED: "+t;throw PN(e),new Error(e)}function DN(t,e){t||RN()}function LN(t,e){return t}function FN(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var MN=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=FN(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function jN(t,e){return t<e?-1:t>e?1:0}function UN(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function VN(t){return t+"\0"}var qN=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},BN=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.o=function(t){return jN(this.projectId,t.projectId)||jN(this.database,t.database)},t}();function WN(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zN(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HN(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var QN=function(){function t(t,e){this.h=t,this.u=e,this.l={}}return t.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){zN(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype._=function(){return HN(this.l)},t}(),GN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},YN=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return eb(e,t),e}(Error),KN=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new YN(GN.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new YN(GN.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new YN(GN.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new YN(GN.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.T=function(t){return this.seconds===t.seconds?jN(this.nanoseconds,t.nanoseconds):jN(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),$N=function(){function t(t){this.timestamp=t}return t.I=function(e){return new t(e)},t.min=function(){return new t(new KN(0,0))},t.prototype.o=function(t){return this.timestamp.T(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.m=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.A=function(){return this.timestamp},t}(),XN=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&RN(),void 0===n?n=t.length-e:n>t.length-e&&RN(),this.segments=t,this.offset=e,this.R=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.P(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.V(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.g=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},t.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},t.prototype.v=function(){return this.segments[this.offset]},t.prototype.S=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype._=function(){return 0===this.length},t.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},t.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),JN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eb(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.prototype.N=function(){return this.F().join("/")},e.prototype.toString=function(){return this.N()},e.$=function(t){if(t.indexOf("//")>=0)throw new YN(GN.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.k=function(){return new e([])},e}(XN),ZN=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eb(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.M=function(t){return ZN.test(t)},e.prototype.N=function(){return this.F().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.M(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.N()},e.prototype.O=function(){return 1===this.length&&"__name__"===this.get(0)},e.L=function(){return new e(["__name__"])},e.B=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new YN(GN.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new YN(GN.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new YN(GN.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new YN(GN.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.k=function(){return new e([])},e}(XN),ek=function(){function t(t){this.path=t}return t.q=function(e){return new t(JN.$(e).g(5))},t.prototype.U=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===JN.P(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.P=function(t,e){return JN.P(t.path,e.path)},t.W=function(t){return t.length%2==0},t.j=function(e){return new t(new JN(e.slice()))},t}();function nk(t){return null==t}function rk(t){return-0===t&&1/t==-1/0}function ik(t){return"number"==typeof t&&Number.isInteger(t)&&!rk(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ok=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.K=null};function sk(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ok(t,e,n,r,i,o,s)}function ak(t){var e=LN(t);if(null===e.K){var n=e.path.N();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.N()+t.op.toString()+Jk(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.N()+e.dir;var e})).join(","),nk(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=FP(e.startAt)),e.endAt&&(n+="|ub:",n+=FP(e.endAt)),e.K=n}return e.K}function uk(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!qP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],!(i instanceof kP&&o instanceof kP&&i.op===o.op&&i.field.isEqual(o.field)&&Yk(i.value,o.value)))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jP(t.startAt,e.startAt)&&jP(t.endAt,e.endAt)}function ck(t){return ek.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}var lk=function(){function t(t){this.G=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.G,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.G)},t.prototype.H=function(){return 2*this.G.length},t.prototype.o=function(t){return jN(this.G,t.G)},t.prototype.isEqual=function(t){return this.G===t.G},t}();lk.Y=new lk("");var hk,fk,pk=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=$N.min()),void 0===o&&(o=$N.min()),void 0===s&&(s=lk.Y),this.target=t,this.targetId=e,this.J=n,this.sequenceNumber=r,this.X=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Z=function(e){return new t(this.target,this.targetId,this.J,e,this.X,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.tt=function(e,n){return new t(this.target,this.targetId,this.J,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.et=function(e){return new t(this.target,this.targetId,this.J,this.sequenceNumber,this.X,e,this.resumeToken)},t}(),dk=function(t){this.count=t};function yk(t){switch(t){case GN.OK:return RN();case GN.CANCELLED:case GN.UNKNOWN:case GN.DEADLINE_EXCEEDED:case GN.RESOURCE_EXHAUSTED:case GN.INTERNAL:case GN.UNAVAILABLE:case GN.UNAUTHENTICATED:return!1;case GN.INVALID_ARGUMENT:case GN.NOT_FOUND:case GN.ALREADY_EXISTS:case GN.PERMISSION_DENIED:case GN.FAILED_PRECONDITION:case GN.ABORTED:case GN.OUT_OF_RANGE:case GN.UNIMPLEMENTED:case GN.DATA_LOSS:return!0;default:return RN()}}function vk(t){if(void 0===t)return PN("GRPC error has no .code"),GN.UNKNOWN;switch(t){case hk.OK:return GN.OK;case hk.CANCELLED:return GN.CANCELLED;case hk.UNKNOWN:return GN.UNKNOWN;case hk.DEADLINE_EXCEEDED:return GN.DEADLINE_EXCEEDED;case hk.RESOURCE_EXHAUSTED:return GN.RESOURCE_EXHAUSTED;case hk.INTERNAL:return GN.INTERNAL;case hk.UNAVAILABLE:return GN.UNAVAILABLE;case hk.UNAUTHENTICATED:return GN.UNAUTHENTICATED;case hk.INVALID_ARGUMENT:return GN.INVALID_ARGUMENT;case hk.NOT_FOUND:return GN.NOT_FOUND;case hk.ALREADY_EXISTS:return GN.ALREADY_EXISTS;case hk.PERMISSION_DENIED:return GN.PERMISSION_DENIED;case hk.FAILED_PRECONDITION:return GN.FAILED_PRECONDITION;case hk.ABORTED:return GN.ABORTED;case hk.OUT_OF_RANGE:return GN.OUT_OF_RANGE;case hk.UNIMPLEMENTED:return GN.UNIMPLEMENTED;case hk.DATA_LOSS:return GN.DATA_LOSS;default:return RN()}}(fk=hk||(hk={}))[fk.OK=0]="OK",fk[fk.CANCELLED=1]="CANCELLED",fk[fk.UNKNOWN=2]="UNKNOWN",fk[fk.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fk[fk.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fk[fk.NOT_FOUND=5]="NOT_FOUND",fk[fk.ALREADY_EXISTS=6]="ALREADY_EXISTS",fk[fk.PERMISSION_DENIED=7]="PERMISSION_DENIED",fk[fk.UNAUTHENTICATED=16]="UNAUTHENTICATED",fk[fk.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fk[fk.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fk[fk.ABORTED=10]="ABORTED",fk[fk.OUT_OF_RANGE=11]="OUT_OF_RANGE",fk[fk.UNIMPLEMENTED=12]="UNIMPLEMENTED",fk[fk.INTERNAL=13]="INTERNAL",fk[fk.UNAVAILABLE=14]="UNAVAILABLE",fk[fk.DATA_LOSS=15]="DATA_LOSS";var gk=function(){function t(t,e){this.P=t,this.root=e||_k.EMPTY}return t.prototype.nt=function(e,n){return new t(this.P,this.root.nt(e,n,this.P).copy(null,null,_k.st,null,null))},t.prototype.remove=function(e){return new t(this.P,this.root.remove(e,this.P).copy(null,null,_k.st,null,null))},t.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype._=function(){return this.root._()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.it=function(){return this.root.it()},t.prototype.rt=function(){return this.root.rt()},t.prototype.ot=function(t){return this.root.ot(t)},t.prototype.forEach=function(t){this.ot((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ot((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.at=function(){return new mk(this.root,null,this.P,!1)},t.prototype.ut=function(t){return new mk(this.root,t,this.P,!1)},t.prototype.ct=function(){return new mk(this.root,null,this.P,!0)},t.prototype.lt=function(t){return new mk(this.root,t,this.P,!0)},t}(),mk=function(){function t(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}return t.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},t.prototype.wt=function(){return this.ft.length>0},t.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},t}(),_k=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype._=function(){return!1},t.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left._()?this:this.left.min()},t.prototype.it=function(){return this.min().key},t.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},t.prototype.nt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.nt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.nt(t,e,n))).Et()},t.prototype.It=function(){if(this.left._())return t.EMPTY;var e=this;return e.left.At()||e.left.left.At()||(e=e.Rt()),(e=e.copy(null,null,null,e.left.It(),null)).Et()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left._()||i.left.At()||i.left.left.At()||(i=i.Rt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.At()&&(i=i.Pt()),i.right._()||i.right.At()||i.right.left.At()||(i=i.Vt()),0===n(e,i.key)){if(i.right._())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.It())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Et()},t.prototype.At=function(){return this.color},t.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.yt()),t},t.prototype.Rt=function(){var t=this.yt();return t.right.left.At()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Pt())).gt()).yt()),t},t.prototype.Vt=function(){var t=this.yt();return t.left.left.At()&&(t=(t=t.Pt()).yt()),t},t.prototype.gt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Pt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.yt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.pt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},t.prototype.bt=function(){if(this.At()&&this.left.At())throw RN();if(this.right.At())throw RN();var t=this.left.bt();if(t!==this.right.bt())throw RN();return t+(this.At()?0:1)},t}();_k.EMPTY=null,_k.RED=!0,_k.st=!1,_k.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw RN()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw RN()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw RN()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw RN()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw RN()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.nt=function(t,e,n){return new _k(t,e)},t.prototype.remove=function(t,e){return this},t.prototype._=function(){return!0},t.prototype.ot=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.it=function(){return null},t.prototype.rt=function(){return null},t.prototype.At=function(){return!1},t.prototype.pt=function(){return!0},t.prototype.bt=function(){return 0},t}());var bk=function(){function t(t){this.P=t,this.data=new gk(this.P)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.it()},t.prototype.last=function(){return this.data.rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ot((function(e,n){return t(e),!1}))},t.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(this.P(r.key,t[1])>=0)return;e(r.key)}},t.prototype.St=function(t,e){var n;for(n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},t.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},t.prototype.at=function(){return new wk(this.data.at())},t.prototype.ut=function(t){return new wk(this.data.ut(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).nt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype._=function(){return this.data._()},t.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.at(),r=e.data.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(0!==this.P(i,o))return!1}return!0},t.prototype.F=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.P);return n.data=e,n},t}(),wk=function(){function t(t){this.Ft=t}return t.prototype.dt=function(){return this.Ft.dt().key},t.prototype.wt=function(){return this.Ft.wt()},t}(),Ek=new gk(ek.P);function Tk(){return Ek}function Ck(){return Tk()}var Sk=new gk(ek.P);function Ik(){return Sk}var xk=new gk(ek.P),Nk=new bk(ek.P);function kk(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Nk,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ak=new bk(jN);function Pk(){return Ak}var Ok=function(){function t(t){this.P=t?function(e,n){return t(e,n)||ek.P(e.key,n.key)}:function(t,e){return ek.P(t.key,e.key)},this.Nt=Ik(),this.$t=new gk(this.P)}return t.kt=function(e){return new t(e.P)},t.prototype.has=function(t){return null!=this.Nt.get(t)},t.prototype.get=function(t){return this.Nt.get(t)},t.prototype.first=function(){return this.$t.it()},t.prototype.last=function(){return this.$t.rt()},t.prototype._=function(){return this.$t._()},t.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ot((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Nt.nt(t.key,t),e.$t.nt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Nt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.at(),r=e.$t.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.P=this.P,r.Nt=e,r.$t=n,r},t}(),Rk=function(){function t(){this.xt=new gk(ek.P)}return t.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);n?0!==t.type&&3===n.type?this.xt=this.xt.nt(e,t):3===t.type&&1!==n.type?this.xt=this.xt.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):RN():this.xt=this.xt.nt(e,t)},t.prototype.Mt=function(){var t=[];return this.xt.ot((function(e,n){t.push(n)})),t},t}(),Dk=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ot=n,this.docChanges=r,this.Lt=i,this.fromCache=o,this.Bt=s,this.qt=a}return t.Ut=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ok.kt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Lt._()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.Lt.isEqual(t.Lt)&&CP(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ot.isEqual(t.Ot)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Lk=function(){function t(t,e,n,r,i){this.X=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}return t.Gt=function(e,n){var r=new Map;return r.set(e,Fk.zt(e,n)),new t($N.min(),r,Pk(),Tk(),kk())},t}(),Fk=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}return t.zt=function(e,n){return new t(lk.Y,n,kk(),kk(),kk())},t}(),Mk=function(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r},jk=function(t,e){this.targetId=t,this.ee=e},Uk=function(t,e,n,r){void 0===n&&(n=lk.Y),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Vk=function(){function t(){this.ne=0,this.se=Wk(),this.ie=lk.Y,this.re=!1,this.oe=!0}return Object.defineProperty(t.prototype,"Ht",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"he",{get:function(){return 0!==this.ne},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ae",{get:function(){return this.oe},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){t.H()>0&&(this.oe=!0,this.ie=t)},t.prototype.ce=function(){var t=kk(),e=kk(),n=kk();return this.se.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:RN()}})),new Fk(this.ie,this.re,t,e,n)},t.prototype.le=function(){this.oe=!1,this.se=Wk()},t.prototype._e=function(t,e){this.oe=!0,this.se=this.se.nt(t,e)},t.prototype.fe=function(t){this.oe=!0,this.se=this.se.remove(t)},t.prototype.de=function(){this.ne+=1},t.prototype.we=function(){this.ne-=1},t.prototype.Te=function(){this.oe=!0,this.re=!0},t}(),qk=function(){function t(t){this.Ee=t,this.Ie=new Map,this.me=Tk(),this.Ae=Bk(),this.Re=new bk(jN)}return t.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof bP?this.Ve(r,t.te):t.te instanceof wP&&this.ge(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ge(s,t.key,t.te)}},t.prototype.ye=function(t){var e=this;this.pe(t,(function(n){var r=e.be(n);switch(t.state){case 0:e.ve(n)&&r.ue(t.resumeToken);break;case 1:r.we(),r.he||r.le(),r.ue(t.resumeToken);break;case 2:r.we(),r.he||e.removeTarget(n);break;case 3:e.ve(n)&&(r.Te(),r.ue(t.resumeToken));break;case 4:e.ve(n)&&(e.Se(n),r.ue(t.resumeToken));break;default:RN()}}))},t.prototype.pe=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ie.forEach((function(t,r){n.ve(r)&&e(r)}))},t.prototype.De=function(t){var e=t.targetId,n=t.ee.count,r=this.Ce(e);if(r){var i=r.target;if(ck(i))if(0===n){var o=new ek(i.path);this.ge(e,o,new wP(o,$N.min()))}else DN(1===n);else this.Fe(e)!==n&&(this.Se(e),this.Re=this.Re.add(e))}},t.prototype.Ne=function(t){var e=this,n=new Map;this.Ie.forEach((function(r,i){var o=e.Ce(i);if(o){if(r.Ht&&ck(o.target)){var s=new ek(o.target.path);null!==e.me.get(s)||e.$e(i,s)||e.ge(i,s,new wP(s,t))}r.ae&&(n.set(i,r.ce()),r.le())}}));var r=kk();this.Ae.forEach((function(t,n){var i=!0;n.St((function(t){var n=e.Ce(t);return!n||2===n.J||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Lk(t,n,this.Re,this.me,r);return this.me=Tk(),this.Ae=Bk(),this.Re=new bk(jN),i},t.prototype.Ve=function(t,e){if(this.ve(t)){var n=this.$e(t,e.key)?2:0;this.be(t)._e(e.key,n),this.me=this.me.nt(e.key,e),this.Ae=this.Ae.nt(e.key,this.ke(e.key).add(t))}},t.prototype.ge=function(t,e,n){if(this.ve(t)){var r=this.be(t);this.$e(t,e)?r._e(e,1):r.fe(e),this.Ae=this.Ae.nt(e,this.ke(e).delete(t)),n&&(this.me=this.me.nt(e,n))}},t.prototype.removeTarget=function(t){this.Ie.delete(t)},t.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},t.prototype.de=function(t){this.be(t).de()},t.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new Vk,this.Ie.set(t,e)),e},t.prototype.ke=function(t){var e=this.Ae.get(t);return e||(e=new bk(jN),this.Ae=this.Ae.nt(t,e)),e},t.prototype.ve=function(t){var e=null!==this.Ce(t);return e||AN("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},t.prototype.Se=function(t){var e=this;this.Ie.set(t,new Vk),this.Ee.xe(t).forEach((function(n){e.ge(t,n,null)}))},t.prototype.$e=function(t,e){return this.Ee.xe(t).has(e)},t}();function Bk(){return new gk(ek.P)}function Wk(){return new gk(ek.P)}function zk(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Hk(t){var e=Zk(t.mapValue.fields.__local_write_time__.timestampValue);return new KN(e.seconds,e.nanos)}var Qk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gk(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zk(t)?4:10:RN()}function Yk(t,e){var n=Gk(t);if(n!==Gk(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hk(t).isEqual(Hk(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Zk(t.timestampValue),r=Zk(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return eA(t.bytesValue).isEqual(eA(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return tA(t.geoPointValue.latitude)===tA(e.geoPointValue.latitude)&&tA(t.geoPointValue.longitude)===tA(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return tA(t.integerValue)===tA(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=tA(t.doubleValue),r=tA(e.doubleValue);return n===r?rk(n)===rk(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return UN(t.arrayValue.values||[],e.arrayValue.values||[],Yk);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(WN(n)!==WN(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yk(n[i],r[i])))return!1;return!0}(t,e);default:return RN()}}function Kk(t,e){return void 0!==(t.values||[]).find((function(t){return Yk(t,e)}))}function $k(t,e){var n=Gk(t),r=Gk(e);if(n!==r)return jN(n,r);switch(n){case 0:return 0;case 1:return jN(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=tA(t.integerValue||t.doubleValue),r=tA(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Xk(t.timestampValue,e.timestampValue);case 4:return Xk(Hk(t),Hk(e));case 5:return jN(t.stringValue,e.stringValue);case 6:return function(t,e){var n=eA(t),r=eA(e);return n.o(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=jN(n[i],r[i]);if(0!==o)return o}return jN(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=jN(tA(t.latitude),tA(e.latitude));return 0!==n?n:jN(tA(t.longitude),tA(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=$k(n[i],r[i]);if(o)return o}return jN(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=jN(r[s],o[s]);if(0!==a)return a;var u=$k(n[r[s]],i[o[s]]);if(0!==u)return u}return jN(r.length,o.length)}(t.mapValue,e.mapValue);default:throw RN()}}function Xk(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return jN(t,e);var n=Zk(t),r=Zk(e),i=jN(n.seconds,r.seconds);return 0!==i?i:jN(n.nanos,r.nanos)}function Jk(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Zk(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?eA(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,ek.q(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=t(s)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):RN();var n,r}(t)}function Zk(t){if(DN(!!t),"string"==typeof t){var e=0,n=Qk.exec(t);if(DN(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tA(t.seconds),nanos:tA(t.nanos)}}function tA(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function eA(t){return"string"==typeof t?lk.fromBase64String(t):lk.fromUint8Array(t)}function nA(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function rA(t){return!!t&&"integerValue"in t}function iA(t){return!!t&&"arrayValue"in t}function oA(t){return!!t&&"nullValue"in t}function sA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function aA(t){return!!t&&"mapValue"in t}var uA={asc:"ASCENDING",desc:"DESCENDING"},cA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lA=function(t,e){this.s=t,this.Oe=e};function hA(t){return{integerValue:""+t}}function fA(t,e){if(t.Oe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rk(e)?"-0":e}}function pA(t,e){return ik(e)?hA(e):fA(t,e)}function dA(t,e){return t.Oe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function yA(t,e){return t.Oe?e.toBase64():e.toUint8Array()}function vA(t,e){return dA(t,e.A())}function gA(t){return DN(!!t),$N.I(function(t){var e=Zk(t);return new KN(e.seconds,e.nanos)}(t))}function mA(t,e){return function(t){return new JN(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).N()}function _A(t){var e=JN.$(t);return DN(jA(e)),e}function bA(t,e){return mA(t.s,e.path)}function wA(t,e){var n=_A(e);return DN(n.get(1)===t.s.projectId),DN(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new ek(SA(n))}function EA(t,e){return mA(t.s,e)}function TA(t){var e=_A(t);return 4===e.length?JN.k():SA(e)}function CA(t){return new JN(["projects",t.s.projectId,"databases",t.s.database]).N()}function SA(t){return DN(t.length>4&&"documents"===t.get(4)),t.g(5)}function IA(t,e,n){return{name:bA(t,e),fields:n.proto.mapValue.fields}}function xA(t,e){var n;if(e instanceof uP)n={update:IA(t,e.key,e.value)};else if(e instanceof dP)n={delete:bA(t,e.key)};else if(e instanceof cP)n={update:IA(t,e.key,e.data),updateMask:MA(e.Le)};else if(e instanceof hP)n={transform:{document:bA(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof WA)return{fieldPath:e.field.N(),setToServerValue:"REQUEST_TIME"};if(n instanceof zA)return{fieldPath:e.field.N(),appendMissingElements:{values:n.elements}};if(n instanceof QA)return{fieldPath:e.field.N(),removeAllFromArray:{values:n.elements}};if(n instanceof YA)return{fieldPath:e.field.N(),increment:n.Be};throw RN()}(0,t)}))}};else{if(!(e instanceof yP))return RN();n={verify:bA(t,e.key)}}return e.Ue.qe||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:vA(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:RN()}(t,e.Ue)),n}function NA(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?tP.updateTime(gA(t.updateTime)):void 0!==t.exists?tP.exists(t.exists):tP.Qe()}(e.currentDocument):tP.Qe();if(e.update){e.update.name;var r=wA(t,e.update.name),i=new vP({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new XA(e.map((function(t){return tk.B(t)})))}(e.updateMask);return new cP(r,i,o,n)}return new uP(r,i,n)}if(e.delete){var s=wA(t,e.delete);return new dP(s,n)}if(e.transform){var a=wA(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)DN("REQUEST_TIME"===e.setToServerValue),n=new WA;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new zA(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new QA(i)}else"increment"in e?n=new YA(t,e.increment):RN();var o=tk.B(e.fieldPath);return new JA(o,n)}(t,e)}));return DN(!0===n.exists),new hP(a,u)}if(e.verify){var c=wA(t,e.verify);return new yP(c,n)}return RN()}function kA(t,e){return{documents:[EA(t,e.path)]}}function AA(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=EA(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=EA(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return t instanceof kP?function(t){if("=="===t.op){if(sA(t.value))return{unaryFilter:{field:RA(t.field),op:"IS_NAN"}};if(oA(t.value))return{unaryFilter:{field:RA(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:RA(t.field),op:(e=t.op,cA[e]),value:t.value}};var e}(t):RN()}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:RA((e=t).field),direction:(n=e.dir,uA[n])};var e,n}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Oe||nk(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=PA(e.startAt)),e.endAt&&(n.structuredQuery.endAt=PA(e.endAt)),n}function PA(t){return{before:t.before,values:t.position}}function OA(t){var e=!!t.before,n=t.values||[];return new LP(n,e)}function RA(t){return{fieldPath:t.N()}}function DA(t){return tk.B(t.fieldPath)}function LA(t){return kP.create(DA(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return RN()}}(t.fieldFilter.op),t.fieldFilter.value)}function FA(t){switch(t.unaryFilter.op){case"IS_NAN":var e=DA(t.unaryFilter.field);return kP.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=DA(t.unaryFilter.field);return kP.create(n,"==",{nullValue:"NULL_VALUE"});default:return RN()}}function MA(t){var e=[];return t.fields.forEach((function(t){return e.push(t.N())})),{fieldPaths:e}}function jA(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var UA=function(){this.je=void 0};function VA(t,e,n){return t instanceof WA?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof zA?HA(t,e):t instanceof QA?GA(t,e):function(t,e){var n=BA(t,e),r=KA(n)+KA(t.Be);return rA(n)&&rA(t.Be)?hA(r):fA(t.serializer,r)}(t,e)}function qA(t,e,n){return t instanceof zA?HA(t,e):t instanceof QA?GA(t,e):n}function BA(t,e){return t instanceof YA?rA(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var WA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eb(e,t),e}(UA),zA=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return eb(e,t),e}(UA);function HA(t,e){for(var n=$A(e),r=function(t){n.some((function(e){return Yk(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var QA=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return eb(e,t),e}(UA);function GA(t,e){for(var n=$A(e),r=function(t){n=n.filter((function(e){return!Yk(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var YA=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Be=n,r}return eb(e,t),e}(UA);function KA(t){return tA(t.integerValue||t.doubleValue)}function $A(t){return iA(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var XA=function(){function t(t){this.fields=t,t.sort(tk.P)}return t.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},t.prototype.isEqual=function(t){return UN(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),JA=function(t,e){this.field=t,this.transform=e},ZA=function(t,e){this.version=t,this.transformResults=e},tP=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Qe=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"qe",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function eP(t,e){return void 0!==t.updateTime?e instanceof bP&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof bP}var nP=function(){};function rP(t,e,n){return t instanceof uP?function(t,e,n){return new bP(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof cP?function(t,e,n){if(!eP(t.Ue,e))return new EP(t.key,n.version);var r=lP(t,e);return new bP(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof hP?function(t,e,n){if(DN(null!=n.transformResults),!eP(t.Ue,e))return new EP(t.key,n.version);var r=fP(0,e),i=function(t,e,n){var r=[];DN(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof bP&&(a=e.field(o.field)),r.push(qA(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=pP(t,r.data(),i);return new bP(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new wP(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function iP(t,e,n,r){return t instanceof uP?function(t,e){if(!eP(t.Ue,e))return e;var n=aP(e);return new bP(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof cP?function(t,e){if(!eP(t.Ue,e))return e;var n=aP(e),r=lP(t,e);return new bP(t.key,n,r,{Ge:!0})}(t,e):t instanceof hP?function(t,e,n,r){if(!eP(t.Ue,e))return e;var i=fP(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof bP&&(c=n.field(a.field)),null===c&&r instanceof bP&&(c=r.field(a.field)),i.push(VA(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=pP(t,i.data(),o);return new bP(t.key,i.version,s,{Ge:!0})}(t,e,r,n):function(t,e){return eP(t.Ue,e)?new wP(t.key,$N.min()):e}(t,e)}function oP(t,e){return t instanceof hP?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof bP?e.field(o.field):void 0,a=BA(o.transform,s||null);null!=a&&(n=null==n?(new gP).set(o.field,a):n.set(o.field,a))}return n?n.ze():null}(t,e):null}function sP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ue.isEqual(e.Ue)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Le.isEqual(e.Le):2!==t.type||UN(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof zA&&e instanceof zA||t instanceof QA&&e instanceof QA?UN(t.elements,e.elements,Yk):t instanceof YA&&e instanceof YA?Yk(t.Be,e.Be):t instanceof WA&&e instanceof WA}(t.transform,e.transform)}(t,e)})))}function aP(t){return t instanceof bP?t.version:$N.min()}var uP=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ue=r,i.type=0,i}return eb(e,t),e}(nP),cP=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Le=r,o.Ue=i,o.type=1,o}return eb(e,t),e}(nP);function lP(t,e){return function(t,e){var n=new gP(e);return t.Le.fields.forEach((function(e){if(!e._()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.ze()}(t,e instanceof bP?e.data():vP.empty())}var hP=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ue=tP.exists(!0),r}return eb(e,t),e}(nP);function fP(t,e){return e}function pP(t,e,n){for(var r=new gP(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.ze()}var dP=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=3,r}return eb(e,t),e}(nP),yP=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=4,r}return eb(e,t),e}(nP),vP=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!aA(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},t.prototype.isEqual=function(t){return Yk(this.proto,t.proto)},t}(),gP=function(){function t(t){void 0===t&&(t=vP.empty()),this.He=t,this.Ye=new Map}return t.prototype.set=function(t,e){return this.Je(t,e),this},t.prototype.delete=function(t){return this.Je(t,null),this},t.prototype.Je=function(t,e){for(var n=this.Ye,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Gk(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.S(),e)},t.prototype.ze=function(){var t=this.Xe(tk.k(),this.Ye);return null!=t?new vP(t):this.He},t.prototype.Xe=function(t,e){var n=this,r=!1,i=this.He.field(t),o=aA(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.Xe(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function mP(t){var e=[];return zN(t.fields||{},(function(t,n){var r=new tk([t]);if(aA(n)){var i=mP(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new XA(e)}var _P=function(t,e){this.key=t,this.version=e},bP=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ze=r,o.Ge=!!i.Ge,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return eb(e,t),e.prototype.field=function(t){return this.Ze.field(t)},e.prototype.data=function(){return this.Ze},e.prototype.tn=function(){return this.Ze.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(_P),wP=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return eb(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(_P),EP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eb(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(_P),TP=function(){function t(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.en=n,this.filters=r,this.limit=i,this.nn=o,this.startAt=s,this.endAt=a,this.sn=null,this.rn=null,this.startAt&&this.on(this.startAt),this.endAt&&this.on(this.endAt)}return t.hn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.sn){this.sn=[];var t=this.an(),e=this.un();if(null!==t&&null===e)t.O()||this.sn.push(new UP(t)),this.sn.push(new UP(tk.L(),"asc"));else{for(var n=!1,r=0,i=this.en;r<i.length;r++){var o=i[r];this.sn.push(o),o.field.O()&&(n=!0)}if(!n){var s=this.en.length>0?this.en[this.en.length-1].dir:"asc";this.sn.push(new UP(tk.L(),s))}}}return this.sn},enumerable:!1,configurable:!0}),t.prototype.cn=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.en.slice(),n,this.limit,this.nn,this.startAt,this.endAt)},t.prototype.ln=function(e){var n=this.en.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype._n=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.fn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.dn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,e,this.endAt)},t.prototype.wn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,e)},t.prototype.Tn=function(e){return new t(e,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype.En=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.O())},t.prototype.In=function(){return!nk(this.limit)&&"F"===this.nn},t.prototype.mn=function(){return!nk(this.limit)&&"L"===this.nn},t.prototype.un=function(){return this.en.length>0?this.en[0].field:null},t.prototype.an=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof kP&&n.An())return n.field}return null},t.prototype.Rn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof kP&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Pn=function(){return ck(this.We())},t.prototype.Vn=function(){return null!==this.collectionGroup},t.prototype.We=function(){if(!this.rn)if("F"===this.nn)this.rn=sk(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new UP(r.field,i))}var o=this.endAt?new LP(this.endAt.position,!this.endAt.before):null,s=this.startAt?new LP(this.startAt.position,!this.startAt.before):null;this.rn=sk(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.rn},t.prototype.on=function(t){},t}();function CP(t,e){return uk(t.We(),e.We())&&t.nn===e.nn}function SP(t){return ak(t.We())+"|lt:"+t.nn}function IP(t){return"Query(target="+function(t){var e=t.path.N();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.N()+" "+e.op+" "+Jk(e.value);var e})).join(", ")+"]"),nk(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.N()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+FP(t.startAt)),t.endAt&&(e+=", endAt: "+FP(t.endAt)),"Target("+e+")"}(t.We())+"; limitType="+t.nn+")"}function xP(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.U(t.collectionGroup)&&t.path.D(n):ek.W(t.path)?t.path.isEqual(n):t.path.C(n)}(t,e)&&function(t,e){for(var n=0,r=t.en;n<r.length;n++){var i=r[n];if(!i.field.O()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!MP(t.startAt,t.orderBy,e)||t.endAt&&MP(t.endAt,t.orderBy,e))}(t,e)}function NP(t){return function(e,n){for(var r=!1,i=0,o=t.orderBy;i<o.length;i++){var s=o[i],a=VP(s,e,n);if(0!==a)return a;r=r||s.field.O()}return 0}}var kP=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return eb(e,t),e.create=function(t,n,r){if(t.O())return"in"===n?new PP(t,r):new AP(t,n,r);if(oA(r)){if("=="!==n)throw new YN(GN.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(sA(r)){if("=="!==n)throw new YN(GN.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new OP(t,r):"in"===n?new RP(t,r):"array-contains-any"===n?new DP(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Gk(this.value)===Gk(e)&&this.gn($k(e,this.value))},e.prototype.gn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return RN()}},e.prototype.An=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e}((function(){})),AP=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ek.q(r.referenceValue),i}return eb(e,t),e.prototype.matches=function(t){var e=ek.P(t.key,this.key);return this.gn(e)},e}(kP),PP=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return ek.q(t.referenceValue)})),r}return eb(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(kP),OP=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return eb(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return iA(e)&&Kk(e.arrayValue,this.value)},e}(kP),RP=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return eb(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Kk(this.value.arrayValue,e)},e}(kP),DP=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return eb(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!iA(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Kk(e.value.arrayValue,t)}))},e}(kP),LP=function(t,e){this.position=t,this.before=e};function FP(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Jk(t)})).join(",")}function MP(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.O()?ek.P(ek.q(s.referenceValue),n.key):$k(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function jP(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Yk(t.position[n],e.position[n]))return!1;return!0}var UP=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function VP(t,e,n){var r=t.field.O()?ek.P(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?$k(r,i):RN()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return RN()}}function qP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var BP=function(){function t(t,e,n,r){this.batchId=t,this.yn=e,this.baseMutations=n,this.mutations=r}return t.prototype.pn=function(t,e,n){for(var r=n.bn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=rP(o,e,r[i]))}return e},t.prototype.vn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=iP(i,e,e,this.yn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=iP(u,e,o,this.yn))}return e},t.prototype.Sn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.vn(r.key,t.get(r.key));i&&(n=n.nt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),kk())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&UN(this.mutations,t.mutations,(function(t,e){return sP(t,e)}))&&UN(this.baseMutations,t.baseMutations,(function(t,e){return sP(t,e)}))},t}(),WP=function(){function t(t,e,n,r){this.batch=t,this.Dn=e,this.bn=n,this.Cn=r}return t.from=function(e,n,r){DN(e.mutations.length===r.length);for(var i=xk,o=e.mutations,s=0;s<o.length;s++)i=i.nt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),zP=function(){function t(t){var e=this;this.Fn=null,this.Nn=null,this.result=void 0,this.error=void 0,this.$n=!1,this.kn=!1,t((function(t){e.$n=!0,e.result=t,e.Fn&&e.Fn(t)}),(function(t){e.$n=!0,e.error=t,e.Nn&&e.Nn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.kn&&RN(),this.kn=!0,this.$n?this.error?this.xn(n,this.error):this.Mn(e,this.result):new t((function(t,i){r.Fn=function(n){r.Mn(e,n).next(t,i)},r.Nn=function(e){r.xn(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Mn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.xn=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Bn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.qn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Bn(r)},t}(),HP=function(){function t(){this.Un=new QN((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Qn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Wn},set:function(t){this.Wn=t},enumerable:!1,configurable:!0}),t.prototype.jn=function(t,e){this.Kn(),this.readTime=e,this.Un.set(t.key,t)},t.prototype.Gn=function(t,e){this.Kn(),e&&(this.readTime=e),this.Un.set(t,null)},t.prototype.zn=function(t,e){this.Kn();var n=this.Un.get(e);return void 0!==n?zP.resolve(n):this.Hn(t,e)},t.prototype.getEntries=function(t,e){return this.Yn(t,e)},t.prototype.apply=function(t){return this.Kn(),this.Qn=!0,this.Jn(t)},t.prototype.Kn=function(){},t}(),QP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",GP=function(){function t(){this.Xn=[]}return t.prototype.Zn=function(t){this.Xn.push(t)},t.prototype.ts=function(){this.Xn.forEach((function(t){return t()}))},t}(),YP=function(){function t(t,e,n){this.es=t,this.ns=e,this.ss=n}return t.prototype.rs=function(t,e){var n=this;return this.ns.os(t,e).next((function(r){return n.hs(t,e,r)}))},t.prototype.hs=function(t,e,n){return this.es.zn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].vn(e,t);return t}))},t.prototype.as=function(t,e,n){var r=Ck();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].vn(t,e);r=r.nt(t,e)})),r},t.prototype.us=function(t,e){var n=this;return this.es.getEntries(t,e).next((function(e){return n.cs(t,e)}))},t.prototype.cs=function(t,e){var n=this;return this.ns.ls(t,e).next((function(r){var i=n.as(t,e,r),o=Tk();return i.forEach((function(t,e){e||(e=new wP(t,$N.min())),o=o.nt(t,e)})),o}))},t.prototype._s=function(t,e,n){return e.Pn()?this.fs(t,e.path):e.Vn()?this.ds(t,e,n):this.ws(t,e,n)},t.prototype.fs=function(t,e){return this.rs(t,new ek(e)).next((function(t){var e=Ik();return t instanceof bP&&(e=e.nt(t.key,t)),e}))},t.prototype.ds=function(t,e,n){var r=this,i=e.collectionGroup,o=Ik();return this.ss.Ts(t,i).next((function(s){return zP.forEach(s,(function(s){var a=e.Tn(s.child(i));return r.ws(t,a,n).next((function(t){t.forEach((function(t,e){o=o.nt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.ws=function(t,e,n){var r,i,o=this;return this.es._s(t,e,n).next((function(n){return r=n,o.ns.Es(t,e)})).next((function(e){return i=e,o.Is(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=iP(u,l,l,o.yn);r=h instanceof bP?r.nt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){xP(e,n)||(r=r.remove(t))})),r}))},t.prototype.Is=function(t,e,n){for(var r=kk(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof cP&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.es.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof bP&&(c=c.nt(t,e))})),c}))},t}(),KP=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ms=n,this.As=r}return t.Rs=function(e,n){for(var r=kk(),i=kk(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),$P=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Ps=function(t){return n.Vs(t)},this.gs=function(t){return e.ys(t)})}return t.prototype.Vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.gs&&this.gs(t),t},t}();$P.ps=-1;var XP=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},JP=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.bs=t,this.vs=e,this.Ss=n,this.Ds=r,this.Cs=i,this.Fs=0,this.Ns=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fs=0},t.prototype.ks=function(){this.Fs=this.Cs},t.prototype.xs=function(t){var e=this;this.cancel();var n=Math.floor(this.Fs+this.Ms()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&AN("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ns=this.bs.Os(this.vs,i,(function(){return e.$s=Date.now(),t()})),this.Fs*=this.Ds,this.Fs<this.Ss&&(this.Fs=this.Ss),this.Fs>this.Cs&&(this.Fs=this.Cs)},t.prototype.Ls=function(){null!==this.Ns&&(this.Ns.Bs(),this.Ns=null)},t.prototype.cancel=function(){null!==this.Ns&&(this.Ns.cancel(),this.Ns=null)},t.prototype.Ms=function(){return(Math.random()-.5)*this.Fs},t}();function ZP(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=eO(e)),e=tO(t.get(n),e);return eO(e)}function tO(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function eO(t){return t+""}function nO(t){var e=t.length;if(DN(e>=2),2===e)return DN(""===t.charAt(0)&&""===t.charAt(1)),JN.k();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&RN(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:RN()}o=s+2}return new JN(r)}var rO=function(){function t(){this.qs=new iO}return t.prototype.Us=function(t,e){return this.qs.add(e),zP.resolve()},t.prototype.Ts=function(t,e){return zP.resolve(this.qs.getEntries(e))},t}(),iO=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new bk(JN.P),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new bk(JN.P)).F()},t}(),oO=function(){function t(){this.Qs=new iO}return t.prototype.Us=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.S(),i=e.p();t.Zn((function(){n.Qs.add(e)}));var o={collectionId:r,parent:ZP(i)};return sO(t).put(o)}return zP.resolve()},t.prototype.Ts=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[VN(e),""],!1,!0);return sO(t).Ws(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(nO(o.parent))}return n}))},t}();function sO(t){return kO.js(t,tR.store)}var aO=function(t){this.Ks=t};function uO(t,e){if(e.document)return function(t,e,n){var r=wA(t,e.name),i=gA(e.updateTime),o=new vP({mapValue:{fields:e.fields}});return new bP(r,i,o,{hasCommittedMutations:!!n})}(t.Ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ek.j(e.noDocument.path),r=pO(e.noDocument.readTime);return new wP(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ek.j(e.unknownDocument.path),o=pO(e.unknownDocument.version);return new EP(i,o)}return RN()}function cO(t,e,n){var r=lO(n),i=e.key.path.p().F();if(e instanceof bP){var o=function(t,e){return{name:bA(t,e.key),fields:e.tn().mapValue.fields,updateTime:dA(t,e.version.A())}}(t.Ks,e),s=e.hasCommittedMutations;return new KO(null,null,o,s,r,i)}if(e instanceof wP){var a=e.key.path.F(),u=fO(e.version),c=e.hasCommittedMutations;return new KO(null,new GO(a,u),null,c,r,i)}if(e instanceof EP){var l=e.key.path.F(),h=fO(e.version);return new KO(new YO(l,h),null,null,!0,r,i)}return RN()}function lO(t){var e=t.A();return[e.seconds,e.nanoseconds]}function hO(t){var e=new KN(t[0],t[1]);return $N.I(e)}function fO(t){var e=t.A();return new BO(e.seconds,e.nanoseconds)}function pO(t){var e=new KN(t.seconds,t.nanoseconds);return $N.I(e)}function dO(t,e){var n=(e.baseMutations||[]).map((function(e){return NA(t.Ks,e)})),r=e.mutations.map((function(e){return NA(t.Ks,e)})),i=KN.fromMillis(e.localWriteTimeMs);return new BP(e.batchId,i,n,r)}function yO(t){var e,n=pO(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?pO(t.lastLimboFreeSnapshotVersion):$N.min();return e=void 0!==t.query.documents?function(t){DN(1===t.documents.length);var e=t.documents[0];return TP.hn(TA(e)).We()}(t.query):function(t){var e=TA(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){DN(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[FA(e)]:void 0!==e.fieldFilter?[LA(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):RN():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new UP(DA((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u=null;n.limit&&(u=function(t){var e;return nk(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=OA(n.startAt));var l=null;return n.endAt&&(l=OA(n.endAt)),new TP(e,i,a,s,u,"F",c,l).We()}(t.query),new pk(e,t.targetId,0,t.lastListenSequenceNumber,n,r,lk.fromBase64String(t.resumeToken))}function vO(t,e){var n,r=fO(e.X),i=fO(e.lastLimboFreeSnapshotVersion);n=ck(e.target)?kA(t.Ks,e.target):AA(t.Ks,e.target);var o=e.resumeToken.toBase64();return new XO(e.targetId,ak(e.target),r,o,e.sequenceNumber,i,n)}var gO=function(){function t(t,e){this.serializer=t,this.ss=e}return t.prototype.jn=function(t,e,n){return _O(t).put(bO(e),n)},t.prototype.Gn=function(t,e){var n=_O(t),r=bO(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Gs(t,r)}))},t.prototype.zn=function(t,e){var n=this;return _O(t).get(bO(e)).next((function(t){return n.zs(t)}))},t.prototype.Hs=function(t,e){var n=this;return _O(t).get(bO(e)).next((function(t){var e=n.zs(t);return e?{Ys:e,size:wO(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Ck();return this.Js(t,e,(function(t,e){var i=n.zs(e);r=r.nt(t,i)})).next((function(){return r}))},t.prototype.Xs=function(t,e){var n=this,r=Ck(),i=new gk(ek.P);return this.Js(t,e,(function(t,e){var o=n.zs(e);o?(r=r.nt(t,o),i=i.nt(t,wO(e))):(r=r.nt(t,null),i=i.nt(t,0))})).next((function(){return{Zs:r,ti:i}}))},t.prototype.Js=function(t,e,n){if(e._())return zP.resolve();var r=IDBKeyRange.bound(e.first().path.F(),e.last().path.F()),i=e.at(),o=i.dt();return _O(t).ei({range:r},(function(t,e,r){for(var s=ek.j(t);o&&ek.P(o,s)<0;)n(o,null),o=i.dt();o&&o.isEqual(s)&&(n(o,e),o=i.wt()?i.dt():null),o?r.ni(o.path.F()):r.done()})).next((function(){for(;o;)n(o,null),o=i.wt()?i.dt():null}))},t.prototype._s=function(t,e,n){var r=this,i=Ik(),o=e.path.length+1,s={};if(n.isEqual($N.min())){var a=e.path.F();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.F(),c=lO(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=KO.collectionReadTimeIndex}return _O(t).ei(s,(function(t,n,s){if(t.length===o){var a=uO(r.serializer,n);e.path.D(a.key.path)?a instanceof bP&&xP(e,a)&&(i=i.nt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.si=function(t,e){var n=this,r=Tk(),i=lO(e),o=_O(t),s=IDBKeyRange.lowerBound(i,!0);return o.ei({index:KO.readTimeIndex,range:s},(function(t,e){var o=uO(n.serializer,e);r=r.nt(o.key,o),i=e.readTime})).next((function(){return{ii:r,readTime:hO(i)}}))},t.prototype.ri=function(t){var e=_O(t),n=$N.min();return e.ei({index:KO.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=hO(e.readTime)),r.done()})).next((function(){return n}))},t.prototype.oi=function(e){return new t.hi(this,!!e&&e.ai)},t.prototype.ui=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return mO(t).get($O.key).next((function(t){return DN(!!t),t}))},t.prototype.Gs=function(t,e){return mO(t).put($O.key,e)},t.prototype.zs=function(t){if(t){var e=uO(this.serializer,t);return e instanceof wP&&e.version.isEqual($N.min())?null:e}return null},t}();function mO(t){return kO.js(t,$O.store)}function _O(t){return kO.js(t,KO.store)}function bO(t){return t.path.F()}function wO(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw RN();e=t.noDocument}return JSON.stringify(e).length}gO.hi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ci=e,r.ai=n,r.li=new QN((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return eb(e,t),e.prototype.Jn=function(t){var e=this,n=[],r=0,i=new bk((function(t,e){return jN(t.N(),e.N())}));return this.Un.forEach((function(o,s){var a=e.li.get(o);if(s){var u=cO(e.ci.serializer,s,e.readTime);i=i.add(o.path.p());var c=wO(u);r+=c-a,n.push(e.ci.jn(t,o,u))}else if(r-=a,e.ai){var l=cO(e.ci.serializer,new wP(o,$N.min()),e.readTime);n.push(e.ci.jn(t,o,l))}else n.push(e.ci.Gn(t,o))})),i.forEach((function(r){n.push(e.ci.ss.Us(t,r))})),n.push(this.ci.updateMetadata(t,r)),zP.Bn(n)},e.prototype.Hn=function(t,e){var n=this;return this.ci.Hs(t,e).next((function(t){return null===t?(n.li.set(e,0),null):(n.li.set(e,t.size),t.Ys)}))},e.prototype.Yn=function(t,e){var n=this;return this.ci.Xs(t,e).next((function(t){var e=t.Zs;return t.ti.forEach((function(t,e){n.li.set(t,e)})),e}))},e}(HP);var EO=function(){function t(t){this._i=t}return t.prototype.next=function(){return this._i+=2,this._i},t.fi=function(){return new t(0)},t.di=function(){return new t(-1)},t}(),TO=function(){function t(t,e){this.wi=t,this.serializer=e}return t.prototype.Ti=function(t){var e=this;return this.Ei(t).next((function(n){var r=new EO(n.highestTargetId);return n.highestTargetId=r.next(),e.Ii(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.mi=function(t){return this.Ei(t).next((function(t){return $N.I(new KN(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ai=function(t){return this.Ei(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Ri=function(t,e,n){var r=this;return this.Ei(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ii(t,i)}))},t.prototype.Pi=function(t,e){var n=this;return this.Vi(t,e).next((function(){return n.Ei(t).next((function(r){return r.targetCount+=1,n.gi(e,r),n.Ii(t,r)}))}))},t.prototype.yi=function(t,e){return this.Vi(t,e)},t.prototype.pi=function(t,e){var n=this;return this.bi(t,e.targetId).next((function(){return CO(t).delete(e.targetId)})).next((function(){return n.Ei(t)})).next((function(e){return DN(e.targetCount>0),e.targetCount-=1,n.Ii(t,e)}))},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return CO(t).ei((function(s,a){var u=yO(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.pi(t,u)))})).next((function(){return zP.Bn(o)})).next((function(){return i}))},t.prototype.pe=function(t,e){return CO(t).ei((function(t,n){var r=yO(n);e(r)}))},t.prototype.Ei=function(t){return SO(t).get(ZO.key).next((function(t){return DN(null!==t),t}))},t.prototype.Ii=function(t,e){return SO(t).put(ZO.key,e)},t.prototype.Vi=function(t,e){return CO(t).put(vO(this.serializer,e))},t.prototype.gi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Si=function(t){return this.Ei(t).next((function(t){return t.targetCount}))},t.prototype.Di=function(t,e){var n=ak(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return CO(t).ei({range:r,index:XO.queryTargetsIndexName},(function(t,n,r){var o=yO(n);uk(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Ci=function(t,e,n){var r=this,i=[],o=IO(t);return e.forEach((function(e){var s=ZP(e.path);i.push(o.put(new JO(n,s))),i.push(r.wi.Fi(t,n,e))})),zP.Bn(i)},t.prototype.Ni=function(t,e,n){var r=this,i=IO(t);return zP.forEach(e,(function(e){var o=ZP(e.path);return zP.Bn([i.delete([n,o]),r.wi.$i(t,n,e)])}))},t.prototype.bi=function(t,e){var n=IO(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ki=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=IO(t),i=kk();return r.ei({range:n,xi:!0},(function(t,e,n){var r=nO(t[1]),o=new ek(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=ZP(e.path),r=IDBKeyRange.bound([n],[VN(n)],!1,!0),i=0;return IO(t).ei({index:JO.documentTargetsIndex,xi:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Me=function(t,e){return CO(t).get(e).next((function(t){return t?yO(t):null}))},t}();function CO(t){return kO.js(t,XO.store)}function SO(t){return kO.js(t,ZO.store)}function IO(t){return kO.js(t,JO.store)}var xO="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",NO=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Oi=e,r.Li=n,r}return eb(e,t),e}(GP),kO=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.bs=o,this.window=s,this.document=a,this.Bi=c,this.qi=l,this.Ui=null,this.Qi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Wi=null,this.inForeground=!1,this.ji=null,this.Ki=null,this.Gi=Number.NEGATIVE_INFINITY,this.zi=function(t){return Promise.resolve()},!t.Hi())throw new YN(GN.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.wi=new OO(this,i),this.Yi=n+t.Ji,this.serializer=new aO(u),this.Xi=new TO(this.wi,this.serializer),this.ss=new oO,this.es=new gO(this.serializer,this.ss),this.window&&this.window.localStorage?this.Zi=this.window.localStorage:(this.Zi=null,!1===l&&PN("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.js=function(t,e){if(t instanceof NO)return iR.js(t.Oi,e);throw RN()},t.prototype.start=function(){var t=this;return iR.tr(this.Yi,VO,new qO(this.serializer)).then((function(e){return t.er=e,t.nr()})).then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new YN(GN.FAILED_PRECONDITION,xO);return t.sr(),t.ir(),t.rr(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Xi.Ai(e)}))})).then((function(e){t.Ui=new $P(e,t.Bi)})).then((function(){t.Qi=!0})).catch((function(e){return t.er&&t.er.close(),Promise.reject(e)}))},t.prototype.or=function(t){var e=this;return this.zi=function(n){return rb(e,void 0,void 0,(function(){return ib(this,(function(e){return this.hr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ar=function(t){var e=this;this.er.ur((function(n){return rb(e,void 0,void 0,(function(){return ib(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.cr=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.bs.lr((function(){return rb(e,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return this.hr?[4,this.nr()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.nr=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return PO(e).put(new nR(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._r(e).next((function(e){e||(t.isPrimary=!1,t.bs.dr((function(){return t.zi(!1)})))}))})).next((function(){return t.wr(e)})).next((function(n){return t.isPrimary&&!n?t.Tr(e).next((function(){return!1})):!!n&&t.Er(e).next((function(){return!0}))}))})).catch((function(e){if(aR(e))return AN("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return AN("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.bs.dr((function(){return t.zi(e)})),t.isPrimary=e}))},t.prototype._r=function(t){var e=this;return AO(t).get(WO.key).next((function(t){return zP.resolve(e.Ir(t))}))},t.prototype.mr=function(t){return PO(t).delete(this.clientId)},t.prototype.Ar=function(){return rb(this,void 0,void 0,(function(){var e,n,r,i,o=this;return ib(this,(function(s){switch(s.label){case 0:return!this.isPrimary||this.Rr(this.Gi,18e5)?[3,2]:(this.Gi=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.js(e,nR.store);return n.Ws().next((function(t){var e=o.Pr(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return zP.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=s.sent(),this.Zi)for(n=0,r=e;n<r.length;n++)i=r[n],this.Zi.removeItem(this.Vr(i.clientId));s.label=2;case 2:return[2]}}))}))},t.prototype.rr=function(){var t=this;this.Ki=this.bs.Os("client_metadata_refresh",4e3,(function(){return t.nr().then((function(){return t.Ar()})).then((function(){return t.rr()}))}))},t.prototype.Ir=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.wr=function(t){var e=this;return this.qi?zP.resolve(!0):AO(t).get(WO.key).next((function(n){if(null!==n&&e.Rr(n.leaseTimestampMs,5e3)&&!e.gr(n.ownerId)){if(e.Ir(n)&&e.networkEnabled)return!0;if(!e.Ir(n)){if(!n.allowTabSynchronization)throw new YN(GN.FAILED_PRECONDITION,xO);return!1}}return!(!e.networkEnabled||!e.inForeground)||PO(t).Ws().next((function(t){return void 0===e.Pr(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&AN("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.yr=function(){return rb(this,void 0,void 0,(function(){var t=this;return ib(this,(function(e){switch(e.label){case 0:return this.Qi=!1,this.pr(),this.Ki&&(this.Ki.cancel(),this.Ki=null),this.br(),this.vr(),[4,this.runTransaction("shutdown","readwrite",(function(e){return t.Tr(e).next((function(){return t.mr(e)}))})).catch((function(t){AN("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)}))];case 1:return e.sent(),this.er.close(),this.Sr(),[2]}}))}))},t.prototype.Pr=function(t,e){var n=this;return t.filter((function(t){return n.Rr(t.updateTimeMs,e)&&!n.gr(t.clientId)}))},t.prototype.Dr=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return PO(e).Ws().next((function(e){return t.Pr(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return rb(this,void 0,void 0,(function(){var n;return ib(this,(function(r){switch(r.label){case 0:return t.Hi()?(n=e+t.Ji,[4,iR.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t){return DO.Fr(t,this.serializer,this.ss,this.wi)},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.kr=function(){return this.ss},t.prototype.runTransaction=function(t,e,n){var r=this;AN("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.er.runTransaction(o,rR,(function(o){return i=new NO(o,r.Ui?r.Ui.next():$P.ps),"readwrite-primary"===e?r._r(i).next((function(t){return!!t||r.wr(i)})).next((function(e){if(!e)throw PN("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.bs.dr((function(){return r.zi(!1)})),new YN(GN.FAILED_PRECONDITION,QP);return n(i)})).next((function(t){return r.Er(i).next((function(){return t}))})):r.xr(i).next((function(){return n(i)}))})).then((function(t){return i.ts(),t}))},t.prototype.xr=function(t){var e=this;return AO(t).get(WO.key).next((function(t){if(null!==t&&e.Rr(t.leaseTimestampMs,5e3)&&!e.gr(t.ownerId)&&!e.Ir(t)&&!(e.qi||e.allowTabSynchronization&&t.allowTabSynchronization))throw new YN(GN.FAILED_PRECONDITION,xO)}))},t.prototype.Er=function(t){var e=new WO(this.clientId,this.allowTabSynchronization,Date.now());return AO(t).put(WO.key,e)},t.Hi=function(){return iR.Hi()},t.Mr=function(t){var e=t.s.projectId;return t.s.i||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.Tr=function(t){var e=this,n=AO(t);return n.get(WO.key).next((function(t){return e.Ir(t)?(AN("IndexedDbPersistence","Releasing primary lease."),n.delete(WO.key)):zP.resolve()}))},t.prototype.Rr=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(PN("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.sr=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ji=function(){t.bs.lr((function(){return t.inForeground="visible"===t.document.visibilityState,t.nr()}))},this.document.addEventListener("visibilitychange",this.ji),this.inForeground="visible"===this.document.visibilityState)},t.prototype.br=function(){this.ji&&(this.document.removeEventListener("visibilitychange",this.ji),this.ji=null)},t.prototype.ir=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Wi=function(){e.pr(),e.bs.lr((function(){return e.yr()}))},this.window.addEventListener("unload",this.Wi))},t.prototype.vr=function(){this.Wi&&(this.window.removeEventListener("unload",this.Wi),this.Wi=null)},t.prototype.gr=function(t){var e;try{var n=null!==(null===(e=this.Zi)||void 0===e?void 0:e.getItem(this.Vr(t)));return AN("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return PN("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.pr=function(){if(this.Zi)try{this.Zi.setItem(this.Vr(this.clientId),String(Date.now()))}catch(t){PN("Failed to set zombie client id.",t)}},t.prototype.Sr=function(){if(this.Zi)try{this.Zi.removeItem(this.Vr(this.clientId))}catch(t){}},t.prototype.Vr=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function AO(t){return kO.js(t,WO.store)}function PO(t){return kO.js(t,nR.store)}kO.Ji="main";var OO=function(){function t(t,e){this.db=t,this.Or=new ER(this,e)}return t.prototype.Lr=function(t){var e=this.Br(t);return this.db.Nr().Si(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Br=function(t){var e=0;return this.qr(t,(function(t){e++})).next((function(){return e}))},t.prototype.pe=function(t,e){return this.db.Nr().pe(t,e)},t.prototype.qr=function(t,e){return this.Ur(t,(function(t,n){return e(n)}))},t.prototype.Fi=function(t,e,n){return RO(t,n)},t.prototype.$i=function(t,e,n){return RO(t,n)},t.prototype.vi=function(t,e,n){return this.db.Nr().vi(t,e,n)},t.prototype.Qr=function(t,e){return RO(t,e)},t.prototype.Wr=function(t,e){return function(t,e){var n=!1;return UO(t).jr((function(r){return LO(t,r,e).next((function(t){return t&&(n=!0),zP.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Kr=function(t,e){var n=this,r=this.db.$r().oi(),i=[],o=0;return this.Ur(t,(function(s,a){if(a<=e){var u=n.Wr(t,s).next((function(e){if(!e)return o++,r.zn(t,s).next((function(){return r.Gn(s),IO(t).delete([0,ZP(s.path)])}))}));i.push(u)}})).next((function(){return zP.Bn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Z(t.Li);return this.db.Nr().yi(t,n)},t.prototype.Gr=function(t,e){return RO(t,e)},t.prototype.Ur=function(t,e){var n,r=IO(t),i=$P.ps;return r.ei({index:JO.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==$P.ps&&e(new ek(nO(n)),i),i=a,n=s):i=$P.ps})).next((function(){i!==$P.ps&&e(new ek(nO(n)),i)}))},t.prototype.zr=function(t){return this.db.$r().ui(t)},t}();function RO(t,e){return IO(t).put(function(t,e){return new JO(0,ZP(t.path),e)}(e,t.Li))}var DO=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ss=n,this.wi=r,this.Hr={}}return t.Fr=function(e,n,r,i){return DN(""!==e.uid),new t(e.Yr()?e.uid:"",n,r,i)},t.prototype.Jr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return MO(t).ei({index:HO.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Xr=function(t,e,n,r){var i=this,o=jO(t),s=MO(t);return s.add({}).next((function(a){DN("number"==typeof a);for(var u=new BP(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return xA(t.Ks,e)})),i=n.mutations.map((function(e){return xA(t.Ks,e)}));return new HO(e,n.batchId,n.yn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new bk((function(t,e){return jN(t.N(),e.N())})),f=0,p=r;f<p.length;f++){var d=p[f],y=QO.key(i.userId,d.key.path,a);h=h.add(d.key.path.p()),l.push(s.put(c)),l.push(o.put(y,QO.PLACEHOLDER))}return h.forEach((function(e){l.push(i.ss.Us(t,e))})),t.Zn((function(){i.Hr[a]=u.keys()})),zP.Bn(l).next((function(){return u}))}))},t.prototype.Zr=function(t,e){var n=this;return MO(t).get(e).next((function(t){return t?(DN(t.userId===n.userId),dO(n.serializer,t)):null}))},t.prototype.to=function(t,e){var n=this;return this.Hr[e]?zP.resolve(this.Hr[e]):this.Zr(t,e).next((function(t){if(t){var r=t.keys();return n.Hr[e]=r,r}return null}))},t.prototype.eo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return MO(t).ei({index:HO.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(DN(e.batchId>=r),o=dO(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.no=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return MO(t).ei({index:HO.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.so=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return MO(t).Ws(HO.userMutationsIndex,n).next((function(t){return t.map((function(t){return dO(e.serializer,t)}))}))},t.prototype.os=function(t,e){var n=this,r=QO.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return jO(t).ei({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=nO(u);if(a===n.userId&&e.path.isEqual(l))return MO(t).get(c).next((function(t){if(!t)throw RN();DN(t.userId===n.userId),o.push(dO(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.ls=function(t,e){var n=this,r=new bk(jN),i=[];return e.forEach((function(e){var o=QO.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=jO(t).ei({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=nO(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),zP.Bn(i).next((function(){return n.io(t,r)}))},t.prototype.Es=function(t,e){var n=this,r=e.path,i=r.length+1,o=QO.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new bk(jN);return jO(t).ei({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=nO(u);s===n.userId&&r.D(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.io(t,a)}))},t.prototype.io=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(MO(t).get(e).next((function(t){if(null===t)throw RN();DN(t.userId===n.userId),r.push(dO(n.serializer,t))})))})),zP.Bn(i).next((function(){return r}))},t.prototype.ro=function(t,e){var n=this;return FO(t.Oi,this.userId,e).next((function(r){return t.Zn((function(){n.oo(e.batchId)})),zP.forEach(r,(function(e){return n.wi.Qr(t,e)}))}))},t.prototype.oo=function(t){delete this.Hr[t]},t.prototype.ho=function(t){var e=this;return this.Jr(t).next((function(n){if(!n)return zP.resolve();var r=IDBKeyRange.lowerBound(QO.prefixForUser(e.userId)),i=[];return jO(t).ei({range:r},(function(t,n,r){if(t[0]===e.userId){var o=nO(t[1]);i.push(o)}else r.done()})).next((function(){DN(0===i.length)}))}))},t.prototype.Mi=function(t,e){return LO(t,this.userId,e)},t.prototype.ao=function(t){var e=this;return UO(t).get(this.userId).next((function(t){return t||new zO(e.userId,-1,"")}))},t}();function LO(t,e,n){var r=QO.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return jO(t).ei({range:o,xi:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function FO(t,e,n){var r=t.store(HO.store),i=t.store(QO.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ei({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){DN(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=QO.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return zP.Bn(o).next((function(){return c}))}function MO(t){return kO.js(t,HO.store)}function jO(t){return kO.js(t,QO.store)}function UO(t){return kO.js(t,zO.store)}var VO=10,qO=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;DN(n<r&&n>=0&&r<=VO);var o=new uR(e);n<1&&r>=1&&(function(t){t.createObjectStore(WO.store)}(t),function(t){t.createObjectStore(zO.store,{keyPath:zO.keyPath}),t.createObjectStore(HO.store,{keyPath:HO.keyPath,autoIncrement:!0}).createIndex(HO.userMutationsIndex,HO.userMutationsKeyPath,{unique:!0}),t.createObjectStore(QO.store)}(t),eR(t),function(t){t.createObjectStore(KO.store)}(t));var s=zP.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(JO.store),t.deleteObjectStore(XO.store),t.deleteObjectStore(ZO.store)}(t),eR(t)),s=s.next((function(){return function(t){var e=t.store(ZO.store),n=new ZO(0,0,$N.min().A(),0);return e.put(ZO.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(HO.store).Ws().next((function(n){t.deleteObjectStore(HO.store),t.createObjectStore(HO.store,{keyPath:HO.keyPath,autoIncrement:!0}).createIndex(HO.userMutationsIndex,HO.userMutationsKeyPath,{unique:!0});var r=e.store(HO.store),i=n.map((function(t){return r.put(t)}));return zP.Bn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(nR.store,{keyPath:nR.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore($O.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(KO.store);e.createIndex(KO.readTimeIndex,KO.readTimeIndexPath,{unique:!1}),e.createIndex(KO.collectionReadTimeIndex,KO.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(KO.store).ei((function(t,n){e+=wO(n)})).next((function(){var n=new $O(e);return t.store($O.store).put($O.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(zO.store),r=t.store(HO.store);return n.Ws().next((function(n){return zP.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ws(HO.userMutationsIndex,i).next((function(r){return zP.forEach(r,(function(r){DN(r.userId===n.userId);var i=dO(e.serializer,r);return FO(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(JO.store),n=t.store(KO.store);return t.store(ZO.store).get(ZO.key).next((function(t){var r=[];return n.ei((function(n,i){var o=new JN(n),s=function(t){return[0,ZP(t)]}(o);r.push(e.get(s).next((function(n){return n?zP.resolve():function(n){return e.put(new JO(0,ZP(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return zP.Bn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(tR.store,{keyPath:tR.keyPath});var n=e.store(tR.store),r=new iO,i=function(t){if(r.add(t)){var e=t.S(),i=t.p();return n.put({collectionId:e,parent:ZP(i)})}};return e.store(KO.store).ei({xi:!0},(function(t,e){var n=new JN(t);return i(n.p())})).next((function(){return e.store(QO.store).ei({xi:!0},(function(t,e){t[0];var n=t[1],r=(t[2],nO(n));return i(r.p())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(XO.store);return n.ei((function(t,r){var i=yO(r),o=vO(e.serializer,i);return n.put(o)}))},t}(),BO=function(t,e){this.seconds=t,this.nanoseconds=e},WO=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};WO.store="owner",WO.key="owner";var zO=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};zO.store="mutationQueues",zO.keyPath="userId";var HO=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};HO.store="mutations",HO.keyPath="batchId",HO.userMutationsIndex="userMutationsIndex",HO.userMutationsKeyPath=["userId","batchId"];var QO=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ZP(e)]},t.key=function(t,e,n){return[t,ZP(e),n]},t}();QO.store="documentMutations",QO.PLACEHOLDER=new QO;var GO=function(t,e){this.path=t,this.readTime=e},YO=function(t,e){this.path=t,this.version=e},KO=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};KO.store="remoteDocuments",KO.readTimeIndex="readTimeIndex",KO.readTimeIndexPath="readTime",KO.collectionReadTimeIndex="collectionReadTimeIndex",KO.collectionReadTimeIndexPath=["parentPath","readTime"];var $O=function(t){this.byteSize=t};$O.store="remoteDocumentGlobal",$O.key="remoteDocumentGlobalKey";var XO=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};XO.store="targets",XO.keyPath="targetId",XO.queryTargetsIndexName="queryTargetsIndex",XO.queryTargetsKeyPath=["canonicalId","targetId"];var JO=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};JO.store="targetDocuments",JO.keyPath=["targetId","path"],JO.documentTargetsIndex="documentTargetsIndex",JO.documentTargetsKeyPath=["path","targetId"];var ZO=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ZO.key="targetGlobalKey",ZO.store="targetGlobal";var tR=function(t,e){this.collectionId=t,this.parent=e};function eR(t){t.createObjectStore(JO.store,{keyPath:JO.keyPath}).createIndex(JO.documentTargetsIndex,JO.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(XO.store,{keyPath:XO.keyPath}).createIndex(XO.queryTargetsIndexName,XO.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ZO.store)}tR.store="collectionParents",tR.keyPath=["collectionId","parent"];var nR=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};nR.store="clientMetadata",nR.keyPath="clientId";var rR=ub(ub(ub([zO.store,HO.store,QO.store,KO.store,XO.store,WO.store,ZO.store,JO.store],[nR.store]),[$O.store]),[tR.store]),iR=function(){function t(e){this.db=e,12.2===t.uo(mb())&&PN("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.tr=function(e,n,r){return AN("SimpleDb","Opening database:",e),new zP((function(i,o){var s=indexedDB.open(e,n);s.onsuccess=function(e){var n=e.target.result;i(new t(n))},s.onblocked=function(){o(new YN(GN.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new YN(GN.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},s.onupgradeneeded=function(t){AN("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,s.transaction,t.oldVersion,VO).next((function(){AN("SimpleDb","Database upgrade to version "+VO+" complete")}))}})).On()},t.delete=function(t){return AN("SimpleDb","Removing database:",t),lR(window.indexedDB.deleteDatabase(t)).On()},t.Hi=function(){if("undefined"==typeof indexedDB)return!1;if(t.co())return!0;var e=mb(),n=t.uo(e),r=0<n&&n<10,i=t.lo(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.co=function(){var t;return void 0!==K_&&"YES"===(null===(t=K_.env)||void 0===t?void 0:t._o)},t.js=function(t,e){return t.store(e)},t.uo=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.lo=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.ur=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return rb(this,void 0,void 0,(function(){var r,i,o,s,a;return ib(this,(function(u){switch(u.label){case 0:r="readonly"===t,i=0,o=function(){var t,o,a,u,c;return ib(this,(function(l){switch(l.label){case 0:++i,t=uR.open(s.db,r?"readonly":"readwrite",e),l.label=1;case 1:return l.trys.push([1,3,,4]),o=n(t).catch((function(e){return t.abort(e),zP.reject(e)})).On(),a={},o.catch((function(){})),[4,t.fo];case 2:return[2,(a.value=(l.sent(),o),a)];case 3:return u=l.sent(),c="FirebaseError"!==u.name&&i<3,AN("SimpleDb","Transaction failed with error: %s. Retrying: %s.",u.message,c),c?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},s=this,u.label=1;case 1:return[5,o()];case 2:if("object"==typeof(a=u.sent()))return[2,a.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),oR=function(){function t(t){this.do=t,this.wo=!1,this.To=null}return Object.defineProperty(t.prototype,"$n",{get:function(){return this.wo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Eo",{get:function(){return this.To},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.do=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.wo=!0},t.prototype.ni=function(t){this.To=t},t.prototype.delete=function(){return lR(this.do.delete())},t}(),sR=function(t){function e(e){var n=this;return(n=t.call(this,GN.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return eb(e,t),e}(YN);function aR(t){return"IndexedDbTransactionError"===t.name}var uR=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.Io=new XP,this.transaction.oncomplete=function(){e.Io.resolve()},this.transaction.onabort=function(){t.error?e.Io.reject(new sR(t.error)):e.Io.resolve()},this.transaction.onerror=function(t){var n=fR(t.target.error);e.Io.reject(new sR(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"fo",{get:function(){return this.Io.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Io.reject(t),this.aborted||(AN("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new cR(e)},t}(),cR=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(AN("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(AN("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),lR(n)},t.prototype.add=function(t){return AN("SimpleDb","ADD",this.store.name,t,t),lR(this.store.add(t))},t.prototype.get=function(t){var e=this;return lR(this.store.get(t)).next((function(n){return void 0===n&&(n=null),AN("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return AN("SimpleDb","DELETE",this.store.name,t),lR(this.store.delete(t))},t.prototype.count=function(){return AN("SimpleDb","COUNT",this.store.name),lR(this.store.count())},t.prototype.Ws=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.mo(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ao=function(t,e){AN("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.xi=!1;var r=this.cursor(n);return this.mo(r,(function(t,e,n){return n.delete()}))},t.prototype.ei=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.mo(r,e)},t.prototype.jr=function(t){var e=this.cursor({});return new zP((function(n,r){e.onerror=function(t){var e=fR(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.mo=function(t,e){var n=[];return new zP((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new oR(i),s=e(i.primaryKey,i.value,o);if(s instanceof zP){var a=s.catch((function(t){return o.done(),zP.reject(t)}));n.push(a)}o.$n?r():null===o.Eo?i.continue():i.continue(o.Eo)}else r()}})).next((function(){return zP.Bn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.xi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function lR(t){return new zP((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=fR(t.target.error);n(e)}}))}var hR=!1;function fR(t){var e=iR.uo(mb());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new YN("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return hR||(hR=!0,setTimeout((function(){throw r}),0)),r}}return t}function pR(){return"undefined"!=typeof window?window:null}var dR=function(){function t(t,e,n,r,i){this.Ro=t,this.vs=e,this.Po=n,this.op=r,this.Vo=i,this.yo=new XP,this.then=this.yo.promise.then.bind(this.yo.promise),this.yo.promise.catch((function(t){}))}return t.po=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.bo=setTimeout((function(){return e.vo()}),t)},t.prototype.Bs=function(){return this.vo()},t.prototype.cancel=function(t){null!==this.bo&&(this.clearTimeout(),this.yo.reject(new YN(GN.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.vo=function(){var t=this;this.Ro.lr((function(){return null!==t.bo?(t.clearTimeout(),t.op().then((function(e){return t.yo.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.bo&&(this.Vo(this),clearTimeout(this.bo),this.bo=null)},t}(),yR=function(){function t(){var t=this;this.So=Promise.resolve(),this.Do=[],this.Co=!1,this.Fo=[],this.No=null,this.$o=!1,this.ko=[],this.xo=new JP(this,"async_queue_retry"),this.Mo=function(){return t.xo.Ls()};var e=pR();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Mo)}return Object.defineProperty(t.prototype,"Oo",{get:function(){return this.Co},enumerable:!1,configurable:!0}),t.prototype.lr=function(t){this.enqueue(t)},t.prototype.Lo=function(t){this.Bo(),this.qo(t)},t.prototype.Uo=function(t){return this.Bo(),this.qo(t)},t.prototype.Qo=function(t){return rb(this,void 0,void 0,(function(){var e;return ib(this,(function(n){switch(n.label){case 0:return this.Bo(),this.Co?[3,2]:(this.Co=!0,(e=pR())&&e.removeEventListener("visibilitychange",this.Mo),[4,this.Uo(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.Bo(),this.Co?new Promise((function(t){})):this.qo(t)},t.prototype.dr=function(t){var e=this;this.Do.push(t),this.lr((function(){return e.Wo()}))},t.prototype.Wo=function(){return rb(this,void 0,void 0,(function(){var t,e=this;return ib(this,(function(n){switch(n.label){case 0:if(0===this.Do.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Do[0]()];case 2:return n.sent(),this.Do.shift(),this.xo.reset(),[3,4];case 3:if(!aR(t=n.sent()))throw t;return AN("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Do.length>0&&this.xo.xs((function(){return e.Wo()})),n.label=5;case 5:return[2]}}))}))},t.prototype.qo=function(t){var e=this,n=this.So.then((function(){return e.$o=!0,t().catch((function(t){throw e.No=t,e.$o=!1,PN("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.$o=!1,t}))}));return this.So=n,n},t.prototype.Os=function(t,e,n){var r=this;this.Bo(),this.ko.indexOf(t)>-1&&(e=0);var i=dR.po(this,t,e,n,(function(t){return r.jo(t)}));return this.Fo.push(i),i},t.prototype.Bo=function(){this.No&&RN()},t.prototype.Ko=function(){},t.prototype.Go=function(){return rb(this,void 0,void 0,(function(){var t;return ib(this,(function(e){switch(e.label){case 0:return[4,t=this.So];case 1:e.sent(),e.label=2;case 2:if(t!==this.So)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.zo=function(t){for(var e=0,n=this.Fo;e<n.length;e++)if(n[e].vs===t)return!0;return!1},t.prototype.Ho=function(t){var e=this;return this.Go().then((function(){e.Fo.sort((function(t,e){return t.Po-e.Po}));for(var n=0,r=e.Fo;n<r.length;n++){var i=r[n];if(i.Bs(),"all"!==t&&i.vs===t)break}return e.Go()}))},t.prototype.Yo=function(t){this.ko.push(t)},t.prototype.jo=function(t){var e=this.Fo.indexOf(t);this.Fo.splice(e,1)},t}();function vR(t,e){if(PN("AsyncQueue",e+": "+t),aR(t))return new YN(GN.UNAVAILABLE,e+": "+t);throw t}function gR(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=jN(n,i);return 0===s?jN(r,o):s}var mR=function(){function t(t){this.Jo=t,this.buffer=new bk(gR),this.Xo=0}return t.prototype.Zo=function(){return++this.Xo},t.prototype.th=function(t){var e=[t,this.Zo()];if(this.buffer.size<this.Jo)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();gR(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),_R={eh:!1,nh:0,sh:0,ih:0},bR=function(){function t(t,e,n){this.rh=t,this.oh=e,this.hh=n}return t.ah=function(e){return new t(e,t.uh,t.lh)},t}();bR._h=-1,bR.fh=1048576,bR.dh=41943040,bR.uh=10,bR.lh=1e3,bR.wh=new bR(bR.dh,bR.uh,bR.lh),bR.Th=new bR(bR._h,0,0);var wR=function(){function t(t,e){this.Or=t,this.Ro=e,this.Eh=!1,this.Ih=null}return t.prototype.start=function(t){this.Or.params.rh!==bR._h&&this.mh(t)},t.prototype.stop=function(){this.Ih&&(this.Ih.cancel(),this.Ih=null)},Object.defineProperty(t.prototype,"hr",{get:function(){return null!==this.Ih},enumerable:!1,configurable:!0}),t.prototype.mh=function(t){var e=this,n=this.Eh?3e5:6e4;AN("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Ih=this.Ro.Os("lru_garbage_collection",n,(function(){return rb(e,void 0,void 0,(function(){var e;return ib(this,(function(n){switch(n.label){case 0:this.Ih=null,this.Eh=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ah(this.Or)];case 2:return n.sent(),[3,7];case 3:return aR(e=n.sent())?(AN("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,SR(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.mh(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ER=function(){function t(t,e){this.Rh=t,this.params=e}return t.prototype.Ph=function(t,e){return this.Rh.Lr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Vh=function(t,e){var n=this;if(0===e)return zP.resolve($P.ps);var r=new mR(e);return this.Rh.pe(t,(function(t){return r.th(t.sequenceNumber)})).next((function(){return n.Rh.qr(t,(function(t){return r.th(t)}))})).next((function(){return r.maxValue}))},t.prototype.vi=function(t,e,n){return this.Rh.vi(t,e,n)},t.prototype.Kr=function(t,e){return this.Rh.Kr(t,e)},t.prototype.gh=function(t,e){var n=this;return this.params.rh===bR._h?(AN("LruGarbageCollector","Garbage collection skipped; disabled"),zP.resolve(_R)):this.zr(t).next((function(r){return r<n.params.rh?(AN("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.rh),_R):n.yh(t,e)}))},t.prototype.zr=function(t){return this.Rh.zr(t)},t.prototype.yh=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ph(t,this.params.oh).next((function(e){return e>c.params.hh?(AN("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.hh+" from "+e),r=c.params.hh):r=e,o=Date.now(),c.Vh(t,r)})).next((function(r){return n=r,s=Date.now(),c.vi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.Kr(t,n)})).next((function(t){return u=Date.now(),kN()<=Gb.DEBUG&&AN("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),zP.resolve({eh:!0,nh:r,sh:i,ih:t})}))},t}(),TR=function(){function t(t,e,n){this.persistence=t,this.ph=e,this.bh=new gk(jN),this.vh=new QN((function(t){return ak(t)}),uk),this.Sh=$N.min(),this.ns=t.Cr(n),this.Dh=t.$r(),this.Xi=t.Nr(),this.Ch=new YP(this.Dh,this.ns,this.persistence.kr()),this.ph.Fh(this.Ch)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Nh=function(t){return rb(this,void 0,void 0,(function(){var e,n,r,i=this;return ib(this,(function(o){switch(o.label){case 0:return e=this.ns,n=this.Ch,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var o;return i.ns.so(r).next((function(s){return o=s,e=i.persistence.Cr(t),n=new YP(i.Dh,e,i.persistence.kr()),e.so(r)})).next((function(t){for(var e=[],i=[],s=kk(),a=0,u=o;a<u.length;a++){var c=u[a];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=t;p<d.length;p++){var y=d[p];i.push(y.batchId);for(var v=0,g=y.mutations;v<g.length;v++){var m=g[v];s=s.add(m.key)}}return n.us(r,s).next((function(t){return{$h:t,kh:e,xh:i}}))}))}))];case 1:return r=o.sent(),[2,(this.ns=e,this.Ch=n,this.ph.Fh(this.Ch),r)]}}))}))},t.prototype.Mh=function(t){var e,n=this,r=KN.now(),i=t.reduce((function(t,e){return t.add(e.key)}),kk());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.Ch.us(o,i).next((function(i){e=i;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],l=oP(c,e.get(c.key));null!=l&&s.push(new cP(c.key,l,mP(l.proto.mapValue),tP.exists(!0)))}return n.ns.Xr(o,r,s,t)}))})).then((function(t){var n=t.Sn(e);return{batchId:t.batchId,Un:n}}))},t.prototype.Oh=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.Dh.oi({ai:!0});return e.Lh(n,t,i).next((function(){return i.apply(n)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.Bh=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.ns.Zr(n,t).next((function(t){return DN(null!==t),r=t.keys(),e.ns.ro(n,t)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.no=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.ns.no(e)}))},t.prototype.mi=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Xi.mi(e)}))},t.prototype.qh=function(e){var n=this,r=e.X,i=this.bh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var s=n.Dh.oi({ai:!0});i=n.bh;var a=[];e.Qt.forEach((function(e,s){var u=i.get(s);if(u){a.push(n.Xi.Ni(o,e.Xt,s).next((function(){return n.Xi.Ci(o,e.Yt,s)})));var c=e.resumeToken;if(c.H()>0){var l=u.tt(c,r).Z(o.Li);i=i.nt(s,l),t.Uh(u,l,e)&&a.push(n.Xi.yi(o,l))}}}));var u=Tk(),c=kk();if(e.jt.forEach((function(t,e){c=c.add(t)})),a.push(s.getEntries(o,c).next((function(t){e.jt.forEach((function(i,c){var l=t.get(i);c instanceof wP&&c.version.isEqual($N.min())?(s.Gn(i,r),u=u.nt(i,c)):null==l||c.version.o(l.version)>0||0===c.version.o(l.version)&&l.hasPendingWrites?(s.jn(c,r),u=u.nt(i,c)):AN("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),e.Kt.has(i)&&a.push(n.persistence.wi.Gr(o,i))}))}))),!r.isEqual($N.min())){var l=n.Xi.mi(o).next((function(t){return n.Xi.Ri(o,o.Li,r)}));a.push(l)}return zP.Bn(a).next((function(){return s.apply(o)})).next((function(){return n.Ch.cs(o,u)}))})).then((function(t){return n.bh=i,t}))},t.Uh=function(t,e,n){return DN(e.resumeToken.H()>0),0===t.resumeToken.H()||e.X.m()-t.X.m()>=this.Qh||n.Yt.size+n.Jt.size+n.Xt.size>0},t.prototype.Wh=function(t){return rb(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c=this;return ib(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return zP.forEach(t,(function(t){return zP.forEach(t.ms,(function(n){return c.persistence.wi.Fi(e,t.targetId,n)})).next((function(){return zP.forEach(t.As,(function(n){return c.persistence.wi.$i(e,t.targetId,n)}))}))}))}))];case 1:return l.sent(),[3,3];case 2:if(!aR(e=l.sent()))throw e;return AN("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=t;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(s=this.bh.get(o),a=s.X,u=s.et(a),this.bh=this.bh.nt(o,u));return[2]}}))}))},t.prototype.jh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.ns.eo(n,t)}))},t.prototype.Kh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.Ch.rs(n,t)}))},t.prototype.Gh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Xi.Di(n,t).next((function(i){return i?(r=i,zP.resolve(r)):e.Xi.Ti(n).next((function(i){return r=new pk(t,i,0,n.Li),e.Xi.Pi(n,r).next((function(){return r}))}))}))})).then((function(n){var r=e.bh.get(n.targetId);return(null===r||n.X.o(r.X)>0)&&(e.bh=e.bh.nt(n.targetId,n),e.vh.set(t,n.targetId)),n}))},t.prototype.Di=function(t,e){var n=this.vh.get(e);return void 0!==n?zP.resolve(this.bh.get(n)):this.Xi.Di(t,e)},t.prototype.zh=function(t,e){var n=this,r=this.bh.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,(function(t){return e?zP.resolve():n.persistence.wi.removeTarget(t,r)})).then((function(){n.bh=n.bh.remove(t),n.vh.delete(r.target)}))},t.prototype.Hh=function(t,e){var n=this,r=$N.min(),i=kk();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.Di(o,t.We()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Xi.ki(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.ph._s(o,t,e?r:$N.min(),e?i:kk())})).next((function(t){return{documents:t,Yh:i}}))}))},t.prototype.Lh=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=zP.resolve();return o.forEach((function(r){s=s.next((function(){return n.zn(t,r)})).next((function(t){var o=t,s=e.Cn.get(r);DN(null!==s),(!o||o.version.o(s)<0)&&(o=i.pn(r,o,e))&&n.jn(o,e.Dn)}))})),s.next((function(){return r.ns.ro(t,i)}))},t.prototype.Ah=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.gh(n,e.bh)}))},t}();TR.Qh=3e8;var CR=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.ns=e.Cr(r),i.Dh=e.$r(),i.Xi=e.Nr(),i}return eb(e,t),e.prototype.start=function(){return this.Jh()},e.prototype.Xh=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.ns.to(n,t).next((function(t){return t?e.Ch.us(n,t):zP.resolve(null)}))}))},e.prototype.Zh=function(t){this.ns.oo(t)},e.prototype.cr=function(t){this.persistence.cr(t)},e.prototype.Dr=function(){return this.persistence.Dr()},e.prototype.ta=function(t){var e=this,n=this.bh.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Xi.Me(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.si=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Dh.si(e,t.Sh)})).then((function(e){var n=e.ii,r=e.readTime;return t.Sh=r,n}))},e.prototype.Jh=function(){return rb(this,void 0,void 0,(function(){var t,e=this;return ib(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Dh.ri(t)}))];case 1:return t.Sh=n.sent(),[2]}}))}))},e}(TR);function SR(t){return rb(this,void 0,void 0,(function(){return ib(this,(function(e){if(t.code!==GN.FAILED_PRECONDITION||t.message!==QP)throw t;return AN("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var IR=function(){function t(){this.ea=new bk(xR.na),this.sa=new bk(xR.ia)}return t.prototype._=function(){return this.ea._()},t.prototype.Fi=function(t,e){var n=new xR(t,e);this.ea=this.ea.add(n),this.sa=this.sa.add(n)},t.prototype.ra=function(t,e){var n=this;t.forEach((function(t){return n.Fi(t,e)}))},t.prototype.$i=function(t,e){this.oa(new xR(t,e))},t.prototype.ha=function(t,e){var n=this;t.forEach((function(t){return n.$i(t,e)}))},t.prototype.aa=function(t){var e=this,n=new ek(new JN([])),r=new xR(n,t),i=new xR(n,t+1),o=[];return this.sa.vt([r,i],(function(t){e.oa(t),o.push(t.key)})),o},t.prototype.ua=function(){var t=this;this.ea.forEach((function(e){return t.oa(e)}))},t.prototype.oa=function(t){this.ea=this.ea.delete(t),this.sa=this.sa.delete(t)},t.prototype.ca=function(t){var e=new ek(new JN([])),n=new xR(e,t),r=new xR(e,t+1),i=kk();return this.sa.vt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new xR(t,0),n=this.ea.Dt(e);return null!==n&&t.isEqual(n.key)},t}(),xR=function(){function t(t,e){this.key=t,this.la=e}return t.na=function(t,e){return ek.P(t.key,e.key)||jN(t.la,e.la)},t.ia=function(t,e){return jN(t.la,e.la)||ek.P(t.key,e.key)},t}();function NR(t,e){if(0!==e.length)throw new YN(GN.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+QR(e.length,"argument")+".")}function kR(t,e,n){if(e.length!==n)throw new YN(GN.INVALID_ARGUMENT,"Function "+t+"() requires "+QR(n,"argument")+", but was called with "+QR(e.length,"argument")+".")}function AR(t,e,n){if(e.length<n)throw new YN(GN.INVALID_ARGUMENT,"Function "+t+"() requires at least "+QR(n,"argument")+", but was called with "+QR(e.length,"argument")+".")}function PR(t,e,n,r){if(e.length<n||e.length>r)throw new YN(GN.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+QR(e.length,"argument")+".")}function OR(t,e,n,r){jR(t,e,HR(n)+" argument",r)}function RR(t,e,n,r){void 0!==r&&OR(t,e,n,r)}function DR(t,e,n,r){jR(t,e,n+" option",r)}function LR(t,e,n,r){void 0!==r&&DR(t,e,n,r)}function FR(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(VR(u))}var c=VR(r);throw new YN(GN.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function MR(t,e,n,r){if(!e.some((function(t){return t===r})))throw new YN(GN.INVALID_ARGUMENT,"Invalid value "+VR(r)+" provided to function "+t+"() for its "+HR(n)+" argument. Acceptable values: "+e.join(", "));return r}function jR(t,e,n,r){if(!("object"===e?UR(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=VR(r);throw new YN(GN.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function UR(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function VR(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":RN()}function qR(t,e,n){if(void 0===n)throw new YN(GN.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+HR(e)+" argument, but it was undefined.")}function BR(t,e,n){zN(e,(function(e,r){if(n.indexOf(e)<0)throw new YN(GN.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function WR(t,e,n,r){var i=VR(r);return new YN(GN.INVALID_ARGUMENT,"Function "+t+"() requires its "+HR(n)+" argument to be a "+e+", but it was: "+i)}function zR(t,e,n){if(n<=0)throw new YN(GN.INVALID_ARGUMENT,"Function "+t+"() requires its "+HR(e)+" argument to be a positive number, but it was: "+n+".")}function HR(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function QR(t,e){return t+" "+e+(1===t?"":"s")}function GR(){if("undefined"==typeof Uint8Array)throw new YN(GN.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function YR(){if("undefined"==typeof atob)throw new YN(GN.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var KR=function(){function t(t){YR(),this._a=t}return t.fromBase64String=function(e){kR("Blob.fromBase64String",arguments,1),OR("Blob.fromBase64String","string",1,e),YR();try{return new t(lk.fromBase64String(e))}catch(e){throw new YN(GN.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(kR("Blob.fromUint8Array",arguments,1),GR(),!(e instanceof Uint8Array))throw WR("Blob.fromUint8Array","Uint8Array",1,e);return new t(lk.fromUint8Array(e))},t.prototype.toBase64=function(){return kR("Blob.toBase64",arguments,0),YR(),this._a.toBase64()},t.prototype.toUint8Array=function(){return kR("Blob.toUint8Array",arguments,0),GR(),this._a.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._a.isEqual(t._a)},t}(),$R=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new YN(GN.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+QR(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(OR("FieldPath","string",e,t[e]),0===t[e].length)throw new YN(GN.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.fa=new tk(t)},XR=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return eb(e,t),e.documentId=function(){return new e(tk.L().N())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw WR("isEqual","FieldPath",1,t);return this.fa.isEqual(t.fa)},e}($R),JR=new RegExp("[~\\*/\\[\\]]"),ZR=function(){this.da=this},tD=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return eb(e,t),e.prototype.Ta=function(t){if(2!==t.Ea)throw 1===t.Ea?t.Ia(this.wa+"() can only appear at the top level of your update data"):t.Ia(this.wa+"() cannot be used with set() unless you pass {merge:true}");return t.Le.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ZR);function eD(t,e,n){return new yD({Ea:3,ma:e.settings.ma,methodName:t.wa,Aa:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var nD=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return eb(e,t),e.prototype.Ta=function(t){return new JA(t.path,new WA)},e.prototype.isEqual=function(t){return t instanceof e},e}(ZR),rD=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return eb(e,t),e.prototype.Ta=function(t){var e=eD(this,t,!0),n=this.Ra.map((function(t){return wD(t,e)})),r=new zA(n);return new JA(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ZR),iD=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return eb(e,t),e.prototype.Ta=function(t){var e=eD(this,t,!0),n=this.Ra.map((function(t){return wD(t,e)})),r=new QA(n);return new JA(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ZR),oD=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Pa=n,r}return eb(e,t),e.prototype.Ta=function(t){var e=new YA(t.serializer,pA(t.serializer,this.Pa));return new JA(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ZR),sD=function(t){function e(){return t.call(this)||this}return eb(e,t),e.delete=function(){return NR("FieldValue.delete",arguments),new aD(new tD("FieldValue.delete"))},e.serverTimestamp=function(){return NR("FieldValue.serverTimestamp",arguments),new aD(new nD("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return AR("FieldValue.arrayUnion",arguments,1),new aD(new rD("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return AR("FieldValue.arrayRemove",arguments,1),new aD(new iD("FieldValue.arrayRemove",t))},e.increment=function(t){return OR("FieldValue.increment","number",1,t),kR("FieldValue.increment",arguments,1),new aD(new oD("FieldValue.increment",t))},e}(ZR),aD=function(t){function e(e){var n=this;return(n=t.call(this)||this).da=e,n.wa=e.wa,n}return eb(e,t),e.prototype.Ta=function(t){return this.da.Ta(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.da.isEqual(t.da)},e}(sD),uD=function(){function t(t,e){if(kR("GeoPoint",arguments,2),OR("GeoPoint","number",1,t),OR("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new YN(GN.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new YN(GN.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Va=t,this.ga=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Va},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.ga},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.Va===t.Va&&this.ga===t.ga},t.prototype.T=function(t){return jN(this.Va,t.Va)||jN(this.ga,t.ga)},t}();function cD(t){return new lA(t,!0)}var lD=/^__.*__$/,hD=function(t,e,n){this.ya=t,this.pa=e,this.ba=n},fD=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[];return null!==this.Le?n.push(new cP(t,this.data,this.Le,e)):n.push(new uP(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new hP(t,this.fieldTransforms)),n},t}(),pD=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[new cP(t,this.data,this.Le,e)];return this.fieldTransforms.length>0&&n.push(new hP(t,this.fieldTransforms)),n},t}();function dD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw RN()}}var yD=function(){function t(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.Le=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ea",{get:function(){return this.settings.Ea},enumerable:!1,configurable:!0}),t.prototype.Da=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Le)},t.prototype.Ca=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Fa(t),r},t.prototype.Na=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Sa(),r},t.prototype.$a=function(t){return this.Da({path:void 0,Aa:!0})},t.prototype.Ia=function(t){return xD(t,this.settings.methodName,this.settings.ka||!1,this.path,this.settings.ma)},t.prototype.contains=function(t){return void 0!==this.Le.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},t.prototype.Sa=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fa(this.path.get(t))},t.prototype.Fa=function(t){if(0===t.length)throw this.Ia("Document fields must not be empty");if(dD(this.Ea)&&lD.test(t))throw this.Ia('Document fields cannot begin and end with "__"')},t}(),vD=function(){function t(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||cD(t)}return t.prototype.xa=function(t,e,n,r){return void 0===r&&(r=!1),new yD({Ea:t,methodName:e,ma:n,path:tk.k(),Aa:!1,ka:r},this.s,this.serializer,this.ignoreUndefinedProperties)},t}();function gD(t,e,n,r,i,o){void 0===o&&(o={});var s=t.xa(o.merge||o.mergeFields?2:0,e,n,i);CD("Data must be an object, but it was:",s,r);var a,u,c=ED(r,s);if(o.merge)a=new XA(s.Le),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=f[h],d=void 0;if(p instanceof $R)d=p.fa;else{if("string"!=typeof p)throw RN();d=ID(e,p,n)}if(!s.contains(d))throw new YN(GN.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");ND(l,d)||l.push(d)}a=new XA(l),u=s.fieldTransforms.filter((function(t){return a.Ke(t.field)}))}else a=null,u=s.fieldTransforms;return new fD(new vP(c),a,u)}function mD(t,e,n,r){var i=t.xa(1,e,n);CD("Data must be an object, but it was:",i,r);var o=[],s=new gP;zN(r,(function(t,r){var a=ID(e,t,n),u=i.Na(a);if(r instanceof ZR&&r.da instanceof tD)o.push(a);else{var c=wD(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new XA(o);return new pD(s.ze(),a,i.fieldTransforms)}function _D(t,e,n,r,i,o){var s=t.xa(1,e,n),a=[SD(e,r,n)],u=[i];if(o.length%2!=0)throw new YN(GN.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(SD(e,o[c])),u.push(o[c+1]);for(var l=[],h=new gP,f=a.length-1;f>=0;--f)if(!ND(l,a[f])){var p=a[f],d=u[f],y=s.Na(p);if(d instanceof ZR&&d.da instanceof tD)l.push(p);else{var v=wD(d,y);null!=v&&(l.push(p),h.set(p,v))}}var g=new XA(l);return new pD(h.ze(),g,s.fieldTransforms)}function bD(t,e,n,r){return void 0===r&&(r=!1),wD(n,t.xa(r?4:3,e))}function wD(t,e){if(TD(t))return CD("Unsupported field value:",e,t),ED(t,e);if(t instanceof ZR)return function(t,e){if(!dD(e.Ea))throw e.Ia(t.wa+"() can only be used with update() and set()");if(!e.path)throw e.Ia(t.wa+"() is not currently supported inside arrays");var n=t.Ta(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Le.push(e.path),t instanceof Array){if(e.settings.Aa&&4!==e.Ea)throw e.Ia("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=wD(o[i],e.$a(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return pA(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=KN.fromDate(t);return{timestampValue:dA(e.serializer,n)}}if(t instanceof KN){var r=new KN(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:dA(e.serializer,r)}}if(t instanceof uD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof KR)return{bytesValue:yA(e.serializer,t)};if(t instanceof hD){var i=e.s,o=t.ya;if(!o.isEqual(i))throw e.Ia("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:mA(t.ya||e.s,t.pa.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Ia("Unsupported field value: "+VR(t))}(t,e)}function ED(t,e){var n={};return HN(t)?e.path&&e.path.length>0&&e.Le.push(e.path):zN(t,(function(t,r){var i=wD(r,e.Ca(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function TD(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof KN||t instanceof uD||t instanceof KR||t instanceof hD||t instanceof ZR)}function CD(t,e,n){if(!TD(n)||!UR(n)){var r=VR(n);throw"an object"===r?e.Ia(t+" a custom object"):e.Ia(t+" "+r)}}function SD(t,e,n){if(e instanceof $R)return e.fa;if("string"==typeof e)return ID(t,e);throw xD("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function ID(t,e,n){try{return function(t){if(t.search(JR)>=0)throw new YN(GN.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(XR.bind.apply(XR,ub([void 0],t.split("."))))}catch(e){throw new YN(GN.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).fa}catch(e){throw xD((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function xD(t,e,n,r,i){var o=r&&!r._(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new YN(GN.INVALID_ARGUMENT,(a+=". ")+t+u)}function ND(t,e){return t.some((function(t){return t.isEqual(e)}))}var kD=function(){function t(t){this.uid=t}return t.prototype.Yr=function(){return null!=this.uid},t.prototype.Ma=function(){return this.Yr()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();kD.UNAUTHENTICATED=new kD(null),kD.Oa=new kD("google-credentials-uid"),kD.La=new kD("first-party-uid");var AD=function(t,e){this.user=e,this.type="OAuth",this.Ba={},this.Ba.Authorization="Bearer "+t},PD=function(){function t(){this.qa=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Ua=function(){},t.prototype.Qa=function(t){this.qa=t,t(kD.UNAUTHENTICATED)},t.prototype.Wa=function(){this.qa=null},t}(),OD=function(){function t(t){var e=this;this.ja=null,this.currentUser=kD.UNAUTHENTICATED,this.Ka=!1,this.Ga=0,this.qa=null,this.forceRefresh=!1,this.ja=function(){e.Ga++,e.currentUser=e.za(),e.Ka=!0,e.qa&&e.qa(e.currentUser)},this.Ga=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ja):(this.ja(null),t.get().then((function(t){e.auth=t,e.ja&&e.auth.addAuthTokenListener(e.ja)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Ga,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Ga!==e?(AN("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(DN("string"==typeof n.accessToken),new AD(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Ua=function(){this.forceRefresh=!0},t.prototype.Qa=function(t){this.qa=t,this.Ka&&t(this.currentUser)},t.prototype.Wa=function(){this.auth&&this.auth.removeAuthTokenListener(this.ja),this.ja=null,this.qa=null},t.prototype.za=function(){var t=this.auth&&this.auth.getUid();return DN(null===t||"string"==typeof t),new kD(t)},t}(),RD=function(){function t(t,e){this.Ha=t,this.Ya=e,this.type="FirstParty",this.user=kD.La}return Object.defineProperty(t.prototype,"Ba",{get:function(){var t={"X-Goog-AuthUser":this.Ya},e=this.Ha.auth.Ja([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),DD=function(){function t(t,e){this.Ha=t,this.Ya=e}return t.prototype.getToken=function(){return Promise.resolve(new RD(this.Ha,this.Ya))},t.prototype.Qa=function(t){t(kD.La)},t.prototype.Wa=function(){},t.prototype.Ua=function(){},t}(),LD=function(){function t(t,e,n,r,i,o){this.bs=t,this.Xa=n,this.Za=r,this.tu=i,this.listener=o,this.state=0,this.eu=0,this.nu=null,this.stream=null,this.xo=new JP(t,e)}return t.prototype.su=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.iu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ru()},t.prototype.stop=function(){return rb(this,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return this.su()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ou=function(){this.state=0,this.xo.reset()},t.prototype.hu=function(){var t=this;this.iu()&&null===this.nu&&(this.nu=this.bs.Os(this.Xa,6e4,(function(){return t.au()})))},t.prototype.uu=function(t){this.cu(),this.stream.send(t)},t.prototype.au=function(){return rb(this,void 0,void 0,(function(){return ib(this,(function(t){return this.iu()?[2,this.close(0)]:[2]}))}))},t.prototype.cu=function(){this.nu&&(this.nu.cancel(),this.nu=null)},t.prototype.close=function(t,e){return rb(this,void 0,void 0,(function(){return ib(this,(function(n){switch(n.label){case 0:return this.cu(),this.xo.cancel(),this.eu++,3!==t?this.xo.reset():e&&e.code===GN.RESOURCE_EXHAUSTED?(PN(e.toString()),PN("Using maximum backoff delay to prevent overloading the backend."),this.xo.ks()):e&&e.code===GN.UNAUTHENTICATED&&this.tu.Ua(),null!==this.stream&&(this.lu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener._u(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.lu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.fu(this.eu),n=this.eu;this.tu.getToken().then((function(e){t.eu===n&&t.du(e)}),(function(n){e((function(){var e=new YN(GN.UNKNOWN,"Fetching auth token failed: "+n.message);return t.wu(e)}))}))},t.prototype.du=function(t){var e=this,n=this.fu(this.eu);this.stream=this.Tu(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream._u((function(t){n((function(){return e.wu(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ru=function(){var t=this;this.state=4,this.xo.xs((function(){return rb(t,void 0,void 0,(function(){return ib(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.wu=function(t){return AN("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.fu=function(t){var e=this;return function(n){e.bs.lr((function(){return e.eu===t?n():(AN("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),FD=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return eb(e,t),e.prototype.Tu=function(t){return this.Za.Iu("Listen",t)},e.prototype.onMessage=function(t){this.xo.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:RN()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Oe?(DN(void 0===e||"string"==typeof e),lk.fromBase64String(e||"")):(DN(void 0===e||e instanceof Uint8Array),lk.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?GN.UNKNOWN:vk(t.code);return new YN(e,t.message||"")}(s);n=new Uk(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=wA(t,u.document.name),l=gA(u.document.updateTime),h=new vP({mapValue:{fields:u.document.fields}}),f=new bP(c,l,h,{}),p=u.targetIds||[],d=u.removedTargetIds||[];n=new Mk(p,d,f.key,f)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var v=wA(t,y.document),g=y.readTime?gA(y.readTime):$N.min(),m=new wP(v,g),_=y.removedTargetIds||[];n=new Mk([],_,m.key,m)}else if("documentRemove"in e){e.documentRemove;var b=e.documentRemove;b.document;var w=wA(t,b.document),E=b.removedTargetIds||[];n=new Mk([],E,w,null)}else{if(!("filter"in e))return RN();e.filter;var T=e.filter;T.targetId;var C=T.count||0,S=new dk(C),I=T.targetId;n=new jk(I,S)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return $N.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?$N.min():e.readTime?gA(e.readTime):$N.min()}(t);return this.listener.mu(e,n)},e.prototype.Au=function(t){var e={};e.database=CA(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=ck(r)?{documents:kA(t,r)}:{query:AA(t,r)}).targetId=e.targetId,e.resumeToken.H()>0&&(n.resumeToken=yA(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return RN()}}(0,e.J);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.uu(e)},e.prototype.Ru=function(t){var e={};e.database=CA(this.serializer),e.removeTarget=t,this.uu(e)},e}(LD),MD=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Pu=!1,s}return eb(e,t),Object.defineProperty(e.prototype,"Vu",{get:function(){return this.Pu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Pu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.lu=function(){this.Pu&&this.gu([])},e.prototype.Tu=function(t){return this.Za.Iu("Write",t)},e.prototype.onMessage=function(t){if(DN(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Pu){this.xo.reset();var e=function(t,e){return t&&t.length>0?(DN(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?gA(t.updateTime):gA(e);n.isEqual($N.min())&&(n=gA(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new ZA(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=gA(t.commitTime);return this.listener.yu(n,e)}return DN(!t.writeResults||0===t.writeResults.length),this.Pu=!0,this.listener.pu()},e.prototype.bu=function(){var t={};t.database=CA(this.serializer),this.uu(t)},e.prototype.gu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return xA(e.serializer,t)}))};this.uu(n)},e}(LD),jD=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Za=e,i.credentials=n,i.serializer=r,i.vu=!1,i}return eb(e,t),e.prototype.Su=function(){if(this.vu)throw new YN(GN.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Du=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Du(t,e,r)})).catch((function(t){throw t.code===GN.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e.prototype.Cu=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Cu(t,e,r)})).catch((function(t){throw t.code===GN.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e}((function(){this.je=void 0})),UD=function(){function t(t){this.Fu=t,this.Nu=new Map,this.mutations=[],this.$u=!1,this.ku=null,this.xu=new Set}return t.prototype.Mu=function(t){return rb(this,void 0,void 0,(function(){var e,n=this;return ib(this,(function(r){switch(r.label){case 0:if(this.Ou(),this.mutations.length>0)throw new YN(GN.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return rb(this,void 0,void 0,(function(){var n,r,i,o,s;return ib(this,(function(a){switch(a.label){case 0:return n=LN(t),r={database:CA(n.serializer),documents:e.map((function(t){return bA(n.serializer,t)}))},[4,n.Cu("BatchGetDocuments",r)];case 1:return i=a.sent(),o=new Map,i.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){DN(!!e.found),e.found.name,e.found.updateTime;var n=wA(t,e.found.name),r=gA(e.found.updateTime),i=new vP({mapValue:{fields:e.found.fields}});return new bP(n,r,i,{})}(t,e):"missing"in e?function(t,e){DN(!!e.missing),DN(!!e.readTime);var n=wA(t,e.missing),r=gA(e.readTime);return new wP(n,r)}(t,e):RN()}(n.serializer,t);o.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=o.get(t.toString());DN(!!e),s.push(e)})),s)]}}))}))}(this.Fu,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof wP||t instanceof bP?n.Lu(t):RN()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.va(t,this.Ue(t))),this.xu.add(t)},t.prototype.update=function(t,e){try{this.write(e.va(t,this.Bu(t)))}catch(t){this.ku=t}this.xu.add(t)},t.prototype.delete=function(t){this.write([new dP(t,this.Ue(t))]),this.xu.add(t)},t.prototype.commit=function(){return rb(this,void 0,void 0,(function(){var t,e=this;return ib(this,(function(n){switch(n.label){case 0:if(this.Ou(),this.ku)throw this.ku;return t=this.Nu,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=new ek(JN.$(n));e.mutations.push(new yP(r,e.Ue(r)))})),[4,function(t,e){return rb(this,void 0,void 0,(function(){var n,r;return ib(this,(function(i){switch(i.label){case 0:return n=LN(t),r={database:CA(n.serializer),writes:e.map((function(t){return xA(n.serializer,t)}))},[4,n.Du("Commit",r)];case 1:return i.sent(),[2]}}))}))}(this.Fu,this.mutations)];case 1:return n.sent(),this.$u=!0,[2]}}))}))},t.prototype.Lu=function(t){var e;if(t instanceof bP)e=t.version;else{if(!(t instanceof wP))throw RN();e=$N.min()}var n=this.Nu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new YN(GN.ABORTED,"Document version changed between two reads.")}else this.Nu.set(t.key.toString(),e)},t.prototype.Ue=function(t){var e=this.Nu.get(t.toString());return!this.xu.has(t)&&e?tP.updateTime(e):tP.Qe()},t.prototype.Bu=function(t){var e=this.Nu.get(t.toString());if(!this.xu.has(t)&&e){if(e.isEqual($N.min()))throw new YN(GN.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tP.updateTime(e)}return tP.exists(!0)},t.prototype.write=function(t){this.Ou(),this.mutations=this.mutations.concat(t)},t.prototype.Ou=function(){},t}(),VD=function(){function t(t,e){this.Ro=t,this.qu=e,this.state="Unknown",this.Uu=0,this.Qu=null,this.Wu=!0}return t.prototype.ju=function(){var t=this;0===this.Uu&&(this.Ku("Unknown"),this.Qu=this.Ro.Os("online_state_timeout",1e4,(function(){return t.Qu=null,t.Gu("Backend didn't respond within 10 seconds."),t.Ku("Offline"),Promise.resolve()})))},t.prototype.zu=function(t){"Online"===this.state?this.Ku("Unknown"):(this.Uu++,this.Uu>=1&&(this.Hu(),this.Gu("Connection failed 1 times. Most recent error: "+t.toString()),this.Ku("Offline")))},t.prototype.set=function(t){this.Hu(),this.Uu=0,"Online"===t&&(this.Wu=!1),this.Ku(t)},t.prototype.Ku=function(t){t!==this.state&&(this.state=t,this.qu(t))},t.prototype.Gu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Wu?(PN(e),this.Wu=!1):AN("OnlineStateTracker",e)},t.prototype.Hu=function(){null!==this.Qu&&(this.Qu.cancel(),this.Qu=null)},t}(),qD=function(){function t(t,e,n,r,i){var o=this;this.Yu=t,this.Fu=e,this.Ro=n,this.Ju=[],this.Xu=new Map,this.Zu=null,this.tc=new Set,this.ec=i,this.ec.nc((function(t){n.lr((function(){return rb(o,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return this.sc()?(AN("RemoteStore","Restarting streams for network reachability change."),[4,this.ic()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.rc=new VD(n,r),this.oc=function(t,e,n){var r=LN(t);return new FD(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.hc.bind(this),_u:this.ac.bind(this),mu:this.uc.bind(this)}),this.cc=function(t,e,n){var r=LN(t);return new MD(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.lc.bind(this),_u:this._c.bind(this),pu:this.fc.bind(this),yu:this.yu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.tc.delete(0),this.dc()},t.prototype.dc=function(){return rb(this,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return this.sc()?(this.wc()?this.Tc():this.rc.set("Unknown"),[4,this.Ec()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return rb(this,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return this.tc.add(0),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Offline"),[2]}}))}))},t.prototype.Ic=function(){return rb(this,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return[4,this.cc.stop()];case 1:return t.sent(),[4,this.oc.stop()];case 2:return t.sent(),this.Ju.length>0&&(AN("RemoteStore","Stopping write stream with "+this.Ju.length+" pending writes"),this.Ju=[]),this.mc(),[2]}}))}))},t.prototype.yr=function(){return rb(this,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return AN("RemoteStore","RemoteStore shutting down."),this.tc.add(5),[4,this.Ic()];case 1:return t.sent(),this.ec.yr(),this.rc.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Xu.has(t.targetId)||(this.Xu.set(t.targetId,t),this.wc()?this.Tc():this.oc.iu()&&this.Ac(t))},t.prototype.Rc=function(t){this.Xu.delete(t),this.oc.iu()&&this.Pc(t),0===this.Xu.size&&(this.oc.iu()?this.oc.hu():this.sc()&&this.rc.set("Unknown"))},t.prototype.Me=function(t){return this.Xu.get(t)||null},t.prototype.xe=function(t){return this.Vc.xe(t)},t.prototype.Ac=function(t){this.Zu.de(t.targetId),this.oc.Au(t)},t.prototype.Pc=function(t){this.Zu.de(t),this.oc.Ru(t)},t.prototype.Tc=function(){this.Zu=new qk(this),this.oc.start(),this.rc.ju()},t.prototype.wc=function(){return this.sc()&&!this.oc.su()&&this.Xu.size>0},t.prototype.sc=function(){return 0===this.tc.size},t.prototype.mc=function(){this.Zu=null},t.prototype.hc=function(){return rb(this,void 0,void 0,(function(){var t=this;return ib(this,(function(e){return this.Xu.forEach((function(e,n){t.Ac(e)})),[2]}))}))},t.prototype.ac=function(t){return rb(this,void 0,void 0,(function(){return ib(this,(function(e){return this.mc(),this.wc()?(this.rc.zu(t),this.Tc()):this.rc.set("Unknown"),[2]}))}))},t.prototype.uc=function(t,e){return rb(this,void 0,void 0,(function(){var n,r,i;return ib(this,(function(o){switch(o.label){case 0:if(this.rc.set("Online"),!(t instanceof Uk&&2===t.state&&t.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.gc(t)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),AN("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.yc(n)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Mk?this.Zu.Pe(t):t instanceof jk?this.Zu.De(t):this.Zu.ye(t),e.isEqual($N.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,this.Yu.mi()];case 8:return r=o.sent(),e.o(r)>=0?[4,this.pc(e)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return AN("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,this.yc(i)];case 12:return o.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.yc=function(t,e){return rb(this,void 0,void 0,(function(){var n=this;return ib(this,(function(r){switch(r.label){case 0:if(!aR(t))throw t;return this.tc.add(1),[4,this.Ic()];case 1:return r.sent(),this.rc.set("Offline"),e||(e=function(){return n.Yu.mi()}),this.Ro.dr((function(){return rb(n,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return AN("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.tc.delete(1),[4,this.dc()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.bc=function(t){var e=this;return t().catch((function(n){return e.yc(n,t)}))},t.prototype.pc=function(t){var e=this,n=this.Zu.Ne(t);return n.Qt.forEach((function(n,r){if(n.resumeToken.H()>0){var i=e.Xu.get(r);i&&e.Xu.set(r,i.tt(n.resumeToken,t))}})),n.Wt.forEach((function(t){var n=e.Xu.get(t);if(n){e.Xu.set(t,n.tt(lk.Y,n.X)),e.Pc(t);var r=new pk(n.target,t,1,n.sequenceNumber);e.Ac(r)}})),this.Vc.qh(n)},t.prototype.gc=function(t){return rb(this,void 0,void 0,(function(){var e,n,r,i;return ib(this,(function(o){switch(o.label){case 0:e=t.cause,n=0,r=t.targetIds,o.label=1;case 1:return n<r.length?(i=r[n],this.Xu.has(i)?[4,this.Vc.vc(i,e)]:[3,3]):[3,5];case 2:o.sent(),this.Xu.delete(i),this.Zu.removeTarget(i),o.label=3;case 3:o.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.Ec=function(){return rb(this,void 0,void 0,(function(){var t,e,n;return ib(this,(function(r){switch(r.label){case 0:t=this.Ju.length>0?this.Ju[this.Ju.length-1].batchId:-1,r.label=1;case 1:if(!this.Sc())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,this.Yu.jh(t)];case 3:return null===(e=r.sent())?(0===this.Ju.length&&this.cc.hu(),[3,7]):(t=e.batchId,this.Dc(e),[3,6]);case 4:return n=r.sent(),[4,this.yc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.Sc=function(){return this.sc()&&this.Ju.length<10},t.prototype.Nc=function(){return this.Ju.length},t.prototype.Dc=function(t){this.Ju.push(t),this.cc.iu()&&this.cc.Vu&&this.cc.gu(t.mutations)},t.prototype.Cc=function(){return this.sc()&&!this.cc.su()&&this.Ju.length>0},t.prototype.Fc=function(){this.cc.start()},t.prototype.lc=function(){return rb(this,void 0,void 0,(function(){return ib(this,(function(t){return this.cc.bu(),[2]}))}))},t.prototype.fc=function(){return rb(this,void 0,void 0,(function(){var t,e,n;return ib(this,(function(r){for(t=0,e=this.Ju;t<e.length;t++)n=e[t],this.cc.gu(n.mutations);return[2]}))}))},t.prototype.yu=function(t,e){return rb(this,void 0,void 0,(function(){var n,r,i=this;return ib(this,(function(o){switch(o.label){case 0:return n=this.Ju.shift(),r=WP.from(n,t,e),[4,this.bc((function(){return i.Vc.$c(r)}))];case 1:return o.sent(),[4,this.Ec()];case 2:return o.sent(),[2]}}))}))},t.prototype._c=function(t){return rb(this,void 0,void 0,(function(){return ib(this,(function(e){switch(e.label){case 0:return t&&this.cc.Vu?[4,this.kc(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.kc=function(t){return rb(this,void 0,void 0,(function(){var e,n,r=this;return ib(this,(function(i){switch(i.label){case 0:return yk(n=t.code)&&n!==GN.ABORTED?(e=this.Ju.shift(),this.cc.ou(),[4,this.bc((function(){return r.Vc.xc(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.Ec()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.Mc=function(){return new UD(this.Fu)},t.prototype.ic=function(){return rb(this,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return this.tc.add(4),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Unknown"),this.tc.delete(4),[4,this.dc()];case 2:return t.sent(),[2]}}))}))},t.prototype.Oc=function(t){return rb(this,void 0,void 0,(function(){return ib(this,(function(e){switch(e.label){case 0:return this.Ro.Ko(),AN("RemoteStore","RemoteStore received new credentials"),this.tc.add(3),[4,this.Ic()];case 1:return e.sent(),this.rc.set("Unknown"),[4,this.Vc.Oc(t)];case 2:return e.sent(),this.tc.delete(3),[4,this.dc()];case 3:return e.sent(),[2]}}))}))},t.prototype.Lc=function(t){return rb(this,void 0,void 0,(function(){return ib(this,(function(e){switch(e.label){case 0:return t?(this.tc.delete(2),[4,this.dc()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.tc.add(2),[4,this.Ic()]);case 3:e.sent(),this.rc.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();function BD(t,e){return"firestore_clients_"+t+"_"+e}function WD(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Yr()&&(r+="_"+e.uid),r}function zD(t,e){return"firestore_targets_"+t+"_"+e}var HD=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Bc=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new YN(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(PN("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),QD=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Bc=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new YN(r.error.code,r.error.message)),i?new t(e,r.state,o):(PN("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),GD=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Bc=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Pk(),s=0;i&&s<r.activeTargetIds.length;++s)i=ik(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(PN("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),YD=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Bc=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(PN("SharedClientState","Failed to parse online state: "+e),null)},t}(),KD=function(){function t(){this.activeTargetIds=Pk()}return t.prototype.Uc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Qc=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.qc=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),$D=function(){function t(t,e,n,r,i){this.window=t,this.bs=e,this.persistenceKey=n,this.Wc=r,this.Vc=null,this.qu=null,this.Ps=null,this.jc=this.Kc.bind(this),this.Gc=new gk(jN),this.hr=!1,this.zc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Hc=BD(this.persistenceKey,this.Wc),this.Yc=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Gc=this.Gc.nt(this.Wc,new KD),this.Jc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Xc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Zc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.tl=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.jc)}return t.Hi=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return rb(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return ib(this,(function(f){switch(f.label){case 0:return[4,this.Vc.Dr()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Wc&&(i=this.getItem(BD(this.persistenceKey,r)))&&(o=GD.Bc(r,i))&&(this.Gc=this.Gc.nt(o.clientId,o));for(this.el(),(s=this.storage.getItem(this.tl))&&(a=this.nl(s))&&this.sl(a),u=0,c=this.zc;u<c.length;u++)l=c[u],this.Kc(l);return this.zc=[],this.window.addEventListener("unload",(function(){return h.yr()})),this.hr=!0,[2]}}))}))},t.prototype.ys=function(t){this.setItem(this.Yc,JSON.stringify(t))},t.prototype.il=function(){return this.rl(this.Gc)},t.prototype.ol=function(t){var e=!1;return this.Gc.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.hl=function(t){this.al(t,"pending")},t.prototype.ul=function(t,e,n){this.al(t,e,n),this.cl(t)},t.prototype.ll=function(t){var e="not-current";if(this.ol(t)){var n=this.storage.getItem(zD(this.persistenceKey,t));if(n){var r=QD.Bc(t,n);r&&(e=r.state)}}return this._l.Uc(t),this.el(),e},t.prototype.fl=function(t){this._l.Qc(t),this.el()},t.prototype.dl=function(t){return this._l.activeTargetIds.has(t)},t.prototype.wl=function(t){this.removeItem(zD(this.persistenceKey,t))},t.prototype.Tl=function(t,e,n){this.El(t,e,n)},t.prototype.Nh=function(t,e,n){var r=this;e.forEach((function(t){r.cl(t)})),this.currentUser=t,n.forEach((function(t){r.hl(t)}))},t.prototype.Il=function(t){this.ml(t)},t.prototype.yr=function(){this.hr&&(this.window.removeEventListener("storage",this.jc),this.removeItem(this.Hc),this.hr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return AN("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){AN("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){AN("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Kc=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(AN("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Hc)return void PN("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bs.dr((function(){return rb(e,void 0,void 0,(function(){var t,e,r,i,o,s;return ib(this,(function(a){if(this.hr){if(null!==n.key)if(this.Jc.test(n.key)){if(null==n.newValue)return t=this.Al(n.key),[2,this.Rl(t,null)];if(e=this.Pl(n.key,n.newValue))return[2,this.Rl(e.clientId,e)]}else if(this.Xc.test(n.key)){if(null!==n.newValue&&(r=this.Vl(n.key,n.newValue)))return[2,this.gl(r)]}else if(this.Zc.test(n.key)){if(null!==n.newValue&&(i=this.yl(n.key,n.newValue)))return[2,this.pl(i)]}else if(n.key===this.tl){if(null!==n.newValue&&(o=this.nl(n.newValue)))return[2,this.sl(o)]}else n.key===this.Yc&&(s=function(t){var e=$P.ps;if(null!=t)try{var n=JSON.parse(t);DN("number"==typeof n),e=n}catch(t){PN("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==$P.ps&&this.Ps(s)}else this.zc.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"_l",{get:function(){return this.Gc.get(this.Wc)},enumerable:!1,configurable:!0}),t.prototype.el=function(){this.setItem(this.Hc,this._l.qc())},t.prototype.al=function(t,e,n){var r=new HD(this.currentUser,t,e,n),i=WD(this.persistenceKey,this.currentUser,t);this.setItem(i,r.qc())},t.prototype.cl=function(t){var e=WD(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ml=function(t){var e={clientId:this.Wc,onlineState:t};this.storage.setItem(this.tl,JSON.stringify(e))},t.prototype.El=function(t,e,n){var r=zD(this.persistenceKey,t),i=new QD(t,e,n);this.setItem(r,i.qc())},t.prototype.Al=function(t){var e=this.Jc.exec(t);return e?e[1]:null},t.prototype.Pl=function(t,e){var n=this.Al(t);return GD.Bc(n,e)},t.prototype.Vl=function(t,e){var n=this.Xc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return HD.Bc(new kD(i),r,e)},t.prototype.yl=function(t,e){var n=this.Zc.exec(t),r=Number(n[1]);return QD.Bc(r,e)},t.prototype.nl=function(t){return YD.Bc(t)},t.prototype.gl=function(t){return rb(this,void 0,void 0,(function(){return ib(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Vc.bl(t.batchId,t.state,t.error)]:(AN("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.pl=function(t){return this.Vc.vl(t.targetId,t.state,t.error)},t.prototype.Rl=function(t,e){var n=this,r=e?this.Gc.nt(t,e):this.Gc.remove(t),i=this.rl(this.Gc),o=this.rl(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.Vc.Sl(s,a).then((function(){n.Gc=r}))},t.prototype.sl=function(t){this.Gc.get(t.clientId)&&this.qu(t.onlineState)},t.prototype.rl=function(t){var e=Pk();return t.forEach((function(t,n){e=e.Ct(n.activeTargetIds)})),e},t}(),XD=function(){function t(){this.Dl=new KD,this.Cl={},this.Vc=null,this.qu=null,this.Ps=null}return t.prototype.hl=function(t){},t.prototype.ul=function(t,e,n){},t.prototype.ll=function(t){return this.Dl.Uc(t),this.Cl[t]||"not-current"},t.prototype.Tl=function(t,e,n){this.Cl[t]=e},t.prototype.fl=function(t){this.Dl.Qc(t)},t.prototype.dl=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.wl=function(t){delete this.Cl[t]},t.prototype.il=function(){return this.Dl.activeTargetIds},t.prototype.ol=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.start=function(){return this.Dl=new KD,Promise.resolve()},t.prototype.Nh=function(t,e,n){},t.prototype.Il=function(t){},t.prototype.yr=function(){},t.prototype.ys=function(t){},t}(),JD=function(t){this.key=t},ZD=function(t){this.key=t},tL=function(){function t(t,e){this.query=t,this.Fl=e,this.Nl=null,this.Ht=!1,this.$l=kk(),this.Lt=kk(),this.kl=NP(t),this.xl=new Ok(this.kl)}return Object.defineProperty(t.prototype,"Ml",{get:function(){return this.Fl},enumerable:!1,configurable:!0}),t.prototype.Ol=function(t,e){var n=this,r=e?e.Ll:new Rk,i=e?e.xl:this.xl,o=e?e.Lt:this.Lt,s=i,a=!1,u=this.query.In()&&i.size===this.query.limit?i.last():null,c=this.query.mn()&&i.size===this.query.limit?i.first():null;if(t.ot((function(t,e){var l=i.get(t),h=e instanceof bP?e:null;h&&(h=xP(n.query,h)?h:null);var f=!!l&&n.Lt.has(l.key),p=!!h&&(h.Ge||n.Lt.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Bl(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.kl(h,u)>0||c&&n.kl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),this.query.In()||this.query.mn())for(;s.size>this.query.limit;){var l=this.query.In()?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{xl:s,Ll:r,ql:a,Lt:o}},t.prototype.Bl=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},t.prototype.Jn=function(t,e,n){var r=this,i=this.xl;this.xl=t.xl,this.Lt=t.Lt;var o=t.Ll.Mt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return RN()}};return n(t)-n(e)}(t.type,e.type)||r.kl(t.doc,e.doc)})),this.Ul(n);var s=e?this.Ql():[],a=0===this.$l.size&&this.Ht?1:0,u=a!==this.Nl;return this.Nl=a,0!==o.length||u?{snapshot:new Dk(this.query,t.xl,i,o,t.Lt,0===a,u,!1),Wl:s}:{Wl:s}},t.prototype.jl=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.Jn({xl:this.xl,Ll:new Rk,Lt:this.Lt,ql:!1},!1)):{Wl:[]}},t.prototype.Kl=function(t){return!this.Fl.has(t)&&!!this.xl.has(t)&&!this.xl.get(t).Ge},t.prototype.Ul=function(t){var e=this;t&&(t.Yt.forEach((function(t){return e.Fl=e.Fl.add(t)})),t.Jt.forEach((function(t){})),t.Xt.forEach((function(t){return e.Fl=e.Fl.delete(t)})),this.Ht=t.Ht)},t.prototype.Ql=function(){var t=this;if(!this.Ht)return[];var e=this.$l;this.$l=kk(),this.xl.forEach((function(e){t.Kl(e.key)&&(t.$l=t.$l.add(e.key))}));var n=[];return e.forEach((function(e){t.$l.has(e)||n.push(new ZD(e))})),this.$l.forEach((function(t){e.has(t)||n.push(new JD(t))})),n},t.prototype.Gl=function(t){this.Fl=t.Yh,this.$l=kk();var e=this.Ol(t.documents);return this.Jn(e,!0)},t.prototype.zl=function(){return Dk.Ut(this.query,this.xl,this.Lt,0===this.Nl)},t}(),eL=function(){function t(t,e,n,r){this.Ro=t,this.Fu=e,this.updateFunction=n,this.yo=r,this.Hl=5,this.xo=new JP(this.Ro,"transaction_retry")}return t.prototype.run=function(){this.Yl()},t.prototype.Yl=function(){var t=this;this.xo.xs((function(){return rb(t,void 0,void 0,(function(){var t,e,n=this;return ib(this,(function(r){return t=new UD(this.Fu),(e=this.Jl(t))&&e.then((function(e){n.Ro.lr((function(){return t.commit().then((function(){n.yo.resolve(e)})).catch((function(t){n.Xl(t)}))}))})).catch((function(t){n.Xl(t)})),[2]}))}))}))},t.prototype.Jl=function(t){try{var e=this.updateFunction(t);return!nk(e)&&e.catch&&e.then?e:(this.yo.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.yo.reject(t),null}},t.prototype.Xl=function(t){var e=this;this.Hl>0&&this.Zl(t)?(this.Hl-=1,this.Ro.lr((function(){return e.Yl(),Promise.resolve()}))):this.yo.reject(t)},t.prototype.Zl=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!yk(e)}return!1},t}(),nL=function(t,e,n){this.query=t,this.targetId=e,this.view=n},rL=function(t){this.key=t,this.t_=!1},iL=function(){function t(t,e,n,r,i,o){this.Yu=t,this.e_=e,this.Fu=n,this.n_=r,this.currentUser=i,this.s_=o,this.i_=null,this.r_=new QN((function(t){return SP(t)}),CP),this.o_=new Map,this.h_=[],this.a_=new gk(ek.P),this.u_=new Map,this.c_=new IR,this.l_={},this.__=new Map,this.f_=EO.di(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"d_",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){this.i_=t},t.prototype.listen=function(t){return rb(this,void 0,void 0,(function(){var e,n,r,i,o;return ib(this,(function(s){switch(s.label){case 0:return this.w_("listen()"),(r=this.r_.get(t))?(e=r.targetId,this.n_.ll(e),n=r.view.zl(),[3,4]):[3,1];case 1:return[4,this.Yu.Gh(t.We())];case 2:return i=s.sent(),o=this.n_.ll(i.targetId),e=i.targetId,[4,this.T_(t,e,"current"===o)];case 3:n=s.sent(),this.d_&&this.e_.listen(i),s.label=4;case 4:return[2,n]}}))}))},t.prototype.T_=function(t,e,n){return rb(this,void 0,void 0,(function(){var r,i,o,s,a,u;return ib(this,(function(c){switch(c.label){case 0:return[4,this.Yu.Hh(t,!0)];case 1:return r=c.sent(),i=new tL(t,r.Yh),o=i.Ol(r.documents),s=Fk.zt(e,n&&"Offline"!==this.onlineState),a=i.Jn(o,this.d_,s),this.E_(e,a.Wl),u=new nL(t,e,i),[2,(this.r_.set(t,u),this.o_.has(e)?this.o_.get(e).push(t):this.o_.set(e,[t]),a.snapshot)]}}))}))},t.prototype.Rc=function(t){return rb(this,void 0,void 0,(function(){var e,n,r=this;return ib(this,(function(i){switch(i.label){case 0:return this.w_("unlisten()"),e=this.r_.get(t),(n=this.o_.get(e.targetId)).length>1?[2,(this.o_.set(e.targetId,n.filter((function(e){return!CP(e,t)}))),void this.r_.delete(t))]:this.d_?(this.n_.fl(e.targetId),this.n_.ol(e.targetId)?[3,2]:[4,this.Yu.zh(e.targetId,!1).then((function(){r.n_.wl(e.targetId),r.e_.Rc(e.targetId),r.I_(e.targetId)})).catch(SR)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.I_(e.targetId),[4,this.Yu.zh(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return rb(this,void 0,void 0,(function(){var n,r,i;return ib(this,(function(o){switch(o.label){case 0:this.w_("write()"),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,this.Yu.Mh(t)];case 2:return n=o.sent(),this.n_.hl(n.batchId),this.m_(n.batchId,e),[4,this.A_(n.Un)];case 3:return o.sent(),[4,this.e_.Ec()];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),i=vR(r,"Failed to persist write"),e.reject(i),[3,6];case 6:return[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new eL(t,this.Fu,e,n).run()},t.prototype.qh=function(t){return rb(this,void 0,void 0,(function(){var e,n=this;return ib(this,(function(r){switch(r.label){case 0:this.w_("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.qh(t)];case 2:return e=r.sent(),t.Qt.forEach((function(t,e){var r=n.u_.get(e);r&&(DN(t.Yt.size+t.Jt.size+t.Xt.size<=1),t.Yt.size>0?r.t_=!0:t.Jt.size>0?DN(r.t_):t.Xt.size>0&&(DN(r.t_),r.t_=!1))})),[4,this.A_(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,SR(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.jl=function(t,e){this.w_("applyOnlineStateChange()");var n=[];this.r_.forEach((function(e,r){var i=r.view.jl(t);i.snapshot&&n.push(i.snapshot)})),this.i_.R_(t),this.i_.mu(n),this.onlineState=t},t.prototype.vc=function(t,e){return rb(this,void 0,void 0,(function(){var n,r,i,o,s,a=this;return ib(this,(function(u){switch(u.label){case 0:return this.w_("rejectListens()"),this.n_.Tl(t,"rejected",e),n=this.u_.get(t),(r=n&&n.key)?(i=(i=new gk(ek.P)).nt(r,new wP(r,$N.min())),o=kk().add(r),s=new Lk($N.min(),new Map,new bk(jN),i,o),[4,this.qh(s)]):[3,2];case 1:return u.sent(),this.a_=this.a_.remove(r),this.u_.delete(t),this.P_(),[3,4];case 2:return[4,this.Yu.zh(t,!1).then((function(){return a.I_(t,e)})).catch(SR)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))},t.prototype.$c=function(t){return rb(this,void 0,void 0,(function(){var e,n;return ib(this,(function(r){switch(r.label){case 0:this.w_("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Oh(t)];case 2:return n=r.sent(),this.V_(e,null),this.g_(e),this.n_.ul(e,"acknowledged"),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,SR(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.xc=function(t,e){return rb(this,void 0,void 0,(function(){var n;return ib(this,(function(r){switch(r.label){case 0:this.w_("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Bh(t)];case 2:return n=r.sent(),this.V_(t,e),this.g_(t),this.n_.ul(t,"rejected",e),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,SR(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.y_=function(t){return rb(this,void 0,void 0,(function(){var e,n,r,i;return ib(this,(function(o){switch(o.label){case 0:this.e_.sc()||AN("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.Yu.no()];case 2:return-1===(e=o.sent())?[2,void t.resolve()]:((n=this.__.get(e)||[]).push(t),this.__.set(e,n),[3,4]);case 3:return r=o.sent(),i=vR(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(i),[3,4];case 4:return[2]}}))}))},t.prototype.g_=function(t){(this.__.get(t)||[]).forEach((function(t){t.resolve()})),this.__.delete(t)},t.prototype.p_=function(t){this.__.forEach((function(e){e.forEach((function(e){e.reject(new YN(GN.CANCELLED,t))}))})),this.__.clear()},t.prototype.m_=function(t,e){var n=this.l_[this.currentUser.Ma()];n||(n=new gk(jN)),n=n.nt(t,e),this.l_[this.currentUser.Ma()]=n},t.prototype.V_=function(t,e){var n=this.l_[this.currentUser.Ma()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.l_[this.currentUser.Ma()]=n}},t.prototype.I_=function(t,e){var n=this;void 0===e&&(e=null),this.n_.fl(t);for(var r=0,i=this.o_.get(t);r<i.length;r++){var o=i[r];this.r_.delete(o),e&&this.i_.b_(o,e)}this.o_.delete(t),this.d_&&this.c_.aa(t).forEach((function(t){n.c_.Mi(t)||n.v_(t)}))},t.prototype.v_=function(t){var e=this.a_.get(t);null!==e&&(this.e_.Rc(e),this.a_=this.a_.remove(t),this.u_.delete(e),this.P_())},t.prototype.E_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof JD?(this.c_.Fi(i.key,t),this.S_(i)):i instanceof ZD?(AN("SyncEngine","Document no longer in limbo: "+i.key),this.c_.$i(i.key,t),this.c_.Mi(i.key)||this.v_(i.key)):RN()}},t.prototype.S_=function(t){var e=t.key;this.a_.get(e)||(AN("SyncEngine","New document in limbo: "+e),this.h_.push(e),this.P_())},t.prototype.P_=function(){for(;this.h_.length>0&&this.a_.size<this.s_;){var t=this.h_.shift(),e=this.f_.next();this.u_.set(e,new rL(t)),this.a_=this.a_.nt(t,e),this.e_.listen(new pk(TP.hn(t.path).We(),e,2,$P.ps))}},t.prototype.D_=function(){return this.a_},t.prototype.C_=function(){return this.h_},t.prototype.A_=function(t,e){return rb(this,void 0,void 0,(function(){var n,r,i,o=this;return ib(this,(function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.r_.forEach((function(s,a){i.push(Promise.resolve().then((function(){var e=a.view.Ol(t);return e.ql?o.Yu.Hh(a.query,!1).then((function(t){var n=t.documents;return a.view.Ol(n,e)})):e})).then((function(t){var i=e&&e.Qt.get(a.targetId),s=a.view.Jn(t,o.d_,i);if(o.E_(a.targetId,s.Wl),s.snapshot){o.d_&&o.n_.Tl(a.targetId,s.snapshot.fromCache?"not-current":"current"),n.push(s.snapshot);var u=KP.Rs(a.targetId,s.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return s.sent(),this.i_.mu(n),[4,this.Yu.Wh(r)];case 2:return s.sent(),[2]}}))}))},t.prototype.w_=function(t){},t.prototype.Oc=function(t){return rb(this,void 0,void 0,(function(){var e;return ib(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(AN("SyncEngine","User change. New user:",t.Ma()),[4,this.Yu.Nh(t)]);case 1:return e=n.sent(),this.currentUser=t,this.p_("'waitForPendingWrites' promise is rejected due to a user change."),this.n_.Nh(t,e.kh,e.xh),[4,this.A_(e.$h)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.e_.enableNetwork()},t.prototype.disableNetwork=function(){return this.e_.disableNetwork()},t.prototype.xe=function(t){var e=this.u_.get(t);if(e&&e.t_)return kk().add(e.key);var n=kk(),r=this.o_.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.r_.get(s);n=n.Ct(a.view.Ml)}return n},t}(),oL=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,o,s)||this).Yu=e,a.F_=void 0,a}return eb(e,t),Object.defineProperty(e.prototype,"d_",{get:function(){return!0===this.F_},enumerable:!1,configurable:!0}),e.prototype.enableNetwork=function(){return this.Yu.cr(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.Yu.cr(!1),t.prototype.disableNetwork.call(this)},e.prototype.N_=function(t){return rb(this,void 0,void 0,(function(){var e,n;return ib(this,(function(r){switch(r.label){case 0:return[4,this.Yu.Hh(t.query,!0)];case 1:return e=r.sent(),n=t.view.Gl(e),[2,(this.F_&&this.E_(t.targetId,n.Wl),n)]}}))}))},e.prototype.jl=function(e,n){this.d_&&0===n&&(t.prototype.jl.call(this,e,n),this.n_.Il(e)),this.d_||1!==n||t.prototype.jl.call(this,e,n)},e.prototype.bl=function(t,e,n){return rb(this,void 0,void 0,(function(){var r;return ib(this,(function(i){switch(i.label){case 0:return this.w_("applyBatchState()"),[4,this.Yu.Xh(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.e_.Ec()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.V_(t,n||null),this.Yu.Zh(t)):RN(),i.label=4;case 4:return[4,this.A_(r)];case 5:return i.sent(),[3,7];case 6:AN("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},e.prototype.Lc=function(t){return rb(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u=this;return ib(this,(function(c){switch(c.label){case 0:return!0!==t||!0===this.F_?[3,3]:(e=this.n_.il(),[4,this.k_(e.F(),!0)]);case 1:return n=c.sent(),this.F_=!0,[4,this.e_.Lc(!0)];case 2:for(c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.e_.listen(o);return[3,7];case 3:return!1!==t||!1===this.F_?[3,7]:(s=[],a=Promise.resolve(),this.o_.forEach((function(t,e){u.n_.dl(e)?s.push(e):a=a.then((function(){return u.I_(e),u.Yu.zh(e,!0)})),u.e_.Rc(e)})),[4,a]);case 4:return c.sent(),[4,this.k_(s,!1)];case 5:return c.sent(),this.x_(),this.F_=!1,[4,this.e_.Lc(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))},e.prototype.x_=function(){var t=this;this.u_.forEach((function(e,n){t.e_.Rc(n)})),this.c_.ua(),this.u_=new Map,this.a_=new gk(ek.P)},e.prototype.k_=function(t,e){return rb(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h,f,p;return ib(this,(function(d){switch(d.label){case 0:e=[],n=[],r=0,i=t,d.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.o_.get(o))&&0!==a.length?[4,this.Yu.Gh(a[0].We())]:[3,7]):[3,13];case 2:s=d.sent(),u=0,c=a,d.label=3;case 3:return u<c.length?(l=c[u],h=this.r_.get(l),[4,this.N_(h)]):[3,6];case 4:(f=d.sent()).snapshot&&n.push(f.snapshot),d.label=5;case 5:return u++,[3,3];case 6:return[3,11];case 7:return[4,this.Yu.ta(o)];case 8:return p=d.sent(),[4,this.Yu.Gh(p)];case 9:return s=d.sent(),[4,this.T_(this.M_(p),o,!1)];case 10:d.sent(),d.label=11;case 11:e.push(s),d.label=12;case 12:return r++,[3,1];case 13:return[2,(this.i_.mu(n),e)]}}))}))},e.prototype.M_=function(t){return new TP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype.Dr=function(){return this.Yu.Dr()},e.prototype.vl=function(t,e,n){return rb(this,void 0,void 0,(function(){var r,i;return ib(this,(function(o){switch(o.label){case 0:return this.F_?(AN("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.o_.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Yu.si()];case 3:return r=o.sent(),i=Lk.Gt(t,"current"===e),[4,this.A_(r,i)];case 4:return o.sent(),[3,8];case 5:return[4,this.Yu.zh(t,!0)];case 6:return o.sent(),this.I_(t,n),[3,8];case 7:RN(),o.label=8;case 8:return[2]}}))}))},e.prototype.Sl=function(t,e){return rb(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f=this;return ib(this,(function(p){switch(p.label){case 0:if(!this.F_)return[3,10];n=0,r=t,p.label=1;case 1:return n<r.length?(i=r[n],this.o_.has(i)?(AN("SyncEngine","Adding an already active target "+i),[3,5]):[4,this.Yu.ta(i)]):[3,6];case 2:return o=p.sent(),[4,this.Yu.Gh(o)];case 3:return s=p.sent(),[4,this.T_(this.M_(o),s.targetId,!1)];case 4:p.sent(),this.e_.listen(s),p.label=5;case 5:return n++,[3,1];case 6:a=function(t){return ib(this,(function(e){switch(e.label){case 0:return u.o_.has(t)?[4,u.Yu.zh(t,!1).then((function(){f.e_.Rc(t),f.I_(t)})).catch(SR)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},u=this,c=0,l=e,p.label=7;case 7:return c<l.length?(h=l[c],[5,a(h)]):[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},e}(iL),sL=function(){this.O_=void 0,this.listeners=[]},aL=function(){function t(t){this.Vc=t,this.L_=new QN((function(t){return SP(t)}),CP),this.onlineState="Unknown",this.B_=new Set,this.Vc.subscribe(this)}return t.prototype.listen=function(t){return rb(this,void 0,void 0,(function(){var e,n,r,i,o,s;return ib(this,(function(a){switch(a.label){case 0:if(e=t.query,n=!1,(r=this.L_.get(e))||(n=!0,r=new sL),!n)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),i=r,[4,this.Vc.listen(e)];case 2:return i.O_=a.sent(),[3,4];case 3:return o=a.sent(),s=vR(o,"Initialization of query '"+IP(t.query)+"' failed"),[2,void t.onError(s)];case 4:return this.L_.set(e,r),r.listeners.push(t),t.jl(this.onlineState),r.O_&&t.q_(r.O_)&&this.U_(),[2]}}))}))},t.prototype.Rc=function(t){return rb(this,void 0,void 0,(function(){var e,n,r,i;return ib(this,(function(o){return e=t.query,n=!1,(r=this.L_.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.L_.delete(e),this.Vc.Rc(e))]:[2]}))}))},t.prototype.mu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.L_.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].q_(i)&&(e=!0);s.O_=i}}e&&this.U_()},t.prototype.b_=function(t,e){var n=this.L_.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.L_.delete(t)},t.prototype.R_=function(t){this.onlineState=t;var e=!1;this.L_.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].jl(t)&&(e=!0)})),e&&this.U_()},t.prototype.Q_=function(t){this.B_.add(t),t.next()},t.prototype.W_=function(t){this.B_.delete(t)},t.prototype.U_=function(){this.B_.forEach((function(t){t.next()}))},t}(),uL=function(){function t(t,e,n){this.query=t,this.j_=e,this.K_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.q_=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Dk(t.query,t.docs,t.Ot,e,t.Lt,t.fromCache,t.Bt,!0)}var o=!1;return this.K_?this.z_(t)&&(this.j_.next(t),o=!0):this.H_(t,this.onlineState)&&(this.Y_(t),o=!0),this.G_=t,o},t.prototype.onError=function(t){this.j_.error(t)},t.prototype.jl=function(t){this.onlineState=t;var e=!1;return this.G_&&!this.K_&&this.H_(this.G_,t)&&(this.Y_(this.G_),e=!0),e},t.prototype.H_=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.J_&&n||t.docs._()&&"Offline"!==e)},t.prototype.z_=function(t){if(t.docChanges.length>0)return!0;var e=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Y_=function(t){t=Dk.Ut(t.query,t.docs,t.Lt,t.fromCache),this.K_=!0,this.j_.next(t)},t}(),cL=function(){function t(){}return t.prototype.Fh=function(t){this.X_=t},t.prototype._s=function(t,e,n,r){var i=this;return e.En()||n.isEqual($N.min())?this.Z_(t,e):this.X_.us(t,r).next((function(o){var s=i.tf(e,o);return(e.In()||e.mn())&&i.ql(e.nn,s,r,n)?i.Z_(t,e):(kN()<=Gb.DEBUG&&AN("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),IP(e)),i.X_._s(t,e,n).next((function(t){return s.forEach((function(e){t=t.nt(e.key,e)})),t})))}))},t.prototype.tf=function(t,e){var n=new bk(NP(t));return e.forEach((function(e,r){r instanceof bP&&xP(t,r)&&(n=n.add(r))})),n},t.prototype.ql=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.o(r)>0)},t.prototype.Z_=function(t,e){return kN()<=Gb.DEBUG&&AN("IndexFreeQueryEngine","Using full collection scan to execute query:",IP(e)),this.X_._s(t,e,$N.min())},t}(),lL=function(){function t(t,e){this.ss=t,this.wi=e,this.ns=[],this.ef=1,this.nf=new bk(xR.na)}return t.prototype.Jr=function(t){return zP.resolve(0===this.ns.length)},t.prototype.Xr=function(t,e,n,r){var i=this.ef;this.ef++,this.ns.length>0&&this.ns[this.ns.length-1];var o=new BP(i,e,n,r);this.ns.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.nf=this.nf.add(new xR(u.key,i)),this.ss.Us(t,u.key.path.p())}return zP.resolve(o)},t.prototype.Zr=function(t,e){return zP.resolve(this.sf(e))},t.prototype.eo=function(t,e){var n=e+1,r=this.if(n),i=r<0?0:r;return zP.resolve(this.ns.length>i?this.ns[i]:null)},t.prototype.no=function(){return zP.resolve(0===this.ns.length?-1:this.ef-1)},t.prototype.so=function(t){return zP.resolve(this.ns.slice())},t.prototype.os=function(t,e){var n=this,r=new xR(e,0),i=new xR(e,Number.POSITIVE_INFINITY),o=[];return this.nf.vt([r,i],(function(t){var e=n.sf(t.la);o.push(e)})),zP.resolve(o)},t.prototype.ls=function(t,e){var n=this,r=new bk(jN);return e.forEach((function(t){var e=new xR(t,0),i=new xR(t,Number.POSITIVE_INFINITY);n.nf.vt([e,i],(function(t){r=r.add(t.la)}))})),zP.resolve(this.rf(r))},t.prototype.Es=function(t,e){var n=e.path,r=n.length+1,i=n;ek.W(i)||(i=i.child(""));var o=new xR(new ek(i),0),s=new bk(jN);return this.nf.St((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.la)),!0)}),o),zP.resolve(this.rf(s))},t.prototype.rf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.sf(t);null!==r&&n.push(r)})),n},t.prototype.ro=function(t,e){var n=this;DN(0===this.hf(e.batchId,"removed")),this.ns.shift();var r=this.nf;return zP.forEach(e.mutations,(function(i){var o=new xR(i.key,e.batchId);return r=r.delete(o),n.wi.Qr(t,i.key)})).next((function(){n.nf=r}))},t.prototype.oo=function(t){},t.prototype.Mi=function(t,e){var n=new xR(e,0),r=this.nf.Dt(n);return zP.resolve(e.isEqual(r&&r.key))},t.prototype.ho=function(t){return this.ns.length,zP.resolve()},t.prototype.hf=function(t,e){return this.if(t)},t.prototype.if=function(t){return 0===this.ns.length?0:t-this.ns[0].batchId},t.prototype.sf=function(t){var e=this.if(t);return e<0||e>=this.ns.length?null:this.ns[e]},t}(),hL=function(){function t(t,e){this.ss=t,this.af=e,this.docs=new gk(ek.P),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.af(e);return this.docs=this.docs.nt(r,{Ys:e,size:s,readTime:n}),this.size+=s-o,this.ss.Us(t,r.path.p())},t.prototype.Gn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.zn=function(t,e){var n=this.docs.get(e);return zP.resolve(n?n.Ys:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ck();return e.forEach((function(t){var e=n.docs.get(t);r=r.nt(t,e?e.Ys:null)})),zP.resolve(r)},t.prototype._s=function(t,e,n){for(var r=Ik(),i=new ek(e.path.child("")),o=this.docs.ut(i);o.wt();){var s=o.dt(),a=s.key,u=s.value,c=u.Ys,l=u.readTime;if(!e.path.D(a.path))break;l.o(n)<=0||c instanceof bP&&xP(e,c)&&(r=r.nt(c.key,c))}return zP.resolve(r)},t.prototype.uf=function(t,e){return zP.forEach(this.docs,(function(t){return e(t)}))},t.prototype.oi=function(e){return new t.hi(this)},t.prototype.ui=function(t){return zP.resolve(this.size)},t}();hL.hi=function(t){function e(e){var n=this;return(n=t.call(this)||this).ci=e,n}return eb(e,t),e.prototype.Jn=function(t){var e=this,n=[];return this.Un.forEach((function(r,i){i?n.push(e.ci.jn(t,i,e.readTime)):e.ci.Gn(r)})),zP.Bn(n)},e.prototype.Hn=function(t,e){return this.ci.zn(t,e)},e.prototype.Yn=function(t,e){return this.ci.getEntries(t,e)},e}(HP);var fL=function(){function t(t){this.persistence=t,this.cf=new QN((function(t){return ak(t)}),uk),this.lastRemoteSnapshotVersion=$N.min(),this.highestTargetId=0,this.lf=0,this._f=new IR,this.targetCount=0,this.ff=EO.fi()}return t.prototype.pe=function(t,e){return this.cf.forEach((function(t,n){return e(n)})),zP.resolve()},t.prototype.mi=function(t){return zP.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ai=function(t){return zP.resolve(this.lf)},t.prototype.Ti=function(t){return this.highestTargetId=this.ff.next(),zP.resolve(this.highestTargetId)},t.prototype.Ri=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.lf&&(this.lf=e),zP.resolve()},t.prototype.Vi=function(t){this.cf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ff=new EO(e),this.highestTargetId=e),t.sequenceNumber>this.lf&&(this.lf=t.sequenceNumber)},t.prototype.Pi=function(t,e){return this.Vi(e),this.targetCount+=1,zP.resolve()},t.prototype.yi=function(t,e){return this.Vi(e),zP.resolve()},t.prototype.pi=function(t,e){return this.cf.delete(e.target),this._f.aa(e.targetId),this.targetCount-=1,zP.resolve()},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return this.cf.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.cf.delete(s),o.push(r.bi(t,a.targetId)),i++)})),zP.Bn(o).next((function(){return i}))},t.prototype.Si=function(t){return zP.resolve(this.targetCount)},t.prototype.Di=function(t,e){var n=this.cf.get(e)||null;return zP.resolve(n)},t.prototype.Ci=function(t,e,n){return this._f.ra(e,n),zP.resolve()},t.prototype.Ni=function(t,e,n){this._f.ha(e,n);var r=this.persistence.wi,i=[];return r&&e.forEach((function(e){i.push(r.Qr(t,e))})),zP.Bn(i)},t.prototype.bi=function(t,e){return this._f.aa(e),zP.resolve()},t.prototype.ki=function(t,e){var n=this._f.ca(e);return zP.resolve(n)},t.prototype.Mi=function(t,e){return zP.resolve(this._f.Mi(e))},t}(),pL=function(){function t(t){var e=this;this.df={},this.Ui=new $P(0),this.Qi=!1,this.Qi=!0,this.wi=t(this),this.Xi=new fL(this),this.ss=new rO,this.es=new hL(this.ss,(function(t){return e.wi.wf(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.yr=function(){return this.Qi=!1,Promise.resolve()},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.ar=function(){},t.prototype.kr=function(){return this.ss},t.prototype.Cr=function(t){var e=this.df[t.Ma()];return e||(e=new lL(this.ss,this.wi),this.df[t.Ma()]=e),e},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.runTransaction=function(t,e,n){var r=this;AN("MemoryPersistence","Starting transaction:",t);var i=new dL(this.Ui.next());return this.wi.Tf(),n(i).next((function(t){return r.wi.Ef(i).next((function(){return t}))})).On().then((function(t){return i.ts(),t}))},t.prototype.If=function(t,e){return zP.qn(Object.values(this.df).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),dL=function(t){function e(e){var n=this;return(n=t.call(this)||this).Li=e,n}return eb(e,t),e}(GP),yL=function(){function t(t){this.persistence=t,this.mf=new IR,this.Af=null}return t.Rf=function(e){return new t(e)},Object.defineProperty(t.prototype,"Pf",{get:function(){if(this.Af)return this.Af;throw RN()},enumerable:!1,configurable:!0}),t.prototype.Fi=function(t,e,n){return this.mf.Fi(n,e),this.Pf.delete(n),zP.resolve()},t.prototype.$i=function(t,e,n){return this.mf.$i(n,e),this.Pf.add(n),zP.resolve()},t.prototype.Qr=function(t,e){return this.Pf.add(e),zP.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.mf.aa(e.targetId).forEach((function(t){return n.Pf.add(t)}));var r=this.persistence.Nr();return r.ki(t,e.targetId).next((function(t){t.forEach((function(t){return n.Pf.add(t)}))})).next((function(){return r.pi(t,e)}))},t.prototype.Tf=function(){this.Af=new Set},t.prototype.Ef=function(t){var e=this,n=this.persistence.$r().oi();return zP.forEach(this.Pf,(function(r){return e.Vf(t,r).next((function(t){t||n.Gn(r)}))})).next((function(){return e.Af=null,n.apply(t)}))},t.prototype.Gr=function(t,e){var n=this;return this.Vf(t,e).next((function(t){t?n.Pf.delete(e):n.Pf.add(e)}))},t.prototype.wf=function(t){return 0},t.prototype.Vf=function(t,e){var n=this;return zP.qn([function(){return zP.resolve(n.mf.Mi(e))},function(){return n.persistence.Nr().Mi(t,e)},function(){return n.persistence.If(t,e)}])},t}(),vL=function(){function t(t){this.gf=t.gf,this.yf=t.yf}return t.prototype.Eu=function(t){this.pf=t},t.prototype._u=function(t){this.bf=t},t.prototype.onMessage=function(t){this.vf=t},t.prototype.close=function(){this.yf()},t.prototype.send=function(t){this.gf(t)},t.prototype.Sf=function(){this.pf()},t.prototype.Df=function(t){this.bf(t)},t.prototype.Cf=function(t){this.vf(t)},t}(),gL={BatchGetDocuments:"batchGet",Commit:"commit"},mL="gl-js/ fire/"+xN,_L=function(){function t(t){this.s=t.s;var e=t.ssl?"https":"http";this.Ff=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Nf=function(t,e){if(e)for(var n in e.Ba)e.Ba.hasOwnProperty(n)&&(t[n]=e.Ba[n]);t["X-Goog-Api-Client"]=mL},t.prototype.Du=function(t,e,n){var r=this,i=this.$f(t);return new Promise((function(o,s){var a=new IN;a.listenOnce(CN.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case TN.NO_ERROR:var e=a.getResponseJson();AN("Connection","XHR received:",JSON.stringify(e)),o(e);break;case TN.TIMEOUT:AN("Connection",'RPC "'+t+'" timed out'),s(new YN(GN.DEADLINE_EXCEEDED,"Request time out"));break;case TN.HTTP_ERROR:var n=a.getStatus();if(AN("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(GN).indexOf(e)>=0?e:GN.UNKNOWN}(r.status);s(new YN(i,r.message))}else s(new YN(GN.UNKNOWN,"Server responded with status "+a.getStatus()))}else AN("Connection",'RPC "'+t+'" failed'),s(new YN(GN.UNAVAILABLE,"Connection failed."));break;default:RN()}}finally{AN("Connection",'RPC "'+t+'" completed.')}}));var u=Object.assign({},e);delete u.database;var c=JSON.stringify(u);AN("Connection","XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.Nf(l,n),a.send(i,"POST",c,l,15)}))},t.prototype.Cu=function(t,e,n){return this.Du(t,e,n)},t.prototype.Iu=function(t,e){var n,r,i=[this.Ff,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=EN(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Nf(s.initMessageHeaders,e),_b()||bb()||mb().indexOf("Electron/")>=0||(r=mb()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0||mb().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");AN("Connection","Creating WebChannel: "+a+" "+s);var u=o.createWebChannel(a,s),c=!1,l=!1,h=new vL({gf:function(t){l?AN("Connection","Not sending because WebChannel is closed:",t):(c||(AN("Connection","Opening WebChannel transport."),u.open(),c=!0),AN("Connection","WebChannel sending:",t),u.send(t))},yf:function(){return u.close()}}),f=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(SN.EventType.OPEN,(function(){l||AN("Connection","WebChannel transport opened.")})),f(SN.EventType.CLOSE,(function(){l||(l=!0,AN("Connection","WebChannel transport closed"),h.Df())})),f(SN.EventType.ERROR,(function(t){l||(l=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(NN.logLevel<=Gb.WARN){var r=e.map(ON);NN.warn.apply(NN,ub(["Firestore ("+xN+"): "+t],r))}}("Connection","WebChannel transport errored:",t),h.Df(new YN(GN.UNAVAILABLE,"The operation could not be completed")))})),f(SN.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];DN(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){AN("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=hk[t];if(void 0!==e)return vk(e)}(o),a=i.message;void 0===s&&(s=GN.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),l=!0,h.Df(new YN(s,a)),u.close()}else AN("Connection","WebChannel received:",n),h.Cf(n)}})),setTimeout((function(){h.Sf()}),0),h},t.prototype.$f=function(t){var e=gL[t];return this.Ff+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},t}(),bL=function(){function t(){var t=this;this.kf=function(){return t.xf()},this.Mf=function(){return t.Of()},this.Lf=[],this.Bf()}return t.prototype.nc=function(t){this.Lf.push(t)},t.prototype.yr=function(){window.removeEventListener("online",this.kf),window.removeEventListener("offline",this.Mf)},t.prototype.Bf=function(){window.addEventListener("online",this.kf),window.addEventListener("offline",this.Mf)},t.prototype.xf=function(){AN("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(0)},t.prototype.Of=function(){AN("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(1)},t.Hi=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),wL=function(){function t(){}return t.prototype.nc=function(t){},t.prototype.yr=function(){},t}(),EL="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",TL=function(){function t(){}return t.prototype.initialize=function(t){return rb(this,void 0,void 0,(function(){var e=this;return ib(this,(function(n){switch(n.label){case 0:return this.n_=this.qf(t),this.persistence=this.Uf(t),[4,this.persistence.start()];case 1:return n.sent(),this.Qf=this.Wf(t),this.Yu=this.jf(t),this.e_=this.Kf(t),this.Vc=this.Gf(t),this.zf=this.Hf(t),this.n_.qu=function(t){return e.Vc.jl(t,1)},this.e_.Vc=this.Vc,[4,this.Yu.start()];case 2:return n.sent(),[4,this.n_.start()];case 3:return n.sent(),[4,this.e_.start()];case 4:return n.sent(),[4,this.e_.Lc(this.Vc.d_)];case 5:return n.sent(),[2]}}))}))},t.prototype.Hf=function(t){return new aL(this.Vc)},t.prototype.Wf=function(t){return null},t.prototype.jf=function(t){return e=this.persistence,n=new cL,r=t.Yf,new TR(e,n,r);var e,n,r},t.prototype.Uf=function(t){if(t.Xf.Jf)throw new YN(GN.FAILED_PRECONDITION,EL);return new pL(yL.Rf)},t.prototype.Kf=function(t){var e=this;return new qD(this.Yu,t.Fu,t.Ro,(function(t){return e.Vc.jl(t,0)}),bL.Hi()?new bL:new wL)},t.prototype.qf=function(t){return new XD},t.prototype.Gf=function(t){return e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,s=t.s_,new iL(e,n,r,i,o,s);var e,n,r,i,o,s},t.prototype.clearPersistence=function(t){throw new YN(GN.FAILED_PRECONDITION,EL)},t}(),CL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eb(e,t),e.prototype.initialize=function(e){return rb(this,void 0,void 0,(function(){var n=this;return ib(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.or((function(t){return rb(n,void 0,void 0,(function(){return ib(this,(function(e){switch(e.label){case 0:return[4,this.Vc.Lc(t)];case 1:return e.sent(),this.Qf&&(t&&!this.Qf.hr?this.Qf.start(this.Yu):t||this.Qf.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.jf=function(t){return e=this.persistence,n=new cL,r=t.Yf,new CR(e,n,r);var e,n,r},e.prototype.Gf=function(t){var e,n,r,i,o,s,a=(e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,s=t.s_,new oL(e,n,r,i,o,s));return this.n_ instanceof $D&&(this.n_.Vc=a),a},e.prototype.Wf=function(t){var e=this.persistence.wi.Or;return new wR(e,t.Ro)},e.prototype.Uf=function(t){var e=kO.Mr(t.Zf),n=cD(t.Zf.s);return new kO(t.Xf.synchronizeTabs,e,t.clientId,bR.ah(t.Xf.cacheSizeBytes),t.Ro,pR(),"undefined"!=typeof document?document:null,n,this.n_,t.Xf.qi)},e.prototype.qf=function(t){if(t.Xf.Jf&&t.Xf.synchronizeTabs){var e=pR();if(!$D.Hi(e))throw new YN(GN.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=kO.Mr(t.Zf);return new $D(e,t.Ro,n,t.clientId,t.Yf)}return new XD},e.prototype.clearPersistence=function(t){var e=kO.Mr(t);return kO.clearPersistence(e)},e}(TL),SL=function(){function t(t,e){this.credentials=t,this.Ro=e,this.clientId=MN.t()}return t.prototype.start=function(t,e,n){var r=this;this.Su(),this.Zf=t;var i=new XP,o=new XP,s=!1;return this.credentials.Qa((function(t){if(!s)return s=!0,AN("FirestoreClient","Initializing. user=",t.uid),r.td(e,n,t,o).then(i.resolve,i.reject);r.Ro.dr((function(){return r.e_.Oc(t)}))})),this.Ro.lr((function(){return i.promise})),o.promise},t.prototype.enableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.enableNetwork()}))},t.prototype.td=function(t,e,n,r){return rb(this,void 0,void 0,(function(){var i,o,s,a,u,c=this;return ib(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,(u=this.Zf,Promise.resolve(new _L(u)))];case 1:return i=l.sent(),o=cD(this.Zf.s),s=function(t,e,n){return new jD(t,e,n)}(i,this.credentials,o),[4,t.initialize({Ro:this.Ro,Zf:this.Zf,Fu:s,clientId:this.clientId,Yf:n,s_:100,Xf:e})];case 2:return l.sent(),this.persistence=t.persistence,this.n_=t.n_,this.Yu=t.Yu,this.e_=t.e_,this.Vc=t.Vc,this.Qf=t.Qf,this.ed=t.zf,this.persistence.ar((function(){return rb(c,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(a=l.sent(),r.reject(a),!this.nd(a))throw a;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),this.td(new TL,{Jf:!1},n,r))];case 4:return[2]}}))}))},t.prototype.nd=function(t){return"FirebaseError"===t.name?t.code===GN.FAILED_PRECONDITION||t.code===GN.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Su=function(){if(this.Ro.Oo)throw new YN(GN.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Ro.Qo((function(){return rb(t,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return this.Qf&&this.Qf.stop(),[4,this.e_.yr()];case 1:return t.sent(),[4,this.n_.yr()];case 2:return t.sent(),[4,this.persistence.yr()];case 3:return t.sent(),this.credentials.Wa(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Su();var e=new XP;return this.Ro.lr((function(){return t.Vc.y_(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Su();var i=new uL(t,e,n);return this.Ro.lr((function(){return r.ed.listen(i)})),i},t.prototype.Rc=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.Rc(t)}))},t.prototype.rd=function(t){return rb(this,void 0,void 0,(function(){var e,n=this;return ib(this,(function(r){switch(r.label){case 0:return this.Su(),e=new XP,[4,this.Ro.enqueue((function(){return rb(n,void 0,void 0,(function(){var n,r,i;return ib(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.Yu.Kh(t)];case 1:return(n=o.sent())instanceof bP?e.resolve(n):n instanceof wP?e.resolve(null):e.reject(new YN(GN.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=vR(r,"Failed to get document '"+t+" from cache"),e.reject(i),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.od=function(t){return rb(this,void 0,void 0,(function(){var e,n=this;return ib(this,(function(r){switch(r.label){case 0:return this.Su(),e=new XP,[4,this.Ro.enqueue((function(){return rb(n,void 0,void 0,(function(){var n,r,i,o,s,a;return ib(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.Yu.Hh(t,!0)];case 1:return n=u.sent(),r=new tL(t,n.Yh),i=r.Ol(n.documents),o=r.Jn(i,!1),e.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=vR(s,"Failed to execute query '"+t+" against cache"),e.reject(a),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.Su();var n=new XP;return this.Ro.lr((function(){return e.Vc.write(t,n)})),n.promise},t.prototype.s=function(){return this.Zf.s},t.prototype.Q_=function(t){var e=this;this.Su(),this.Ro.lr((function(){return e.ed.Q_(t),Promise.resolve()}))},t.prototype.W_=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.W_(t),Promise.resolve()}))},Object.defineProperty(t.prototype,"sd",{get:function(){return this.Ro.Oo},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Su();var n=new XP;return this.Ro.lr((function(){return e.Vc.runTransaction(e.Ro,t,n),Promise.resolve()})),n.promise},t}(),IL=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.hd(this.observer.next,t)},t.prototype.error=function(t){this.hd(this.observer.error,t)},t.prototype.ad=function(){this.muted=!0},t.prototype.hd=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function xL(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var NL=function(){function t(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.ud=n,this.ld=r}return t.prototype._d=function(t){switch(Gk(t)){case 0:return null;case 1:return t.booleanValue;case 2:return tA(t.integerValue||t.doubleValue);case 3:return this.fd(t.timestampValue);case 4:return this.dd(t);case 5:return t.stringValue;case 6:return new KR(eA(t.bytesValue));case 7:return this.wd(t.referenceValue);case 8:return this.Td(t.geoPointValue);case 9:return this.Ed(t.arrayValue);case 10:return this.Id(t.mapValue);default:throw RN()}},t.prototype.Id=function(t){var e=this,n={};return zN(t.fields||{},(function(t,r){n[t]=e._d(r)})),n},t.prototype.Td=function(t){return new uD(tA(t.latitude),tA(t.longitude))},t.prototype.Ed=function(t){var e=this;return(t.values||[]).map((function(t){return e._d(t)}))},t.prototype.dd=function(t){switch(this.ud){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return zk(n)?t(n):n}(t);return null==e?null:this._d(e);case"estimate":return this.fd(Hk(t));default:return null}},t.prototype.fd=function(t){var e=Zk(t),n=new KN(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.wd=function(t){var e=JN.$(t);DN(jA(e));var n=new BN(e.get(1),e.get(3)),r=new ek(e.g(5));return n.isEqual(this.s)||PN("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.ld(r)},t}(),kL=bR._h,AL=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new YN(GN.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else DR("settings","non-empty string","host",t.host),this.host=t.host,LR("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(BR("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),LR("settings","object","credentials",t.credentials),this.credentials=t.credentials,LR("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),LR("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?PN("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&PN("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,LR("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=bR.dh;else{if(t.cacheSizeBytes!==kL&&t.cacheSizeBytes<bR.fh)throw new YN(GN.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+bR.fh);this.cacheSizeBytes=t.cacheSizeBytes}LR("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),PL=function(){function t(e,n,r){var i=this;if(void 0===r&&(r=new TL),this.md=null,this.Ad=new yR,this.INTERNAL={delete:function(){return rb(i,void 0,void 0,(function(){return ib(this,(function(t){switch(t.label){case 0:return this.Rd(),[4,this.Pd.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.md=o,this.ya=t.Vd(o),this.gd=o.name,this.yd=new OD(n)}else{var s=e;if(!s.projectId)throw new YN(GN.INVALID_ARGUMENT,"Must provide projectId");this.ya=new BN(s.projectId,s.database),this.gd="[DEFAULT]",this.yd=new PD}this.pd=r,this.bd=new AL({})}return Object.defineProperty(t.prototype,"vd",{get:function(){return this.Sd||(this.Sd=new vD(this.ya,this.bd.ignoreUndefinedProperties)),this.Sd},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){kR("Firestore.settings",arguments,1),OR("Firestore.settings","object",1,t);var e=new AL(t);if(this.Pd&&!this.bd.isEqual(e))throw new YN(GN.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.bd=e,void 0!==e.credentials&&(this.yd=function(t){if(!t)return new PD;switch(t.type){case"gapi":var e=t.Dd;return DN(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new DD(e,t.Ya||"0");case"provider":return t.Dd;default:throw new YN(GN.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.Rd(),this.Pd.enableNetwork()},t.prototype.disableNetwork=function(){return this.Rd(),this.Pd.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.Pd)throw new YN(GN.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&PN("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new YN(GN.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Cd(this.pd,{Jf:!0,cacheSizeBytes:this.bd.cacheSizeBytes,synchronizeTabs:r,qi:i})},t.prototype.clearPersistence=function(){return rb(this,void 0,void 0,(function(){var t,e=this;return ib(this,(function(n){if(void 0!==this.Pd&&!this.Pd.sd)throw new YN(GN.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new XP,[2,(this.Ad.Lo((function(){return rb(e,void 0,void 0,(function(){var e,n;return ib(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.Fd(),[4,this.pd.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Nd",{get:function(){return this.Rd(),this.Pd.sd},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Rd(),this.Pd.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Rd(),xL(t))return OL(this.Pd,t);OR("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return OL(this.Pd,e)},t.prototype.Rd=function(){return this.Pd||this.Cd(new TL,{Jf:!1}),this.Pd},t.prototype.Fd=function(){return new qN(this.ya,this.gd,this.bd.host,this.bd.ssl,this.bd.forceLongPolling)},t.prototype.Cd=function(t,e){var n=this.Fd();return this.Pd=new SL(this.yd,this.Ad),this.Pd.start(n,t,e)},t.Vd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new YN(GN.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new YN(GN.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new BN(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.md)throw new YN(GN.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return kR("Firestore.collection",arguments,1),OR("Firestore.collection","non-empty string",1,t),this.Rd(),new zL(JN.$(t),this,null)},t.prototype.doc=function(t){return kR("Firestore.doc",arguments,1),OR("Firestore.doc","non-empty string",1,t),this.Rd(),LL.$d(JN.$(t),this,null)},t.prototype.collectionGroup=function(t){if(kR("Firestore.collectionGroup",arguments,1),OR("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new YN(GN.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Rd(),new qL(new TP(JN.k(),t),this,null)},t.prototype.runTransaction=function(t){var e=this;return kR("Firestore.runTransaction",arguments,1),OR("Firestore.runTransaction","function",1,t),this.Rd().transaction((function(n){return t(new RL(e,n))}))},t.prototype.batch=function(){return this.Rd(),new DL(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(kN()){case Gb.DEBUG:return"debug";case Gb.ERROR:return"error";case Gb.SILENT:return"silent";case Gb.WARN:return"warn";case Gb.INFO:return"info";case Gb.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;kR("Firestore.setLogLevel",arguments,1),MR("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,NN.setLogLevel(e)},t.prototype.kd=function(){return this.bd.timestampsInSnapshots},t}();function OL(t,e){var n=new IL({next:function(){e.next&&e.next()},error:function(t){throw RN()}});return t.Q_(n),function(){n.ad(),t.W_(n)}}var RL=function(){function t(t,e){this.xd=t,this.Md=e}return t.prototype.get=function(t){var e=this;kR("Transaction.get",arguments,1);var n=YL("Transaction.get",t,this.xd);return this.Md.Mu([n.pa]).then((function(t){if(!t||1!==t.length)return RN();var r=t[0];if(r instanceof wP)return new jL(e.xd,n.pa,null,!1,!1,n.ba);if(r instanceof bP)return new jL(e.xd,n.pa,r,!1,!1,n.ba);throw RN()}))},t.prototype.set=function(t,e,n){PR("Transaction.set",arguments,2,3);var r=YL("Transaction.set",t,this.xd);n=HL("Transaction.set",n);var i=$L(r.ba,e,n),o=gD(this.xd.vd,"Transaction.set",r.pa,i,null!==r.ba,n);return this.Md.set(r.pa,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof XR?(AR("Transaction.update",arguments,3),r=YL("Transaction.update",t,this.xd),i=_D(this.xd.vd,"Transaction.update",r.pa,e,n,o)):(kR("Transaction.update",arguments,2),r=YL("Transaction.update",t,this.xd),i=mD(this.xd.vd,"Transaction.update",r.pa,e)),this.Md.update(r.pa,i),this},t.prototype.delete=function(t){kR("Transaction.delete",arguments,1);var e=YL("Transaction.delete",t,this.xd);return this.Md.delete(e.pa),this},t}(),DL=function(){function t(t){this.xd=t,this.Od=[],this.Ld=!1}return t.prototype.set=function(t,e,n){PR("WriteBatch.set",arguments,2,3),this.Bd();var r=YL("WriteBatch.set",t,this.xd);n=HL("WriteBatch.set",n);var i=$L(r.ba,e,n),o=gD(this.xd.vd,"WriteBatch.set",r.pa,i,null!==r.ba,n);return this.Od=this.Od.concat(o.va(r.pa,tP.Qe())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Bd(),"string"==typeof e||e instanceof XR?(AR("WriteBatch.update",arguments,3),r=YL("WriteBatch.update",t,this.xd),i=_D(this.xd.vd,"WriteBatch.update",r.pa,e,n,o)):(kR("WriteBatch.update",arguments,2),r=YL("WriteBatch.update",t,this.xd),i=mD(this.xd.vd,"WriteBatch.update",r.pa,e)),this.Od=this.Od.concat(i.va(r.pa,tP.exists(!0))),this},t.prototype.delete=function(t){kR("WriteBatch.delete",arguments,1),this.Bd();var e=YL("WriteBatch.delete",t,this.xd);return this.Od=this.Od.concat(new dP(e.pa,tP.Qe())),this},t.prototype.commit=function(){return this.Bd(),this.Ld=!0,this.Od.length>0?this.xd.Rd().write(this.Od):Promise.resolve()},t.prototype.Bd=function(){if(this.Ld)throw new YN(GN.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),LL=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,e,r)||this).pa=e,i.firestore=n,i.ba=r,i.Pd=i.firestore.Rd(),i}return eb(e,t),e.$d=function(t,n,r){if(t.length%2!=0)throw new YN(GN.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new e(new ek(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new zL(this.pa.path.p(),this.firestore,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.pa.path.N()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(kR("DocumentReference.collection",arguments,1),OR("DocumentReference.collection","non-empty string",1,t),!t)throw new YN(GN.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=JN.$(t);return new zL(this.pa.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw WR("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.pa.isEqual(t.pa)&&this.ba===t.ba},e.prototype.set=function(t,e){PR("DocumentReference.set",arguments,1,2),e=HL("DocumentReference.set",e);var n=$L(this.ba,t,e),r=gD(this.firestore.vd,"DocumentReference.set",this.pa,n,null!==this.ba,e);return this.Pd.write(r.va(this.pa,tP.Qe()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof XR?(AR("DocumentReference.update",arguments,2),n=_D(this.firestore.vd,"DocumentReference.update",this.pa,t,e,r)):(kR("DocumentReference.update",arguments,1),n=mD(this.firestore.vd,"DocumentReference.update",this.pa,t)),this.Pd.write(n.va(this.pa,tP.exists(!0)))},e.prototype.delete=function(){return kR("DocumentReference.delete",arguments,0),this.Pd.write([new dP(this.pa,tP.Qe())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];PR("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||xL(i[a])||(BR("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),LR("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u={includeMetadataChanges:s.includeMetadataChanges};if(xL(i[a])){var c=i[a];i[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else OR("DocumentReference.onSnapshot","function",a,i[a]),RR("DocumentReference.onSnapshot","function",a+1,i[a+1]),RR("DocumentReference.onSnapshot","function",a+2,i[a+2]);var l={next:function(t){i[a]&&i[a](r.qd(t))},error:i[a+1],complete:i[a+2]};return FL(this.Pd,this.pa,u,l)},e.prototype.get=function(t){var e=this;return PR("DocumentReference.get",arguments,0,1),GL("DocumentReference.get",t),t&&"cache"===t.source?this.firestore.Rd().rd(this.pa).then((function(t){return new jL(e.firestore,e.pa,t,!0,t instanceof bP&&t.Ge,e.ba)})):function(t,e,n){var r=new XP,i=FL(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i();var o=t.docs.has(e);!o&&t.fromCache?r.reject(new YN(GN.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&t.fromCache&&n&&"server"===n.source?r.reject(new YN(GN.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(this.Pd,this.pa,t).then((function(t){return e.qd(t)}))},e.prototype.withConverter=function(t){return new e(this.pa,this.firestore,t)},e.prototype.qd=function(t){var e=t.docs.get(this.pa);return new jL(this.firestore,this.pa,e,t.fromCache,t.hasPendingWrites,this.ba)},e}(hD);function FL(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new IL({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(TP.hn(e.path),o,n);return function(){o.ad(),t.Rc(s)}}var ML=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),jL=function(){function t(t,e,n,r,i,o){this.xd=t,this.pa=e,this.Ud=n,this.Qd=r,this.Wd=i,this.ba=o}return t.prototype.data=function(t){var e=this;if(PR("DocumentSnapshot.data",arguments,0,1),t=QL("DocumentSnapshot.data",t),this.Ud){if(this.ba){var n=new UL(this.xd,this.pa,this.Ud,this.Qd,this.Wd,null);return this.ba.fromFirestore(n,t)}return new NL(this.xd.ya,this.xd.kd(),t.serverTimestamps||"none",(function(t){return new LL(t,e.xd,null)}))._d(this.Ud.tn())}},t.prototype.get=function(t,e){var n=this;if(PR("DocumentSnapshot.get",arguments,1,2),e=QL("DocumentSnapshot.get",e),this.Ud){var r=this.Ud.data().field(SD("DocumentSnapshot.get",t,this.pa));if(null!==r)return new NL(this.xd.ya,this.xd.kd(),e.serverTimestamps||"none",(function(t){return new LL(t,n.xd,n.ba)}))._d(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new LL(this.pa,this.xd,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ud},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new ML(this.Wd,this.Qd)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw WR("isEqual","DocumentSnapshot",1,e);return this.xd===e.xd&&this.Qd===e.Qd&&this.pa.isEqual(e.pa)&&(null===this.Ud?null===e.Ud:this.Ud.isEqual(e.Ud))&&this.ba===e.ba},t}(),UL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eb(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(jL);function VL(t){if(t.mn()&&0===t.en.length)throw new YN(GN.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qL=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,n.vd,e)||this).jd=e,i.firestore=n,i.ba=r,i}return eb(e,t),e.prototype.where=function(t,n,r){kR("Query.where",arguments,3),qR("Query.where",3,r);var i=MR("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n),o=SD("Query.where",t),s=this.Kd(o,i,r);return new e(this.jd.cn(s),this.firestore,this.ba)},e.prototype.orderBy=function(t,n){var r;if(PR("Query.orderBy",arguments,1,2),RR("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new YN(GN.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=SD("Query.orderBy",t),o=this.Yd(i,r);return new e(this.jd.ln(o),this.firestore,this.ba)},e.prototype.limit=function(t){return kR("Query.limit",arguments,1),OR("Query.limit","number",1,t),zR("Query.limit",1,t),new e(this.jd._n(t),this.firestore,this.ba)},e.prototype.limitToLast=function(t){return kR("Query.limitToLast",arguments,1),OR("Query.limitToLast","number",1,t),zR("Query.limitToLast",1,t),new e(this.jd.fn(t),this.firestore,this.ba)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];AR("Query.startAt",arguments,1);var i=this.ew("Query.startAt",t,n,!0);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];AR("Query.startAfter",arguments,1);var i=this.ew("Query.startAfter",t,n,!1);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];AR("Query.endBefore",arguments,1);var i=this.ew("Query.endBefore",t,n,!0);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];AR("Query.endAt",arguments,1);var i=this.ew("Query.endAt",t,n,!1);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw WR("isEqual","Query",1,t);return this.firestore===t.firestore&&CP(this.jd,t.jd)&&this.ba===t.ba},e.prototype.withConverter=function(t){return new e(this.jd,this.firestore,t)},e.prototype.ew=function(t,e,n,r){if(qR(t,1,e),e instanceof jL)return kR(t,ub([e],n),1),this.Xd(t,e.Ud,r);var i=[e].concat(n);return this.Zd(t,i,r)},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];PR("Query.onSnapshot",arguments,1,4);var s={},a=0;if("object"!=typeof i[a]||xL(i[a])||(BR("Query.onSnapshot",s=i[a],["includeMetadataChanges"]),LR("Query.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++),xL(i[a])){var u=i[a];i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else OR("Query.onSnapshot","function",a,i[a]),RR("Query.onSnapshot","function",a+1,i[a+1]),RR("Query.onSnapshot","function",a+2,i[a+2]);var c={next:function(t){i[a]&&i[a](new WL(r.firestore,r.jd,t,r.ba))},error:i[a+1],complete:i[a+2]};return VL(this.jd),BL(this.firestore.Rd(),this.jd,s,c)},e.prototype.get=function(t){var e=this;PR("Query.get",arguments,0,1),GL("Query.get",t),VL(this.jd);var n=this.firestore.Rd();return(t&&"cache"===t.source?n.od(this.jd):function(t,e,n){var r=new XP,i=BL(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i(),t.fromCache&&n&&"server"===n.source?r.reject(new YN(GN.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(n,this.jd,t)).then((function(t){return new WL(e.firestore,e.jd,t,e.ba)}))},e}(function(){function t(t,e,n){this.ya=t,this.vd=e,this.jd=n}return t.prototype.Kd=function(t,e,n){var r;if(t.O()){if("array-contains"===e||"array-contains-any"===e)throw new YN(GN.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.Gd(n,e);for(var i=[],o=0,s=n;o<s.length;o++){var a=s[o];i.push(this.zd(a))}r={arrayValue:{values:i}}}else r=this.zd(n)}else"in"!==e&&"array-contains-any"!==e||this.Gd(n,e),r=bD(this.vd,"Query.where",n,"in"===e);var u=kP.create(t,e,r);return this.Hd(u),u},t.prototype.Yd=function(t,e){if(null!==this.jd.startAt)throw new YN(GN.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.jd.endAt)throw new YN(GN.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new UP(t,e);return this.Jd(n),n},t.prototype.Xd=function(t,e,n){if(!e)throw new YN(GN.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.jd.orderBy;i<o.length;i++){var s=o[i];if(s.field.O())r.push(nA(this.ya,e.key));else{var a=e.field(s.field);if(zk(a))throw new YN(GN.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.N();throw new YN(GN.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new LP(r,n)},t.prototype.Zd=function(t,e,n){var r=this.jd.en;if(e.length>r.length)throw new YN(GN.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.O()){if("string"!=typeof s)throw new YN(GN.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.jd.Vn()&&-1!==s.indexOf("/"))throw new YN(GN.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.jd.path.child(JN.$(s));if(!ek.W(a))throw new YN(GN.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new ek(a);i.push(nA(this.ya,u))}else{var c=bD(this.vd,t,s);i.push(c)}}return new LP(i,n)},t.prototype.zd=function(t){if("string"==typeof t){if(""===t)throw new YN(GN.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.jd.Vn()&&-1!==t.indexOf("/"))throw new YN(GN.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.jd.path.child(JN.$(t));if(!ek.W(e))throw new YN(GN.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return nA(this.ya,new ek(e))}if(t instanceof hD)return nA(this.ya,t.pa);throw new YN(GN.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+VR(t)+".")},t.prototype.Gd=function(t,e){if(!Array.isArray(t)||0===t.length)throw new YN(GN.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new YN(GN.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new YN(GN.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new YN(GN.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Hd=function(t){if(t instanceof kP){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.An()){var o=this.jd.an();if(null!==o&&!o.isEqual(t.field))throw new YN(GN.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.jd.un();null!==s&&this.tw(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.jd.Rn(n)),null===a&&r&&(a=this.jd.Rn(e)),null!==a)throw a===t.op?new YN(GN.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new YN(GN.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.Jd=function(t){if(null===this.jd.un()){var e=this.jd.an();null!==e&&this.tw(e,t.field)}},t.prototype.tw=function(t,e){if(!e.isEqual(t))throw new YN(GN.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}());function BL(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new IL({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(e,o,n);return function(){o.ad(),t.Rc(s)}}var WL=function(){function t(t,e,n,r){this.xd=t,this.nw=e,this.sw=n,this.ba=r,this.iw=null,this.rw=null,this.metadata=new ML(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.sw.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.sw.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;PR("QuerySnapshot.forEach",arguments,1,2),OR("QuerySnapshot.forEach","function",1,t),this.sw.docs.forEach((function(r){t.call(e,n.ow(r,n.metadata.fromCache,n.sw.Lt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new qL(this.nw,this.xd,this.ba)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(BR("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),LR("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.sw.qt)throw new YN(GN.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.iw&&this.rw===e||(this.iw=function(t,e,n){if(t.Ot._()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Lt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Ot;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Lt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:KL(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.sw,e,this.ow.bind(this)),this.rw=e),this.iw},t.prototype.isEqual=function(e){if(!(e instanceof t))throw WR("isEqual","QuerySnapshot",1,e);return this.xd===e.xd&&CP(this.nw,e.nw)&&this.sw.isEqual(e.sw)&&this.ba===e.ba},t.prototype.ow=function(t,e,n){return new UL(this.xd,t.key,t,e,n,this.ba)},t}(),zL=function(t){function e(e,n,r){var i=this;if((i=t.call(this,TP.hn(e),n,r)||this).hw=e,e.length%2!=1)throw new YN(GN.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.N()+" has "+e.length);return i}return eb(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.jd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.jd.path.p();return t._()?null:new LL(new ek(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.jd.path.N()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){PR("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=MN.t()),OR("CollectionReference.doc","non-empty string",1,t);var e=JN.$(t);return LL.$d(this.jd.path.child(e),this.firestore,this.ba)},e.prototype.add=function(t){kR("CollectionReference.add",arguments,1),OR("CollectionReference.add","object",1,this.ba?this.ba.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.hw,this.firestore,t)},e}(qL);function HL(t,e){if(void 0===e)return{merge:!1};if(BR(t,e,["merge","mergeFields"]),LR(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new YN(GN.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+VR(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new YN(GN.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+VR(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof XR}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new YN(GN.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function QL(t,e){return void 0===e?{}:(BR(t,e,["serverTimestamps"]),FR(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function GL(t,e){RR(t,"object",1,e),e&&(BR(t,e,["source"]),FR(t,0,"source",e.source,["default","server","cache"]))}function YL(t,e,n){if(e instanceof hD){if(e.firestore!==n)throw new YN(GN.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw WR(t,"DocumentReference",1,e)}function KL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return RN()}}function $L(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var XL={Firestore:PL,GeoPoint:uD,Timestamp:KN,Blob:KR,Transaction:RL,WriteBatch:DL,DocumentReference:LL,DocumentSnapshot:jL,Query:qL,QueryDocumentSnapshot:UL,QuerySnapshot:WL,CollectionReference:zL,FieldPath:XR,FieldValue:sD,setLogLevel:PL.setLogLevel,CACHE_SIZE_UNLIMITED:kL};function JL(t){return"parent"in t}function ZL(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}!function(t){!function(t,e){t.INTERNAL.registerComponent(new Bb("firestore",(function(t){return function(t,e){return new PL(t,e,new CL)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},XL)))}(t),t.registerVersion("@firebase/firestore","1.16.0")}(dw),dw.registerVersion("firebase","7.16.0","app"),n(681).applyChange,n(681).diff,n(681).applyChange,n(681).applyChange,n(961).decompressFromEncodedURIComponent,n(961).compressToEncodedURIComponent,1===(tF=ZL).length&&(tF=function(t){return function(e,n){return ZL(t(e),n)}}(tF));var tF,eF={value:function(){}};function nF(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new rF(r)}function rF(t){this._=t}function iF(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function oF(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=eF,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}rF.prototype=nF.prototype={constructor:rF,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=o[s]).type)i[n]=oF(i[n],t.name,e);else if(null==e)for(n in i)i[n]=oF(i[n],t.name,null);return this}for(;++s<a;)if((n=(t=o[s]).type)&&(n=iF(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new rF(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var sF,aF,uF=0,cF=0,lF=0,hF=1e3,fF=0,pF=0,dF=0,yF="object"==typeof performance&&performance.now?performance:Date,vF="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function gF(){return pF||(vF(mF),pF=yF.now()+dF)}function mF(){pF=0}function _F(){this._call=this._time=this._next=null}function bF(t,e,n){var r=new _F;return r.restart(t,e,n),r}function wF(){pF=(fF=yF.now())+dF,uF=cF=0;try{!function(){gF(),++uF;for(var t,e=sF;e;)(t=pF-e._time)>=0&&e._call.call(null,t),e=e._next;--uF}()}finally{uF=0,function(){for(var t,e,n=sF,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:sF=e);aF=t,TF(r)}(),pF=0}}function EF(){var t=yF.now(),e=t-fF;e>hF&&(dF-=e,fF=t)}function TF(t){uF||(cF&&(cF=clearTimeout(cF)),t-pF>24?(t<1/0&&(cF=setTimeout(wF,t-yF.now()-dF)),lF&&(lF=clearInterval(lF))):(lF||(fF=yF.now(),lF=setInterval(EF,hF)),uF=1,vF(wF)))}function CF(t,e,n){var r=new _F;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}_F.prototype=bF.prototype={constructor:_F,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?gF():+n)+(null==e?0:+e),this._next||aF===this||(aF?aF._next=this:sF=this,aF=this),this._call=t,this._time=n,TF()},stop:function(){this._call&&(this._call=null,this._time=1/0,TF())}},nF("start","end","cancel","interrupt");var SF=Math.PI,IF=2*SF,xF=1e-6,NF=IF-xF;function kF(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function AF(){return new kF}kF.prototype=AF.prototype={constructor:kF,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,s=this._y1,a=n-t,u=r-e,c=o-t,l=s-e,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>xF)if(Math.abs(l*a-u*c)>xF&&i){var f=n-o,p=r-s,d=a*a+u*u,y=f*f+p*p,v=Math.sqrt(d),g=Math.sqrt(h),m=i*Math.tan((SF-Math.acos((d+h-y)/(2*v*g)))/2),_=m/g,b=m/v;Math.abs(_-1)>xF&&(this._+="L"+(t+_*c)+","+(e+_*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>c*p)+","+(this._x1=t+b*a)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var s=(n=+n)*Math.cos(r),a=n*Math.sin(r),u=t+s,c=e+a,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>xF||Math.abs(this._y1-c)>xF)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%IF+IF),h>NF?this._+="A"+n+","+n+",0,1,"+l+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>xF&&(this._+="A"+n+","+n+",0,"+ +(h>=SF)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var PF="$";function OF(){}function RF(t,e){var n=new OF;if(t instanceof OF)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var s in t)n.set(s,t[s]);return n}function DF(){}OF.prototype=RF.prototype={constructor:OF,has:function(t){return PF+t in this},get:function(t){return this[PF+t]},set:function(t,e){return this[PF+t]=e,this},remove:function(t){var e=PF+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===PF&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===PF&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===PF&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===PF&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===PF&&++t;return t},empty:function(){for(var t in this)if(t[0]===PF)return!1;return!0},each:function(t){for(var e in this)e[0]===PF&&t(this[e],e.slice(1),this)}};var LF=RF.prototype;function FF(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function MF(t,e){var n,r,i,o,s,a=new qF(t),u=+t.value&&(a.value=t.value),c=[a];for(null==e&&(e=jF);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(s=i.length))for(n.children=new Array(s),o=s-1;o>=0;--o)c.push(r=n.children[o]=new qF(i[o])),r.parent=n,r.depth=n.depth+1;return a.eachBefore(VF)}function jF(t){return t.children}function UF(t){t.data=t.data.data}function VF(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function qF(t){this.data=t,this.depth=this.height=0,this.parent=null}function BF(t){if("function"!=typeof t)throw new Error;return t}DF.prototype=function(t,e){var n=new DF;if(t instanceof DF)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}.prototype={constructor:DF,has:LF.has,add:function(t){return this[PF+(t+="")]=t,this},remove:LF.remove,clear:LF.clear,values:LF.keys,size:LF.size,empty:LF.empty,each:LF.each},qF.prototype=MF.prototype={constructor:qF,count:function(){return this.eachAfter(FF)},each:function(t){var e,n,r,i,o=this,s=[o];do{for(e=s.reverse(),s=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)s.push(n[r])}while(s.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],s=[];i=o.pop();)if(s.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=s.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return MF(this).eachBefore(UF)}};var WF="$",zF={depth:-1},HF={};function QF(t){return t.id}function GF(t){return t.parentId}function YF(t){return function(){return t}}var KF=Math.PI,$F=2*KF,XF={draw:function(t,e){var n=Math.sqrt(e/KF);t.moveTo(n,0),t.arc(0,0,n,0,$F)}},JF={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ZF=Math.sqrt(1/3),tM=2*ZF,eM={draw:function(t,e){var n=Math.sqrt(e/tM),r=n*ZF;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},nM=Math.sin(KF/10)/Math.sin(7*KF/10),rM=Math.sin($F/10)*nM,iM=-Math.cos($F/10)*nM,oM={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=rM*n,i=iM*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var s=$F*o/5,a=Math.cos(s),u=Math.sin(s);t.lineTo(u*n,-a*n),t.lineTo(a*r-u*i,u*r+a*i)}t.closePath()}},sM={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},aM=Math.sqrt(3),uM={draw:function(t,e){var n=-Math.sqrt(e/(3*aM));t.moveTo(0,2*n),t.lineTo(-aM*n,-n),t.lineTo(aM*n,-n),t.closePath()}},cM=-.5,lM=Math.sqrt(3)/2,hM=1/Math.sqrt(12),fM=3*(hM/2+1),pM={draw:function(t,e){var n=Math.sqrt(e/fM),r=n/2,i=n*hM,o=r,s=n*hM+n,a=-o,u=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,u),t.lineTo(cM*r-lM*i,lM*r+cM*i),t.lineTo(cM*o-lM*s,lM*o+cM*s),t.lineTo(cM*a-lM*u,lM*a+cM*u),t.lineTo(cM*r+lM*i,cM*i-lM*r),t.lineTo(cM*o+lM*s,cM*s-lM*o),t.lineTo(cM*a+lM*u,cM*u-lM*a),t.closePath()}};function dM(){var t=YF(XF),e=YF(64),n=null;function r(){var r;if(n||(n=r=AF()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:YF(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:YF(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}function yM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gM(t,e,n){return e&&vM(t.prototype,e),n&&vM(t,n),t}function mM(t,e){return mM=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},mM(t,e)}function _M(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mM(t,e)}function bM(t){return bM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bM(t)}function wM(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EM(t,e){return!e||"object"!==bM(e)&&"function"!=typeof e?wM(t):e}function TM(t){return TM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},TM(t)}function CM(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SM(t){return SM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SM(t)}var IM=0;var xM={delay:0,duration:250,ease:function(t){return+t}},NM=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.start=null,this.interrupt=null,this.end=null,e.events&&Object.keys(e.events).forEach((function(t){if("function"!=typeof e.events[t])throw new Error("Event handlers must be a function");var r,i;n[t]=(r=e.events[t],i=!1,function(){i||(i=!0,r.call(this))})}))};function kM(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){AM(t,e,n[e])}))}return t}function AM(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var OM=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state=e||{}}var e,n;return e=t,n=[{key:"transition",value:function(t){if(Array.isArray(t)){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.parse(s)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}else this.parse(t)}},{key:"isTransitioning",value:function(){return!!this.transitionData}},{key:"stopTransitions",value:function(){var t=this.transitionData;t&&Object.keys(t).forEach((function(e){t[e].timer.stop()}))}},{key:"setState",value:function(t){!function(t,e){for(var n in e)t[n]=e[n]}(this.state,"function"==typeof t?t(this.state):t)}},{key:"parse",value:function(t){var e=this,n=kM({},t),r=new NM(n);n.events&&delete n.events;var i=kM({},xM,n.timing||{},{time:gF()});n.timing&&delete n.timing,Object.keys(n).forEach((function(t){var o,s,a=[],u=n[t];if("object"===SM(s=u)&&!1===Array.isArray(s))Object.keys(u).forEach((function(n){var r=u[n];Array.isArray(r)?1===r.length?a.push(e.getTween(n,r[0],t)):(e.setState((function(e){var i,o;return(o={})[t]=kM({},e[t],((i={})[n]=r[0],i)),o})),a.push(e.getTween(n,r[1],t))):"function"==typeof r?a.push((function(){return function(i){e.setState((function(e){var o,s;return(s={})[t]=kM({},e[t],((o={})[n]=r(i),o)),s}))}})):(e.setState((function(e){var i,o;return(o={})[t]=kM({},e[t],((i={})[n]=r,i)),o})),a.push(e.getTween(n,r,t)))}));else if(Array.isArray(u))1===u.length?a.push(e.getTween(t,u[0],null)):(e.setState(((o={})[t]=u[0],o)),a.push(e.getTween(t,u[1],null)));else if("function"==typeof u)a.push((function(){return function(n){var r;e.setState(((r={})[t]=u(n),r))}}));else{var c;e.setState(((c={})[t]=u,c)),a.push(e.getTween(t,u,null))}e.update({stateKey:t,timing:i,tweens:a,events:r,status:0})}))}},{key:"getTween",value:function(t,e,n){var r=this;return function(){var i=n?r.state[n][t]:r.state[t];if(i===e)return null;var o,s=r.getInterpolator(i,e,t,n);return o=null===n?function(e){var n;r.setState(((n={})[t]=s(e),n))}:function(e){r.setState((function(r){var i,o;return(o={})[n]=kM({},r[n],((i={})[t]=s(e),i)),o}))},o}}},{key:"update",value:function(t){this.transitionData||(this.transitionData={}),this.init(++IM,t)}},{key:"init",value:function(t,e){var n=this,r=e.tweens.length,i=new Array(r);this.transitionData[t]=e,e.timer=bF((function(t){e.status=1,e.timer.restart(o,e.timing.delay,e.timing.time),e.timing.delay<=t&&o(t-e.timing.delay)}),0,e.timing.time);var o=function o(u){if(1!==e.status)return a();for(var c in n.transitionData){var l=n.transitionData[c];if(l.stateKey===e.stateKey){if(3===l.status)return CF(o);4===l.status?(l.status=6,l.timer.stop(),l.events.interrupt&&l.events.interrupt.call(n),delete n.transitionData[c]):+c<t&&(l.status=6,l.timer.stop(),delete n.transitionData[c])}}if(CF((function(){3===e.status&&(e.status=4,e.timer.restart(s,e.timing.delay,e.timing.time),s(u))})),e.status=2,e.events.start&&e.events.start.call(n),2===e.status){e.status=3;for(var h=-1,f=0;f<r;++f){var p=e.tweens[f]();p&&(i[++h]=p)}i.length=h+1}},s=function(t){var r=1;t<e.timing.duration?r=e.timing.ease(t/e.timing.duration):(e.timer.restart(a),e.status=5);for(var o=-1;++o<i.length;)i[o](r);5===e.status&&(e.events.end&&e.events.end.call(n),a())},a=function(){for(var r in e.status=6,e.timer.stop(),delete n.transitionData[t],n.transitionData)return;delete n.transitionData}}}],n&&PM(e.prototype,n),t}(),RM="ENTER",DM="LEAVE";function LM(t,e){var n=+t,r=+e-n;return function(t){return n+r*t}}function FM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=TM(t);if(e){var i=TM(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return EM(this,n)}}var MM=function(t){_M(n,t);var e=FM(n);function n(t){var r;yM(this,n),CM(wM(r=e.call(this,t)),"animate",(function(){var t=r.state,e=t.nodeKeys,n=t.nodeHash;if(!r.unmounting){for(var i=!1,o=[],s=e.length,a=0;a<s;a++){var u=e[a],c=n[u],l=c.isTransitioning();l&&(i=!0),c.type!==DM||l?o.push(u):delete n[u]}i||r.interval.stop(),r.setState((function(){return{nodeKeys:o,nodes:o.map((function(t){return n[t]}))}}))}})),CM(wM(r),"interval",null),CM(wM(r),"unmounting",!1);var i=t.interpolation,o=function(t){_M(n,t);var e=FM(n);function n(t,r){var o;return yM(this,n),CM(wM(o=e.call(this)),"getInterpolator",i),o.key=t,o.data=r,o.type=RM,o}return n}(OM);return r.state={Node:o,nodeKeys:[],nodeHash:{},nodes:[],data:null},r}return gM(n,[{key:"componentDidMount",value:function(){this.startInterval()}},{key:"componentDidUpdate",value:function(t){t.data===this.props.data||this.unmounting||this.startInterval()}},{key:"startInterval",value:function(){this.interval?this.interval.restart(this.animate):this.interval=function(t,e,n){var r=new _F,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?gF():+n,r.restart((function o(s){s+=i,r.restart(o,i+=e,n),t(s)}),e,n),r)}(this.animate)}},{key:"componentWillUnmount",value:function(){var t=this.state,e=t.nodeKeys,n=t.nodeHash;this.unmounting=!0,this.interval&&this.interval.stop(),e.forEach((function(t){n[t].stopTransitions()}))}},{key:"render",value:function(){var t=this.props.children(this.state.nodes);return t&&H_.Children.only(t)}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.data!==e.data){for(var n=t.data,r=t.keyAccessor,i=t.start,o=t.enter,s=t.update,a=t.leave,u=e.Node,c=e.nodeKeys,l=e.nodeHash,h={},f=0;f<c.length;f++)h[c[f]]=f;for(var p={},d=[],y=0;y<n.length;y++){var v=n[y],g=r(v,y);if(p[g]=y,d.push(g),void 0===h[g]){var m=new u;m.key=g,m.data=v,m.type=RM,l[g]=m}}for(var _=0;_<c.length;_++){var b=c[_],w=l[b];void 0!==p[b]?(w.data=n[p[b]],w.type="UPDATE"):w.type=DM}for(var E=function(t,e,n,r){for(var i=[],o=0;o<n.length;o++)i[o]=n[o];for(var s=0;s<t.length;s++)void 0===r[t[s]]&&i.push(t[s]);return i.sort((function(t,i){var o=r[t],s=r[i],a=e[t],u=e[i];if(null!=o&&null!=s)return r[t]-r[i];if(null!=a&&null!=u)return e[t]-e[i];if(null!=o){for(var c=0;c<n.length;c++){var l=n[c];if(e[l]){if(o<r[l]&&u>e[l])return-1;if(o>r[l]&&u<e[l])return 1}}return 1}for(var h=0;h<n.length;h++){var f=n[h];if(e[f]){if(s<r[f]&&a>e[f])return 1;if(s>r[f]&&a<e[f])return-1}}return-1}))}(c,h,d,p),T=0;T<E.length;T++){var C=E[T],S=l[C],I=S.data;S.type===RM?(S.setState(i(I,p[C])),S.transition(o(I,p[C]))):S.type===DM?S.transition(a(I,h[C])):S.transition(s(I,p[C]))}return{data:n,nodes:E.map((function(t){return l[t]})),nodeHash:l,nodeKeys:E}}return null}}]),n}(H_.Component);MM.propTypes={},MM.defaultProps={enter:function(){},update:function(){},leave:function(){},interpolation:LM};var jM=function(){return"$$key$$"},UM=function(t){_M(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=TM(e);if(n){var i=TM(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return EM(this,t)});function i(){return yM(this,i),r.apply(this,arguments)}return gM(i,[{key:"render",value:function(){var t=this.props,e=t.show,n=t.start,r=t.enter,i=t.update,o=t.leave,s=t.interpolation,a=t.children,u="function"==typeof n?n():n;return H_.createElement(MM,{data:e?[u]:[],start:function(){return u},keyAccessor:jM,interpolation:s,enter:"function"==typeof r?r:function(){return r},update:"function"==typeof i?i:function(){return i},leave:"function"==typeof o?o:function(){return o}},(function(t){if(!t[0])return null;var e=a(t[0].state);return e&&H_.Children.only(e)}))}}]),i}(H_.Component);UM.propTypes={},UM.defaultProps={show:!0,interpolation:LM};var VM=function(t,e){"function"!=typeof t?null!==t&&"object"===bM(t)&&(t.current=e):t(e)},qM={current:null},BM=new WeakMap,WM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function zM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function HM(t,e){return t(e={exports:{}},e.exports),e.exports}var QM="function"==typeof Symbol&&Symbol.for,GM=QM?Symbol.for("react.element"):60103,YM=QM?Symbol.for("react.portal"):60106,KM=QM?Symbol.for("react.fragment"):60107,$M=QM?Symbol.for("react.strict_mode"):60108,XM=QM?Symbol.for("react.profiler"):60114,JM=QM?Symbol.for("react.provider"):60109,ZM=QM?Symbol.for("react.context"):60110,tj=QM?Symbol.for("react.async_mode"):60111,ej=QM?Symbol.for("react.concurrent_mode"):60111,nj=QM?Symbol.for("react.forward_ref"):60112,rj=QM?Symbol.for("react.suspense"):60113,ij=QM?Symbol.for("react.suspense_list"):60120,oj=QM?Symbol.for("react.memo"):60115,sj=QM?Symbol.for("react.lazy"):60116,aj=QM?Symbol.for("react.block"):60121,uj=QM?Symbol.for("react.fundamental"):60117,cj=QM?Symbol.for("react.responder"):60118,lj=QM?Symbol.for("react.scope"):60119;function hj(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case GM:switch(t=t.type){case tj:case ej:case KM:case XM:case $M:case rj:return t;default:switch(t=t&&t.$$typeof){case ZM:case nj:case sj:case oj:case JM:return t;default:return e}}case YM:return e}}}function fj(t){return hj(t)===ej}var pj={AsyncMode:tj,ConcurrentMode:ej,ContextConsumer:ZM,ContextProvider:JM,Element:GM,ForwardRef:nj,Fragment:KM,Lazy:sj,Memo:oj,Portal:YM,Profiler:XM,StrictMode:$M,Suspense:rj,isAsyncMode:function(t){return fj(t)||hj(t)===tj},isConcurrentMode:fj,isContextConsumer:function(t){return hj(t)===ZM},isContextProvider:function(t){return hj(t)===JM},isElement:function(t){return"object"==typeof t&&null!==t&&t.$$typeof===GM},isForwardRef:function(t){return hj(t)===nj},isFragment:function(t){return hj(t)===KM},isLazy:function(t){return hj(t)===sj},isMemo:function(t){return hj(t)===oj},isPortal:function(t){return hj(t)===YM},isProfiler:function(t){return hj(t)===XM},isStrictMode:function(t){return hj(t)===$M},isSuspense:function(t){return hj(t)===rj},isValidElementType:function(t){return"string"==typeof t||"function"==typeof t||t===KM||t===ej||t===XM||t===$M||t===rj||t===ij||"object"==typeof t&&null!==t&&(t.$$typeof===sj||t.$$typeof===oj||t.$$typeof===JM||t.$$typeof===ZM||t.$$typeof===nj||t.$$typeof===uj||t.$$typeof===cj||t.$$typeof===lj||t.$$typeof===aj)},typeOf:hj},dj=HM((function(t,e){})),yj=(dj.AsyncMode,dj.ConcurrentMode,dj.ContextConsumer,dj.ContextProvider,dj.Element,dj.ForwardRef,dj.Fragment,dj.Lazy,dj.Memo,dj.Portal,dj.Profiler,dj.StrictMode,dj.Suspense,dj.isAsyncMode,dj.isConcurrentMode,dj.isContextConsumer,dj.isContextProvider,dj.isElement,dj.isForwardRef,dj.isFragment,dj.isLazy,dj.isMemo,dj.isPortal,dj.isProfiler,dj.isStrictMode,dj.isSuspense,dj.isValidElementType,dj.typeOf,HM((function(t){t.exports=pj})),(0,Q_.oneOfType)([Q_.func,Q_.object]),function(t){function e(){var t,n;yM(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return CM(wM(n=EM(this,(t=TM(e)).call.apply(t,[this].concat(i)))),"prevNode",null),n}return _M(e,t),gM(e,[{key:"componentDidMount",value:function(){this.prevNode=(0,Y_.findDOMNode)(this),VM(this.props.innerRef,this.prevNode)}},{key:"componentDidUpdate",value:function(t){var e=(0,Y_.findDOMNode)(this);this.prevNode!==e&&(this.prevNode=e,VM(this.props.innerRef,e)),t.innerRef!==this.props.innerRef&&VM(this.props.innerRef,e)}},{key:"componentWillUnmount",value:function(){VM(this.props.innerRef,null)}},{key:"render",value:function(){return this.props.children}}]),e}(H_.Component));CM(yj,"displayName","RefFindNode"),CM(yj,"propTypes",{});var vj=function(t){function e(){var t,n;yM(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return CM(wM(n=EM(this,(t=TM(e)).call.apply(t,[this].concat(i)))),"handleRefOverride",(function(t){var e=n.props,r=e.children,i=e.innerRef;VM(r.ref,t),VM(i,t)})),n}return _M(e,t),gM(e,[{key:"render",value:function(){var t=this.props.children;return(0,H_.cloneElement)(t,{ref:this.handleRefOverride})}}]),e}(H_.Component);CM(vj,"displayName","RefForward"),CM(vj,"propTypes",{});var gj=function(t){var e=t.children,n=t.innerRef,r=H_.Children.only(e),i=(void 0)(r)?vj:yj;return(0,H_.createElement)(i,{innerRef:n},r)};gj.displayName="Ref";var mj=HM((function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.apply(this,arguments)}t.exports=e})),_j=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function bj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var wj=function(t,e,n){return e&&bj(t.prototype,e),n&&bj(t,n),t},Ej=HM((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e})),Tj=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},Cj=function(t,e){return!e||"object"!==Ej(e)&&"function"!=typeof e?Tj(t):e},Sj=HM((function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e})),Ij=HM((function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e})),xj=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ij(t,e)},Nj=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};Object.prototype.hasOwnProperty;var kj,Aj=Array.isArray,Pj="object"==typeof WM&&WM&&WM.Object===Object&&WM,Oj="object"==typeof self&&self&&self.Object===Object&&self,Rj=Pj||Oj||Function("return this")(),Dj=Rj.Symbol,Lj=Object.prototype,Fj=Lj.hasOwnProperty,Mj=Lj.toString,jj=Dj?Dj.toStringTag:void 0,Uj=Object.prototype.toString,Vj=Dj?Dj.toStringTag:void 0,qj=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Vj&&Vj in Object(t)?function(t){var e=Fj.call(t,jj),n=t[jj];try{t[jj]=void 0;var r=!0}catch(t){}var i=Mj.call(t);return r&&(e?t[jj]=n:delete t[jj]),i}(t):function(t){return Uj.call(t)}(t)},Bj=function(t){return null!=t&&"object"==typeof t},Wj=function(t){return"symbol"==typeof t||Bj(t)&&"[object Symbol]"==qj(t)},zj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hj=/^\w*$/,Qj=function(t,e){if(Aj(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Wj(t))||Hj.test(t)||!zj.test(t)||null!=e&&t in Object(e)},Gj=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Yj=function(t){if(!Gj(t))return!1;var e=qj(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Kj=Rj["__core-js_shared__"],$j=(kj=/[^.]+$/.exec(Kj&&Kj.keys&&Kj.keys.IE_PROTO||""))?"Symbol(src)_1."+kj:"",Xj=Function.prototype.toString,Jj=function(t){if(null!=t){try{return Xj.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Zj=/^\[object .+?Constructor\]$/,tU=Function.prototype,eU=Object.prototype,nU=tU.toString,rU=eU.hasOwnProperty,iU=RegExp("^"+nU.call(rU).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oU=function(t){return!(!Gj(t)||(e=t,$j&&$j in e))&&(Yj(t)?iU:Zj).test(Jj(t));var e},sU=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return oU(n)?n:void 0},aU=sU(Object,"create"),uU=Object.prototype.hasOwnProperty,cU=Object.prototype.hasOwnProperty;function lU(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}lU.prototype.clear=function(){this.__data__=aU?aU(null):{},this.size=0},lU.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},lU.prototype.get=function(t){var e=this.__data__;if(aU){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return uU.call(e,t)?e[t]:void 0},lU.prototype.has=function(t){var e=this.__data__;return aU?void 0!==e[t]:cU.call(e,t)},lU.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=aU&&void 0===e?"__lodash_hash_undefined__":e,this};var hU=lU,fU=function(t,e){return t===e||t!=t&&e!=e},pU=function(t,e){for(var n=t.length;n--;)if(fU(t[n][0],e))return n;return-1},dU=Array.prototype.splice;function yU(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}yU.prototype.clear=function(){this.__data__=[],this.size=0},yU.prototype.delete=function(t){var e=this.__data__,n=pU(e,t);return!(n<0||(n==e.length-1?e.pop():dU.call(e,n,1),--this.size,0))},yU.prototype.get=function(t){var e=this.__data__,n=pU(e,t);return n<0?void 0:e[n][1]},yU.prototype.has=function(t){return pU(this.__data__,t)>-1},yU.prototype.set=function(t,e){var n=this.__data__,r=pU(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var vU=yU,gU=sU(Rj,"Map"),mU=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function _U(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_U.prototype.clear=function(){this.size=0,this.__data__={hash:new hU,map:new(gU||vU),string:new hU}},_U.prototype.delete=function(t){var e=mU(this,t).delete(t);return this.size-=e?1:0,e},_U.prototype.get=function(t){return mU(this,t).get(t)},_U.prototype.has=function(t){return mU(this,t).has(t)},_U.prototype.set=function(t,e){var n=mU(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var bU=_U;function wU(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(wU.Cache||bU),n}wU.Cache=bU;var EU,TU,CU,SU,IU=wU,xU=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,NU=/\\(\\)?/g,kU=(EU=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(xU,(function(t,n,r,i){e.push(r?i.replace(NU,"$1"):n||t)})),e},TU=IU(EU,(function(t){return 500===CU.size&&CU.clear(),t})),CU=TU.cache,TU),AU=kU,PU=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},OU=Dj?Dj.prototype:void 0,RU=OU?OU.toString:void 0,DU=function t(e){if("string"==typeof e)return e;if(Aj(e))return PU(e,t)+"";if(Wj(e))return RU?RU.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},LU=function(t){return null==t?"":DU(t)},FU=function(t,e){return Aj(t)?t:Qj(t,e)?[t]:AU(LU(t))},MU=function(t){return Bj(t)&&"[object Arguments]"==qj(t)},jU=Object.prototype,UU=jU.hasOwnProperty,VU=jU.propertyIsEnumerable,qU=MU(function(){return arguments}())?MU:function(t){return Bj(t)&&UU.call(t,"callee")&&!VU.call(t,"callee")},BU=qU,WU=/^(?:0|[1-9]\d*)$/,zU=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&WU.test(t))&&t>-1&&t%1==0&&t<e},HU=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},QU=function(t){if("string"==typeof t||Wj(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},GU=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},YU=function(t,e){for(var n=0,r=(e=FU(e,t)).length;null!=t&&n<r;)t=t[QU(e[n++])];return n&&n==r?t:void 0},KU=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o},$U=function(t){return t},XU=Math.max,JU=function(t,e,n){return e=XU(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=XU(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),GU(t,this,a)}},ZU=function(t){return function(){return t}},tV=function(){try{var t=sU(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),eV=tV,nV=eV?function(t,e){return eV(t,"toString",{configurable:!0,enumerable:!1,value:ZU(e),writable:!0})}:$U,rV=nV,iV=Date.now,oV=function(t){var e=0,n=0;return function(){var r=iV(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},sV=oV(rV),aV=function(t,e){return sV(JU(t,e,$U),t+"")},uV=aV((function(t,e,n){var r,i,o=null==(t=function(t,e){return e.length<2?t:YU(t,KU(e,0,-1))}(t,e=FU(e,t)))?t:t[QU((r=e,i=null==r?0:r.length,i?r[i-1]:void 0))];return null==o?void 0:GU(o,t,n)})),cV=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Nj(t,e,n[e])}))}return t},lV=/^\s+|\s+$/g,hV=/^[-+]0x[0-9a-f]+$/i,fV=/^0b[01]+$/i,pV=/^0o[0-7]+$/i,dV=parseInt,yV=function(t){if("number"==typeof t)return t;if(Wj(t))return NaN;if(Gj(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Gj(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(lV,"");var n=fV.test(t);return n||pV.test(t)?dV(t.slice(2),n?2:8):hV.test(t)?NaN:+t},vV=function(t){return t?Infinity===(t=yV(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},gV=function(t){var e=vV(t),n=e%1;return e==e?n?e-n:e:0},mV=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),s=o.length;s--;){var a=o[SU?s:++r];if(!1===e(i[a],a,i))break}return t},_V=function(){return!1},bV=HM((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?Rj.Buffer:void 0,o=(i?i.isBuffer:void 0)||_V;t.exports=o})),wV={};wV["[object Float32Array]"]=wV["[object Float64Array]"]=wV["[object Int8Array]"]=wV["[object Int16Array]"]=wV["[object Int32Array]"]=wV["[object Uint8Array]"]=wV["[object Uint8ClampedArray]"]=wV["[object Uint16Array]"]=wV["[object Uint32Array]"]=!0,wV["[object Arguments]"]=wV["[object Array]"]=wV["[object ArrayBuffer]"]=wV["[object Boolean]"]=wV["[object DataView]"]=wV["[object Date]"]=wV["[object Error]"]=wV["[object Function]"]=wV["[object Map]"]=wV["[object Number]"]=wV["[object Object]"]=wV["[object RegExp]"]=wV["[object Set]"]=wV["[object String]"]=wV["[object WeakMap]"]=!1;var EV=function(t){return function(e){return t(e)}},TV=HM((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n&&Pj.process,o=function(){try{return r&&r.require&&r.require("util").types||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o})),CV=TV&&TV.isTypedArray,SV=CV?EV(CV):function(t){return Bj(t)&&HU(t.length)&&!!wV[qj(t)]},IV=Object.prototype.hasOwnProperty,xV=function(t,e){var n=Aj(t),r=!n&&BU(t),i=!n&&!r&&bV(t),o=!n&&!r&&!i&&SV(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=a.length;for(var c in t)!e&&!IV.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||zU(c,u))||a.push(c);return a},NV=Object.prototype,kV=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||NV)},AV=function(t,e){return function(n){return t(e(n))}},PV=AV(Object.keys,Object),OV=Object.prototype.hasOwnProperty,RV=function(t){if(!kV(t))return PV(t);var e=[];for(var n in Object(t))OV.call(t,n)&&"constructor"!=n&&e.push(n);return e},DV=function(t){return null!=t&&HU(t.length)&&!Yj(t)},LV=function(t){return DV(t)?xV(t):RV(t)},FV=function(t,e){return t&&mV(t,e,LV)},MV=function(t,e){return function(n,r){if(null==n)return n;if(!DV(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}(FV);function jV(t){var e=this.__data__=new vU(t);this.size=e.size}jV.prototype.clear=function(){this.__data__=new vU,this.size=0},jV.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},jV.prototype.get=function(t){return this.__data__.get(t)},jV.prototype.has=function(t){return this.__data__.has(t)},jV.prototype.set=function(t,e){var n=this.__data__;if(n instanceof vU){var r=n.__data__;if(!gU||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new bU(r)}return n.set(t,e),this.size=n.size,this};var UV=jV;function VV(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new bU;++e<n;)this.add(t[e])}VV.prototype.add=VV.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},VV.prototype.has=function(t){return this.__data__.has(t)};var qV=VV,BV=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},WV=function(t,e){return t.has(e)},zV=function(t,e,n,r,i,o){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,h=!0,f=2&n?new qV:void 0;for(o.set(t,e),o.set(e,t);++l<a;){var p=t[l],d=e[l];if(r)var y=s?r(d,p,l,e,t,o):r(p,d,l,t,e,o);if(void 0!==y){if(y)continue;h=!1;break}if(f){if(!BV(e,(function(t,e){if(!WV(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){h=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h},HV=Rj.Uint8Array,QV=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},GV=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},YV=Dj?Dj.prototype:void 0,KV=YV?YV.valueOf:void 0,$V=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},XV=function(t,e,n){var r=e(t);return Aj(t)?r:$V(r,n(t))},JV=function(){return[]},ZV=Object.prototype.propertyIsEnumerable,tq=Object.getOwnPropertySymbols,eq=tq?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}(tq(t),(function(e){return ZV.call(t,e)})))}:JV,nq=eq,rq=function(t){return XV(t,LV,nq)},iq=Object.prototype.hasOwnProperty,oq=sU(Rj,"DataView"),sq=sU(Rj,"Promise"),aq=sU(Rj,"Set"),uq=sU(Rj,"WeakMap"),cq="[object Map]",lq="[object Promise]",hq="[object Set]",fq="[object WeakMap]",pq="[object DataView]",dq=Jj(oq),yq=Jj(gU),vq=Jj(sq),gq=Jj(aq),mq=Jj(uq),_q=qj;(oq&&_q(new oq(new ArrayBuffer(1)))!=pq||gU&&_q(new gU)!=cq||sq&&_q(sq.resolve())!=lq||aq&&_q(new aq)!=hq||uq&&_q(new uq)!=fq)&&(_q=function(t){var e=qj(t),n="[object Object]"==e?t.constructor:void 0,r=n?Jj(n):"";if(r)switch(r){case dq:return pq;case yq:return cq;case vq:return lq;case gq:return hq;case mq:return fq}return e});var bq=_q,wq="[object Arguments]",Eq="[object Array]",Tq="[object Object]",Cq=Object.prototype.hasOwnProperty,Sq=function(t,e,n,r,i,o){var s=Aj(t),a=Aj(e),u=s?Eq:bq(t),c=a?Eq:bq(e),l=(u=u==wq?Tq:u)==Tq,h=(c=c==wq?Tq:c)==Tq,f=u==c;if(f&&bV(t)){if(!bV(e))return!1;s=!0,l=!1}if(f&&!l)return o||(o=new UV),s||SV(t)?zV(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new HV(t),new HV(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return fU(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=QV;case"[object Set]":var u=1&r;if(a||(a=GV),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var l=zV(a(t),a(e),r,i,o,s);return s.delete(t),l;case"[object Symbol]":if(KV)return KV.call(t)==KV.call(e)}return!1}(t,e,u,n,r,i,o);if(!(1&n)){var p=l&&Cq.call(t,"__wrapped__"),d=h&&Cq.call(e,"__wrapped__");if(p||d){var y=p?t.value():t,v=d?e.value():e;return o||(o=new UV),i(y,v,n,r,o)}}return!!f&&(o||(o=new UV),function(t,e,n,r,i,o){var s=1&n,a=rq(t),u=a.length;if(u!=rq(e).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in e:iq.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=s;++c<u;){var d=t[l=a[c]],y=e[l];if(r)var v=s?r(y,d,l,e,t,o):r(d,y,l,t,e,o);if(!(void 0===v?d===y||i(d,y,n,r,o):v)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var g=t.constructor,m=e.constructor;g==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))},Iq=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Bj(e)&&!Bj(n)?e!=e&&n!=n:Sq(e,n,r,i,t,o))},xq=function(t){return t==t&&!Gj(t)},Nq=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},kq=function(t){var e=function(t){for(var e=LV(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,xq(i)]}return e}(t);return 1==e.length&&e[0][2]?Nq(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=n[i])[0],c=t[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var h=new UV;if(r)var f=r(c,l,u,t,e,h);if(!(void 0===f?Iq(l,c,3,r,h):f))return!1}}return!0}(n,t,e)}},Aq=function(t,e){return null!=t&&e in Object(t)},Pq=function(t,e){return null!=t&&function(t,e,n){for(var r=-1,i=(e=FU(e,t)).length,o=!1;++r<i;){var s=QU(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&HU(i)&&zU(s,i)&&(Aj(t)||BU(t))}(t,e,Aq)},Oq=function(t,e){return Qj(t)&&xq(e)?Nq(QU(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:YU(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?Pq(n,t):Iq(e,r,3)}},Rq=function(t){return Qj(t)?function(t){return function(e){return null==e?void 0:e[t]}}(QU(t)):function(t){return function(e){return YU(e,t)}}(t)},Dq=function(t){return"function"==typeof t?t:null==t?$U:"object"==typeof t?Aj(t)?Oq(t[0],t[1]):kq(t):Rq(t)};Object.prototype.hasOwnProperty;var Lq=function(t){return t!=t},Fq=function(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}(t,Lq,n)},Mq=function(t,e){return!(null==t||!t.length)&&Fq(t,e,0)>-1},jq=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1},Uq=Math.min,Vq=function(t){return Bj(t)&&DV(t)},qq=function(t){return Vq(t)?t:[]};aV((function(t){var e=PU(t,qq);return e.length&&e[0]===t[0]?function(t,e,n){for(var r=n?jq:Mq,i=t[0].length,o=t.length,s=o,a=Array(o),u=1/0,c=[];s--;){var l=t[s];s&&e&&(l=PU(l,EV(e))),u=Uq(l.length,u),a[s]=!n&&(e||i>=120&&l.length>=120)?new qV(s&&l):void 0}l=t[0];var h=-1,f=a[0];t:for(;++h<i&&c.length<u;){var p=l[h],d=e?e(p):p;if(p=n||0!==p?p:0,!(f?WV(f,d):r(c,d,n))){for(s=o;--s;){var y=a[s];if(!(y?WV(y,d):r(t[s],d,n)))continue t}f&&f.push(d),c.push(p)}}return c}(e):[]}));var Bq=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},Wq=function(t){function e(){var t,n;_j(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n=Cj(this,(t=Sj(e)).call.apply(t,[this].concat(i))),Nj(Tj(n),"trySetState",(function(t,e){var r=Object.keys(t).reduce((function(e,r){return void 0!==n.props[r]||(e[r]=t[r]),e}),{});Object.keys(r).length>0&&n.setState(r,e)}));var s=n.constructor.autoControlledProps,a=uV(Tj(n),"getInitialAutoControlledState",n.props)||{},u=s.reduce((function(t,e){return t[e]=function(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e[t];if(void 0!==o)return o;if(i){var s=e[(r=t,"default".concat(r[0].toUpperCase()+r.slice(1)))];if(void 0!==s)return s;if(n){var a=n[t];if(void 0!==a)return a}}return"checked"!==t&&("value"===t?e.multiple?[]:"":void 0)}(e,n.props,a,!0),t}),{});return n.state=cV({},a,u),n}return xj(e,t),wj(e,[{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=this.constructor.autoControlledProps.reduce((function(e,n){return!function(t){return void 0===t}(t[n])&&(e[n]=t[n]),e}),{});Object.keys(e).length>0&&this.setState(e)}}]),e}(H_.Component),zq=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},Hq=function(t,e,n){"__proto__"==e&&eV?eV(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Qq=function(t,e){var n;return MV(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n},Gq=function(t,e,n){if(!Gj(n))return!1;var r=typeof e;return!!("number"==r?DV(n)&&zU(e,n.length):"string"==r&&e in n)&&fU(n[e],t)},Yq=function(t,e,n){var r=Aj(t)?BV:Qq;return n&&Gq(t,e,n)&&(e=void 0),r(t,Dq(e))},Kq=function(t){return null==t||Array.isArray(t)&&0===t.length},$q={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"},Xq=function(t,e){return t&&e},Jq=function(t){return function(t){if(Array.isArray(t))return zq(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return zq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zq(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},Zq=HM((function(t,e){e.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},e.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},e.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},e.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},e.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},e.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},e.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},e.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},e.realToAlias=function(){var t=Object.prototype.hasOwnProperty,n=e.aliasToReal,r={};for(var i in n){var o=n[i];t.call(r,o)?r[o].push(i):r[o]=[i]}return r}(),e.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},e.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},e.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}})),tB=(Zq.aliasToReal,Zq.aryMethod,Zq.aryRearg,Zq.iterateeAry,Zq.iterateeRearg,Zq.methodRearg,Zq.methodSpread,Zq.mutate,Zq.realToAlias,Zq.remap,Zq.skipFixed,Zq.skipRearg,{}),eB=Array.prototype.push;function nB(t,e){return 2==e?function(e,n){return t(e,n)}:function(e){return t(e)}}function rB(t){for(var e=t?t.length:0,n=Array(e);e--;)n[e]=t[e];return n}function iB(t,e){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var i=r[0]=e.apply(void 0,r);return t.apply(void 0,r),i}}}var oB=function t(e,n,r,i){var o="function"==typeof n,s=n===Object(n);if(s&&(i=r,r=n,n=void 0),null==r)throw new TypeError;i||(i={});var a={cap:!("cap"in i)||i.cap,curry:!("curry"in i)||i.curry,fixed:!("fixed"in i)||i.fixed,immutable:!("immutable"in i)||i.immutable,rearg:!("rearg"in i)||i.rearg},u=o?r:tB,c="curry"in i&&i.curry,l="fixed"in i&&i.fixed,h="rearg"in i&&i.rearg,f=o?r.runInContext():void 0,p=o?r:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},d=p.ary,y=p.assign,v=p.clone,g=p.curry,m=p.forEach,_=p.isArray,b=p.isError,w=p.isFunction,E=p.isWeakMap,T=p.keys,C=p.rearg,S=p.toInteger,I=p.toPath,x=T(Zq.aryMethod),N={castArray:function(t){return function(){var e=arguments[0];return _(e)?t(rB(e)):t.apply(void 0,arguments)}},iteratee:function(t){return function(){var e=arguments[1],n=t(arguments[0],e),r=n.length;return a.cap&&"number"==typeof e?(e=e>2?e-2:1,r&&r<=e?n:nB(n,e)):n}},mixin:function(t){return function(e){var n=this;if(!w(n))return t(n,Object(e));var r=[];return m(T(e),(function(t){w(e[t])&&r.push([t,n.prototype[t]])})),t(n,Object(e)),m(r,(function(t){var e=t[1];w(e)?n.prototype[t[0]]=e:delete n.prototype[t[0]]})),n}},nthArg:function(t){return function(e){var n=e<0?1:S(e)+1;return g(t(e),n)}},rearg:function(t){return function(e,n){var r=n?n.length:0;return g(t(e,n),r)}},runInContext:function(n){return function(r){return t(e,n(r),i)}}};function k(t,e,n){if(a.fixed&&(l||!Zq.skipFixed[t])){var r=Zq.methodSpread[t],i=r&&r.start;return void 0===i?d(e,n):function(t,e){return function(){for(var n=arguments.length,r=n-1,i=Array(n);n--;)i[n]=arguments[n];var o=i[e],s=i.slice(0,e);return o&&eB.apply(s,o),e!=r&&eB.apply(s,i.slice(e+1)),t.apply(this,s)}}(e,i)}return e}function A(t,e,n){return a.rearg&&n>1&&(h||!Zq.skipRearg[t])?C(e,Zq.methodRearg[t]||Zq.aryRearg[n]):e}function P(t,e){for(var n=-1,r=(e=I(e)).length,i=r-1,o=v(Object(t)),s=o;null!=s&&++n<r;){var a=e[n],u=s[a];null==u||w(u)||b(u)||E(u)||(s[a]=v(n==i?u:Object(u))),s=s[a]}return o}function O(e,n){var r=Zq.aliasToReal[e]||e,s=Zq.remap[r]||r,a=i;return function(e){var i=o?f:p,u=o?f[s]:n,c=y(y({},a),e);return t(i,r,u,c)}}function R(t,e){return function(){var n=arguments.length;if(!n)return t();for(var r=Array(n);n--;)r[n]=arguments[n];var i=a.rearg?0:n-1;return r[i]=e(r[i]),t.apply(void 0,r)}}function D(t,e,n){var r,i=Zq.aliasToReal[t]||t,s=e,u=N[i];return u?s=u(e):a.immutable&&(Zq.mutate.array[i]?s=iB(e,rB):Zq.mutate.object[i]?s=iB(e,function(t){return function(e){return t({},e)}}(e)):Zq.mutate.set[i]&&(s=iB(e,P))),m(x,(function(t){return m(Zq.aryMethod[t],(function(e){if(i==e){var n=Zq.methodSpread[i],u=n&&n.afterRearg;return r=u?k(i,A(i,s,t),t):A(i,k(i,s,t),t),r=function(t,e,n){return c||a.curry&&n>1?g(e,n):e}(0,r=function(t,e){if(a.cap){var n=Zq.iterateeRearg[t];if(n)return function(t,e){return R(t,(function(t){var n=e.length;return function(t,e){return 2==e?function(e,n){return t.apply(void 0,arguments)}:function(e){return t.apply(void 0,arguments)}}(C(nB(t,n),e),n)}))}(e,n);var r=!o&&Zq.iterateeAry[t];if(r)return function(t,e){return R(t,(function(t){return"function"==typeof t?nB(t,e):t}))}(e,r)}return e}(i,r),t),!1}})),!r})),r||(r=s),r==e&&(r=c?g(r,1):function(){return e.apply(this,arguments)}),r.convert=O(i,e),r.placeholder=e.placeholder=n,r}if(!s)return D(n,r,u);var L=r,F=[];return m(x,(function(t){m(Zq.aryMethod[t],(function(t){var e=L[Zq.remap[t]||t];e&&F.push([t,D(t,e,L)])}))})),m(T(L),(function(t){var e=L[t];if("function"==typeof e){for(var n=F.length;n--;)if(F[n][0]==t)return;e.convert=O(t,e),F.push([t,e])}})),m(F,(function(t){L[t[0]]=t[1]})),L.convert=function(t){return L.runInContext.convert(t)(void 0)},L.placeholder=L,m(T(L),(function(t){m(Zq.realToAlias[t]||[],(function(e){L[e]=L[t]}))})),L},sB=uq&&new uq,aB=sB?function(t,e){return sB.set(t,e),t}:$U,uB=aB,cB=Object.create,lB=function(){function t(){}return function(e){if(!Gj(e))return{};if(cB)return cB(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),hB=lB,fB=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=hB(t.prototype),r=t.apply(n,e);return Gj(r)?r:n}},pB=Math.max,dB=function(t,e,n,r){for(var i=-1,o=t.length,s=n.length,a=-1,u=e.length,c=pB(o-s,0),l=Array(u+c),h=!r;++a<u;)l[a]=e[a];for(;++i<s;)(h||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[a++]=t[i++];return l},yB=Math.max,vB=function(t,e,n,r){for(var i=-1,o=t.length,s=-1,a=n.length,u=-1,c=e.length,l=yB(o-a,0),h=Array(l+c),f=!r;++i<l;)h[i]=t[i];for(var p=i;++u<c;)h[p+u]=e[u];for(;++s<a;)(f||i<o)&&(h[p+n[s]]=t[i++]);return h},gB=function(){};function mB(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}mB.prototype=hB(gB.prototype),mB.prototype.constructor=mB;var _B=mB,bB=function(){},wB=sB?function(t){return sB.get(t)}:bB,EB=wB,TB={},CB=Object.prototype.hasOwnProperty,SB=function(t){for(var e=t.name+"",n=TB[e],r=CB.call(TB,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e};function IB(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}IB.prototype=hB(gB.prototype),IB.prototype.constructor=IB;var xB=IB,NB=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},kB=Object.prototype.hasOwnProperty;function AB(t){if(Bj(t)&&!Aj(t)&&!(t instanceof _B)){if(t instanceof xB)return t;if(kB.call(t,"__wrapped__"))return function(t){if(t instanceof _B)return t.clone();var e=new xB(t.__wrapped__,t.__chain__);return e.__actions__=NB(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}(t)}return new xB(t)}AB.prototype=gB.prototype,AB.prototype.constructor=AB;var PB=AB,OB=function(t){var e=SB(t),n=PB[e];if("function"!=typeof n||!(e in _B.prototype))return!1;if(t===n)return!0;var r=EB(n);return!!r&&t===r[0]},RB=oV(uB),DB=/\{\n\/\* \[wrapped with (.+)\] \*/,LB=/,? & /,FB=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,MB=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],jB=function(t,e,n){var r=e+"";return sV(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(FB,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Bq(MB,(function(n){var r="_."+n[0];e&n[1]&&!Mq(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(DB);return e?e[1].split(LB):[]}(r),n)))},UB=function(t,e,n,r,i,o,s,a,u,c){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var h=[t,e,i,l?o:void 0,l?s:void 0,l?void 0:o,l?void 0:s,a,u,c],f=n.apply(void 0,h);return OB(t)&&RB(f,h),f.placeholder=r,jB(f,t,e)},VB=function(t){return t.placeholder},qB=Math.min,BB="__lodash_placeholder__",WB=function(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==BB||(t[n]=BB,o[i++]=n)}return o},zB=function t(e,n,r,i,o,s,a,u,c,l){var h=128&n,f=1&n,p=2&n,d=24&n,y=512&n,v=p?void 0:fB(e);return function g(){for(var m=arguments.length,_=Array(m),b=m;b--;)_[b]=arguments[b];if(d)var w=VB(g),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(_,w);if(i&&(_=dB(_,i,o,d)),s&&(_=vB(_,s,a,d)),m-=E,d&&m<l){var T=WB(_,w);return UB(e,n,t,g.placeholder,r,_,T,u,c,l-m)}var C=f?r:this,S=p?C[e]:e;return m=_.length,u?_=function(t,e){for(var n=t.length,r=qB(e.length,n),i=NB(t);r--;){var o=e[r];t[r]=zU(o,n)?i[o]:void 0}return t}(_,u):y&&m>1&&_.reverse(),h&&c<m&&(_.length=c),this&&this!==Rj&&this instanceof g&&(S=v||fB(S)),S.apply(C,_)}},HB="__lodash_placeholder__",QB=Math.min,GB=Math.max,YB=function(t,e,n,r,i,o,s,a){var u=2&e;if(!u&&"function"!=typeof t)throw new TypeError("Expected a function");var c=r?r.length:0;if(c||(e&=-97,r=i=void 0),s=void 0===s?s:GB(gV(s),0),a=void 0===a?a:gV(a),c-=i?i.length:0,64&e){var l=r,h=i;r=i=void 0}var f=u?void 0:EB(t),p=[t,e,n,r,i,l,h,o,s,a];if(f&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var a=e[3];if(a){var u=t[3];t[3]=u?dB(u,a,e[4]):a,t[4]=u?WB(t[3],HB):e[4]}(a=e[5])&&(u=t[5],t[5]=u?vB(u,a,e[6]):a,t[6]=u?WB(t[5],HB):e[6]),(a=e[7])&&(t[7]=a),128&r&&(t[8]=null==t[8]?e[8]:QB(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(p,f),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],!(a=p[9]=void 0===p[9]?u?0:t.length:GB(p[9]-c,0))&&24&e&&(e&=-25),e&&1!=e)d=8==e||16==e?function(t,e,n){var r=fB(t);return function i(){for(var o=arguments.length,s=Array(o),a=o,u=VB(i);a--;)s[a]=arguments[a];var c=o<3&&s[0]!==u&&s[o-1]!==u?[]:WB(s,u);return(o-=c.length)<n?UB(t,e,zB,i.placeholder,void 0,s,c,void 0,void 0,n-o):GU(this&&this!==Rj&&this instanceof i?r:t,this,s)}}(t,e,a):32!=e&&33!=e||i.length?zB.apply(void 0,p):function(t,e,n,r){var i=1&e,o=fB(t);return function e(){for(var s=-1,a=arguments.length,u=-1,c=r.length,l=Array(c+a),h=this&&this!==Rj&&this instanceof e?o:t;++u<c;)l[u]=r[u];for(;a--;)l[u++]=arguments[++s];return GU(h,i?n:this,l)}}(t,e,n,r);else var d=function(t,e,n){var r=1&e,i=fB(t);return function e(){return(this&&this!==Rj&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return jB((f?uB:RB)(d,p),t,e)},KB=Object.prototype.hasOwnProperty,$B=function(t,e,n){var r=t[e];KB.call(t,e)&&fU(r,n)&&(void 0!==n||e in t)||Hq(t,e,n)},XB=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=r?r(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),i?Hq(n,a,u):$B(n,a,u)}return n},JB=function(t,e){return t&&XB(e,LV(e),t)},ZB=Object.prototype.hasOwnProperty,tW=function(t){if(!Gj(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=kV(t),n=[];for(var r in t)("constructor"!=r||!e&&ZB.call(t,r))&&n.push(r);return n},eW=function(t){return DV(t)?xV(t,!0):tW(t)},nW=HM((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?Rj.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=o?o(n):new t.constructor(n);return t.copy(r),r}})),rW=AV(Object.getPrototypeOf,Object),iW=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)$V(e,nq(t)),t=rW(t);return e}:JV,oW=iW,sW=function(t){return XV(t,eW,oW)},aW=Object.prototype.hasOwnProperty,uW=function(t){var e=new t.constructor(t.byteLength);return new HV(e).set(new HV(t)),e},cW=/\w*$/,lW=Dj?Dj.prototype:void 0,hW=lW?lW.valueOf:void 0,fW=function(t,e){var n=e?uW(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},pW=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return uW(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var n=e?uW(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return fW(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,cW.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return function(t){return hW?Object(hW.call(t)):{}}(t)}},dW=function(t){return"function"!=typeof t.constructor||kV(t)?{}:hB(rW(t))},yW=TV&&TV.isMap,vW=yW?EV(yW):function(t){return Bj(t)&&"[object Map]"==bq(t)},gW=TV&&TV.isSet,mW=gW?EV(gW):function(t){return Bj(t)&&"[object Set]"==bq(t)},_W="[object Arguments]",bW="[object Function]",wW="[object Object]",EW={};EW[_W]=EW["[object Array]"]=EW["[object ArrayBuffer]"]=EW["[object DataView]"]=EW["[object Boolean]"]=EW["[object Date]"]=EW["[object Float32Array]"]=EW["[object Float64Array]"]=EW["[object Int8Array]"]=EW["[object Int16Array]"]=EW["[object Int32Array]"]=EW["[object Map]"]=EW["[object Number]"]=EW[wW]=EW["[object RegExp]"]=EW["[object Set]"]=EW["[object String]"]=EW["[object Symbol]"]=EW["[object Uint8Array]"]=EW["[object Uint8ClampedArray]"]=EW["[object Uint16Array]"]=EW["[object Uint32Array]"]=!0,EW["[object Error]"]=EW[bW]=EW["[object WeakMap]"]=!1;var TW=function t(e,n,r,i,o,s){var a,u=1&n,c=2&n,l=4&n;if(r&&(a=o?r(e,i,o,s):r(e)),void 0!==a)return a;if(!Gj(e))return e;var h=Aj(e);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&aW.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!u)return NB(e,a)}else{var f=bq(e),p=f==bW||"[object GeneratorFunction]"==f;if(bV(e))return nW(e,u);if(f==wW||f==_W||p&&!o){if(a=c||p?{}:dW(e),!u)return c?function(t,e){return XB(t,oW(t),e)}(e,function(t,e){return t&&XB(e,eW(e),t)}(a,e)):function(t,e){return XB(t,nq(t),e)}(e,JB(a,e))}else{if(!EW[f])return o?e:{};a=pW(e,f,u)}}s||(s=new UV);var d=s.get(e);if(d)return d;s.set(e,a),mW(e)?e.forEach((function(i){a.add(t(i,n,r,i,e,s))})):vW(e)&&e.forEach((function(i,o){a.set(o,t(i,n,r,o,e,s))}));var y=l?c?sW:rq:c?keysIn:LV,v=h?void 0:y(e);return Bq(v||e,(function(i,o){v&&(i=e[o=i]),$B(a,o,t(i,n,r,o,e,s))})),a};function CW(t,e,n){var r=YB(t,8,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=CW.placeholder,r}CW.placeholder={};var SW=CW,IW=Function.prototype,xW=Object.prototype,NW=IW.toString,kW=xW.hasOwnProperty,AW=NW.call(Object),PW=function(t){if(!Bj(t)||"[object Object]"!=qj(t))return!1;var e=rW(t);if(null===e)return!0;var n=kW.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&NW.call(n)==AW},OW=Dj?Dj.isConcatSpreadable:void 0,RW=function(t){return Aj(t)||BU(t)||!!(OW&&t&&t[OW])},DW=function t(e,n,r,i,o){var s=-1,a=e.length;for(r||(r=RW),o||(o=[]);++s<a;){var u=e[s];n>0&&r(u)?n>1?t(u,n-1,r,i,o):$V(o,u):i||(o[o.length]=u)}return o},LW=function(t){return null!=t&&t.length?DW(t,1):[]},FW=function(t){return sV(JU(t,void 0,LW),t+"")},MW=FW((function(t,e){return YB(t,256,void 0,void 0,void 0,e)})),jW={ary:function(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,YB(t,128,void 0,void 0,void 0,void 0,e)},assign:JB,clone:function(t){return TW(t,4)},curry:SW,forEach:Bq,isArray:Aj,isError:function(t){if(!Bj(t))return!1;var e=qj(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!PW(t)},isFunction:Yj,isWeakMap:function(t){return Bj(t)&&"[object WeakMap]"==bq(t)},iteratee:function(t){return Dq("function"==typeof t?t:TW(t,1))},keys:RV,rearg:MW,toInteger:gV,toPath:function(t){return Aj(t)?PU(t,QU):Wj(t)?[t]:NB(AU(LU(t)))}},UW=function(t,e,n){return oB(jW,t,e,n)},VW=function(t,e,n,r){var i=-1,o=Mq,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=PU(e,EV(n))),r?(o=jq,s=!1):e.length>=200&&(o=WV,s=!1,e=new qV(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,s&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u};UW("difference",aV((function(t,e){return Vq(t)?VW(t,DW(e,1,Vq,!0)):[]}))).placeholder=tB;var qW=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),BW="\\ud800-\\udfff",WW="["+BW+"]",zW="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",HW="\\ud83c[\\udffb-\\udfff]",QW="[^"+BW+"]",GW="(?:\\ud83c[\\udde6-\\uddff]){2}",YW="[\\ud800-\\udbff][\\udc00-\\udfff]",KW="(?:"+zW+"|"+HW+")?",$W="[\\ufe0e\\ufe0f]?",XW=$W+KW+"(?:\\u200d(?:"+[QW,GW,YW].join("|")+")"+$W+KW+")*",JW="(?:"+[QW+zW+"?",zW,GW,YW,WW].join("|")+")",ZW=RegExp(HW+"(?="+HW+")|"+JW+XW,"g"),tz=function(t){return function(t){return qW.test(t)}(t)?function(t){return t.match(ZW)||[]}(t):function(t){return t.split("")}(t)},ez=/^\s+|\s+$/g;UW("trim",(function(t,e,n){if((t=LU(t))&&(n||void 0===e))return t.replace(ez,"");if(!t||!(e=DU(e)))return t;var r=tz(t),i=tz(e),o=function(t,e){for(var n=-1,r=t.length;++n<r&&Fq(e,t[n],0)>-1;);return n}(r,i),s=function(t,e){for(var n=t.length;n--&&Fq(e,t[n],0)>-1;);return n}(r,i)+1;return function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:KU(t,e,n)}(r,o,s).join("")})).placeholder=tB;var nz={cap:!1,curry:!1,fixed:!1,immutable:!1,rearg:!1};UW("isObject",Gj,nz).placeholder=tB;var rz=function(t,e,n,r){if(!Gj(t))return t;for(var i=-1,o=(e=FU(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var u=QU(e[i]),c=n;if(i!=s){var l=a[u];void 0===(c=r?r(l,u,a):void 0)&&(c=Gj(l)?l:zU(e[i+1])?[]:{})}$B(a,u,c),a=a[u]}return t},iz=function(t,e){return function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=YU(t,s);n(a,s)&&rz(o,FU(s,t),a)}return o}(t,e,(function(e,n){return Pq(t,n)}))},oz=FW((function(t,e){return null==t?{}:iz(t,e)})),sz=oz;UW("pick",sz).placeholder=tB,UW("keys",LV,nz).placeholder=tB,UW("isPlainObject",PW,nz).placeholder=tB,UW("isFunction",Yj,nz).placeholder=tB;var az=UW("compact",(function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}),nz);az.placeholder=tB;var uz=function(t){return null==t};UW("isNil",uz,nz).placeholder=tB;UW("take",(function(t,e,n){return t&&t.length?(e=n||void 0===e?1:gV(e),KU(t,0,e<0?0:e)):[]})).placeholder=tB;var cz=function(t,e){var n=-1,r=DV(t)?Array(t.length):[];return MV(t,(function(t,i,o){r[++n]=e(t,i,o)})),r},lz=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Wj(t),s=void 0!==e,a=null===e,u=e==e,c=Wj(e);if(!a&&!c&&!o&&t>e||o&&s&&u&&!a&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0},hz=function(t,e,n){var r=-1;e=PU(e.length?e:[$U],EV(Dq));var i=cz(t,(function(t,n,i){return{criteria:PU(e,(function(e){return e(t)})),index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=lz(i[r],o[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))};UW("sortBy",aV((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Gq(t,e[0],e[1])?e=[]:n>2&&Gq(e[0],e[1],e[2])&&(e=[e[0]]),hz(t,DW(e,1),[])}))).placeholder=tB;UW("sum",(function(t){return t&&t.length?function(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}(t,$U):0}),nz).placeholder=tB;var fz=function(t,e){return t<e};UW("min",(function(t){return t&&t.length?function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(void 0===a?s==s&&!Wj(s):n(s,a)))var a=s,u=o}return u}(t,$U,fz):void 0}),nz).placeholder=tB;UW("map",(function(t,e){return(Aj(t)?PU:cz)(t,Dq(e))})).placeholder=tB;var pz=UW("flow",function(t){return FW((function(e){var n=e.length,r=n,i=xB.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!s&&"wrapper"==SB(o))var s=new xB([],!0)}for(r=s?r:n;++r<n;){o=e[r];var a=SB(o),u="wrapper"==a?EB(o):void 0;s=u&&OB(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?s[SB(u[0])].apply(s,u[3]):1==o.length&&OB(o)?s[a]():s.thru(o)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&Aj(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}());pz.placeholder=tB,UW("memoize",IU).placeholder=tB;var dz=G_().shape({current:G_().object}),yz=(G_().oneOfType([G_().func,dz]),HM((function(t){var e,n;n={canUseDOM:e=!("undefined"==typeof window||!window.document||!window.document.createElement),canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen},t.exports?t.exports=n:window.ExecutionEnvironment=n}))),vz=HM((function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(e){r(this,t),s(this,"handlers",void 0),this.handlers=e.slice(0)}return o(t,[{key:"addHandlers",value:function(e){for(var n=this.handlers.slice(0),r=e.length,i=0;i<r;i+=1)n.push(e[i]);return new t(n)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlers.length-1;if(e){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](t));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(t)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(e){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var o=this.handlers[i];-1===e.indexOf(o)&&n.push(o)}return new t(n)}}]),t}();function h(t){var e=new Map;return t.forEach((function(t,n){e.set(n,t)})),e}function f(t){return Array.isArray(t)?t:[t]}function p(t){return"document"===t?document:"window"===t?window:function(t){return null!==t&&"object"===n(t)&&t.hasOwnProperty("current")}(t)?t.current||document:t||document}var d=function(){function t(e,n){r(this,t),s(this,"handlerSets",void 0),s(this,"poolName",void 0),this.handlerSets=n,this.poolName=e}return o(t,[{key:"addHandlers",value:function(e,n){var r=h(this.handlerSets);if(r.has(e)){var i=r.get(e);r.set(e,i.addHandlers(n))}else r.set(e,new l(n));return new t(this.poolName,r)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlerSets.get(t),r="default"===this.poolName;n&&n.dispatchEvent(e,r)}},{key:"hasHandlers",value:function(t){if(!t)return this.handlerSets.size>0;var e=this.handlerSets.get(t);return!!e&&e.hasHandlers()}},{key:"removeHandlers",value:function(e,n){var r=h(this.handlerSets);if(!r.has(e))return new t(this.poolName,r);var i=r.get(e).removeHandlers(n);return i.hasHandlers()?r.set(e,i):r.delete(e),new t(this.poolName,r)}}]),t}();s(d,"createByType",(function(t,e,n){var r=new Map;return r.set(e,new l(n)),new d(t,r)}));var y=function(){function t(e){var n=this;r(this,t),s(this,"handlers",new Map),s(this,"pools",new Map),s(this,"target",void 0),s(this,"createEmitter",(function(t){return function(e){n.pools.forEach((function(n){n.dispatchEvent(t,e)}))}})),this.target=e}return o(t,[{key:"addHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t);this.pools.set(t,r.addHandlers(e,n))}else this.pools.set(t,d.createByType(t,e,n));this.handlers.has(e)||this.addTargetHandler(e)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t).removeHandlers(e,n);r.hasHandlers()?this.pools.set(t,r):this.pools.delete(t);var i=!1;this.pools.forEach((function(t){return i=i||t.hasHandlers(e)})),i||this.removeTargetHandler(e)}}},{key:"addTargetHandler",value:function(t){var e=this.createEmitter(t);this.handlers.set(t,e),this.target.addEventListener(t,e,!0)}},{key:"removeTargetHandler",value:function(t){this.handlers.has(t)&&(this.target.removeEventListener(t,this.handlers.get(t),!0),this.handlers.delete(t))}}]),t}(),v=function(){function t(){var e=this;r(this,t),s(this,"targets",new Map),s(this,"getTarget",(function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=p(t);if(e.targets.has(r))return e.targets.get(r);if(!n)return null;var i=new y(r);return e.targets.set(r,i),i})),s(this,"removeTarget",(function(t){e.targets.delete(p(t))}))}return o(t,[{key:"sub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(yz.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,s=void 0===o?"default":o;this.getTarget(i).addHandlers(s,t,f(e))}}},{key:"unsub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(yz.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,s=void 0===o?"default":o,a=this.getTarget(i,!1);a&&(a.removeHandlers(s,t,f(e)),a.hasHandlers()||this.removeTarget(i))}}}]),t}(),g=new v,m=function(t){function e(){return r(this,e),function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,u(e).apply(this,arguments))}return a(e,H_.PureComponent),o(e,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(t){this.unsubscribe(t),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;g.sub(e,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;g.unsub(e,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),e}();s(m,"defaultProps",{pool:"default",target:"document"}),m.propTypes={},e.instance=g,e.default=m}));zM(vz),vz.instance;var gz=HM((function(t,e){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(e){r(this,t),s(this,"handlers",void 0),this.handlers=e.slice(0)}return o(t,[{key:"addHandlers",value:function(e){for(var n=this.handlers.slice(0),r=e.length,i=0;i<r;i+=1)n.push(e[i]);return new t(n)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlers.length-1;if(e){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](t));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(t)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(e){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var o=this.handlers[i];-1===e.indexOf(o)&&n.push(o)}return new t(n)}}]),t}();function l(t){var e=new Map;return t.forEach((function(t,n){e.set(n,t)})),e}function h(t){return Array.isArray(t)?t:[t]}function f(t){return"document"===t?document:"window"===t?window:null!==(e=t)&&"object"===n(e)&&e.hasOwnProperty("current")?t.current||document:t||document;var e}var p=function(){function t(e,n){r(this,t),s(this,"handlerSets",void 0),s(this,"poolName",void 0),this.handlerSets=n,this.poolName=e}return o(t,[{key:"addHandlers",value:function(e,n){var r=l(this.handlerSets);if(r.has(e)){var i=r.get(e);r.set(e,i.addHandlers(n))}else r.set(e,new c(n));return new t(this.poolName,r)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlerSets.get(t),r="default"===this.poolName;n&&n.dispatchEvent(e,r)}},{key:"hasHandlers",value:function(t){if(!t)return this.handlerSets.size>0;var e=this.handlerSets.get(t);return!!e&&e.hasHandlers()}},{key:"removeHandlers",value:function(e,n){var r=l(this.handlerSets);if(!r.has(e))return new t(this.poolName,r);var i=r.get(e).removeHandlers(n);return i.hasHandlers()?r.set(e,i):r.delete(e),new t(this.poolName,r)}}]),t}();s(p,"createByType",(function(t,e,n){var r=new Map;return r.set(e,new c(n)),new p(t,r)}));var d=function(){function t(e){var n=this;r(this,t),s(this,"handlers",new Map),s(this,"pools",new Map),s(this,"target",void 0),s(this,"createEmitter",(function(t){return function(e){n.pools.forEach((function(n){n.dispatchEvent(t,e)}))}})),this.target=e}return o(t,[{key:"addHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t);this.pools.set(t,r.addHandlers(e,n))}else this.pools.set(t,p.createByType(t,e,n));this.handlers.has(e)||this.addTargetHandler(e)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t).removeHandlers(e,n);r.hasHandlers()?this.pools.set(t,r):this.pools.delete(t);var i=!1;this.pools.forEach((function(t){return i=i||t.hasHandlers(e)})),i||this.removeTargetHandler(e)}}},{key:"addTargetHandler",value:function(t){var e=this.createEmitter(t);this.handlers.set(t,e),this.target.addEventListener(t,e,!0)}},{key:"removeTargetHandler",value:function(t){this.handlers.has(t)&&(this.target.removeEventListener(t,this.handlers.get(t),!0),this.handlers.delete(t))}}]),t}(),y=function(){function t(){var e=this;r(this,t),s(this,"targets",new Map),s(this,"getTarget",(function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=f(t);if(e.targets.has(r))return e.targets.get(r);if(!n)return null;var i=new d(r);return e.targets.set(r,i),i})),s(this,"removeTarget",(function(t){e.targets.delete(f(t))}))}return o(t,[{key:"sub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(yz.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,s=void 0===o?"default":o;this.getTarget(i).addHandlers(s,t,h(e))}}},{key:"unsub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(yz.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,s=void 0===o?"default":o,a=this.getTarget(i,!1);a&&(a.removeHandlers(s,t,h(e)),a.hasHandlers()||this.removeTarget(i))}}}]),t}(),v=new y,g=function(t){function e(){return r(this,e),function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,a(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),o(e,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(t){this.unsubscribe(t),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;v.sub(e,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;v.unsub(e,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),e}(H_.PureComponent);s(g,"defaultProps",{pool:"default",target:"document"}),g.propTypes={name:G_().string.isRequired,on:G_().oneOfType([G_().func,G_().arrayOf(G_().func)]).isRequired,pool:G_().string,target:G_().oneOfType([G_().oneOf(["document","window"]),G_().instanceOf(yz.canUseDOM?HTMLElement:Object),G_().shape({current:G_().object})])},e.instance=v,e.default=g}));zM(gz),gz.instance;var mz,_z=(mz=vz).default,bz=mz.instance;_z.instance=bz;var wz=aq&&1/GV(new aq([,-0]))[1]==1/0?function(t){return new aq(t)}:bB,Ez=function(t){return t&&t.length?function(t,e,n){var r=-1,i=Mq,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=jq;else if(o>=200){var c=e?null:wz(t);if(c)return GV(c);s=!1,i=WV,u=new qV}else u=e?[]:a;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(l)}else i(u,h,n)||(u!==a&&u.push(h),a.push(l))}return a}(t):[]},Tz=function(t){return"number"==typeof t||Bj(t)&&"[object Number]"==qj(t)},Cz=function(t){return"string"==typeof t||!Aj(t)&&Bj(t)&&"[object String]"==qj(t)},Sz=function(t){return!0===t||!1===t||Bj(t)&&"[object Boolean]"==qj(t)},Iz=HM((function(t){!function(){var e={}.hasOwnProperty;function n(){for(var t=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)t.push(i);else if(Array.isArray(i)&&i.length){var s=n.apply(null,i);s&&t.push(s)}else if("object"===o)for(var a in i)e.call(i,a)&&i[a]&&t.push(a)}}return t.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n}()}));function xz(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("function"!=typeof t&&"string"!=typeof t)throw new Error("createShorthand() Component must be a string or function.");if(uz(n)||Sz(n))return null;var i=Cz(n),o=Tz(n),s=Yj(n),a=(0,H_.isValidElement)(n),u=PW(n),c=i||o||Aj(n);if(!(s||a||u||c))return null;var l=r.defaultProps,h=void 0===l?{}:l,f=a&&n.props||u&&n||c&&e(n),p=r.overrideProps,d=void 0===p?{}:p;d=Yj(d)?d(cV({},h,f)):d;var y=cV({},h,f,d);if(h.className||d.className||f.className){var v=Iz(h.className,d.className,f.className);y.className=Ez(v.split(" ")).join(" ")}if((h.style||d.style||f.style)&&(y.style=cV({},h.style,f.style,d.style)),uz(y.key)){var g=y.childKey,m=r.autoGenerateKey,_=void 0===m||m;uz(g)?_&&(i||o)&&(y.key=n):(y.key="function"==typeof g?g(y):g,delete y.childKey)}return a?(0,H_.cloneElement)(n,y):c||u?H_.createElement(t,y):s?n(t,y,y.children):void 0}function Nz(t,e){if("function"!=typeof t&&"string"!=typeof t)throw new Error("createShorthandFactory() Component must be a string or function.");return function(n,r){return xz(t,e,n,r)}}xz.handledProps=[],Nz("div",(function(t){return{children:t}})),Nz("iframe",(function(t){return{src:t}})),Nz("img",(function(t){return{src:t}})),Nz("input",(function(t){return{type:t}})),Nz("label",(function(t){return{children:t}})),Nz("p",(function(t){return{children:t}}));var kz=function(t,e){var n=t.handledProps,r=void 0===n?[]:n;return Object.keys(e).reduce((function(t,n){return"childKey"===n||-1===r.indexOf(n)&&(t[n]=e[n]),t}),{})};function Az(t,e,n){var r=t.defaultProps,i=void 0===r?{}:r;if(e.as&&e.as!==i.as)return e.as;if(n){var o=n();if(o)return o}return e.href?"a":i.as||"div"}for(var Pz=function(t){return null==t?[]:function(t,e){return PU(e,(function(e){return t[e]}))}(t,LV(t))},Oz=Math.max,Rz=function(t,e,n,r){t=DV(t)?t:Pz(t),n=n&&!r?gV(n):0;var i=t.length;return n<0&&(n=Oz(i+n,0)),Cz(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Fq(t,e,n)>-1},Dz="object"===("undefined"==typeof document?"undefined":Ej(document))&&null!==document,Lz="object"===("undefined"==typeof window?"undefined":Ej(window))&&null!==window&&window.self===window,Fz=function t(){return uz(t.override)?Dz&&Lz:t.override},Mz=Math.max,jz=Math.min,Uz=function(t,e,n){return e=vV(e),void 0===n?(n=e,e=0):n=vV(n),function(t,e,n){return t>=jz(e,n)&&t<Mz(e,n)}(t=yV(t),e,n)},Vz=function(t){return t&&t.length?t[0]:void 0},qz=function(t,e){if(Yq([e,t],uz))return!1;if(e.target&&(uV(e.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return uV(e.target,"removeAttribute","data-suir-click-target"),t.contains(e.target);var n=e.clientX,r=e.clientY;if(Yq([n,r],uz))return!1;var i=t.getClientRects();if(!(t.offsetWidth&&t.offsetHeight&&i&&i.length))return!1;var o=Vz(i),s=o.top,a=o.bottom,u=o.left,c=o.right;return!Yq([s,a,u,c],uz)&&Uz(r,s,a+.001)&&Uz(n,u,c+.001)},Bz=([].concat(Jq(LV($q)),Jq(LV($q).map(Number)),Jq(Pz($q))),Ez([].concat(["american sign language interpreting","assistive listening systems","audio description","blind","braille","closed captioning","closed captioning outline","deaf","low vision","phone volume","question circle","question circle outline","sign language","tty","universal access","wheelchair"],["angle double down","angle double left","angle double right","angle double up","angle down","angle left","angle right","angle up","arrow alternate circle down","arrow alternate circle down outline","arrow alternate circle left","arrow alternate circle left outline","arrow alternate circle right","arrow alternate circle right outline","arrow alternate circle up","arrow alternate circle up outline","arrow circle down","arrow circle left","arrow circle right","arrow circle up","arrow down","arrow left","arrow right","arrow up","arrows alternate","arrows alternate horizontal","arrows alternate vertical","caret down","caret left","caret right","caret square down","caret square down outline","caret square left","caret square left outline","caret square right","caret square right outline","caret square up","caret square up outline","caret up","cart arrow down","chart line","chevron circle down","chevron circle left","chevron circle right","chevron circle up","chevron down","chevron left","chevron right","chevron up","cloud download","cloud upload","download","exchange","expand arrows alternate","external alternate","external square alternate","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","history","level down alternate","level up alternate","location arrow","long arrow alternate down","long arrow alternate left","long arrow alternate right","long arrow alternate up","mouse pointer","play","random","recycle","redo","redo alternate","reply","reply all","retweet","share","share square","share square outline","sign-in","sign-out","sign-in alternate","sign-out alternate","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","sync","sync alternate","text height","text width","undo","undo alternate","upload","zoom-in","zoom-out"],["audio description","backward","circle","circle outline","closed captioning","closed captioning outline","compress","eject","expand","expand arrows alternate","fast backward","fast forward","file audio","file audio outline","file video","file video outline","film","forward","headphones","microphone","microphone slash","music","pause","pause circle","pause circle outline","phone volume","play","play circle","play circle outline","podcast","random","redo","redo alternate","rss","rss square","step backward","step forward","stop","stop circle","stop circle outline","sync","sync alternate","undo","undo alternate","video","volume down","volume off","volume up"],["address book","address book outline","address card","address card outline","archive","balance scale","birthday cake","book","briefcase","building","building outline","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","certificate","chart area","chart bar","chart bar outline","chart line","chart pie","clipboard","clipboard outline","coffee","columns","compass","compass outline","copy","copy outline","copyright","copyright outline","cut","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","eraser","fax","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","globe","industry","paperclip","paste","pen square","pencil alternate","percent","phone","phone square","phone volume","registered","registered outline","save","save outline","sitemap","sticky note","sticky note outline","suitcase","table","tag","tags","tasks","thumbtack","trademark"],["chess","chess bishop","chess board","chess king","chess knight","chess pawn","chess queen","chess rook","square full"],["archive","barcode","bath","bug","code","code branch","coffee","file","file outline","file alternate","file alternate outline","file code","file code outline","filter","fire extinguisher","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","microchip","qrcode","shield alternate","sitemap","terminal","user secret","window close","window close outline","window maximize","window maximize outline","window minimize","window minimize outline","window restore","window restore outline"],["address book","address book outline","address card","address card outline","american sign language interpreting","assistive listening systems","at","bell","bell outline","bell slash","bell slash outline","bullhorn","comment","comment outline","comment alternate","comment alternate outline","comments","comments outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","fax","inbox","language","microphone","microphone slash","mobile","mobile alternate","paper plane","paper plane outline","phone","phone square","phone volume","rss","rss square","tty","wifi"],["desktop","download","hdd","hdd outline","headphones","keyboard","keyboard outline","laptop","microchip","mobile","mobile alternate","plug","power off","print","save","save outline","server","tablet","tablet alternate","tv","upload"],["dollar sign","euro sign","lira sign","money bill alternate","money bill alternate outline","pound sign","ruble sign","rupee sign","shekel sign","won sign","yen sign"],["bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","clock","clock outline","hourglass","hourglass outline","hourglass end","hourglass half","hourglass start","stopwatch"],["adjust","clone","clone outline","copy","copy outline","crop","crosshairs","cut","edit","edit outline","eraser","eye","eye dropper","eye slash","eye slash outline","object group","object group outline","object ungroup","object ungroup outline","paint brush","paste","pencil alternate","save","save outline","tint"],["align center","align justify","align left","align right","bold","clipboard","clipboard outline","clone","clone outline","columns","copy","copy outline","cut","edit","edit outline","eraser","file","file outline","file alternate","file alternate outline","font","heading","i cursor","indent","italic","linkify","list","list alternate","list alternate outline","list ol","list ul","outdent","paper plane","paper plane outline","paperclip","paragraph","paste","pencil alternate","print","quote left","quote right","redo","redo alternate","reply","reply all","share","strikethrough","subscript","superscript","sync","sync alternate","table","tasks","text height","text width","th","th large","th list","trash","trash alternate","trash alternate outline","underline","undo","undo alternate","unlink"],["archive","clone","clone outline","copy","copy outline","cut","file","file outline","file alternate","file alternate outline","file archive","file archive outline","file audio","file audio outline","file code","file code outline","file excel","file excel outline","file image","file image outline","file pdf","file pdf outline","file powerpoint","file powerpoint outline","file video","file video outline","file word","file word outline","folder","folder outline","folder open","folder open outline","paste","save","save outline","sticky note","sticky note outline"],["genderless","mars","mars double","mars stroke","mars stroke horizontal","mars stroke vertical","mercury","neuter","transgender","transgender alternate","venus","venus double","venus mars"],["hand lizard","hand lizard outline","hand paper","hand paper outline","hand peace","hand peace outline","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","hand rock","hand rock outline","hand scissors","hand scissors outline","hand spock","hand spock outline","handshake","handshake outline","thumbs down","thumbs down outline","thumbs up","thumbs up outline"],["ambulance","h square","heart","heart outline","heartbeat","hospital","hospital outline","medkit","plus square","plus square outline","stethoscope","user md","wheelchair"],["adjust","bolt","camera","camera retro","clone","clone outline","compress","expand","eye","eye dropper","eye slash","eye slash outline","file image","file image outline","film","id badge","id badge outline","id card","id card outline","image","image outline","images","images outline","sliders horizontal","tint"],["ban","barcode","bars","beer","bell","bell outline","bell slash","bell slash outline","bug","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","certificate","check","check circle","check circle outline","check square","check square outline","circle","circle outline","clipboard","clipboard outline","clone","clone outline","cloud","cloud download","cloud upload","coffee","cog","cogs","copy","copy outline","cut","database","dot circle","dot circle outline","download","edit","edit outline","ellipsis horizontal","ellipsis vertical","envelope","envelope outline","envelope open","envelope open outline","eraser","exclamation","exclamation circle","exclamation triangle","external alternate","external square alternate","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","filter","flag","flag outline","flag checkered","folder","folder outline","folder open","folder open outline","frown","frown outline","hashtag","heart","heart outline","history","home","i cursor","info","info circle","language","magic","meh","meh outline","microphone","microphone slash","minus","minus circle","minus square","minus square outline","paste","pencil alternate","plus","plus circle","plus square","plus square outline","qrcode","question","question circle","question circle outline","quote left","quote right","redo","redo alternate","reply","reply all","rss","rss square","save","save outline","search","search minus","search plus","share","share alternate","share alternate square","share square","share square outline","shield alternate","sign-in","sign-out","signal","sitemap","sliders horizontal","smile","smile outline","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","star","star outline","star half","star half outline","sync","sync alternate","thumbs down","thumbs down outline","thumbs up","thumbs up outline","times","times circle","times circle outline","toggle off","toggle on","trash","trash alternate","trash alternate outline","trophy","undo","undo alternate","upload","user","user outline","user circle","user circle outline","wifi"],["box","boxes","clipboard check","clipboard list","dolly","dolly flatbed","pallet","shipping fast","truck","warehouse"],["ambulance","anchor","balance scale","bath","bed","beer","bell","bell outline","bell slash","bell slash outline","bicycle","binoculars","birthday cake","blind","bomb","book","bookmark","bookmark outline","briefcase","building","building outline","car","coffee","crosshairs","dollar sign","eye","eye slash","eye slash outline","fighter jet","fire","fire extinguisher","flag","flag outline","flag checkered","flask","gamepad","gavel","gift","glass martini","globe","graduation cap","h square","heart","heart outline","heartbeat","home","hospital","hospital outline","image","image outline","images","images outline","industry","info","info circle","key","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","location arrow","low vision","magnet","male","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","money bill alternate","money bill alternate outline","motorcycle","music","newspaper","newspaper outline","paw","phone","phone square","phone volume","plane","plug","plus","plus square","plus square outline","print","recycle","road","rocket","search","search minus","search plus","ship","shopping bag","shopping basket","shopping cart","shower","street view","subway","suitcase","tag","tags","taxi","thumbtack","ticket alternate","tint","train","tree","trophy","truck","tty","umbrella","university","utensil spoon","utensils","wheelchair","wifi","wrench"],["ambulance","band aid","dna","first aid","heart","heart outline","heartbeat","hospital","hospital outline","hospital symbol","pills","plus","stethoscope","syringe","thermometer","user md","weight"],["ambulance","anchor","archive","balance scale","bath","bed","beer","bell","bell outline","bicycle","binoculars","birthday cake","bomb","book","bookmark","bookmark outline","briefcase","bug","building","building outline","bullhorn","bullseye","bus","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","camera","camera retro","car","clipboard","clipboard outline","cloud","coffee","cog","cogs","compass","compass outline","copy","copy outline","cube","cubes","cut","envelope","envelope outline","envelope open","envelope open outline","eraser","eye","eye dropper","fax","fighter jet","file","file outline","file alternate","file alternate outline","film","fire","fire extinguisher","flag","flag outline","flag checkered","flask","futbol","futbol outline","gamepad","gavel","gem","gem outline","gift","glass martini","globe","graduation cap","hdd","hdd outline","headphones","heart","heart outline","home","hospital","hospital outline","hourglass","hourglass outline","image","image outline","images","images outline","industry","key","keyboard","keyboard outline","laptop","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","lock","lock open","magic","magnet","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","microchip","microphone","mobile","mobile alternate","money bill alternate","money bill alternate outline","moon","moon outline","motorcycle","newspaper","newspaper outline","paint brush","paper plane","paper plane outline","paperclip","paste","paw","pencil alternate","phone","plane","plug","print","puzzle piece","road","rocket","save","save outline","search","shield alternate","shopping bag","shopping basket","shopping cart","shower","snowflake","snowflake outline","space shuttle","star","star outline","sticky note","sticky note outline","stopwatch","subway","suitcase","sun","sun outline","tablet","tablet alternate","tachometer alternate","tag","tags","taxi","thumbtack","ticket alternate","train","trash","trash alternate","trash alternate outline","tree","trophy","truck","tv","umbrella","university","unlock","unlock alternate","utensil spoon","utensils","wheelchair","wrench"],["bell","bell outline","bookmark","bookmark outline","bullhorn","camera","camera retro","cart arrow down","cart plus","certificate","credit card","credit card outline","gem","gem outline","gift","handshake","handshake outline","heart","heart outline","key","shopping bag","shopping basket","shopping cart","star","star outline","tag","tags","thumbs down","thumbs down outline","thumbs up","thumbs up outline","trophy"],["bookmark","bookmark outline","calendar","calendar outline","certificate","circle","circle outline","cloud","comment","comment outline","file","file outline","folder","folder outline","heart","heart outline","map marker","play","square","square outline","star","star outline"],["asterisk","certificate","circle notch","cog","compass","compass outline","crosshairs","life ring","life ring outline","snowflake","snowflake outline","spinner","sun","sun outline","sync"],["baseball ball","basketball ball","bowling ball","football ball","futbol","futbol outline","golf ball","hockey puck","quidditch","table tennis","volleyball ball"],["ban","battery empty","battery full","battery half","battery quarter","battery three quarters","bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","cart arrow down","cart plus","exclamation","exclamation circle","exclamation triangle","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","info","info circle","lock","lock open","minus","minus circle","minus square","minus square outline","plus","plus circle","plus square","plus square outline","question","question circle","question circle outline","shield alternate","shopping cart","sign in alternate","sign out alternate","thermometer empty","thermometer full","thermometer half","thermometer quarter","thermometer three quarters","thumbs down","thumbs down outline","thumbs up","thumbs up outline","toggle off","toggle on","unlock","unlock alternate"],["address book","address book outline","address card","address card outline","bed","blind","child","female","frown","frown outline","id badge","id badge outline","id card","id card outline","male","meh","meh outline","power off","smile","smile outline","street view","user","user outline","user circle","user circle outline","user md","user plus","user secret","user times","users","wheelchair"],["ambulance","bicycle","bus","car","fighter jet","motorcycle","paper plane","paper plane outline","plane","rocket","ship","shopping cart","space shuttle","subway","taxi","train","truck","wheelchair"],["archive","book","bookmark","bookmark outline","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","eraser","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","newspaper","newspaper outline","paper plane","paper plane outline","paperclip","paragraph","pen square","pencil alternate","quote left","quote right","sticky note","sticky note outline","thumbtack"],["500px","accessible","accusoft","adn","adversal","affiliatetheme","algolia","amazon","amazon pay","amilia","android","angellist","angrycreative","angular","app store","app store ios","apper","apple","apple pay","asymmetrik","audible","autoprefixer","avianex","aviato","aws","bandcamp","behance","behance square","bimobject","bitbucket","bitcoin","bity","black tie","blackberry","blogger","blogger b","bluetooth","bluetooth b","btc","buromobelexperte","buysellads","cc amazon pay","cc amex","cc apple pay","cc diners club","cc discover","cc jcb","cc mastercard","cc paypal","cc stripe","cc visa","centercode","chrome","cloudscale","cloudsmith","cloudversify","codepen","codiepie","connectdevelop","contao","cpanel","creative commons","css3","css3 alternate","cuttlefish","d and d","dashcube","delicious","deploydog","deskpro","deviantart","digg","digital ocean","discord","discourse","dochub","docker","draft2digital","dribbble","dribbble square","dropbox","drupal","dyalog","earlybirds","edge","elementor","ember","empire","envira","erlang","ethereum","etsy","expeditedssl","facebook","facebook f","facebook messenger","facebook square","firefox","first order","firstdraft","flickr","flipboard","fly","font awesome","font awesome alternate","font awesome flag","fonticons","fonticons fi","fort awesome","fort awesome alternate","forumbee","foursquare","free code camp","freebsd","get pocket","gg","gg circle","git","git square","github","github alternate","github square","gitkraken","gitlab","gitter","glide","glide g","gofore","goodreads","goodreads g","google","google drive","google play","google plus","google plus g","google plus square","google wallet","gratipay","grav","gripfire","grunt","gulp","hacker news","hacker news square","hips","hire a helper","hooli","hotjar","houzz","html5","hubspot","imdb","instagram","internet explorer","ioxhost","itunes","itunes note","jenkins","joget","joomla","js","js square","jsfiddle","keycdn","kickstarter","kickstarter k","korvue","laravel","lastfm","lastfm square","leanpub","less","linechat","linkedin","linkedin alternate","linode","linux","lyft","magento","maxcdn","medapps","medium","medium m","medrt","meetup","microsoft","mix","mixcloud","mizuni","modx","monero","napster","nintendo switch","node","node js","npm","ns8","nutritionix","odnoklassniki","odnoklassniki square","opencart","openid","opera","optin monster","osi","page4","pagelines","palfed","patreon","paypal","periscope","phabricator","phoenix framework","php","pied piper","pied piper alternate","pied piper pp","pinterest","pinterest p","pinterest square","playstation","product hunt","pushed","python","qq","quinscape","quora","ravelry","react","rebel","redriver","reddit","reddit alien","reddit square","rendact","renren","replyd","resolving","rocketchat","rockrms","safari","sass","schlix","scribd","searchengin","sellcast","sellsy","servicestack","shirtsinbulk","simplybuilt","sistrix","skyatlas","skype","slack","slack hash","slideshare","snapchat","snapchat ghost","snapchat square","soundcloud","speakap","spotify","stack exchange","stack overflow","staylinked","steam","steam square","steam symbol","sticker mule","strava","stripe","stripe s","studiovinari","stumbleupon","stumbleupon circle","superpowers","supple","telegram","telegram plane","tencent weibo","themeisle","trello","tripadvisor","tumblr","tumblr square","twitch","twitter","twitter square","typo3","uber","uikit","uniregistry","untappd","usb","ussunnah","vaadin","viacoin","viadeo","viadeo square","viber","vimeo","vimeo square","vimeo v","vine","vk","vnv","vuejs","wechat","weibo","weixin","whatsapp","whatsapp square","whmcs","wikipedia w","windows","wordpress","wordpress simple","wpbeginner","wpexplorer","wpforms","xbox","xing","xing square","y combinator","yahoo","yandex","yandex international","yelp","yoast","youtube","youtube square"]))),Wz=Ez([].concat(Jq(Bz),["chess rock","ordered list","unordered list","user doctor","shield","puzzle","add circle","add square","add to calendar","add to cart","add user","add","alarm mute","alarm","ald","als","announcement","area chart","area graph","arrow down cart","asexual","asl interpreting","asl","assistive listening devices","attach","attention","balance","bar","bathtub","battery four","battery high","battery low","battery one","battery three","battery two","battery zero","birthday","block layout","bluetooth alternative","broken chain","browser","call square","call","cancel","cart","cc","chain","chat","checked calendar","checkmark","circle notched","close","cny","cocktail","commenting","computer","configure","content","deafness","delete calendar","delete","detective","discussions","doctor","dollar","dont","drivers license","dropdown","emergency","envira gallery","erase","eur","euro","eyedropper","factory","favorite","feed","female homosexual","file text","file text outline","find","first aid","fork","game","gay","gbp","google plus circle","google plus official","grab","graduation","grid layout","group","h","hand victory","handicap","hard of hearing","header","help circle","help","heterosexual","hide","hotel","hourglass four","hourglass full","hourglass one","hourglass three","hourglass two","idea","ils","in cart","inr","intergender","intersex","jpy","krw","lab","law","legal","lesbian","lightning","like","line graph","linkedin square","linkify","lira","list layout","magnify","mail forward","mail outline","mail square","mail","male homosexual","man","marker","mars alternate","mars horizontal","mars vertical","microsoft edge","military","ms edge","mute","new pied piper","non binary transgender","numbered list","options","other gender horizontal","other gender vertical","other gender","payment","paypal card","pencil square","photo","picture","pie chart","pie graph","pied piper hat","pin","plus cart","point","pointing down","pointing left","pointing right","pointing up","pound","power cord","power","privacy","r circle","rain","record","refresh","remove circle","remove from calendar","remove user","remove","repeat","rmb","rouble","rub","ruble","rupee","s15","selected radio","send","setting","settings","shekel","sheqel","shipping","shop","shuffle","shutdown","sidebar","signing","signup","sliders","soccer","sort alphabet ascending","sort alphabet descending","sort ascending","sort content ascending","sort content descending","sort descending","sort numeric ascending","sort numeric descending","sound","spy","stripe card","student","talk","target","teletype","television","text cursor","text telephone","theme","thermometer","thumb tack","time","tm","toggle down","toggle left","toggle right","toggle up","translate","travel","treatment","triangle down","triangle left","triangle right","triangle up","try","unhide","unlinkify","unmute","usd","user cancel","user close","user delete","user x","vcard","video camera","video play","volume control phone","wait","warning circle","warning sign","warning","wi-fi","winner","wizard","woman","won","wordpress beginner","wordpress forms","world","write square","x","yen","zip","zoom in","zoom out","zoom","bitbucket square","checkmark box","circle thin","cloud download","cloud upload","compose","conversation","credit card alternative","currency","dashboard","diamond","disk","exchange","external share","external square","external","facebook official","food","hourglass zero","level down","level up","log out","meanpath","money","move","pencil","protect","radio","remove bookmark","resize horizontal","resize vertical","sign in","sign out","spoon","star half empty","star half full","ticket","times rectangle","write","youtube play"])),zz=(Ez([].concat(Jq(Wz),["left dropdown"])),aV((function(t,e){return Vq(t)?VW(t,e):[]})),function(t){return null!==t&&!Array.isArray(t)&&"object"==typeof t}),Hz={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},Qz=0;Qz<24;Qz+=1)Hz[112+Qz]="F"+(Qz+1);for(var Gz=0;Gz<26;Gz+=1){var Yz=Gz+65;Hz[Yz]=[String.fromCharCode(Yz+32),String.fromCharCode(Yz)]}var Kz={codes:Hz,getCode:function(t){return zz(t)?t.keyCode||t.which||this[t.key]:this[t]},getKey:function(t){var e=zz(t);if(e&&t.key)return t.key;var n=Hz[e?t.keyCode||t.which:t];return Array.isArray(n)&&(n=e?n[t.shiftKey?1:0]:n[0]),n},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};Kz.Spacebar=Kz[" "],Kz.Digit0=Kz[0],Kz.Digit1=Kz[1],Kz.Digit2=Kz[2],Kz.Digit3=Kz[3],Kz.Digit4=Kz[4],Kz.Digit5=Kz[5],Kz.Digit6=Kz[6],Kz.Digit7=Kz[7],Kz.Digit8=Kz[8],Kz.Digit9=Kz[9],Kz.Tilde=Kz["~"],Kz.GraveAccent=Kz["`"],Kz.ExclamationPoint=Kz["!"],Kz.AtSign=Kz["@"],Kz.PoundSign=Kz["#"],Kz.PercentSign=Kz["%"],Kz.Caret=Kz["^"],Kz.Ampersand=Kz["&"],Kz.PlusSign=Kz["+"],Kz.MinusSign=Kz["-"],Kz.EqualsSign=Kz["="],Kz.DivisionSign=Kz["/"],Kz.MultiplicationSign=Kz["*"],Kz.Comma=Kz[","],Kz.Decimal=Kz["."],Kz.Colon=Kz[":"],Kz.Semicolon=Kz[";"],Kz.Pipe=Kz["|"],Kz.BackSlash=Kz["\\"],Kz.QuestionMark=Kz["?"],Kz.SingleQuote=Kz["'"],Kz.DoubleQuote=Kz['"'],Kz.LeftCurlyBrace=Kz["{"],Kz.RightCurlyBrace=Kz["}"],Kz.LeftParenthesis=Kz["("],Kz.RightParenthesis=Kz[")"],Kz.LeftAngleBracket=Kz["<"],Kz.RightAngleBracket=Kz[">"],Kz.LeftSquareBracket=Kz["["],Kz.RightSquareBracket=Kz["]"];var $z=Kz,Xz=function(t){function e(){var t,n;_j(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Cj(this,(t=Sj(e)).call.apply(t,[this].concat(i))),Nj(Tj(n),"handleRef",(function(t){VM(n.props.innerRef,t)})),n}return xj(e,t),wj(e,[{key:"componentDidMount",value:function(){uV(this.props,"onMount",null,this.props)}},{key:"componentWillUnmount",value:function(){uV(this.props,"onUnmount",null,this.props)}},{key:"render",value:function(){if(!Fz())return null;var t=this.props,e=t.children,n=t.mountNode,r=void 0===n?document.body:n;return(0,Y_.createPortal)(H_.createElement(gj,{innerRef:this.handleRef},e),r)}}]),e}(H_.Component);Nj(Xz,"handledProps",["children","innerRef","mountNode","onMount","onUnmount"]),Xz.propTypes={};var Jz=function(t){function e(){var t,n;_j(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Cj(this,(t=Sj(e)).call.apply(t,[this].concat(i))),Nj(Tj(n),"contentRef",(0,H_.createRef)()),Nj(Tj(n),"triggerRef",(0,H_.createRef)()),Nj(Tj(n),"latestDocumentMouseDownEvent",null),Nj(Tj(n),"handleDocumentMouseDown",(function(t){n.latestDocumentMouseDownEvent=t})),Nj(Tj(n),"handleDocumentClick",(function(t){var e=n.props.closeOnDocumentClick,r=n.latestDocumentMouseDownEvent;n.latestDocumentMouseDownEvent=null,!n.contentRef.current||qz(n.triggerRef.current,t)||r&&qz(n.contentRef.current,r)||qz(n.contentRef.current,t)||e&&n.close(t)})),Nj(Tj(n),"handleEscape",(function(t){n.props.closeOnEscape&&$z.getCode(t)===$z.Escape&&n.close(t)})),Nj(Tj(n),"handlePortalMouseLeave",(function(t){var e=n.props,r=e.closeOnPortalMouseLeave,i=e.mouseLeaveDelay;r&&t.target===n.contentRef.current&&(n.mouseLeaveTimer=n.closeWithTimeout(t,i))})),Nj(Tj(n),"handlePortalMouseEnter",(function(){n.props.closeOnPortalMouseLeave&&clearTimeout(n.mouseLeaveTimer)})),Nj(Tj(n),"handleTriggerBlur",(function(t){for(var e=n.props,r=e.trigger,i=e.closeOnTriggerBlur,o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];uV.apply(void 0,[r,"props.onBlur",t].concat(s));var u=t.relatedTarget||document.activeElement,c=uV(n.contentRef.current,"contains",u);i&&!c&&n.close(t)})),Nj(Tj(n),"handleTriggerClick",(function(t){for(var e=n.props,r=e.trigger,i=e.closeOnTriggerClick,o=e.openOnTriggerClick,s=n.state.open,a=arguments.length,u=new Array(a>1?a-1:0),c=1;c<a;c++)u[c-1]=arguments[c];uV.apply(void 0,[r,"props.onClick",t].concat(u)),s&&i?n.close(t):!s&&o&&n.open(t)})),Nj(Tj(n),"handleTriggerFocus",(function(t){for(var e=n.props,r=e.trigger,i=e.openOnTriggerFocus,o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];uV.apply(void 0,[r,"props.onFocus",t].concat(s)),i&&n.open(t)})),Nj(Tj(n),"handleTriggerMouseLeave",(function(t){clearTimeout(n.mouseEnterTimer);for(var e=n.props,r=e.trigger,i=e.closeOnTriggerMouseLeave,o=e.mouseLeaveDelay,s=arguments.length,a=new Array(s>1?s-1:0),u=1;u<s;u++)a[u-1]=arguments[u];uV.apply(void 0,[r,"props.onMouseLeave",t].concat(a)),i&&(n.mouseLeaveTimer=n.closeWithTimeout(t,o))})),Nj(Tj(n),"handleTriggerMouseEnter",(function(t){clearTimeout(n.mouseLeaveTimer);for(var e=n.props,r=e.trigger,i=e.mouseEnterDelay,o=e.openOnTriggerMouseEnter,s=arguments.length,a=new Array(s>1?s-1:0),u=1;u<s;u++)a[u-1]=arguments[u];uV.apply(void 0,[r,"props.onMouseEnter",t].concat(a)),o&&(n.mouseEnterTimer=n.openWithTimeout(t,i))})),Nj(Tj(n),"open",(function(t){var e=n.props.onOpen;e&&e(t,n.props),n.trySetState({open:!0})})),Nj(Tj(n),"openWithTimeout",(function(t,e){var r=cV({},t);return setTimeout((function(){return n.open(r)}),e||0)})),Nj(Tj(n),"close",(function(t){var e=n.props.onClose;e&&e(t,n.props),n.trySetState({open:!1})})),Nj(Tj(n),"closeWithTimeout",(function(t,e){var r=cV({},t);return setTimeout((function(){return n.close(r)}),e||0)})),Nj(Tj(n),"handleMount",(function(){uV(n.props,"onMount",null,n.props)})),Nj(Tj(n),"handleUnmount",(function(){uV(n.props,"onUnmount",null,n.props)})),Nj(Tj(n),"handleTriggerRef",(function(t){n.triggerRef.current=t,VM(n.props.triggerRef,t)})),n}return xj(e,t),wj(e,[{key:"componentWillUnmount",value:function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.eventPool,r=t.mountNode,i=t.trigger,o=this.state.open;return H_.createElement(H_.Fragment,null,o&&H_.createElement(H_.Fragment,null,H_.createElement(Xz,{innerRef:this.contentRef,mountNode:r,onMount:this.handleMount,onUnmount:this.handleUnmount},e),H_.createElement(_z,{name:"mouseleave",on:this.handlePortalMouseLeave,pool:n,target:this.contentRef}),H_.createElement(_z,{name:"mouseenter",on:this.handlePortalMouseEnter,pool:n,target:this.contentRef}),H_.createElement(_z,{name:"mousedown",on:this.handleDocumentMouseDown,pool:n}),H_.createElement(_z,{name:"click",on:this.handleDocumentClick,pool:n}),H_.createElement(_z,{name:"keydown",on:this.handleEscape,pool:n})),i&&H_.createElement(gj,{innerRef:this.handleTriggerRef},(0,H_.cloneElement)(i,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))}}]),e}(Wq);Nj(Jz,"defaultProps",{closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0}),Nj(Jz,"autoControlledProps",["open"]),Nj(Jz,"Inner",Xz),Nj(Jz,"handledProps",["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"]),Jz.propTypes={};var Zz,tH,eH=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},nH=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n},rH=function(t,e,n){(void 0!==n&&!fU(t[e],n)||void 0===n&&!(e in t))&&Hq(t,e,n)},iH=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},oH=function(t,e,n,r,i,o,s){var a=iH(t,n),u=iH(e,n),c=s.get(u);if(c)rH(t,n,c);else{var l=o?o(a,u,n+"",t,e,s):void 0,h=void 0===l;if(h){var f=Aj(u),p=!f&&bV(u),d=!f&&!p&&SV(u);l=u,f||p||d?Aj(a)?l=a:Vq(a)?l=NB(a):p?(h=!1,l=nW(u,!0)):d?(h=!1,l=fW(u,!0)):l=[]:PW(u)||BU(u)?(l=a,BU(a)?l=function(t){return XB(t,eW(t))}(a):Gj(a)&&!Yj(a)||(l=dW(u))):h=!1}h&&(s.set(u,l),i(l,u,r,o,s),s.delete(u)),rH(t,n,l)}},sH=function t(e,n,r,i,o){e!==n&&mV(n,(function(s,a){if(o||(o=new UV),Gj(s))oH(e,n,a,r,t,i,o);else{var u=i?i(iH(e,a),s,a+"",e,n,o):void 0;void 0===u&&(u=s),rH(e,a,u)}}),eW)},aH=(Zz=function(t,e,n){sH(t,e,n)},aV((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=Zz.length>3&&"function"==typeof i?(r--,i):void 0,o&&Gq(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var s=e[n];s&&Zz(t,s,n,i)}return t}))),uH=aH,cH=Object.prototype.toString,lH=function(t){var e=cH.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===cH.call(t.callee)),n};if(!Object.keys){var hH=Object.prototype.hasOwnProperty,fH=Object.prototype.toString,pH=lH,dH=Object.prototype.propertyIsEnumerable,yH=!dH.call({toString:null},"toString"),vH=dH.call((function(){}),"prototype"),gH=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],mH=function(t){var e=t.constructor;return e&&e.prototype===t},_H={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},bH=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!_H["$"+t]&&hH.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{mH(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();tH=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===fH.call(t),r=pH(t),i=e&&"[object String]"===fH.call(t),o=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var s=vH&&n;if(i&&t.length>0&&!hH.call(t,0))for(var a=0;a<t.length;++a)o.push(String(a));if(r&&t.length>0)for(var u=0;u<t.length;++u)o.push(String(u));else for(var c in t)s&&"prototype"===c||!hH.call(t,c)||o.push(String(c));if(yH)for(var l=function(t){if("undefined"==typeof window||!bH)return mH(t);try{return mH(t)}catch(t){return!1}}(t),h=0;h<gH.length;++h)l&&"constructor"===gH[h]||!hH.call(t,gH[h])||o.push(gH[h]);return o}}var wH=tH,EH=Array.prototype.slice,TH=Object.keys,CH=TH?function(t){return TH(t)}:wH,SH=Object.keys;CH.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return lH(t)?SH(EH.call(t)):SH(t)})}else Object.keys=CH;return Object.keys||CH};var IH=CH,xH="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,NH=Object.prototype.toString,kH=function(t){return!(xH&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===NH.call(t)},AH=function(t){return!!kH(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==NH.call(t)&&"[object Function]"===NH.call(t.callee)},PH=function(){return kH(arguments)}();kH.isLegacyArguments=AH;var OH=PH?kH:AH,RH="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),DH=Object.prototype.toString,LH=Array.prototype.concat,FH=Object.defineProperty,MH=FH&&function(){var t={};try{for(var e in FH(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),jH=function(t,e,n,r){(!(e in t)||function(t){return"function"==typeof t&&"[object Function]"===DH.call(t)}(r)&&r())&&(MH?FH(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},UH=function(t,e){var n=arguments.length>2?arguments[2]:{},r=IH(e);RH&&(r=LH.call(r,Object.getOwnPropertySymbols(e)));for(var i=0;i<r.length;i+=1)jH(t,r[i],e[r[i]],n[r[i]])};UH.supportsDescriptors=!!MH;var VH,qH=UH,BH=Array.prototype.slice,WH=Object.prototype.toString,zH=Function.prototype.bind||function(t){var e=this;if("function"!=typeof e||"[object Function]"!==WH.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,r=BH.call(arguments,1),i=Math.max(0,e.length-r.length),o=[],s=0;s<i;s++)o.push("$"+s);if(n=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof n){var i=e.apply(this,r.concat(BH.call(arguments)));return Object(i)===i?i:this}return e.apply(t,r.concat(BH.call(arguments)))})),e.prototype){var a=function(){};a.prototype=e.prototype,n.prototype=new a,a.prototype=null}return n},HH=WM.Symbol,QH=function(){return"function"==typeof HH&&"function"==typeof Symbol&&"symbol"==typeof HH("foo")&&"symbol"==typeof Symbol("bar")&&function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}()},GH=TypeError,YH=Object.getOwnPropertyDescriptor;if(YH)try{YH({},"")}catch(KM){YH=null}var KH=function(){throw new GH},$H=YH?function(){try{return KH}catch(t){try{return YH(arguments,"callee").get}catch(t){return KH}}}():KH,XH=QH(),JH=Object.getPrototypeOf||function(t){return t.__proto__},ZH="undefined"==typeof Uint8Array?VH:JH(Uint8Array),tQ={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?VH:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?VH:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":XH?JH([][Symbol.iterator]()):VH,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":VH,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":VH,"%AsyncGenerator%":VH,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":VH,"%AsyncIteratorPrototype%":VH,"%Atomics%":"undefined"==typeof Atomics?VH:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?VH:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?VH:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?VH:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?VH:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?VH:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?VH:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":VH,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":VH,"%Int8Array%":"undefined"==typeof Int8Array?VH:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?VH:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?VH:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?VH:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?VH:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?VH:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":XH?JH(JH([][Symbol.iterator]())):VH,"%JSON%":"object"==typeof JSON?JSON:VH,"%JSONParse%":"object"==typeof JSON?JSON.parse:VH,"%Map%":"undefined"==typeof Map?VH:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&XH?JH((new Map)[Symbol.iterator]()):VH,"%MapPrototype%":"undefined"==typeof Map?VH:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?VH:Promise,"%PromisePrototype%":"undefined"==typeof Promise?VH:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?VH:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?VH:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?VH:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?VH:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?VH:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?VH:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?VH:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&XH?JH((new Set)[Symbol.iterator]()):VH,"%SetPrototype%":"undefined"==typeof Set?VH:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?VH:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?VH:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":XH?JH(""[Symbol.iterator]()):VH,"%StringPrototype%":String.prototype,"%Symbol%":XH?Symbol:VH,"%SymbolPrototype%":XH?Symbol.prototype:VH,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":$H,"%TypedArray%":ZH,"%TypedArrayPrototype%":ZH?ZH.prototype:VH,"%TypeError%":GH,"%TypeErrorPrototype%":GH.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?VH:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?VH:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?VH:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?VH:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?VH:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?VH:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?VH:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?VH:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?VH:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?VH:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?VH:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?VH:WeakSet.prototype},eQ=zH.call(Function.call,String.prototype.replace),nQ=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,rQ=/\\(\\)?/g,iQ=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=function(t){var e=[];return eQ(t,nQ,(function(t,n,r,i){e[e.length]=r?eQ(i,rQ,"$1"):n||t})),e}(t),r=function(t,e){if(!(t in tQ))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===tQ[t]&&!e)throw new GH("intrinsic "+t+" exists, but is not available. Please file an issue!");return tQ[t]}("%"+(n.length>0?n[0]:"")+"%",e),i=1;i<n.length;i+=1)if(null!=r)if(YH&&i+1>=n.length){var o=YH(r,n[i]);if(!e&&!(n[i]in r))throw new GH("base intrinsic for "+t+" exists, but the property is not available.");r=o?o.get||o.value:r[n[i]]}else r=r[n[i]];return r},oQ=iQ("%Function.prototype.apply%"),sQ=iQ("%Function.prototype.call%"),aQ=iQ("%Reflect.apply%",!0)||zH.call(sQ,oQ),uQ=function(){return aQ(zH,sQ,arguments)};uQ.apply=function(){return aQ(zH,oQ,arguments)};var cQ=function(t){return t!=t},lQ=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!cQ(t)||!cQ(e))},hQ=function(){return"function"==typeof Object.is?Object.is:lQ},fQ=uQ(hQ(),Object);qH(fQ,{getPolyfill:hQ,implementation:lQ,shim:function(){var t=hQ();return qH(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var pQ,dQ,yQ,vQ=fQ,gQ=QH()&&"symbol"==typeof Symbol.toStringTag;if(gQ){pQ=Function.call.bind(RegExp.prototype.exec),dQ={};var mQ=function(){throw dQ};yQ={toString:mQ,valueOf:mQ},"symbol"==typeof Symbol.toPrimitive&&(yQ[Symbol.toPrimitive]=mQ)}var _Q=Object.prototype.toString,bQ=gQ?function(t){if(!t||"object"!=typeof t)return!1;try{pQ(t,yQ)}catch(t){return t===dQ}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===_Q.call(t)},wQ=Object,EQ=TypeError,TQ=function(){if(null!=this&&this!==wQ(this))throw new EQ("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},CQ=qH.supportsDescriptors,SQ=Object.getOwnPropertyDescriptor,IQ=TypeError,xQ=function(){if(!CQ)throw new IQ("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=SQ(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return TQ},NQ=qH.supportsDescriptors,kQ=Object.getOwnPropertyDescriptor,AQ=Object.defineProperty,PQ=TypeError,OQ=Object.getPrototypeOf,RQ=/a/,DQ=uQ(TQ);qH(DQ,{getPolyfill:xQ,implementation:TQ,shim:function(){if(!NQ||!OQ)throw new PQ("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=xQ(),e=OQ(RQ),n=kQ(e,"flags");return n&&n.get===t||AQ(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}});var LQ=DQ,FQ=Date.prototype.getDay,MQ=Object.prototype.toString,jQ="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,UQ=function(t){return"object"==typeof t&&null!==t&&(jQ?function(t){try{return FQ.call(t),!0}catch(t){return!1}}(t):"[object Date]"===MQ.call(t))},VQ=Date.prototype.getTime;function qQ(t){return null==t}function BQ(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var WQ=function t(e,n,r){var i=r||{};return!!(i.strict?vQ(e,n):e===n)||(!e||!n||"object"!=typeof e&&"object"!=typeof n?i.strict?vQ(e,n):e==n:function(e,n,r){var i,o;if(typeof e!=typeof n)return!1;if(qQ(e)||qQ(n))return!1;if(e.prototype!==n.prototype)return!1;if(OH(e)!==OH(n))return!1;var s=bQ(e),a=bQ(n);if(s!==a)return!1;if(s||a)return e.source===n.source&&LQ(e)===LQ(n);if(UQ(e)&&UQ(n))return VQ.call(e)===VQ.call(n);var u=BQ(e),c=BQ(n);if(u!==c)return!1;if(u||c){if(e.length!==n.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==n[i])return!1;return!0}if(typeof e!=typeof n)return!1;try{var l=IH(e),h=IH(n)}catch(t){return!1}if(l.length!==h.length)return!1;for(l.sort(),h.sort(),i=l.length-1;i>=0;i--)if(l[i]!=h[i])return!1;for(i=l.length-1;i>=0;i--)if(!t(e[o=l[i]],n[o],r))return!1;return!0}(e,n,i))},zQ="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,HQ=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(zQ&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}(),QQ=zQ&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),HQ))}};function GQ(t){return t&&"[object Function]"==={}.toString.call(t)}function YQ(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function KQ(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function $Q(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=YQ(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?t:$Q(KQ(t))}function XQ(t){return t&&t.referenceNode?t.referenceNode:t}var JQ=zQ&&!(!window.MSInputMethodContext||!document.documentMode),ZQ=zQ&&/MSIE 10/.test(navigator.userAgent);function tG(t){return 11===t?JQ:10===t?ZQ:JQ||ZQ}function eG(t){if(!t)return document.documentElement;for(var e=tG(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===YQ(n,"position")?eG(n):n:t?t.ownerDocument.documentElement:document.documentElement}function nG(t){return null!==t.parentNode?nG(t.parentNode):t}function rG(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var s,a,u=o.commonAncestorContainer;if(t!==u&&e!==u||r.contains(i))return"BODY"===(a=(s=u).nodeName)||"HTML"!==a&&eG(s.firstElementChild)!==s?eG(u):u;var c=nG(t);return c.host?rG(c.host,e):rG(t,nG(e).host)}function iG(t){var e="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"===n||"HTML"===n){var r=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||r)[e]}return t[e]}function oG(t,e){var n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+r+"Width"])}function sG(t,e,n,r){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],tG(10)?parseInt(n["offset"+t])+parseInt(r["margin"+("Height"===t?"Top":"Left")])+parseInt(r["margin"+("Height"===t?"Bottom":"Right")]):0)}function aG(t){var e=t.body,n=t.documentElement,r=tG(10)&&getComputedStyle(n);return{height:sG("Height",e,n,r),width:sG("Width",e,n,r)}}var uG=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),cG=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},lG=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function hG(t){return lG({},t,{right:t.left+t.width,bottom:t.top+t.height})}function fG(t){var e={};try{if(tG(10)){e=t.getBoundingClientRect();var n=iG(t,"top"),r=iG(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch(t){}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?aG(t.ownerDocument):{},s=o.width||t.clientWidth||i.width,a=o.height||t.clientHeight||i.height,u=t.offsetWidth-s,c=t.offsetHeight-a;if(u||c){var l=YQ(t);u-=oG(l,"x"),c-=oG(l,"y"),i.width-=u,i.height-=c}return hG(i)}function pG(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=tG(10),i="HTML"===e.nodeName,o=fG(t),s=fG(e),a=$Q(t),u=YQ(e),c=parseFloat(u.borderTopWidth),l=parseFloat(u.borderLeftWidth);n&&i&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var h=hG({top:o.top-s.top-c,left:o.left-s.left-l,width:o.width,height:o.height});if(h.marginTop=0,h.marginLeft=0,!r&&i){var f=parseFloat(u.marginTop),p=parseFloat(u.marginLeft);h.top-=c-f,h.bottom-=c-f,h.left-=l-p,h.right-=l-p,h.marginTop=f,h.marginLeft=p}return(r&&!n?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(h=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=iG(e,"top"),i=iG(e,"left"),o=n?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=i*o,t.right+=i*o,t}(h,e)),h}function dG(t){var e=t.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===YQ(t,"position"))return!0;var n=KQ(t);return!!n&&dG(n)}function yG(t){if(!t||!t.parentElement||tG())return document.documentElement;for(var e=t.parentElement;e&&"none"===YQ(e,"transform");)e=e.parentElement;return e||document.documentElement}function vG(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},s=i?yG(t):rG(t,XQ(e));if("viewport"===r)o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,r=pG(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:iG(n),a=e?0:iG(n,"left");return hG({top:s-r.top+r.marginTop,left:a-r.left+r.marginLeft,width:i,height:o})}(s,i);else{var a=void 0;"scrollParent"===r?"BODY"===(a=$Q(KQ(e))).nodeName&&(a=t.ownerDocument.documentElement):a="window"===r?t.ownerDocument.documentElement:r;var u=pG(a,s,i);if("HTML"!==a.nodeName||dG(s))o=u;else{var c=aG(t.ownerDocument),l=c.height,h=c.width;o.top+=u.top-u.marginTop,o.bottom=l+u.top,o.left+=u.left-u.marginLeft,o.right=h+u.left}}var f="number"==typeof(n=n||0);return o.left+=f?n:n.left||0,o.top+=f?n:n.top||0,o.right-=f?n:n.right||0,o.bottom-=f?n:n.bottom||0,o}function gG(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=vG(n,r,o,i),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},u=Object.keys(a).map((function(t){return lG({key:t},a[t],{area:(e=a[t],e.width*e.height)});var e})).sort((function(t,e){return e.area-t.area})),c=u.filter((function(t){var e=t.width,r=t.height;return e>=n.clientWidth&&r>=n.clientHeight})),l=c.length>0?c[0].key:u[0].key,h=t.split("-")[1];return l+(h?"-"+h:"")}function mG(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return pG(n,r?yG(e):rG(e,XQ(n)),r)}function _G(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+r,height:t.offsetHeight+n}}function bG(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function wG(t,e,n){n=n.split("-")[0];var r=_G(t),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),s=o?"top":"left",a=o?"left":"top",u=o?"height":"width",c=o?"width":"height";return i[s]=e[s]+e[u]/2-r[u]/2,i[a]=n===a?e[a]-r[c]:e[bG(a)],i}function EG(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function TG(t,e,n){var r=void 0===n?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===n}));var r=EG(t,(function(t){return t[e]===n}));return t.indexOf(r)}(t,"name",n));return r.forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t.function||t.fn;t.enabled&&GQ(n)&&(e.offsets.popper=hG(e.offsets.popper),e.offsets.reference=hG(e.offsets.reference),e=n(e,t))})),e}function CG(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=mG(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=gG(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=wG(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=TG(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function SG(t,e){return t.some((function(t){var n=t.name;return t.enabled&&n===e}))}function IG(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var i=e[r],o=i?""+i+n:t;if(void 0!==document.body.style[o])return o}return null}function xG(){return this.state.isDestroyed=!0,SG(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[IG("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function NG(t){var e=t.ownerDocument;return e?e.defaultView:window}function kG(t,e,n,r){var i="BODY"===t.nodeName,o=i?t.ownerDocument.defaultView:t;o.addEventListener(e,n,{passive:!0}),i||kG($Q(o.parentNode),e,n,r),r.push(o)}function AG(t,e,n,r){n.updateBound=r,NG(t).addEventListener("resize",n.updateBound,{passive:!0});var i=$Q(t);return kG(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function PG(){this.state.eventsEnabled||(this.state=AG(this.reference,this.options,this.state,this.scheduleUpdate))}function OG(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,NG(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function RG(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function DG(t,e){Object.keys(e).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&RG(e[n])&&(r="px"),t.style[n]=e[n]+r}))}var LG=zQ&&/Firefox/i.test(navigator.userAgent);function FG(t,e,n){var r=EG(t,(function(t){return t.name===e})),i=!!r&&t.some((function(t){return t.name===n&&t.enabled&&t.order<r.order}));if(!i){var o="`"+e+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}var MG=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],jG=MG.slice(3);function UG(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=jG.indexOf(t),r=jG.slice(n+1).concat(jG.slice(0,n));return e?r.reverse():r}var VG={shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var i=t.offsets,o=i.reference,s=i.popper,a=-1!==["bottom","top"].indexOf(n),u=a?"left":"top",c=a?"width":"height",l={start:cG({},u,o[u]),end:cG({},u,o[u]+o[c]-s[c])};t.offsets.popper=lG({},s,l[r])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n,r=e.offset,i=t.placement,o=t.offsets,s=o.popper,a=o.reference,u=i.split("-")[0];return n=RG(+r)?[+r,0]:function(t,e,n,r){var i=[0,0],o=-1!==["right","left"].indexOf(r),s=t.split(/(\+|\-)/).map((function(t){return t.trim()})),a=s.indexOf(EG(s,(function(t){return-1!==t.search(/,|\s/)})));s[a]&&-1===s[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,c=-1!==a?[s.slice(0,a).concat([s[a].split(u)[0]]),[s[a].split(u)[1]].concat(s.slice(a+1))]:[s];return c=c.map((function(t,r){var i=(1===r?!o:o)?"height":"width",s=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,s=!0,t):s?(t[t.length-1]+=e,s=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,n,r){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],s=i[2];return o?0===s.indexOf("%")?hG("%p"===s?n:r)[e]/100*o:"vh"===s||"vw"===s?("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o:o:t}(t,i,e,n)}))})),c.forEach((function(t,e){t.forEach((function(n,r){RG(n)&&(i[e]+=n*("-"===t[r-1]?-1:1))}))})),i}(r,s,a,u),"left"===u?(s.top+=n[0],s.left-=n[1]):"right"===u?(s.top+=n[0],s.left+=n[1]):"top"===u?(s.left+=n[0],s.top-=n[1]):"bottom"===u&&(s.left+=n[0],s.top+=n[1]),t.popper=s,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||eG(t.instance.popper);t.instance.reference===n&&(n=eG(n));var r=IG("transform"),i=t.instance.popper.style,o=i.top,s=i.left,a=i[r];i.top="",i.left="",i[r]="";var u=vG(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);i.top=o,i.left=s,i[r]=a,e.boundaries=u;var c=e.priority,l=t.offsets.popper,h={primary:function(t){var n=l[t];return l[t]<u[t]&&!e.escapeWithReference&&(n=Math.max(l[t],u[t])),cG({},t,n)},secondary:function(t){var n="right"===t?"left":"top",r=l[n];return l[t]>u[t]&&!e.escapeWithReference&&(r=Math.min(l[n],u[t]-("right"===t?l.width:l.height))),cG({},n,r)}};return c.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";l=lG({},l,h[e](t))})),t.offsets.popper=l,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,r=e.reference,i=t.placement.split("-")[0],o=Math.floor,s=-1!==["top","bottom"].indexOf(i),a=s?"right":"bottom",u=s?"left":"top",c=s?"width":"height";return n[a]<o(r[u])&&(t.offsets.popper[u]=o(r[u])-n[c]),n[u]>o(r[a])&&(t.offsets.popper[u]=o(r[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!FG(t.instance.modifiers,"arrow","keepTogether"))return t;var r=e.element;if("string"==typeof r){if(!(r=t.instance.popper.querySelector(r)))return t}else if(!t.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],o=t.offsets,s=o.popper,a=o.reference,u=-1!==["left","right"].indexOf(i),c=u?"height":"width",l=u?"Top":"Left",h=l.toLowerCase(),f=u?"left":"top",p=u?"bottom":"right",d=_G(r)[c];a[p]-d<s[h]&&(t.offsets.popper[h]-=s[h]-(a[p]-d)),a[h]+d>s[p]&&(t.offsets.popper[h]+=a[h]+d-s[p]),t.offsets.popper=hG(t.offsets.popper);var y=a[h]+a[c]/2-d/2,v=YQ(t.instance.popper),g=parseFloat(v["margin"+l]),m=parseFloat(v["border"+l+"Width"]),_=y-t.offsets.popper[h]-g-m;return _=Math.max(Math.min(s[c]-d,_),0),t.arrowElement=r,t.offsets.arrow=(cG(n={},h,Math.round(_)),cG(n,f,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(SG(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=vG(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),r=t.placement.split("-")[0],i=bG(r),o=t.placement.split("-")[1]||"",s=[];switch(e.behavior){case"flip":s=[r,i];break;case"clockwise":s=UG(r);break;case"counterclockwise":s=UG(r,!0);break;default:s=e.behavior}return s.forEach((function(a,u){if(r!==a||s.length===u+1)return t;r=t.placement.split("-")[0],i=bG(r);var c=t.offsets.popper,l=t.offsets.reference,h=Math.floor,f="left"===r&&h(c.right)>h(l.left)||"right"===r&&h(c.left)<h(l.right)||"top"===r&&h(c.bottom)>h(l.top)||"bottom"===r&&h(c.top)<h(l.bottom),p=h(c.left)<h(n.left),d=h(c.right)>h(n.right),y=h(c.top)<h(n.top),v=h(c.bottom)>h(n.bottom),g="left"===r&&p||"right"===r&&d||"top"===r&&y||"bottom"===r&&v,m=-1!==["top","bottom"].indexOf(r),_=!!e.flipVariations&&(m&&"start"===o&&p||m&&"end"===o&&d||!m&&"start"===o&&y||!m&&"end"===o&&v),b=!!e.flipVariationsByContent&&(m&&"start"===o&&d||m&&"end"===o&&p||!m&&"start"===o&&v||!m&&"end"===o&&y),w=_||b;(f||g||w)&&(t.flipped=!0,(f||g)&&(r=s[u+1]),w&&(o=function(t){return"end"===t?"start":"start"===t?"end":t}(o)),t.placement=r+(o?"-"+o:""),t.offsets.popper=lG({},t.offsets.popper,wG(t.instance.popper,t.offsets.reference,t.placement)),t=TG(t.instance.modifiers,t,"flip"))})),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,i=r.popper,o=r.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return i[s?"left":"top"]=o[n]-(a?i[s?"width":"height"]:0),t.placement=bG(e),t.offsets.popper=hG(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!FG(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=EG(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,r=e.y,i=t.offsets.popper,o=EG(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,a,u=void 0!==o?o:e.gpuAcceleration,c=eG(t.instance.popper),l=fG(c),h={position:i.position},f=function(t,e){var n=t.offsets,r=n.popper,i=n.reference,o=Math.round,s=Math.floor,a=function(t){return t},u=o(i.width),c=o(r.width),l=-1!==["left","right"].indexOf(t.placement),h=-1!==t.placement.indexOf("-"),f=e?l||h||u%2==c%2?o:s:a,p=e?o:a;return{left:f(u%2==1&&c%2==1&&!h&&e?r.left-1:r.left),top:p(r.top),bottom:p(r.bottom),right:f(r.right)}}(t,window.devicePixelRatio<2||!LG),p="bottom"===n?"top":"bottom",d="right"===r?"left":"right",y=IG("transform");if(a="bottom"===p?"HTML"===c.nodeName?-c.clientHeight+f.bottom:-l.height+f.bottom:f.top,s="right"===d?"HTML"===c.nodeName?-c.clientWidth+f.right:-l.width+f.right:f.left,u&&y)h[y]="translate3d("+s+"px, "+a+"px, 0)",h[p]=0,h[d]=0,h.willChange="transform";else{var v="bottom"===p?-1:1,g="right"===d?-1:1;h[p]=a*v,h[d]=s*g,h.willChange=p+", "+d}var m={"x-placement":t.placement};return t.attributes=lG({},m,t.attributes),t.styles=lG({},h,t.styles),t.arrowStyles=lG({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return DG(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach((function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)})),t.arrowElement&&Object.keys(t.arrowStyles).length&&DG(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,r,i){var o=mG(i,e,t,n.positionFixed),s=gG(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",s),DG(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}},qG={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:VG},BG=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=QQ(this.update.bind(this)),this.options=lG({},t.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(lG({},t.Defaults.modifiers,i.modifiers)).forEach((function(e){r.options.modifiers[e]=lG({},t.Defaults.modifiers[e]||{},i.modifiers?i.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return lG({name:t},r.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&GQ(t.onLoad)&&t.onLoad(r.reference,r.popper,r.options,t,r.state)})),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return uG(t,[{key:"update",value:function(){return CG.call(this)}},{key:"destroy",value:function(){return xG.call(this)}},{key:"enableEventListeners",value:function(){return PG.call(this)}},{key:"disableEventListeners",value:function(){return OG.call(this)}}]),t}();BG.Utils=("undefined"!=typeof window?window:n.g).PopperUtils,BG.placements=MG,BG.Defaults=qG;var WG="__global_unique_id__",zG=function(){return WM[WG]=(WM[WG]||0)+1},HG=function(){},QG=HM((function(t,e){e.__esModule=!0,i(H_);var n=i(G_()),r=i(zG);function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i(HG);var u=1073741823;e.default=function(t,e){var i,c,l="__create-react-context-"+(0,r.default)()+"__",h=function(t){function n(){var e,r;o(this,n);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return e=r=s(this,t.call.apply(t,[this].concat(a))),r.emitter=function(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(n,r){t=n,e.forEach((function(e){return e(t,r)}))}}}(r.props.value),s(r,e)}return a(n,t),n.prototype.getChildContext=function(){var t;return(t={})[l]=this.emitter,t},n.prototype.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n=this.props.value,r=t.value,i=void 0;!function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}(n,r)?(i="function"==typeof e?e(n,r):u,0!=(i|=0)&&this.emitter.set(t.value,i)):i=0}},n.prototype.render=function(){return this.props.children},n}(H_.Component);h.childContextTypes=((i={})[l]=n.default.object.isRequired,i);var f=function(e){function n(){var t,r;o(this,n);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return t=r=s(this,e.call.apply(e,[this].concat(a))),r.state={value:r.getValue()},r.onUpdate=function(t,e){0!=((0|r.observedBits)&e)&&r.setState({value:r.getValue()})},s(r,t)}return a(n,e),n.prototype.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=null==e?u:e},n.prototype.componentDidMount=function(){this.context[l]&&this.context[l].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=null==t?u:t},n.prototype.componentWillUnmount=function(){this.context[l]&&this.context[l].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[l]?this.context[l].get():t},n.prototype.render=function(){return function(t){return Array.isArray(t)?t[0]:t}(this.props.children)(this.state.value)},n}(H_.Component);return f.contextTypes=((c={})[l]=n.default.object,c),{Provider:h,Consumer:f}},t.exports=e.default}));zM(QG);var GG=zM(HM((function(t,e){e.__esModule=!0;var n=i(H_),r=i(QG);function i(t){return t&&t.__esModule?t:{default:t}}e.default=n.default.createContext||r.default,t.exports=e.default}))),YG=GG(),KG=(GG(),function(t,e){if("function"==typeof t)return function(t){if("function"==typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,n)}}(t,e);null!=t&&(t.current=e)}),$G={position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"},XG={},JG=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,Nj(Tj(e),"state",{data:void 0,placement:void 0}),Nj(Tj(e),"popperInstance",void 0),Nj(Tj(e),"popperNode",null),Nj(Tj(e),"arrowNode",null),Nj(Tj(e),"setPopperNode",(function(t){t&&e.popperNode!==t&&(KG(e.props.innerRef,t),e.popperNode=t,e.updatePopperInstance())})),Nj(Tj(e),"setArrowNode",(function(t){e.arrowNode=t})),Nj(Tj(e),"updateStateModifier",{enabled:!0,order:900,fn:function(t){var n=t.placement;return e.setState({data:t,placement:n}),t}}),Nj(Tj(e),"getOptions",(function(){return{placement:e.props.placement,eventsEnabled:e.props.eventsEnabled,positionFixed:e.props.positionFixed,modifiers:mj({},e.props.modifiers,{arrow:mj({},e.props.modifiers&&e.props.modifiers.arrow,{enabled:!!e.arrowNode,element:e.arrowNode}),applyStyle:{enabled:!1},updateStateModifier:e.updateStateModifier})}})),Nj(Tj(e),"getPopperStyle",(function(){return e.popperNode&&e.state.data?mj({position:e.state.data.offsets.popper.position},e.state.data.styles):$G})),Nj(Tj(e),"getPopperPlacement",(function(){return e.state.data?e.state.placement:void 0})),Nj(Tj(e),"getArrowStyle",(function(){return e.arrowNode&&e.state.data?e.state.data.arrowStyles:XG})),Nj(Tj(e),"getOutOfBoundariesState",(function(){return e.state.data?e.state.data.hide:void 0})),Nj(Tj(e),"destroyPopperInstance",(function(){e.popperInstance&&(e.popperInstance.destroy(),e.popperInstance=null)})),Nj(Tj(e),"updatePopperInstance",(function(){e.destroyPopperInstance();var t=Tj(e).popperNode,n=e.props.referenceElement;n&&t&&(e.popperInstance=new BG(n,t,e.getOptions()))})),Nj(Tj(e),"scheduleUpdate",(function(){e.popperInstance&&e.popperInstance.scheduleUpdate()})),e}var n,r;r=t,(n=e).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var i=e.prototype;return i.componentDidUpdate=function(t,e){this.props.placement===t.placement&&this.props.referenceElement===t.referenceElement&&this.props.positionFixed===t.positionFixed&&WQ(this.props.modifiers,t.modifiers,{strict:!0})?this.props.eventsEnabled!==t.eventsEnabled&&this.popperInstance&&(this.props.eventsEnabled?this.popperInstance.enableEventListeners():this.popperInstance.disableEventListeners()):this.updatePopperInstance(),e.placement!==this.state.placement&&this.scheduleUpdate()},i.componentWillUnmount=function(){KG(this.props.innerRef,null),this.destroyPopperInstance()},i.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)({ref:this.setPopperNode,style:this.getPopperStyle(),placement:this.getPopperPlacement(),outOfBoundaries:this.getOutOfBoundariesState(),scheduleUpdate:this.scheduleUpdate,arrowProps:{ref:this.setArrowNode,style:this.getArrowStyle()}});var t},e}(H_.Component);function ZG(t){var e=t.referenceElement,n=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["referenceElement"]);return(0,H_.createElement)(YG.Consumer,null,(function(t){return(0,H_.createElement)(JG,mj({referenceElement:void 0!==e?e:t},n))}))}Nj(JG,"defaultProps",{placement:"bottom",eventsEnabled:!0,referenceElement:void 0,positionFixed:!1});var tY,eY,nY=Object.prototype.toString,rY=(tY=function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=nY.call(e)),t[e]=n},eY=ZU($U),function(t,e){return function(t,e,n,r){return FV(t,(function(t,i,o){e(r,n(t),i,o)})),r}(t,tY,eY(e),{})}),iY=rY,oY={"top center":"top","top left":"top-start","top right":"top-end","bottom center":"bottom","bottom left":"bottom-start","bottom right":"bottom-end","right center":"right","left center":"left"},sY=(LV(oY),iY(oY)),aY=function(){function t(e){_j(this,t),this.ref=e}return wj(t,[{key:"getBoundingClientRect",value:function(){return uV(this.ref.current,"getBoundingClientRect",{})}},{key:"clientWidth",get:function(){return this.getBoundingClientRect().width}},{key:"clientHeight",get:function(){return this.getBoundingClientRect().height}},{key:"parentNode",get:function(){return this.ref.current?this.ref.current.parentNode:void 0}}]),t}(),uY=IU((function(t){return new aY(null!==(e=t)&&"object"===bM(e)&&e.hasOwnProperty("current")?t:function(t){if(null===t)return qM;if(BM.has(t))return BM.get(t);var e={current:t};return BM.set(t,e),e}(t));var e}));function cY(t){var e=t.children,n=t.className,r=t.content,i=Iz("content",n),o=kz(cY,t),s=Az(cY,t);return H_.createElement(s,mj({},o,{className:i}),Kq(e)?r:e)}function lY(t){var e=t.children,n=t.className,r=t.content,i=Iz("header",n),o=kz(lY,t),s=Az(lY,t);return H_.createElement(s,mj({},o,{className:i}),Kq(e)?r:e)}cY.handledProps=["as","children","className","content"],cY.propTypes={},cY.create=Nz(cY,(function(t){return{children:t}})),lY.handledProps=["as","children","className","content"],lY.propTypes={},lY.create=Nz(lY,(function(t){return{children:t}}));var hY=function(t){function e(){var t,n;_j(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Cj(this,(t=Sj(e)).call.apply(t,[this].concat(i))),Nj(Tj(n),"state",{}),Nj(Tj(n),"open",!1),Nj(Tj(n),"triggerRef",(0,H_.createRef)()),Nj(Tj(n),"getPortalProps",(function(){var t={},e=n.props,r=e.on,i=e.hoverable,o=Aj(r)?r:[r];return i&&(t.closeOnPortalMouseLeave=!0,t.mouseLeaveDelay=300),Rz(o,"hover")&&(t.openOnTriggerClick=!1,t.closeOnTriggerClick=!1,t.openOnTriggerMouseEnter=!0,t.closeOnTriggerMouseLeave=!0,t.mouseLeaveDelay=70,t.mouseEnterDelay=50),Rz(o,"click")&&(t.openOnTriggerClick=!0,t.closeOnTriggerClick=!0,t.closeOnDocumentClick=!0),Rz(o,"focus")&&(t.openOnTriggerFocus=!0,t.closeOnTriggerBlur=!0),t})),Nj(Tj(n),"hideOnScroll",(function(t){n.setState({closed:!0}),bz.unsub("scroll",n.hideOnScroll,{target:window}),n.timeoutId=setTimeout((function(){n.setState({closed:!1})}),50),n.handleClose(t)})),Nj(Tj(n),"handleClose",(function(t){uV(n.props,"onClose",t,n.props)})),Nj(Tj(n),"handleOpen",(function(t){uV(n.props,"onOpen",t,n.props)})),Nj(Tj(n),"handlePortalMount",(function(t){uV(n.props,"onMount",t,n.props)})),Nj(Tj(n),"handlePortalUnmount",(function(t){n.positionUpdate=null,uV(n.props,"onUnmount",t,n.props)})),Nj(Tj(n),"renderContent",(function(t){var r=t.placement,i=t.ref,o=t.scheduleUpdate,s=t.style,a=n.props,u=a.basic,c=a.children,l=a.className,h=a.content,f=a.hideOnScroll,p=a.flowing,d=a.header,y=a.inverted,v=a.size,g=a.style,m=a.wide,_=n.state.contentRestProps;n.positionUpdate=o;var b=Iz("ui",sY[r],v,function(t,e){return t&&(!0===t?e:"".concat(t," ").concat(e))}(m,"wide"),Xq(u,"basic"),Xq(p,"flowing"),Xq(y,"inverted"),"popup transition visible",l),w=Az(e,n.props),E=cV({left:"auto",right:"auto"},s,g);return H_.createElement(gj,{innerRef:i},H_.createElement(w,mj({},_,{className:b,style:E}),Kq(c)?H_.createElement(H_.Fragment,null,lY.create(d,{autoGenerateKey:!1}),cY.create(h,{autoGenerateKey:!1})):c,f&&H_.createElement(_z,{on:n.hideOnScroll,name:"scroll",target:"window"})))})),n}return xj(e,t),wj(e,[{key:"componentDidUpdate",value:function(t){var e=function(t,e,n,r){var i=void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;var o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(e),u=0;u<o.length;u++){var c=o[u];if(!a(c))return!1;var l=t[c],h=e[c];if(!1===(i=void 0)||void 0===i&&l!==h)return!1}return!0}(this.props.popperDependencies,t.popperDependencies);e||this.handleUpdate()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"handleUpdate",value:function(){this.positionUpdate&&this.positionUpdate()}},{key:"render",value:function(){var t=this.props,e=t.context,n=t.disabled,r=t.eventsEnabled,i=t.offset,o=t.pinned,s=t.popperModifiers,a=t.position,u=t.positionFixed,c=t.trigger,l=this.state,h=l.closed,f=l.portalRestProps;if(h||n)return c;var p=uH({arrow:{enabled:!1},flip:{enabled:!o},keepTogether:{enabled:!!i},offset:{offset:i}},s),d=uY(uz(e)?this.triggerRef:e),y=cV({},this.getPortalProps(),f);return H_.createElement(Jz,mj({},y,{onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount,trigger:c,triggerRef:this.triggerRef}),H_.createElement(ZG,{eventsEnabled:r,modifiers:p,placement:oY[a],positionFixed:u,referenceElement:d},this.renderContent))}}],[{key:"getDerivedStateFromProps",value:function(t,n){if(n.closed||n.disabled)return{};var r=kz(e,t),i=function(t,e,n){var r=Aj(t)?eH:nH,i=arguments.length<3;return r(t,Dq(e),n,i,MV)}(r,(function(t,e,n){return Rz(Jz.handledProps,n)||(t[n]=e),t}),{});return{contentRestProps:i,portalRestProps:sz(r,Jz.handledProps)}}}]),e}(H_.Component);Nj(hY,"defaultProps",{disabled:!1,eventsEnabled:!0,offset:0,on:["click","hover"],pinned:!1,position:"top left"}),Nj(hY,"Content",cY),Nj(hY,"Header",lY),Nj(hY,"handledProps",["as","basic","children","className","content","context","disabled","eventsEnabled","flowing","header","hideOnScroll","hoverable","inverted","offset","on","onClose","onMount","onOpen","onUnmount","pinned","popperDependencies","popperModifiers","position","positionFixed","size","style","trigger","wide"]),hY.propTypes={};let fY=0;const pY=Object.create(null),dY=["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","columns","counter-increment","counter-reset","flex","flex-grow","flex-positive","flex-shrink","flex-negative","flex-order","font-weight","grid-area","grid-column","grid-column-end","grid-column-span","grid-column-start","grid-row","grid-row-end","grid-row-span","grid-row-start","line-clamp","line-height","opacity","order","orphans","tab-size","widows","z-index","zoom","fill-opacity","flood-opacity","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width"];for(const t of dY)for(const e of["-webkit-","-ms-","-moz-","-o-",""])pY[e+t]=!0;function yY(t,e){return e&&"number"==typeof e&&!pY[t]?`${t}:${e}px`:`${t}:${e}`}function vY(t){return t.sort(((t,e)=>t[0]>e[0]?1:-1))}function gY(t){return t.map((([t,e])=>Array.isArray(e)?e.map((e=>yY(t,e))).join(";"):yY(t,e))).join(";")}function mY(t,e){return-1===t.indexOf("&")?`${e} ${t}`:t.replace(/&/g,e)}function _Y(t,e,n,r,i){const{style:o,nested:s,isUnique:a}=function(t,e){const n=[],r=[];for(const e of Object.keys(t)){const o=e.trim(),s=t[e];36!==o.charCodeAt(0)&&null!=s&&("object"!=typeof s||Array.isArray(s)?n.push([(i=o,i.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`)).replace(/^ms-/,"-ms-")),s]):r.push([o,s]))}var i;return{style:gY(vY(n)),nested:e?r:vY(r),isUnique:!!t.$unique}}(e,""!==t);let u=o;if(64===t.charCodeAt(0)){const e={selector:t,styles:[],rules:[],style:i?"":o};n.push(e),o&&i&&e.styles.push({selector:i,style:o,isUnique:a});for(const[t,n]of s)u+=t+_Y(t,n,e.rules,e.styles,i)}else{const e=i?mY(t,i):t;o&&r.push({selector:e,style:o,isUnique:a});for(const[t,i]of s)u+=t+_Y(t,i,n,r,e)}return u}function bY(t,e,n,r,i,o){for(const{selector:n,style:s,isUnique:a}of r){const r=o?mY(n,i):n,u=a?`u\0${(++fY).toString(36)}`:`s\0${e}\0${s}`,c=new SY(s,u);c.add(new CY(r,`k\0${e}\0${r}`)),t.add(c)}for(const{selector:r,style:s,rules:a,styles:u}of n){const n=new IY(r,s,`r\0${e}\0${r}\0${s}`);bY(n,e,a,u,i,o),t.add(n)}}function wY(t){let e="";for(let n=0;n<t.length;n++)e+=t[n];return e}const EY={add:()=>{},change:()=>{},remove:()=>{}};class TY{constructor(t=EY){this.changes=t,this.sheet=[],this.changeId=0,this._keys=[],this._children=Object.create(null),this._counters=Object.create(null)}add(t){const e=this._counters[t.id]||0,n=this._children[t.id]||t.clone();if(this._counters[t.id]=e+1,0===e)this._children[n.id]=n,this._keys.push(n.id),this.sheet.push(n.getStyles()),this.changeId++,this.changes.add(n,this._keys.length-1);else if(n instanceof TY&&t instanceof TY){const e=this._keys.indexOf(t.id),r=n.changeId;n.merge(t),n.changeId!==r&&(this.sheet.splice(e,1,n.getStyles()),this.changeId++,this.changes.change(n,e,e))}}remove(t){const e=this._counters[t.id];if(e){this._counters[t.id]=e-1;const n=this._children[t.id],r=this._keys.indexOf(n.id);if(1===e)delete this._counters[t.id],delete this._children[t.id],this._keys.splice(r,1),this.sheet.splice(r,1),this.changeId++,this.changes.remove(n,r);else if(n instanceof TY&&t instanceof TY){const e=n.changeId;n.unmerge(t),n.changeId!==e&&(this.sheet.splice(r,1,n.getStyles()),this.changeId++,this.changes.change(n,r,r))}}}values(){return this._keys.map((t=>this._children[t]))}merge(t){for(const e of t.values())this.add(e);return this}unmerge(t){for(const e of t.values())this.remove(e);return this}clone(){return(new TY).merge(this)}}class CY{constructor(t,e){this.selector=t,this.id=e}getStyles(){return this.selector}clone(){return this}}class SY extends TY{constructor(t,e){super(),this.style=t,this.id=e}getStyles(){return`${this.sheet.join(",")}{${this.style}}`}clone(){return new SY(this.style,this.id).merge(this)}}class IY extends TY{constructor(t,e,n){super(),this.rule=t,this.style=e,this.id=n}getStyles(){return`${this.rule}{${this.style}${wY(this.sheet)}}`}clone(){return new IY(this.rule,this.style,this.id).merge(this)}}function xY(t,e){const n=`f${function(t){let e=5381,n=t.length;for(;n--;)e=33*e^t.charCodeAt(n);return(e>>>0).toString(36)}(t)}`;return n}class NY extends TY{constructor(t,e){super(e),this.id=t}registerStyle(t){const e=[],n=[],r=_Y("&",t,e,n),i=xY(r);return bY(this,r,e,n,`.${i}`,!0),i}registerKeyframes(t){return this.registerHashRule("@keyframes",t)}registerHashRule(t,e){const n=[],r=[],i=_Y("",e,n,r),o=xY(i),s=new IY(`${t} ${o}`,"",`h\0${i}\0${t}`);return bY(s,i,n,r,"",!1),this.add(s),o}registerRule(t,e){const n=[],r=[];bY(this,_Y(t,e,n,r),n,r,"",!1)}registerCss(t){return this.registerRule("",t)}getStyles(){return wY(this.sheet)}clone(){return new NY(this.id,this.changes).merge(this)}}function kY(t){var e={};for(var n in t){var r=t[n];if("$nest"===n){var i=r;for(var o in i){var s=i[o];e[o]=kY(s)}}else"$debugName"===n?e.$displayName=r:e[n]=r}return e}var AY="undefined"==typeof requestAnimationFrame?function(t){return setTimeout(t)}:"undefined"==typeof window?requestAnimationFrame:requestAnimationFrame.bind(window);function PY(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];if(null!=o&&!1!==o)for(var s in o){var a=o[s];(a||0===a)&&("$nest"===s&&a?n[s]=n.$nest?PY(n.$nest,a):a:-1!==s.indexOf("&")||0===s.indexOf("@media")?n[s]=n[s]?PY(n[s],a):a:n[s]=a)}}return n}var OY=function(){return new NY(`f${(++fY).toString(36)}`,undefined)},RY=function(){function t(t){var e=this,n=t.autoGenerateTag;this.cssRaw=function(t){t&&(e._raw+=t||"",e._pendingRawChange=!0,e._styleUpdated())},this.cssRule=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=kY(PY.apply(void 0,n));e._freeStyle.registerRule(t,i),e._styleUpdated()},this.forceRenderStyles=function(){var t=e._getTag();t&&(t.textContent=e.getStyles())},this.fontFace=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=e._freeStyle,i=0,o=t;i<o.length;i++){var s=o[i];r.registerRule("@font-face",s)}e._styleUpdated()},this.getStyles=function(){return(e._raw||"")+e._freeStyle.getStyles()},this.keyframes=function(t){var n=function(t){var e={};for(var n in t)"$debugName"!==n&&(e[n]=t[n]);return t.$debugName&&(e.$displayName=t.$debugName),e}(t),r=e._freeStyle.registerKeyframes(n);return e._styleUpdated(),r},this.reinit=function(){var t=OY();e._freeStyle=t,e._lastFreeStyleChangeId=t.changeId,e._raw="",e._pendingRawChange=!1;var n=e._getTag();n&&(n.textContent="")},this.setStylesTarget=function(t){e._tag&&(e._tag.textContent=""),e._tag=t,e.forceRenderStyles()},this.stylesheet=function(t){for(var n={},r=0,i=Object.getOwnPropertyNames(t);r<i.length;r++){var o=i[r],s=t[o];s&&(s.$debugName=o,n[o]=e.style(s))}return n};var r=OY();this._autoGenerateTag=n,this._freeStyle=r,this._lastFreeStyleChangeId=r.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return t.prototype._afterAllSync=function(t){var e=this;this._pending++;var n=this._pending;AY((function(){n===e._pending&&t()}))},t.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var t="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(t),this._tag=t,t}},t.prototype._styleUpdated=function(){var t=this,e=this._freeStyle.changeId,n=this._lastFreeStyleChangeId;(this._pendingRawChange||e!==n)&&(this._lastFreeStyleChangeId=e,this._pendingRawChange=!1,this._afterAllSync((function(){return t.forceRenderStyles()})))},t.prototype.style=function(){var t=this._freeStyle.registerStyle(kY(PY.apply(void 0,arguments)));return this._styleUpdated(),t},t}(),DY=new RY({autoGenerateTag:!0}).style;function LY(t,e){var n=[];for(var r in e)e[r].bunchedNodes.includes(t)&&n.push(r);return n}function FY(t,e){return"translate("+t+", "+e+")"}function MY(t){var e=t.graph,n=t.undoCallback,r=t.redoCallback;if(void 0===e)return null;var i=e.root===e.current,o=0===e.nodes[e.current].children.length,s={marginRight:"3px"};return H_.createElement("div",null,H_.createElement("button",{className:jY,disabled:i,onClick:n},H_.createElement("i",{style:s,className:"fas fa-undo marginRight"}),"Undo"),H_.createElement("button",{className:UY,disabled:o,onClick:r},H_.createElement("i",{style:s,className:"fas fa-redo marginRight"}),"Redo"))}var jY=DY({backgroundColor:"#768d87",borderRadius:"2px",border:"none",display:"inline-block",cursor:"pointer",color:"#ffffff",fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontSize:"14px",padding:"5px 15px",marginRight:"1px",marginLeft:"10px",$nest:{"&:hover":{backgroundColor:"#6c7c7c"},"&:disabled":{backgroundColor:"#a8b3b0"},"&:active":{backgroundColor:"#6c7c7c"}}}),UY=(DY({marginRight:"3px"}),DY({backgroundColor:"#768d87",borderRadius:"2px",border:"none",display:"inline-block",cursor:"pointer",color:"#ffffff",fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontSize:"14px",padding:"5px 15px",$nest:{"&:hover":{backgroundColor:"#6c7c7c"},"&:disabled":{backgroundColor:"#a8b3b0"},"&:active":{backgroundColor:"#6c7c7c"}}}));function VY(t,e,n){var r=function(t,e,n){var r=[];return qY(t,e,n,r),Z_([e],r.reverse())}(t,n,e);return function(t,e,n,r){var i=new Set,o=[],s=0;for(o.push(t[e]);o.length>0;){var a=o.pop();i.has(a.id)?a.width=n[a.id]:(a.width=s,n[a.id]=a.width,i.add(a.id)),a.children?o.push.apply(o,Z_(a.children.sort((function(t,e){return(r.includes(t.id)?1:0)-(r.includes(e.id)?1:0)})))):s++}}(t,n,{},r),r}function qY(t,e,n,r){var i,o;if(!t[e])return!1;if(e===n)return r.push(e),!0;var s=t[e].children||[];try{for(var a=X_(s),u=a.next();!u.done;u=a.next()){var c=u.value;if(qY(t,c.id,n,r))return r.push(c.id),!0}}catch(t){i={error:t}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return!1}var BY=function(t){return DY({fill:t?"rgb(33, 133, 208)":"white",stroke:"rgb(33, 133, 208)"})};function WY(t){var e=t.prov,n=t.first,r=t.iconOnly,i=t.current,o=t.node,s=t.duration,a=t.radius,u=t.strokeWidth,c=t.textSize,l=t.nodeMap,h=t.annotationOpen,f=t.setBookmark,p=t.bookmark,d=t.setAnnotationOpen,y=t.exemptList,v=t.setExemptList,g=t.bundleMap,m=(t.clusterLabels,t.eventConfig),_=t.popupContent,b=t.editAnnotations,w=t.annotationContent,E=t.expandedClusterList,T={cursor:"pointer"},C=H_.createElement("circle",{style:T,className:BY(i),r:a,strokeWidth:u}),S=!1;if(m){var I=o.metadata.type;if(I&&I in m&&"Root"!==I){var x=m[I],N=x.bundleGlyph,k=x.currentGlyph,A=x.backboneGlyph;g&&Object.keys(g).includes(o.id)&&(S=!0,C=H_.createElement("g",{style:T,fontWeight:"none"},N)),i?C=H_.createElement("g",{style:T,fontWeight:"none"},k):S||(C=H_.createElement("g",{style:T,fontWeight:"none"},A))}}var P="",O="";if(P=g&&Object.keys(g).includes(o.id)&&o.ephemeral&&E&&!E.includes(o.id)?o.metadata&&o.metadata.type?"["+g[o.id].bunchedNodes.length+"] "+o.metadata.type:"["+g[o.id].bunchedNodes.length+"]":o.label,o.artifacts&&o.artifacts.annotation&&o.artifacts.annotation.length>0&&(O=o.artifacts.annotation),!l[o.id])return null;O.length>20&&(O=O.substr(0,20)+".."),P.length>20&&(P=P.substr(0,20)+"..");var R=H_.createElement("g",{style:{opacity:1},transform:FY(15,0)},r?H_.createElement("g",null,S?H_.createElement("text",{style:T,onClick:function(t){return L(o,t)},fontSize:17,fill:"rgb(248, 191, 132)",textAnchor:"middle",alignmentBaseline:"middle",x:1,y:0,fontFamily:"FontAwesome"},E&&E.includes(o.id)?"":""):H_.createElement("g",null)):H_.createElement("g",null,S?H_.createElement("text",{style:T,onClick:function(t){return L(o,t)},fontSize:17,fill:"rgb(248, 191, 132)",textAnchor:"middle",alignmentBaseline:"middle",x:1,y:0,fontFamily:"FontAwesome"},E&&E.includes(o.id)?"":""):H_.createElement("g",null),b?H_.createElement("button",null,H_.createElement("i",{className:"fas fa-undo marginRight"}),"Undo"):H_.createElement("g",null),H_.createElement("text",{y:0===O.length?0:-7,x:S?10:0,dominantBaseline:"middle",textAnchor:"start",fontSize:c,fontWeight:"bold",onClick:function(){return D(o)}},P),",",H_.createElement("text",{y:7,x:S?10:0,dominantBaseline:"middle",textAnchor:"start",fontSize:c,fontWeight:"regular",onClick:function(){return D(o)}},O),",",H_.createElement("text",{style:T,onClick:function(t){e&&(e.setBookmark(o.id,!e.getBookmark(o.id)),f(!p)),t.stopPropagation()},fontSize:17,fill:e&&e.getBookmark(o.id)?"#2185d0":"#cccccc",textAnchor:"middle",alignmentBaseline:"middle",x:175,y:0,fontFamily:"FontAwesome"},"")),-1!==h&&l[o.id].depth===h&&w?H_.createElement("g",null,w(l[o.id])):H_.createElement("g",null));return H_.createElement(UM,{start:{opacity:0},enter:{opacity:[1],timing:{duration:100,delay:n?0:s}}},(function(t){return H_.createElement(H_.Fragment,null,void 0!==_&&l[o.id].depth>0?H_.createElement(hY,{content:_(o),trigger:C}):C,void 0!==_&&l[o.id].depth>0?H_.createElement(hY,{content:_(o),trigger:R}):R)}));function D(t){w&&(h===l[t.id].depth?d(-1):d(l[t.id].depth))}function L(t,e){if(g&&Object.keys(g).includes(t.id)){var n=Array.from(y);n.includes(t.id)?n.splice(n.findIndex((function(e){return e===t.id})),1):n.push(t.id),v(n)}e.stopPropagation()}}function zY(t,e,n){return t>1?(e+n)*t-n:(e+n)*t}var HY=function(t){return H_.createElement("line",$_({},t))};function QY(t){var e,n,r=t.nodeMap,i=t.root,o=t.current,s=t.changeCurrent,a=t.width,u=void 0===a?1500:a,c=t.height,l=void 0===c?2e3:c,h=t.iconOnly,f=void 0!==h&&h,p=t.gutter,d=void 0===p?15:p,y=t.backboneGutter,v=void 0===y?20:y,g=t.verticalSpace,m=void 0===g?50:g,_=t.annotationHeight,b=void 0===_?100:_,w=t.clusterVerticalSpace,E=void 0===w?50:w,T=t.regularCircleRadius,C=void 0===T?4:T,S=t.backboneCircleRadius,I=void 0===S?5:S,x=t.regularCircleStroke,N=void 0===x?3:x,k=t.backboneCircleStroke,A=void 0===k?3:k,P=t.sideOffset,O=void 0===P?200:P,R=t.topOffset,D=void 0===R?30:R,L=t.textSize,F=void 0===L?15:L,M=t.linkWidth,j=void 0===M?4:M,U=t.duration,V=void 0===U?600:U,q=t.clusterLabels,B=void 0===q||q,W=t.bundleMap,z=void 0===W?{}:W,H=t.eventConfig,Q=t.popupContent,G=t.annotationContent,Y=t.editAnnotations,K=void 0!==Y&&Y,$=(t.undoRedoButtons,t.prov),X=t.ephemeralUndo,J=void 0!==X&&X,Z=J_((0,H_.useState)(!0),2),tt=Z[0],et=Z[1],nt=J_((0,H_.useState)(!1),2),rt=nt[0],it=nt[1],ot=J_((0,H_.useState)(-1),2),st=ot[0],at=ot[1],ut=[],ct=new Set;for(var lt in r){var ht=r[lt];if(JL(ht)&&(ht.metadata.type&&ct.add(ht.metadata.type),ht.ephemeral&&1==ht.children.length&&(!r[ht.parent].ephemeral||r[ht.parent].children.length>1))){for(var ft=[],pt=ht;pt.ephemeral&&(ft.push(pt.id),1===pt.children.length&&r[pt.children[0]].ephemeral);)pt=r[pt.children[0]];z[ht.id]={metadata:"",bundleLabel:"",bunchedNodes:ft}}}z&&(ut=ut.concat(Object.keys(z)));var dt=J_((0,H_.useState)(Object.keys(z)),2),yt=dt[0],vt=dt[1];!H&&ct.size>0&&ct.size<8&&(H=function(t){var e,n,r=[dM().type(oM).size(50),dM().type(eM),dM().type(uM),dM().type(XF),dM().type(JF),dM().type(sM),dM().type(pM)],i={},o=0;try{for(var s=X_(t),a=s.next();!a.done;a=s.next()){var u=a.value;i[u]={},i[u].backboneGlyph=H_.createElement("path",{strokeWidth:2,className:BY(!1),d:r[o]()}),i[u].bundleGlyph=H_.createElement("path",{strokeWidth:2,className:BY(!1),d:r[o]()}),i[u].currentGlyph=H_.createElement("path",{strokeWidth:2,className:BY(!0),d:r[o]()}),i[u].regularGlyph=H_.createElement("path",{strokeWidth:2,className:BY(!1),d:r[o]()}),o++}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return i}(ct)),(0,H_.useEffect)((function(){et(!1)}),[]);var gt=Object.values(r).filter((function(t){return!0})),mt=Array.from(gt),_t=z?Object.keys(z):[],bt=[];if(z)try{for(var wt=X_(_t),Et=wt.next();!Et.done;Et=wt.next()){var Tt=Et.value;(bt=bt.concat(z[Tt].bunchedNodes)).push(Tt)}}catch(t){e={error:t}}finally{try{Et&&!Et.done&&(n=wt.return)&&n.call(wt)}finally{if(e)throw e.error}}for(var Ct=function(){var t=QF,e=GF;function n(n){var r,i,o,s,a,u,c,l=n.length,h=new Array(l),f={};for(i=0;i<l;++i)r=n[i],a=h[i]=new qF(r),null!=(u=t(r,i,n))&&(u+="")&&(f[c=WF+(a.id=u)]=c in f?HF:a);for(i=0;i<l;++i)if(a=h[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(s=f[WF+u]))throw new Error("missing: "+u);if(s===HF)throw new Error("ambiguous: "+u);s.children?s.children.push(a):s.children=[a],a.parent=s}else{if(o)throw new Error("multiple roots");o=a}if(!o)throw new Error("no root");if(o.parent=zF,o.eachBefore((function(t){t.depth=t.parent.depth+1,--l})).eachBefore(VF),o.parent=null,l>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=BF(e),n):t},n.parentId=function(t){return arguments.length?(e=BF(t),n):e},n}().id((function(t){return t.id})).parentId((function(t){if(t.id===i)return null;if(JL(t)){if(z&&Object.keys(z).includes(t.id)&&!yt.includes(t.id))for(var e=t,n=function(){var t=e;if(!bt.includes(t.parent)||Object.keys(z).includes(t.parent))return{value:t.parent};var n=mt.filter((function(e){return e.id===t.parent}))[0];JL(n)&&(e=n)};;){var r=n();if("object"==typeof r)return r.value}var o=LY(t.parent,z),s=void 0,a=!0;for(var u in o)if(!yt.includes(o[u])){a=!1,s=o[u];break}return bt.includes(t.parent)&&z&&!Object.keys(z).includes(t.parent)&&!a?s:t.parent}return null})),St=0;St<gt.length;St++){var It=LY(gt[St].id,z),xt=!0;for(var lt in It)if(!yt.includes(It[lt])){xt=!1;break}bt.includes(gt[St].id)&&!xt&&z&&!Object.keys(z).includes(gt[St].id)&&(gt.splice(St,1),St--)}var Nt=Ct(gt),kt=Nt.descendants(),At={};kt.forEach((function(t){return At[t.id]=t})),VY(At,o,i);var Pt=0,Ot=0;for(var lt in kt)kt[lt].depth>Pt&&(Pt=kt[lt].depth),kt[lt].width>Ot&&(Ot=kt[lt].width);var Rt=Nt.links(),Dt=d,Lt=m;function Ft(t){if(H){var e=t.metadata.type;if(e&&e in H&&"Root"!==e&&H[e].regularGlyph)return H[e].regularGlyph}return H_.createElement("circle",{r:C,strokeWidth:N,className:BY(!1)})}function Mt(t){if(H){var e=t.metadata.type;if(e&&e in H&&"Root"!==e)return H[e].bundleGlyph}return H_.createElement("circle",{r:C,strokeWidth:N,className:BY(!1)})}var jt=0;0===Ot?jt=30:1===Ot?jt=52:Ot>1&&(jt=74);var Ut=u;return H_.createElement("div",{style:{overflowX:"auto",overflowY:"auto"},className:$Y,id:"prov-vis"},H_.createElement("div",{id:"undoRedoDiv"},H_.createElement(MY,{graph:$?$.graph():void 0,undoCallback:function(){$&&(J?$.goBackToNonEphemeral():$.goBackOneStep())},redoCallback:function(){$&&(J?$.goForwardToNonEphemeral():$.goForwardOneStep())}})),H_.createElement("svg",{style:{overflow:"visible"},id:"topSvg",height:Pt<l?l:Pt,width:Ut},H_.createElement("rect",{height:l,width:u,fill:"none",stroke:"none"}),H_.createElement("g",{id:"globalG",transform:FY(jt,D)},H_.createElement(MM,$_({data:Rt,keyAccessor:function(t){return""+t.source.id+t.target.id}},function(t,e,n,r,i,o,s,a,u,c){void 0===i&&(i=500),t=-t,r=-r;var l=function(){return{x1:0,x2:0,y1:0,y2:0,opacity:0}};return{enter:function(o){var s=0;s=0===s?s:s-1;var c=o.source,l=o.target,h=zY(c.width,t,r),f=zY(l.width,t,r),p=e*c.depth-(e-n)*s,d=e*l.depth-(e-n)*s;return-1!==a&&c.depth>a&&0===c.width&&(p+=u),-1!==a&&l.depth>a&&0===l.width&&(d+=u),{x1:h,x2:f,y1:p,y2:d,opacity:1,timing:{duration:i}}},leave:l,update:function(o){var s=0;s=0===s?s:s-1;var c=o.source,l=o.target,h=zY(c.width,t,r),f=zY(l.width,t,r),p=e*c.depth-(e-n)*s,d=e*l.depth-(e-n)*s;return-1!==a&&c.depth>a&&0===c.width&&(p+=u),-1!==a&&l.depth>a&&0===l.width&&(d+=u),{x1:[h],y1:[p],x2:[f],y2:[d],opacity:1,timing:{duration:i}}},start:l}}(Dt,Lt,E,v-d,V,0,0,st,b)),(function(t){return H_.createElement(H_.Fragment,null,t.map((function(t){var e=t.key,n=t.state;return H_.createElement("g",{key:e},H_.createElement(HY,$_({},n,{fill:"#ccc",stroke:"#ccc",strokeWidth:j})))})))})),H_.createElement(MM,$_({data:kt,keyAccessor:function(t){return t.id}},function(t,e,n,r,i,o,s,a,u,c){void 0===i&&(i=500),t=-t,r=-r;var l=function(i){var o=0,l=zY(i.width,t,r),h=void 0,f=LY(i.id,c).filter((function(t){return 0===s[t].width}));f.length>0&&(h=f[0]),o=0===o?o:o-1;var p=e*i.depth-(e-n)*o;return void 0!==h&&c&&!Object.keys(c).includes(i.id)&&(p=e*(s[h].depth-c[h].bunchedNodes.length+2)-(e-n)*o),-1!==a&&i.depth>a&&0===i.width&&(p+=u),{x:l,y:p-e,opacity:0}};return{enter:function(o){var s=0,c=zY(o.width,t,r);s=0===s?s:s-1;var l=e*o.depth-(e-n)*s;return-1!==a&&o.depth>a&&0===o.width&&(l+=u),{x:[c],y:[l],opactiy:1,timing:{duration:i}}},leave:l,update:function(o){var s=0,c=zY(o.width,t,r);s=0===s?s:s-1;var l=e*o.depth-(e-n)*s;return-1!==a&&o.depth>a&&0===o.width&&(l+=u),{x:[c],y:[l],opactiy:1,timing:{duration:i}}},start:l}}(Dt,Lt,E,v-d,V,0,At,st,b,z)),(function(t){return H_.createElement(H_.Fragment,null,t.map((function(t){var e=t.data,n=t.key,r=t.state;return H_.createElement("g",{key:n,onClick:function(){s&&s(e.id)},transform:(e.width,FY(r.x,r.y))},0===e.width?H_.createElement(WY,{prov:$,textSize:F,iconOnly:f,radius:I,strokeWidth:A,duration:V,first:tt,current:o===e.id,node:e.data,setBookmark:it,bookmark:rt,bundleMap:z,nodeMap:At,clusterLabels:B,annotationOpen:st,setAnnotationOpen:at,exemptList:yt,editAnnotations:K,setExemptList:vt,eventConfig:H,annotationContent:G,popupContent:Q,expandedClusterList:yt}):void 0!==Q?H_.createElement(hY,{content:Q(e.data),trigger:H_.createElement("g",{onClick:function(){at(-1)}},_t.includes(e.id)?Mt(e.data):Ft(e.data))}):H_.createElement("g",{onClick:function(){at(-1)}},Ft(e.data)))})))})),H_.createElement(MM,$_({data:_t,keyAccessor:function(t){return""+t}},function(t,e,n,r,i,o,s,a,u,c,l){void 0===i&&(i=500),t=-t,r=-r;var h=function(){return{x:0,y:0,opacity:0}};return{enter:function(a){var h=zY(s[a].width,t,r),f=s[a].depth,p=s[a].depth;if(l&&o.includes(a))for(var d=0;d<l[a].bunchedNodes.length;d++)s[l[a].bunchedNodes[d]]&&s[l[a].bunchedNodes[d]].depth<f&&(f=s[l[a].bunchedNodes[d]].depth),s[l[a].bunchedNodes[d]]&&s[l[a].bunchedNodes[d]].depth>p&&(p=s[l[a].bunchedNodes[d]].depth);var y=e*f;-1!==u&&f>u&&(y+=c);var v=0;for(var g in l[a].bunchedNodes)s[l[a].bunchedNodes[g]]&&v++;return v*=n,o.includes(a)||(v=10),-1!==u&&u>=f&&u<=p&&(v+=c),{x:[h],y:[y],opacity:[o.includes(a)?1:0],timing:{duration:i},validity:!0,height:v}},leave:h,update:function(a){var h=zY(s[a].width,t,r),f=s[a].depth,p=s[a].depth;if(l&&o.includes(a))for(var d=0;d<l[a].bunchedNodes.length;d++)s[l[a].bunchedNodes[d]]&&s[l[a].bunchedNodes[d]].depth<f&&(f=s[l[a].bunchedNodes[d]].depth),s[l[a].bunchedNodes[d]]&&s[l[a].bunchedNodes[d]].depth>p&&(p=s[l[a].bunchedNodes[d]].depth);var y=e*f;-1!==u&&f>u&&(y+=c);var v=0;for(var g in l[a].bunchedNodes)s[l[a].bunchedNodes[g]]&&v++;return v*=n,o.includes(a)||(v=10),-1!==u&&u>=f&&u<=p&&(v+=c),{x:[h],y:[y],opacity:[o.includes(a)?1:0],timing:{duration:i},validity:!0,height:[v]}},start:h}}(Dt,m,E,v-d,V,yt,At,0,st,b,z)),(function(t){return H_.createElement(H_.Fragment,null,t.map((function(t){var e=t.key,n=t.state;return void 0===z||0!==At[t.key].width||!1===n.validity?null:H_.createElement("g",{key:e,transform:FY(n.x-d+5,n.y-E/2)},H_.createElement("rect",{style:{opacity:n.opacity},width:f?42:O-15,height:n.height,rx:"10",ry:"10",fill:"none",strokeWidth:"2px",stroke:"rgb(248, 191, 132)"}))})))})))))}var GY,YY,KY,$Y=DY({alignItems:"center",justifyContent:"center",overflow:"auto"}),XY=function(t,e,n,r){void 0===e&&(e=!0),void 0===n&&(n=!1);var i,s,a,u=function(t){var e,n={id:hy(),label:"Root",metadata:{createdOn:fy(),type:"Root"},children:[],state:t,getState:function(){return t},ephemeral:!1,bookmarked:!1};return{nodes:(e={},e[n.id]=n,e),root:n.id,current:n.id}}(t),c=ay(t),l=(s={},a={},{addGlobalObserver:function(t){s[gy]||(s[gy]=[]),s[gy].push(t)},addObserver:function(t,e){var n=t.join("|");s[n]||(s[n]=[]),s[n].push(e)},addArtifactObserver:function(t){a[my]||(a[my]=[]),a[my].push(t)},callEvents:function(t,e,n){if(ly(n)&&function(t){if(a[my]&&a[my].length>0&&ly(t)&&t.artifacts.extra){var e=t.artifacts.extra||[];a[my].forEach((function(t){return t(e)}))}}(n),0!==t.length){!function(t){s[gy]&&s[gy].length>0&&s[gy].forEach((function(e){return e(t)}))}(e);var r=[];t.forEach((function(t){var n=t.path,i=[],o=n.join("|");r.includes(o)||(r.push(o),n.forEach((function(t){0===i.length?i.push(t):i.push([i.reverse()[0],t].join("|"))})),i.reverse().forEach((function(t){s[t]&&s[t].forEach((function(t){return t(e)}))})))}))}}});function f(t){var e=u.nodes[u.current].getState(),n=dy(t,e);l.callEvents(n||[],e,u.nodes[u.current])}function p(t,e,n){u=function(t,e,n){var r=ay(t),i=r.current,o=(ay(t.nodes[i].getState()),t.nodes[i]),s=void 0,a="",u=!0;ly(o)?cy(o)?(s=o.getState(),a=o.id):(s=t.nodes[o.lastStateNode].getState(),a=o.lastStateNode):(u=!1,s=o.getState(),a=o.id);var c=n,l=t.current,h=dy(s,c);void 0===h&&(h=[]),u&&Object.keys(s).length/2<h.length&&(u=!1);var f=u?function(t,e,n,i){return{id:hy(),label:"Import Node",metadata:{createdOn:fy()},artifacts:{diffs:n,extra:[]},parent:t,children:[],lastStateNode:e,diffs:n,getState:function(){var t=ay(r.nodes[e].getState()),i=n;return 0===i.length||i.forEach((function(e){yy(t,null,e)})),t},ephemeral:!1,bookmarked:!1}}(l,a,h):function(t,e,n,r){return{id:hy(),label:"Import Node",metadata:{createdOn:fy()},artifacts:{diffs:n,extra:[]},parent:t,children:[],state:e,getState:function(){return e},ephemeral:!1,bookmarked:!1}}(l,c,h);return r.nodes[f.id]=f,r.nodes[i].children.push(f.id),r.current=f.id,r}(u,0,t),void 0!==e&&(u.nodes[u.current].label=e),void 0!==n&&(u.nodes[u.current].metadata=n)}function d(t){if(e){var n=new URL(window.location.href),r=new URLSearchParams(n.search);r.delete("provState"),r.set("provState",t),window.history.replaceState({},"",n.pathname+"?"+r)}}function y(t){var e={},n=u.nodes[u.current].getState();t?Object.keys(n).forEach((function(t){var r,i=c[t],s=n[t];JSON.stringify(i)!==JSON.stringify(s)&&(e=o(o({},e),((r={})[t]=n[t],r)))})):e=o({},n);var r=e;return""+wy(JSON.stringify(r))}return{graph:function(){return ay(u)},current:function(){return ay(u.nodes[u.current])},root:function(){return ay(u.nodes[u.root])},addAction:function(t,e){return new uy(t,e,this)},applyAction:function(t,e,r,s,a,c,l,p){void 0===s&&(s={}),void 0===l&&(l=!1),void 0===p&&(p=!1);var v=ay(u.nodes[u.current].getState());return c&&(s.type=c),u=function(t,e,n,r,i,s,a,u){void 0===u&&(u={});var c=ay(t),l=c.current,f=ay(t.nodes[l].getState()),p=t.nodes[l],d=void 0,y="",v=!0;ly(p)?cy(p)?(d=p.getState(),y=p.id):(d=t.nodes[p.lastStateNode].getState(),y=p.lastStateNode):(v=!1,d=p.getState(),y=p.id);var g=s?n.apply(void 0,h([f],s)):n(f),m=t.current,_=dy(d,g);void 0===_&&(_=[]),v&&Object.keys(d).length/2<_.length&&(v=!1);var b=v&&!r?function(t,n,r,i){return{id:hy(),label:e,metadata:o({createdOn:fy()},a),artifacts:o({diffs:r,extra:[]},u),parent:t,children:[],lastStateNode:n,diffs:r,getState:function(){var t=ay(c.nodes[n].getState()),e=r;return 0===e.length||e.forEach((function(e){yy(t,null,e)})),t},ephemeral:i,bookmarked:!1}}(m,y,_,i):function(t,n,r,i){return{id:hy(),label:e,metadata:o({createdOn:fy()},a),artifacts:o({diffs:r,extra:[]},u),parent:t,children:[],state:n,getState:function(){return n},ephemeral:i,bookmarked:!1}}(m,g,_,i);return c.nodes[b.id]=b,c.nodes[l].children.push(b.id),c.current=b.id,c}(u,t,e,l,p,r,s,a),f(v),d(y(!1)),n&&i(u),u.nodes[u.current].getState()},goToNode:function(t){var e=ay(u.nodes[u.current].getState());u=vy(u,t),f(e),d(y(!1))},addExtraToNodeArtifact:function(t,e){u=function(t,e,n){var r=ay(t),i=r.nodes[e];if(!ly(i))throw new Error("Cannot add artifacts to Root Node");return i.artifacts.extra.push({time:fy(),e:n}),r}(u,t,e),l.callEvents([],u.nodes[t].getState(),u.nodes[t])},addAnnotationToNode:function(t,e){u=function(t,e,n){var r=ay(t),i=r.nodes[e];if(!ly(i))throw new Error("Cannot add annotation to Root Node");return i.artifacts.annotation=n,r}(u,t,e),l.callEvents([],u.nodes[t].getState(),u.nodes[t])},getExtraFromArtifact:function(t){return function(t,e){var n=t.nodes[e];if(ly(n))return n.artifacts.extra;throw new Error("Root does not have artifacts")}(u,t)},goBackOneStep:function(){var t=ay(u.nodes[u.current].getState()),e=u.nodes[u.current];if(!ly(e))throw new Error("Already at root");u=vy(u,e.parent),f(t),d(y(!1))},goBackNSteps:function(t){for(var e=ay(u.nodes[u.current].getState()),n=t,r=ay(u);t>0;){var i=r.nodes[r.current];if(!ly(i))throw new Error("Cannot go back "+n+" steps. Reached root after "+(n-t)+" steps");r=vy(u,i.parent),t--}u=r,f(e),d(y(!1))},goBackToNonEphemeral:function(){for(var t=ay(u.nodes[u.current].getState()),e=ay(u),n=e.nodes[e.current];;){if(!ly(n)){e=vy(e,e.root);break}if(!(e=vy(u,n.parent)).nodes[e.current].ephemeral)break;n=e.nodes[e.current]}u=e,f(t),d(y(!1))},goForwardToNonEphemeral:function(){for(var t=ay(u.nodes[u.current].getState()),e=ay(u),n=e.nodes[e.current];;){if(!(n.children.length>0))throw new Error("Already at the latest node in this branch or no non ephemeral nodes later");if(!(e=vy(e,n.children.reverse()[0])).nodes[e.current].ephemeral)break;n=e.nodes[e.current]}u=e,f(t),d(y(!1))},goForwardOneStep:function(){var t=ay(u.nodes[u.current].getState()),e=u.nodes[u.current];if(!(e.children.length>0))throw new Error("Already at the latest node in this branch");u=vy(u,e.children.reverse()[0]),f(t),d(y(!1))},reset:function(){var t=ay(u.nodes[u.current].getState());u=vy(u,u.root),f(t),d(y(!1))},done:function(){if(e){var t=ay(u.nodes[u.current].getState());!function(){if(!window||!window.location||!window.location.href)throw new Error("Please use in a browser environment, or set loadFromUrl parameter in initProvenance to false");var t=new URL(window.location.href),e=new URLSearchParams(t.search);if(null!==e.get("provState")){var n=e.get("provState");p(JSON.parse(by(n)))}}(),f(t)}},addObserver:function(t,e){var n=u.nodes[u.current].getState();t.forEach((function(e){if(!Object.keys(n).includes(e))throw new Error("Path "+t.join(".")+" does not exist");n=n[e]})),l.addObserver(t,e)},addGlobalObserver:function(t){l.addGlobalObserver(t)},addArtifactObserver:function(t){l.addArtifactObserver(t)},exportState:function(t){return void 0===t&&(t=!1),y(t)},importState:function(t){var e=ay(u.nodes[u.current].getState()),n=JSON.parse(by(t.replace("||","")));p(o(o({},u.nodes[u.current].getState()),n)),f(e)},importLinearStates:function(t,e,n){for(var r=0;r<t.length;r++){var i=ay(u.nodes[u.current].getState());void 0!==e&&void 0!==n?p(t[r],e[r],n[r]):p(t[r]),f(i)}},exportProvenanceGraph:function(){return JSON.stringify(u)},getDiffFromNode:function(t){var e=u.nodes[t];if(ly(e)){var n=dy(u.nodes[e.parent].getState(),e.getState());return void 0===n?[]:n}return console.log("Cannot get diff from root node"),[]},setBookmark:function(t,e){u.nodes[t].bookmarked=e},getBookmark:function(t){return u.nodes[t].bookmarked},importProvenanceGraph:function(t){var e=ay(u.nodes[u.current].getState());u=JSON.parse(t);var n=function(t){var e=u.nodes[t];if("diffs"in e){var n=ay(u.nodes[e.lastStateNode].state),r=e.diffs;return 0===r.length||r.forEach((function(t){_y(n,null,t)})),{value:n}}var i=ay(e.state);e.getState=function(){return i}};for(var r in u.nodes){var i=n(r);if("object"==typeof i)return i.value}f(e)}}}({selectedNode:"none",hoveredNode:"none",dblClickNode:"none"},!1);function JY(){return KY=XY.exportProvenanceGraph(),YY=new Date,console.log((YY.getTime()-GY.getTime()).toString()),KY=KY.concat((YY.getTime()-GY.getTime()).toString()),document.getElementById("objDiv").innerHTML=KY,KY}function ZY(t){XY.addAction(t+" Selected",(function(e){return e.selectedNode=t,e})).addEventType("Select Node").applyAction(),JY()}function tK(t){if(GY=new Date,"pie"==t){var e=new V_;return rK(),XY.addGlobalObserver((function(){rK()})),XY.addObserver(["hoveredNode"],(function(){e.hoverNode(XY.current().getState().hoveredNode)})),e}if("timeseries"==t){var n=new V_,r=new z_;return rK(),XY.addGlobalObserver((function(){rK()})),XY.addObserver(["selectedNode"],(function(){r.selectNode(XY.current().getState().selectedNode)})),XY.addObserver(["hoveredNode"],(function(){n.hoverNode(XY.current().getState().hoveredNode),r.hoverNode(XY.current().getState().hoveredNode)})),XY.addObserver(["dblClickNode"],(function(){r.hoverNode(XY.current().getState().hoveredNode)})),r}}function eK(t,e){XY.addAction(""===t?"Hovered for "+e+" s":t+" Hovered",(function(e){return e.hoveredNode=t,e})).addEventType("Hover Node").applyAction(),JY()}function nK(t){XY.addAction("Compare "+t,(function(e){return e.selectedNode=t,e})).addEventType("DblClick Node").applyAction(),JY()}function rK(){!function(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=e.graph().root),void 0===s&&(s={}),Y_.render(H_.createElement(QY,$_({},s,{root:o,changeCurrent:n,current:e.graph().current,nodeMap:e.graph().nodes,prov:e,undoRedoButtons:!0,ephemeralUndo:i})),t)}(document.getElementById("provDiv"),XY,(function(t){XY.goToNode(t),rK()}))}document.onkeydown=function(t){var e=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);!t.shiftKey&&(e?t.metaKey:t.ctrlKey)&&90==t.which?XY.goBackOneStep():t.shiftKey&&(e?t.metaKey:t.ctrlKey)&&90==t.which&&0!=XY.current().children.length&&XY.goForwardOneStep()}})(),r})()));
//# sourceMappingURL=bundle2.js.map